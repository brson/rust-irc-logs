[00:00:53] <heftig> rusti: use std::iterator::*; struct Fib { a: uint, b: uint } impl Iterator<uint> for Fib { fn next(&mut self) -> Option(uint) { let n = self.a + self.b; self.a = self.b; self.b = n; Some(self.a) } }
[00:00:55] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/bSXe
[00:01:05] <bblum> ChannelForSending<int>
[00:01:10] <bblum> PortForReceiving<int>
[00:01:12] <heftig> rusti: use std::iterator::*; struct Fib { a: uint, b: uint } impl Iterator<uint> for Fib { fn next(&mut self) -> Option<uint> { let n = self.a + self.b; self.a = self.b; self.b = n; Some(self.a) } }
[00:01:13] -rusti- ()
[00:02:19] <heftig> rusti: use std::iterator::*; struct Fib { a: uint, b: uint } impl Iterator<uint> for Fib { fn next(&mut self) -> Option<uint> { let n = self.a + self.b; self.a = self.b; self.b = n; Some(self.a) } }; let f = Fib { a: 0, b: 1}; f.take(10)
[00:02:20] -rusti- {iter: {a: 0, b: 1}, n: 10}
[00:02:32] <heftig> rusti: use std::iterator::*; struct Fib { a: uint, b: uint } impl Iterator<uint> for Fib { fn next(&mut self) -> Option<uint> { let n = self.a + self.b; self.a = self.b; self.b = n; Some(self.a) } }; let f = Fib { a: 0, b: 1}; f.take(10).to_vec()
[00:02:34] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/hOPB
[00:02:44] <strcat> evil take ;p
[00:02:46] <heftig> uggh
[00:02:54] <Thiez> rusti: use std::iterator::*; UnfoldrIterator::new(|st|{let (a,b) = copy *st; let c = a+b; *st = (b,c); Some(a)},(0u,0u)); "Yay?" // Seems I kill the compiler :p
[00:02:54] <strcat> heftig: it's right, just that bug again :)
[00:02:55] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/MhNi
[00:03:06] <heftig> rusti: use std::iterator::*; struct Fib { a: uint, b: uint } impl Iterator<uint> for Fib { fn next(&mut self) -> Option<uint> { let n = self.a + self.b; self.a = self.b; self.b = n; Some(self.a) } }; let f = Fib { a: 0, b: 1}; f.take_while(|x|x < 100).to_vec()
[00:03:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/Vifd
[00:03:15] <heftig> rusti: use std::iterator::*; struct Fib { a: uint, b: uint } impl Iterator<uint> for Fib { fn next(&mut self) -> Option<uint> { let n = self.a + self.b; self.a = self.b; self.b = n; Some(self.a) } }; let f = Fib { a: 0, b: 1}; f.take_while(|x|*x < 100).to_vec()
[00:03:16] -rusti- ~[1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89]
[00:03:17] <strcat> Thiez: iterator hits a dozen different compiler bugs :)
[00:03:18] <heftig> woo
[00:03:48] *** Joins: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl)
[00:04:03] <kimundi> nice
[00:04:46] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[00:04:47] <heftig> though...
[00:05:14] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[00:05:27] <heftig> rusti: use std::iterator::*; struct Fib { a: uint, b: uint } impl Iterator<uint> for Fib { fn next(&mut self) -> Option<uint> { let a = self.a; self.a = self.b; self.b = a + self.b; Some(a) } }; let f = Fib { a: 0, b: 1}; f.take_while(|x|*x < 300).to_vec()
[00:05:27] -rusti- ~[0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233]
[00:06:30] <Thiez> rusti: use std::iterator::*; struct Fib{a:uint,b:uint} UnfoldrIterator::new(|st|{let res = st.a+st.b; st.a = st.b; st.b = res; Some(res)},Fib{a:1,b:1}); 5 // Same one :(
[00:06:33] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/VaJX
[00:06:58] <bjz> Luqman: made an issue: https://github.com/bjz/lmath-rs/issues/14
[00:07:20] *** Quits: \n (NDesaulnie@2557E599.66715431.D25A875A.IP) (Quit: \n)
[00:07:47] *** Quits: EXetoC (ex@moz-C741B177.customer.t3.se) (Quit: WeeChat 0.4.1)
[00:07:49] *** Quits: koomi (koomi@moz-7FEFD546.pools.arcor-ip.net) (Ping timeout)
[00:08:09] *** Joins: Nisstyre (wes@moz-FD86289.netflash.net)
[00:08:21] <maik_> rusti: use std::iterator::*; let v = [1,2,3,4]; v.map(|&x| x*x).iter().take(3).fold(0, |a, b: &int| a + *b);
[00:08:23] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ZZFP
[00:08:36] <maik_> why can't I do this?
[00:08:58] <cmr> maik_: bug
[00:09:05] <cmr> well
[00:09:10] <cmr> I don't know about the borrowck error
[00:09:11] *** Quits: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP) (Quit: Leaving.)
[00:09:14] <cmr> but .map is a bug
[00:09:54] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[00:09:55] *** Joins: wippler (Mibbit@A1793499.EC15082C.D7C984E0.IP)
[00:10:07] *** Quits: wippler (Mibbit@A1793499.EC15082C.D7C984E0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:10:17] *** Quits: cjh (chellmuth@moz-45C21C42.compute-1.amazonaws.com) (Ping timeout)
[00:10:24] *** Joins: avaf (Mibbit@A1793499.EC15082C.D7C984E0.IP)
[00:10:36] *** Joins: cjh (chellmuth@moz-45C21C42.compute-1.amazonaws.com)
[00:11:01] *** Joins: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP)
[00:11:29] *** Quits: eholk (eholk@moz-4CCE9748.uconnect.utah.edu) (Quit: eholk)
[00:13:05] *** Joins: cdidd (cdidd@moz-94729EED.broadband.corbina.ru)
[00:13:13] *** Quits: avaf (Mibbit@A1793499.EC15082C.D7C984E0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:13:52] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:14:12] <maik_> do you think 1.0 will come this year :) ?
[00:14:20] <cmr> maik_: that's the goal
[00:14:34] <bjz> maik_: lots of work to do though
[00:14:42] <maik_> cmr: there is a timeplan somewhere?
[00:14:54] <cmr> maik_: not that I know of, but there probably is.
[00:15:18] <bjz> https://github.com/mozilla/rust/wiki/Note-development-roadmap
[00:15:27] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[00:15:52] <krdln> Hey, does someone here knows how to impl a trait for another trait? (eg. I want to make custom addons for ReaderUtil)
[00:16:10] <Jesse> maik_: also the maturity milestones https://mail.mozilla.org/pipermail/rust-dev/2013-April/003668.html
[00:16:16] <illissius> what does 1.0 mean? language is frozen completely? or just promise backwards compatibility?
[00:16:32] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[00:16:35] <engla> krdln: just how ReaderUtil itself is implemented
[00:16:35] <bjz> krdln: I think you can do  impl Foo for ~Bar { }
[00:16:40] <maik_> "when we do stabilize for a 1.0 release, it will not mean we are freezing the language for all time"
[00:16:41] <cmr> krdln: impl Name for Foo<T:ReaderUtil> { ... } I think
[00:16:50] <cmr> but yeah look at io.rs
[00:16:51] <bjz> cmr: oh yeah
[00:16:57] <bjz> *facepalm*
[00:17:09] <krdln> hm, tried without ~ sigil :P
[00:17:31] <bjz> wait: impl<T:ReaderUtil> Name for T {
[00:17:37] <bjz> krdln: ^
[00:17:39] <cmr> yeah that looks right
[00:17:49] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[00:17:49] *** ChanServ sets mode: +o brson
[00:18:17] <bblum> toddaaro: https://gist.github.com/bblum/3885017
[00:18:27] <bjz> krdln: if you want to do it directly on the trait you need either ~/@ because it does it via dynamic dispatch (I think)
[00:18:38] <bjz> krdln: I might have my terminology wrong
[00:19:17] <krdln> so... impl template for static dispatch, ~/@ for dynamic?
[00:19:33] <krdln> (template version worked, thanks, guys)
[00:19:39] <cmr> krdln: trait bounds are static, @/~ are dynamic, iirc
[00:19:41] <bjz> krdln: aye
[00:20:11] <bjz> krdln: the difficulty with the T version is it means you can't implement the trait for *any* other types
[00:20:12] <cmr> https://github.com/mozilla/rust/wiki/Doc-lowlevel-details
[00:20:33] <illissius> maik_: ok, more specifically. given that quote I'm assuming 2.0 will allow backwards incompatible changes. will 1.1 allow backwards compatible changes, or only bug fixes, performance improvements, etc?
[00:20:57] *** Joins: z0w0 (zack@moz-91043B9D.lns10.woo.bigpond.net.au)
[00:21:23] <bjz> krdln: that's because rust can't make a decision on which impl to choose if another impl intersects with T:Foo
[00:22:21] <maik_> illissius, https://github.com/mozilla/rust/wiki/Note-development-roadmap
[00:22:22] <bjz> krdln: does that make sense?
[00:22:27] <maik_> I don't know more
[00:22:54] <illissius> ok, I did see the link. thanks
[00:23:08] <bjz> krdln: like, you can't do: impl<T:ReaderUtil> Trait for T { ... } impl Trait for int { ... }
[00:23:11] <krdln> bjz: yes, thanks
[00:23:14] *** Quits: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP) (Quit: )
[00:23:26] <bjz> krdln: because int *might* impl ReaderUtil
[00:23:32] <bjz> (rust doesn't know)
[00:24:56] <krdln> btw, is there any elegant way to read whitespace separated ints, as scanf's "%d"?
[00:24:58] <strcat> bjz: and even if it could, it would mean libraries could conflict with each other after gaining trait impls
[00:27:05] *** Joins: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net)
[00:27:36] <maik_> rusti: use std::iterator::*; let v = [1,2,3,4]; let v1 =v.map(|&x| x*x); v1.iter().take(3).fold(0, |a, b: &int| a + *b);
[00:27:37] -rusti- ()
[00:27:51] <maik_> rusti: use std::iterator::*; let v = [1,2,3,4]; let v1 =v.map(|&x| x*x); v1.iter().take(3).fold(0, |a, b: &int| a + *b)
[00:27:52] -rusti- 14
[00:27:55] *** Quits: jeff (jeff@4231C034.745B261B.F12515B4.IP) (Quit: jeff)
[00:28:11] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[00:28:16] <strcat> maik_: probably want .transform on the iterator returned by iter()
[00:28:22] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[00:28:26] <strcat> map allocates a whole vector
[00:28:45] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[00:29:01] *** Quits: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: ChatZilla 0.9.90-rdmsoft [XULRunner 18.0.2/20130201065344])
[00:29:50] <bjz> strcat: isn't that a non-issue, because you can't impl external traits for external types?
[00:30:03] <maik_> rusti: use std::iterator::*; let v = [1,2,3,4]; let v1 =v.transform(|&x| x*x); v1.iter().take(3).fold(0, |a, b: &int| a + *b)
[00:30:05] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/aRRB
[00:30:06] <strcat> bjz: I mean that's part of why the restriction exists
[00:30:11] <bjz> mm
[00:30:19] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[00:30:45] <strcat> rusti: use std::iterator::*; let v = [1,2,3,4]; v.iter().transform(|&x| x * x).take(3).fold(0, |a, b: int| a + *b)
[00:30:46] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IQQL
[00:30:51] <strcat> rusti: use std::iterator::*; let v = [1,2,3,4]; v.iter().transform(|&x| x * x).take(3).fold(0, |a, b: int| a + b)
[00:30:52] -rusti- 14
[00:31:27] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Connection timed out)
[00:31:31] <maik_> ah ok cool
[00:31:33] <strcat> map/fold/whatever directly on vec/str or other containers should probably go away
[00:31:45] <strcat> default methods would be nice to make an Iterable trait
[00:32:18] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[00:32:40] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[00:32:53] <maik_> so map returns a vector and transform just changes the vector?
[00:33:17] <strcat> maik_: map returns a new vector
[00:33:19] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[00:33:26] <maik_> yeah okay
[00:33:32] <strcat> transform only does as much work as needed (it's implemented on Iterator and returns an Iterator)
[00:33:38] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[00:34:54] <strcat> should be called map but... method resolve bugs
[00:35:01] <krdln> why i'm getting error: unresolved name for use std::iterator::*;
[00:35:16] <maik_> do you have incoming?
[00:35:21] <strcat> krdln: libcore was renamed to libstd in incoming
[00:35:27] <strcat> the old libstd is libextra now
[00:35:28] <krdln> ah, ok
[00:35:33] <krdln> 0.6
[00:35:44] <maik_> its core then
[00:36:12] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("rustc", [~"--version"]).output))
[00:36:13] -rusti- rustc 0.6 (69511c2 2013-06-04 09:37:41 -0700)
[00:36:13] <krdln> still fails
[00:36:13] -rusti- host: x86_64-unknown-linux-gnu
[00:36:13] -rusti- ()
[00:36:21] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[00:36:36] <strcat> krdln: oh it wasn't in 0.6
[00:38:56] *** Joins: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[00:43:08] <Thiez> krdln: 
[00:43:11] <Thiez> rusti: use std::int; let mut v = ~[]; for "1 2 3 4".each_split_char(' ') |s|{v.push(s)}; do v.map |i|{int::from_str(*i).get()}
[00:43:12] -rusti- ~[1, 2, 3, 4]
[00:43:27] <Thiez> that might be considered 'elegant'-ish.
[00:43:54] <krdln> but it's not interactive
[00:44:02] *** Quits: n0vember (n0vember@moz-690FFF9D.org) (Ping timeout)
[00:44:20] <krdln> and loading whole input to string..
[00:44:29] <krdln> it's not haskell :P
[00:44:42] *** Joins: n0vember (n0vember@moz-690FFF9D.org)
[00:44:55] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[00:44:59] <Thiez> idealy you would iterate over stdin somehow
[00:45:14] <Thiez> but iterators challenge the compiler in interesting ways.
[00:45:15] <aatch> Thiez, the Reader trait is for this purpose
[00:45:22] <strcat> each_split_char yields &str, it doesn't allocate
[00:45:49] *** Joins: js (jeremie@moz-DCCE2247.rsr.lip6.fr)
[00:45:54] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[00:46:14] <krdln> but there have to be string to slice from?
[00:46:31] <strcat> ideally we'd just have 'for split_char(' ').map( ... ) {}'
[00:46:42] <strcat> I really dislike the internal iterator algorithm we use everywhere ;p
[00:46:49] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[00:46:50] <strcat> s/algorithm/pattern/
[00:47:22] *** Quits: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl) (Quit: http://www.mibbit.com ajax IRC Client)
[00:47:24] *** Quits: bnicholson (bnicholson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[00:48:11] <Thiez> aatch: fair enough, but since you'll probably read one line at a time anyway, might as well do it the hackish way :D
[00:48:15] *** Joins: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl)
[00:49:07] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Client exited)
[00:49:56] <moonchrome> wait [1,..3] does [1, 1, 1], can I get it to do [1, 2, 3] ?
[00:50:10] <cmr> moonchrome: no.
[00:50:14] <maik_> don't think so
[00:50:17] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[00:50:24] <cmr> moonchrome: but there's vec::from_fn
[00:50:31] <strcat> makes ~[] though
[00:50:36] <cmr> yeah
[00:50:59] <strcat> we should have Range in addition to Counter
[00:51:43] <strcat> Range(1, 4, 1).to_vec() would be the current code
[00:51:54] <strcat> Range::new(1, 4, 1).to_vec() *
[00:52:04] <strcat> assuming we didn't use range() and count() free fns
[00:52:10] *** Joins: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[00:52:18] <strcat> anyway
[00:52:25] <strcat> have to use take_while with that route atm ;p
[00:52:33] <Thiez> rusti: use std::uint; let mut arr = [0u,..3]; for uint::range(0,3) |i|{arr[i]=i+1}; arr
[00:52:34] -rusti- [1, 2, 3]
[00:53:53] <Thiez> in unrelated news, why aren't std::uint and std::int imported by default? took be 10 minutes to find out why my from_str didn't work anymore... :p
[00:54:04] <Thiez> I think they used to be imported
[00:54:12] <strcat> because too many people were confused by modules being imported by default
[00:54:14] <Thiez> perhaps I'm crazy.
[00:54:24] <Thiez> I'm confused about them not being imported by default :p
[00:54:32] <strcat> 'foo' would be in scope but 'use foo::bar' doesn't work
[00:54:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:54:37] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/S8Dapw
[00:54:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:55:02] <maik_> btw where are you guys from?
[00:55:07] <Thiez> I think we worry too much about what 'people' think :p
[00:55:31] <Thiez> the Netherlands
[00:55:37] <strcat> I miss relative imports ;p
[00:55:44] <maik_> <- Germany
[00:55:50] <aatch> NZ
[00:55:53] <aatch> kinda
[00:55:53] <Thiez> strcat: I'm haven't been here long enough to miss them :p
[00:55:58] <benh> It's 3 am, go to sleep!
[00:56:12] <Thiez> it's not quite 3 am yet
[00:56:27] <maik_> university begins at 2pm :p
[00:57:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:57:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Ecb-mg
[00:57:35] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:57:36] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[00:57:36] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/GXgb7Q
[00:57:37] <ghrust> 13rust/06auto 145148e2f 15Daniel Micay: sys: get rid of shape functions...
[00:57:37] <ghrust> 13rust/06auto 149873f67 15bors: auto merge of #6942 : thestinger/rust/cleanup, r=catamorphism...
[00:57:37] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[00:58:05] <Thiez> maik_: you wouldn't by any chance be from Aachen would you?
[00:58:13] *** Quits: tjc (tjc@moz-1C95A3D9.tmodns.net) (Quit: zzzzzzzzzz)
[00:58:20] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[00:58:34] <maik_> Thiez, well not really but it's 2 hours away from me
[00:58:52] <maik_> well more like 50min
[00:59:03] <Thiez> time works in mysterious ways in germany :p
[00:59:20] <maik_> :p
[00:59:55] <Thiez> there is something strangely relaxing about seeing your PR land
[01:00:00] <Thiez> I can sleep now :p
[01:00:02] <Thiez> ~~
[01:00:13] <maik_> PR land?
[01:00:14] <cmr> PR land?
[01:00:17] <maik_> :D
[01:00:33] <Thiez> pull request? :p
[01:00:59] <cmr> oh
[01:01:13] <cmr> you were talking about nationality so I got confused...
[01:01:17] <maik_> m2
[01:01:42] <maik_> Thiez, do you know someone in Aachen?
[01:02:00] *** Joins: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net)
[01:02:02] *** Quits: kermie (Mibbit@moz-E89B7C5B.range109-154.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[01:02:26] <cmr> strcat: what were the shape functions ever useful for? :S
[01:03:42] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[01:03:54] <SiegeLord> Will &[], ~[] and friends implement Iterable?
[01:04:55] *** Joins: bnicholson (bnicholson@moz-E98974C1.hsd1.ca.comcast.net)
[01:05:18] <Thiez> maik_: I know a guy who teaches at a university in Aachen, he visits my university every second year to teach principles of model checking :)
[01:06:09] <Thiez> and if you find that confusing wait until you see me write comments :p
[01:06:50] <maik_> how many students does your university have in CS?
[01:07:10] <maik_> I feel like mine is way too small :D
[01:08:38] <maik_> I think we currently have like ... ~200 people studying CS
[01:08:48] <cmr> e
[01:08:51] <cmr> whoops
[01:11:25] *** Quits: carllerche (carllerche@moz-BF6CB667.hsd1.ca.comcast.net) (Quit: carllerche)
[01:13:06] <Thiez> I honestly wouldn't know, and can't find out online :(
[01:13:28] <Thiez> maik_: I think there were about 50 people in my year back when I started?
[01:14:25] *** Joins: ysuzuki (ysuzuki@moz-5146769F.st.itc.keio.ac.jp)
[01:14:25] <cmr> there's a total of 120 in the CS program at the university I will be going to
[01:14:49] <cmr> (across all 4 years)
[01:14:58] <cmr> at least that's what they say
[01:15:18] <Thiez> that's quite small
[01:15:46] <cmr> it's a pretty small school (clarkson.edu)
[01:16:07] <Thiez> utwente.nl here :)
[01:19:31] <bstrie> wut
[01:19:35] *** Quits: Blub\w (wry@moz-331A9081.wireless.dyn.drei.com) (Ping timeout)
[01:19:42] <bstrie> I had about 20 people in my CS program, across all years :P
[01:19:51] *** Parts: krdln (Mibbit@moz-6F8A8560.dynamic.chello.pl) ()
[01:20:41] *** Joins: Blub\w (wry@moz-331A9081.wireless.dyn.drei.com)
[01:20:58] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[01:21:54] <Thiez> consider me appropriately amazed.
[01:22:05] * doy had about 2000
[01:22:14] <Thiez> that's more like it!
[01:23:12] *** Quits: maik_ (maik@moz-C2C01F77.dip0.t-ipconnect.de) (Ping timeout)
[01:23:29] *** Quits: eschweic (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[01:23:30] *** Joins: jclements (jclements@B1A04851.559FC6D5.439315E1.IP)
[01:23:36] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[01:24:07] *** Quits: eatkinson (eatkinson@2557E599.66715431.D25A875A.IP) (Quit: eatkinson)
[01:24:58] *** Quits: tikue (tkuehn@2557E599.66715431.D25A875A.IP) (Quit: tikue)
[01:25:25] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[01:27:04] <doy> okay, i guess closer to 1000
[01:27:06] <doy> but still
[01:27:08] <doy> (:
[01:30:37] *** Quits: jclements (jclements@B1A04851.559FC6D5.439315E1.IP) (Quit: jclements)
[01:39:11] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:39:13] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:42:08] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[01:42:20] *** Quits: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: caitp)
[01:42:59] <aatch> COMP 102 (introduction) at my uni had about 300-350 students, this drops down to ~100 in the second semester, then ~30 for the rest of the course
[01:43:51] <strcat> cmr: no idea ;p
[01:44:28] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[01:46:02] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[01:46:07] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[01:46:13] *** Joins: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net)
[01:49:05] *** Joins: igl1 (igl@moz-A787C6B.adsl.alicedsl.de)
[01:49:19] *** Quits: igl (igl@moz-B6ECDE93.adsl.alicedsl.de) (Ping timeout)
[01:50:05] *** Quits: pcwalton (pcwalton@2557E599.66715431.D25A875A.IP) (Quit: pcwalton)
[01:50:55] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[01:51:41] <cmr> Forgetting to write the file is a sure-fire way to get extremely confused while debugging...
[01:52:31] *** Quits: snearch (snearch@moz-491B4978.pool.mediaways.net) (Quit: Verlassend)
[01:53:12] *** Joins: brendan (brendaneic@moz-2261AF06.public.wayport.net)
[01:57:33] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[01:57:33] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/GXgb7Q
[01:57:33] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[01:58:04] *** Quits: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com) (Client exited)
[01:58:22] *** Joins: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP)
[01:58:24] *** Quits: brendan (brendaneic@moz-2261AF06.public.wayport.net) (Ping timeout)
[02:01:30] *** Joins: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP)
[02:02:09] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[02:02:21] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("findmnt", []).output))
[02:02:28] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/GSaV
[02:02:54] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("findmnt", []).output))
[02:02:56] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bLch
[02:03:01] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("findmnt", []).output))
[02:03:02] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/IOIF
[02:03:41] <strcat> rusti: 5
[02:03:42] -rusti- 5
[02:04:06] <strcat> rusti: 5
[02:04:07] -rusti- 5
[02:04:10] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("findmnt", []).output))
[02:04:11] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/CRVR
[02:04:21] <strcat> oh so I want MS_PRIVATE, not MS_SLAVE
[02:04:57] <strcat> luckily the only documentation for these flags is their integer values
[02:05:51] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[02:09:47] <brson> after two days I've finally found the starting point to bisect incoming
[02:10:13] <brson> 7 steps left. that's like 3 days at this rate
[02:10:15] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[02:10:20] * strcat really wonders why 'man 2 mount' doesn't mention these ;p
[02:10:38] <strcat> at least it says MS_REC exists, but not what it is. MS_{PRIVATE,SHARED,SLAVE} aren't mentioned
[02:10:58] <aatch> brson, what are you bisecting?
[02:11:13] <strcat> maybe that means I'm supposed to send a patch to man-pages ;p
[02:14:06] *** Joins: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net)
[02:14:53] <brson> aatch: there's a failure on incoming cross-compiling from x86_664 to i686
[02:15:11] <aatch> fun times...
[02:22:19] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Input/output error)
[02:22:36] <heftig> rusti: "\x20"
[02:22:37] -rusti- " "
[02:23:01] <heftig> rusti: std::str::from_bytes([20])
[02:23:03] -rusti- ~"\x14"
[02:23:20] <heftig> rusti: std::str::from_bytes([0xC0,0x80,0])
[02:23:21] -rusti- ~"\x00\x00"
[02:23:25] <heftig> huh
[02:24:23] <heftig> rusti: std::str::from_bytes([0xE2,0x82,0xAC,0])
[02:24:25] -rusti- ~"\u20ac\x00"
[02:24:36] <heftig> rusti: print(std::str::from_bytes([0xE2,0x82,0xAC,0]))
[02:24:38] -rusti- â‚¬0()
[02:25:00] <heftig> rusti: print(std::str::from_bytes([0xE2,0x82,0xAC]))
[02:25:01] -rusti- â‚¬()
[02:25:30] <aatch> heftig, you can /msg rusti
[02:26:40] <heftig> aatch: seems rust accepts overlong encodings, which technically aren't valid utf-8
[02:27:34] <strcat> heftig: yeah it's broken
[02:27:37] <strcat> strings
[02:27:46] <aatch> Um, ok? I was more just pointing out that you don't have to spam the room to use rusti
[02:28:18] <strcat> heftig: I made an attempt at fixing a small part of it but.... it breaks a json test in a way I don't comprehend
[02:28:37] <strcat> heftig: https://github.com/mozilla/rust/pull/5151
[02:28:49] <strcat> not that bug though
[02:28:51] <strcat> different one
[02:29:40] <heftig> strcat: well, this problem is that the utf-8 decoder is too permissive
[02:29:50] <strcat> heftig: https://github.com/mozilla/rust/issues/3787 yeah
[02:29:53] <strcat> the is_utf8 function
[02:32:12] *** Joins: kimundi_ (kimundi@moz-E1F5D4A6.dip0.t-ipconnect.de)
[02:32:30] *** Quits: kimundi (kimundi@moz-DC21F2B2.dip0.t-ipconnect.de) (Ping timeout)
[02:32:31] *** kimundi_ is now known as kimundi
[02:34:31] *** Joins: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP)
[02:34:31] *** Quits: youknowone (youknowone@A826BD81.8A0DEF81.38747683.IP) (Z:lined (Open Proxy found on your host. Please visit www.blitzed.org/proxy?ip=115.68.131.49 for more information.))
[02:40:52] *** Quits: aruniiird (arun@84E199D6.DCDBCF8E.83D0DF30.IP) (Ping timeout)
[02:41:52] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[02:42:02] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[02:42:17] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Ping timeout)
[02:45:55] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[02:48:21] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[02:49:54] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[02:50:28] *** Quits: Lal`C (NEAT@moz-C616DA0A.hsd1.ca.comcast.net) (Quit: out)
[02:51:26] *** Joins: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net)
[02:56:57] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[02:59:58] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[03:03:48] <a_m0d> Is there any way to cast a &self into a ~?
[03:04:00] <a_m0d> Or would that be really bad practise?
[03:04:09] <strcat> well it wouldn't be safe
[03:04:12] <strcat> what's your use case?
[03:04:26] <engla> a_m0d: the self type can be by value too
[03:04:35] <engla> the self argument I mean
[03:04:36] <strcat> can take 'self' or '~self'
[03:04:46] <a_m0d> strcat: When inserting a node into a tree, I want to store its parent with it
[03:05:05] <a_m0d> e.g. struct Node { parent: Option<~Node> }
[03:05:12] <strcat> a_m0d: you can't do that
[03:05:25] <strcat> you need @, RcMut or you can write the whole thing with raw pointers in unsafe functions
[03:05:39] <strcat> ~ expresses ownership
[03:05:40] <a_m0d> That's what I was afraid of
[03:06:00] <strcat> it will destroy the allocation when it is destroyed
[03:06:01] <a_m0d> There's no weak pointer equivalent then
[03:06:04] *** Quits: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com) (Quit: jrfeenst)
[03:06:54] <strcat> a_m0d: ~ corresponds to unique_ptr in C++, which has no weak pointers
[03:07:40] <a_m0d> Ok.  I guess I'll just have to skip the parent field then, because I don't want to use @ if I can help it
[03:07:59] <strcat> there could be a safe reference counted pointer with a weak pointer, it would be much less efficient than the existing extra::rc because it would have to work like shared_ptr in C++
[03:08:19] <strcat> 1 allocation for the object, 1 allocation for the counters, and 2 counters (one for strong refs, one for weak refs)
[03:08:56] *** Joins: mwcampbell (matt@moz-52DF570B.ks.ks.cox.net)
[03:09:21] <a_m0d> Unless I just use a raw pointer.  I could guarantee that the parent always exists if the node is in a tree, and set the parent to None when the node is removed
[03:09:32] <mwcampbell> What was the outcome of the recent proposal to remove GC from the Rust language?
[03:10:01] <strcat> mwcampbell: no outcome yet
[03:10:52] <mwcampbell> For what it's worth (probably not much), I think removing GC from the core language is a good idea, since it helps to focus on being a good systems language.
[03:11:45] <strcat> a_m0d: raw pointers are nullable anyway
[03:11:54] *** Joins: eakuefner (eakuefner@moz-9EDCAF3.com)
[03:12:35] <a_m0d> Thanks. So I wouldn't even need the Option<> type then?  Or is it best to keep it there for safety?
[03:12:44] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Ping timeout)
[03:12:55] <strcat> a_m0d: it won't make it safer
[03:13:14] <strcat> if you use a raw pointer you need to make sure the whole thing is memory safe in all conditions yourself, the language won't help you
[03:13:30] <strcat> needs to never be dangling, need to enforce mutability guarantees yourself, etc.
[03:13:47] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:13:53] <strcat> it can still be null or dangling if it's inside an Option
[03:14:31] <engla> What if Rust just went ahead and included a reference counted pointer in the stdlib? It could even be called std::shared_ptr. Maybe that's silly
[03:14:36] <a_m0d> Ok, thanks.
[03:14:42] <strcat> engla: it's called extra::rc
[03:14:45] *** Quits: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net) (Quit: \n)
[03:14:48] <strcat> Rc and RcMut
[03:14:57] <engla> right, but it could move to std
[03:15:05] <strcat> it probably will
[03:15:27] <engla> RcMut seems kind of hard to use but as a adopter/learner the api seems unfinished
[03:15:34] <engla> I guess that's true for a lot :-)
[03:15:40] <strcat> it's essentially finished
[03:15:57] <strcat> can't be made better in the current language
[03:15:57] <engla> hm ok
[03:16:15] <engla> it's not as easy to use as @mut
[03:16:37] <strcat> there's no lang item to overload stuff for pointer-like types
[03:16:46] <engla> yeah
[03:17:01] <strcat> and it can't hand you & or &mut outside of a closure because it has to implement freezing
[03:17:13] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[03:17:13] <strcat> like @mut
[03:18:40] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[03:18:45] <mwcampbell> Even if GC is removed from the core language, most Rust code will still be verifiably memory-safe, right?
[03:19:02] <strcat> mwcampbell: rust doesn't need gc for memory safety
[03:19:18] <strcat> stack allocation, unique pointers and borrowed pointers are memory safe
[03:19:47] <strcat> as are correct custom allocators with destructors (like reference counted types)
[03:19:54] <strcat> gc is just for managed pointers (@, @mut)
[03:22:06] *** Joins: carter (carter@moz-12C317EF.nyc.res.rr.com)
[03:24:49] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Ping timeout)
[03:25:06] <bjz> SirSkidmore: ping
[03:25:31] *** Joins: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net)
[03:25:32] *** ChanServ sets mode: +o pcwalton
[03:30:27] *** Quits: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net) (Ping timeout)
[03:31:32] *** Parts: orshem (orshem@19491716.F0FDCE77.E3D28531.IP) (WeeChat 0.4.0)
[03:35:11] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[03:35:18] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[03:36:29] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[03:36:53] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[03:37:52] *** Quits: pcwalton (pcwalton@moz-481A040C.hsd1.ca.comcast.net) (Quit: .)
[03:40:41] *** Joins: ysuzuki_ (ysuzuki@moz-3830D141.st.keio.ac.jp)
[03:41:42] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Connection reset by peer)
[03:41:46] *** Quits: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net) (Quit: annodomini)
[03:42:02] *** Quits: ysuzuki (ysuzuki@moz-5146769F.st.itc.keio.ac.jp) (Ping timeout)
[03:42:53] *** Joins: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net)
[03:42:58] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[03:43:32] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[03:44:49] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[03:45:33] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[03:46:45] *** Joins: seth_ (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[03:47:05] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[03:47:21] *** Quits: mwcampbell (matt@moz-52DF570B.ks.ks.cox.net) (Quit: Leaving)
[03:47:47] *** Quits: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP) (Quit: lmandel)
[03:49:03] *** Joins: jeff (jeff@moz-7F2975F1.nycmny.east.verizon.net)
[03:52:14] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[03:53:33] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[03:54:26] *** Quits: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[03:54:34] *** Quits: balpert (alpert@moz-793B8F0F.khanacademy.org) (Quit: balpert)
[03:54:51] *** Joins: balpert (alpert@moz-793B8F0F.khanacademy.org)
[03:54:52] *** Quits: olsonjeffery (pf@moz-9E9CF15C.members.linode.com) (Input/output error)
[03:55:17] *** Quits: ziad (ziad@moz-5003F925.members.linode.com) (Quit: WeeChat 0.3.8)
[03:55:20] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[03:55:39] *** Joins: cowboyd (cowboyd@moz-ED20DCCD.mycingular.net)
[03:55:56] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[03:58:29] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[04:04:06] *** Quits: jeff (jeff@moz-7F2975F1.nycmny.east.verizon.net) (Ping timeout)
[04:05:55] *** Quits: moonchrome (moonchrome@moz-9C2622FD.dsl.iskon.hr) (Quit: Leaving)
[04:06:57] *** Quits: cowboyd (cowboyd@moz-ED20DCCD.mycingular.net) (Client exited)
[04:07:04] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[04:08:11] *** Joins: jeff (jeff@moz-561C0649.nycmny.east.verizon.net)
[04:10:46] *** Quits: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net) (Quit: annodomini)
[04:14:01] *** Quits: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP) (Quit: (quit))
[04:14:22] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.1)
[04:17:08] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[04:21:01] *** Quits: jeff (jeff@moz-561C0649.nycmny.east.verizon.net) (Quit: jeff)
[04:21:02] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[04:21:52] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[04:25:06] *** Quits: eholk (eholk@moz-9AB4D52F.hsd1.ut.comcast.net) (Quit: eholk)
[04:26:40] *** Quits: erickt (Adium@49C4075F.3AC15C18.2321E71E.IP) (Quit: Leaving.)
[04:28:07] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[04:30:27] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[04:31:16] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Ping timeout)
[04:32:53] *** Joins: wizeman_ (quassel@moz-9C343656.dyn.user.ono.com)
[04:32:53] *** Quits: wizeman (quassel@moz-9C343656.dyn.user.ono.com) (Connection reset by peer)
[04:33:32] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[04:36:05] <adu> why doesn't the Name enum allow both char and str members?
[04:36:39] <adu> i.e. LongAndShort(char, ~str)
[04:36:47] <adu> in std::getops
[04:36:52] <adu> getopt
[04:36:53] *** Joins: brson (brson@DA348D07.AD1E507F.3688B332.IP)
[04:36:53] *** ChanServ sets mode: +o brson
[04:37:09] <adu> std::getopts
[04:37:21] <mcpherrin> I don't think anybody uses std::getopts :-P
[04:37:24] *** Joins: sankha93 (Instantbir@4D7129CB.291909EC.8B6C1D65.IP)
[04:37:28] *** Quits: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com) (Ping timeout)
[04:37:30] <adu> mcpherrin: well, I do
[04:37:51] <Luqman> mcpherrin: rustc uses getopts!
[04:38:07] <mcpherrin> Luqman: really?  That's actually surprising :P
[04:41:52] *** Joins: brendan (brendaneic@moz-825E629B.sub-70-211-69.myvzw.com)
[04:42:59] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[04:42:59] *** ChanServ sets mode: +o dherman
[04:44:00] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[04:45:42] *** Joins: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net)
[04:46:12] *** Joins: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net)
[04:47:45] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[04:49:06] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[04:50:21] *** Quits: brson (brson@DA348D07.AD1E507F.3688B332.IP) (Ping timeout)
[04:51:06] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[04:56:06] *** Joins: brson (brson@5F06B402.AD1E507F.3688B332.IP)
[04:56:06] *** ChanServ sets mode: +o brson
[04:59:47] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[05:00:03] *** Quits: brendan (brendaneic@moz-825E629B.sub-70-211-69.myvzw.com) (Quit: brendan)
[05:03:34] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[05:04:05] *** Parts: ceatc (Mibbit@moz-D5AEE09B.torservers.net) ()
[05:04:17] <adu> I can't find exit()
[05:04:27] <adu> which mod is it in?
[05:06:10] <dbaupp> adu: you can call libc::exit(), I guess
[05:06:22] <adu> WHAT?!? no exit?!?
[05:06:58] <adu> how are you supposed to change the status code?
[05:07:05] <dbaupp> os::set_exit_status
[05:07:11] <adu> oh
[05:07:13] <adu> that works :)
[05:07:34] <dbaupp> libc::exit(0) also does that, it's just a wrapper around C's exit
[05:13:28] *** Quits: ysuzuki_ (ysuzuki@moz-3830D141.st.keio.ac.jp) (Client exited)
[05:19:48] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[05:20:30] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[05:25:06] *** Quits: mflamer (Mibbit@moz-C6ED16AA.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:25:21] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[05:28:04] *** Joins: jack (jack@8ABE2BFB.9F8380A1.A535BD55.IP)
[05:29:25] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[05:31:54] *** Joins: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com)
[05:34:43] *** Joins: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp)
[05:36:23] <aatch> Arg, I'm getting segfaults in LLVM and I don't know why!
[05:36:52] <dbaupp> segfaults?? not just assertions? :(
[05:36:56] <aatch> yeah.
[05:37:30] <aatch> time for a Debug+Asserts build
[05:37:42] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[05:39:10] <aatch> All I can think is that you can't re-use types like I thought...
[05:43:50] <adu> do I have to write libc::funcs::c95::stdio::foreign_mod::fopen() to open a file?
[05:44:01] <aatch> adu, no.
[05:44:05] *** Joins: ziad (ziad@moz-5003F925.members.linode.com)
[05:44:08] <aatch> 1, there is an io library
[05:44:10] <adu> then how do I open a file?
[05:44:23] <aatch> and 2, you can do libc::stdio::fopen()
[05:44:31] <aatch> or possibly libc::fopen()
[05:44:35] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[05:45:27] <dbaupp> adu: file_reader(&Path("/my/file/name"))
[05:45:45] <mark_edward> in rust can you use an enum as a template parameter as in C++?
[05:46:05] <aatch> mark_edward, Rust doesn't have templates, it has type generics
[05:46:14] <aatch> enums are types,
[05:46:29] <mark_edward> OK
[05:46:36] <dbaupp> rusti: match file_reader(&Path("foo.rs")) { Ok(rdr) => rdr.read_lines(), Err(e) => fail!(e) }
[05:46:37] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/iaZG
[05:46:37] <adu> dbaupp: thank you
[05:46:51] <dbaupp> rusti: match io::file_reader(&Path("foo.rs")) { Ok(rdr) => rdr.read_lines(), Err(e) => fail!(e) }
[05:46:52] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/QdXB
[05:47:08] <dbaupp> rusti: match std::io::file_reader(&Path("foo.rs")) { Ok(rdr) => rdr.read_lines(), Err(e) => fail!(e) }
[05:47:10] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/ihKK
[05:47:18] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Connection reset by peer)
[05:48:30] <mark_edward> aatch: I am afraid i don't understand
[05:48:50] <mark_edward> so I think that'd would be a no to my original question, right?
[05:49:00] <aatch> mark_edward, no, it's a yes
[05:49:07] <mark_edward> oh
[05:49:15] <mark_edward> so if i had say
[05:49:31] <aatch> so in rust, enum Foo { Variant } creates a type named Foo
[05:49:35] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[05:49:50] <aatch> which is an enum that has a single variant, 'Variant'
[05:50:04] <mark_edward> could you have a struct Bar<Foo>?
[05:50:10] <aatch> mark_edward, yep
[05:50:24] <mark_edward> ok
[05:50:25] <aatch> if you want to see some crazy type generic action, look here:
[05:50:35] *** Quits: ysuzuki (ysuzuki@moz-285468F7.net219126120.t-com.ne.jp) (Client exited)
[05:50:40] <aatch> https://github.com/Aatch/llvm-rs
[05:50:56] <mark_edward> rusti: enum Shape {S, C} struct Foo<Shape>;
[05:50:57] -rusti- ()
[05:51:14] <dbaupp> mark_edward: that's slightly different
[05:51:44] <dbaupp> mark_edward: that's saying that `Foo` takes a type parameter that happens to be called 'Shape'; it doesn't refer to the Shape type
[05:51:47] <mark_edward> rusti: enum Shape {S, C} struct Foo<Shape>; let x: Foo<S> = Foo {}
[05:51:48] -rusti- foo.rs:10:66: 10:67 error: expected `;` but found `{`
[05:51:48] -rusti- foo.rs:10          enum Shape {S, C} struct Foo<Shape>; let x: Foo<S> = Foo {}
[05:51:48] -rusti-                                                                             ^
[05:51:48] -rusti- application terminated with error code 101
[05:51:53] <mark_edward> oh ok
[05:52:18] <aatch> You can't put variants in type parameters.
[05:52:26] <dbaupp> there's no way to promote values (e.g. enum variants) to types
[05:52:26] <aatch> I think I misunderstood you.
[05:52:31] <mark_edward> Ah, now i understand
[05:52:55] <dbaupp> you can probably achieve something similar via a private trait
[05:53:08] *** Quits: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[05:53:32] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[05:53:47] <mark_edward> what i was aiming was a compile time numeric parameter
[05:53:58] <dbaupp> mark_edward: yeah... not possible
[05:54:00] <mark_edward> trying to remake compile-time factorial from C++
[05:54:02] <mark_edward> oh ok
[05:54:17] *** Joins: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net)
[05:54:22] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[05:54:30] <dbaupp> I think the generics system is explicitly designed to *not* be turing complete
[05:54:53] <mark_edward> yeah i know that is a big cause of problems in C++ compiler work, isn't it
[05:55:01] <dbaupp> yeah, I think so
[05:55:08] <dbaupp> you can possibly do something with macros
[05:55:32] <dbaupp> apparently they are turing complete, but I've never got anything non-trivial to work yet :(
[05:56:00] <mark_edward> oh ok
[05:56:16] <aatch> mark_edward, Rust is not C++. Most of the type stuff comes from functional languages, like ML or Haskell
[05:56:47] <mark_edward> I understand. I was trying to think about how i'd do something i did in C++ in rust
[05:56:54] <mark_edward> it was a SI unit library thingy
[05:57:06] <aatch> Well that's probably manageable.
[05:57:11] <mark_edward> with correct units and stuff as a result of multiplication and division
[05:57:13] <aatch> at least something similar
[05:57:18] <dbaupp> aatch: well, Haskell types (+ some extensions) is turing complete
[05:57:20] <mark_edward> and no runtime overhead
[05:57:57] <aatch> The only thing is that you would need a type for unit.
[05:58:02] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Ping timeout)
[05:58:05] <mark_edward> it was a lot of template hackery in C++
[05:58:10] <mark_edward> here it is on github
[05:58:11] <mark_edward> https://github.com/MarkJr94/units/blob/master/Units.hpp
[05:58:37] <aatch> mark_edward, I've seen the pattern before, implemented it myself in D
[05:58:50] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[05:58:50] <mark_edward> oh ok then, so you know what i mean
[06:00:06] <aatch> mark_edward, yep. Have a look at the link I posted, I do some similar things with types there.
[06:00:18] <aatch> it's much more complicated, admittedly
[06:00:25] <mark_edward> what link?
[06:00:34] <aatch> https://github.com/Aatch/llvm-rs
[06:00:35] <mark_edward> oh ok from earlier
[06:00:53] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[06:01:00] <mark_edward> can you think of a file or module that'd be good to look at?
[06:01:14] <aatch> either ty.rs, or value.rs
[06:01:32] <mark_edward> and can traits have members?
[06:01:38] <aatch> mark_edward, no
[06:01:45] <mark_edward> static constants?
[06:02:00] <aatch> mark_edward, that's planned
[06:02:13] <aatch> but we haven't got the syntax for it done yet.
[06:02:37] <aatch> We want associated items, fns and types
[06:02:52] <mark_edward> I see. planned for 0.7 or later?
[06:03:12] <dbaupp> aatch: trait bounds work in trait generics?
[06:03:12] <aatch>  /maybe/ 1.0
[06:03:22] *** Quits: carter (carter@moz-12C317EF.nyc.res.rr.com) (Quit: Textual IRC Client: www.textualapp.com)
[06:03:32] <aatch> dbaupp, as in trait Foo<T:Bound> { }?
[06:03:32] <dbaupp> mark_edward: the releases are time based, not feature based
[06:03:37] <dbaupp> aatch: yeah
[06:03:42] <aatch> dbaupp, yep
[06:03:46] <dbaupp> cool!
[06:03:47] <mark_edward> Oh ok
[06:04:03] <dbaupp> mark_edward: that means that things get done when they're done.
[06:04:07] <dbaupp> basically
[06:04:11] <aatch> since given only a generic trait, you may need to bound that parameter
[06:04:24] <dbaupp> ?
[06:04:26] <mark_edward> better than rushing things for arbitrary deadlines
[06:04:57] <aatch> so trait Foo<T:Bound> { fn fun(&self, t:T) -> int }
[06:05:21] <aatch> the type checker can only reason about that trait.
[06:05:56] *** Quits: eatkinson (eatkinson@moz-5CF47426.dia.static.qwest.net) (Quit: eatkinson)
[06:06:10] <aatch> so there is nowhere else to put the bound on T
[06:06:23] <aatch> without loosing the ability to make the trait generic.
[06:06:51] <dbaupp> I thought you can just put the bounds on the impls
[06:07:20] <aatch> you can, but what if the compiler doesn't know about the impls?
[06:07:31] <aatch> Remember that each function must type check in isolation.
[06:07:51] <aatch> You need a more complex example to see it really.
[06:07:55] <dbaupp> yeah
[06:08:00] <aatch> But remember that trait objects are a thing
[06:08:11] <aatch> even if they aren't used much and are buggy as all hell...
[06:08:33] <dbaupp> (I'm not quite following because one can't actually use `T` to do anything. just be the name of an argument)
[06:08:34] *** Joins: webber46 (webber46@moz-D5AF41D7.cust.bredband2.com)
[06:08:39] <dbaupp> Actually, hm.
[06:09:09] <dbaupp> `trait<F> Foo<T: Bound<F>> { fn fun(&self: f: F) -> T; }`
[06:09:19] <dbaupp> does that work?
[06:09:24] *** Joins: jmsaunde (jmsaunde@moz-6FB6A254.cmclub.uwaterloo.ca)
[06:09:27] <dbaupp> rusti: trait<F> Foo<T: Bound<F>> { fn fun(&self: f: F) -> T; }
[06:09:27] -rusti- foo.rs:10:14: 10:15 error: expected ident, found `<`
[06:09:27] -rusti- foo.rs:10          trait<F> Foo<T: Bound<F>> { fn fun(&self: f: F) -> T; }
[06:09:27] -rusti-                         ^
[06:09:27] -rusti- application terminated with error code 101
[06:09:39] <dbaupp> trait Foo<F, T: Bound<F>> { fn fun(&self: f: F) -> T; }
[06:09:48] <dbaupp> rusti: trait Foo<F, T: Bound<F>> { fn fun(&self: f: F) -> T; }
[06:09:48] -rusti- foo.rs:10:49: 10:50 error: expected `,` or `)`, found `:`
[06:09:48] -rusti- foo.rs:10          trait Foo<F, T: Bound<F>> { fn fun(&self: f: F) -> T; }
[06:09:48] -rusti-                                                            ^
[06:09:48] -rusti- application terminated with error code 101
[06:10:05] <aatch> rusti: trait Foo<F, T: Bound<F>> { fn fun(&self, f: F) -> T; }
[06:10:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MKWT
[06:10:27] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[06:10:27] <dbaupp> rusti: trait Foo<F, T: Foo<F, F>> { fn fun(&self, f: F) -> T; }
[06:10:28] -rusti- Killed
[06:10:28] -rusti- application terminated with error code 137
[06:10:39] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Client exited)
[06:10:41] <aatch> rusti: trait Foo<F, T: Add<F,T>> { fn fun(&self, f: F) -> T; }
[06:10:42] -rusti- ()
[06:10:44] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[06:10:49] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[06:11:01] <dbaupp> Ok, I can imagine it's helpful from a type-validation point of view
[06:11:32] *** Quits: jmsaunde (jmsaunde@moz-6FB6A254.cmclub.uwaterloo.ca) (Quit: leaving)
[06:11:47] <dbaupp> but without default methods it doesn't seem to provide any functionality over just `trait Foo<F, T> { ... }`
[06:12:01] *** Joins: jmsaunde (jmsaunde@moz-6FB6A254.cmclub.uwaterloo.ca)
[06:12:19] <dbaupp> (that's not to say it's useless though, because type-safety is awesome.)
[06:12:35] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[06:13:20] <aatch> rusti: trait Foo<F, T: Add<F,T>> { fn fun(&self, f: F) -> T; } struct Bar<T> { a: T } impl<T> Foo<int, T> for Bar<T> { fn fun(&self, f:int) { f + a } } let a = Bar { a: 22i }; a.fun(6)
[06:13:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ajBi
[06:13:39] <aatch> rusti: trait Foo<F, T: Add<F,T>> { fn fun(&self, f: F) -> T; } struct Bar<T> { a: T } impl<T> Foo<int, T> for Bar<T> { fn fun(&self, f:int) { f + self.a } } let a = Bar { a: 22i }; a.fun(6)
[06:13:40] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/PIXY
[06:14:08] <aatch> rusti: trait Foo<F, T: Add<F,T>> { fn fun(&self, f: F) -> T; } struct Bar<T> { a: T } impl<T> Foo<int, T> for Bar<T> { fn fun(&self, f:int) -> T { f + self.a } } let a = Bar { a: 22i }; a.fun(6)
[06:14:09] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eNVj
[06:14:14] <mark_edward> can struct have a static member?
[06:14:39] <dbaupp> mark_edward: not really
[06:14:50] <mark_edward> not really?
[06:14:53] <dbaupp> mark_edward: the current way is either just a normal static variable
[06:15:03] *** Joins: victorporof (victorporo@15C56EF0.2484615.4A6B528C.IP)
[06:15:10] <aatch> rusti: trait Foo<F, T: Add<F,T>> { fn fun(&self, f: F) -> T; } struct Bar<T> { a: T } impl<T> Foo<int, T> for Bar<T> { fn fun(&self, f:int) -> T { self.a.add(f) } } let a = Bar { a: 22i }; a.fun(6)
[06:15:11] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/eQFV
[06:15:17] <mark_edward> oh ok
[06:15:19] <dbaupp> or a static method, i.e. impl MyStruct { fn static_foo() -> uint { 1 } }
[06:15:31] <aatch> Eh, so the type inference isn't that greate
[06:15:35] <aatch> great*
[06:16:01] <dbaupp> yeah, I think you still need the bounds on the impls
[06:16:08] <aatch> rusti: trait Foo<F, T: Add<F,T>> { fn fun(&self, f: F) -> T; } struct Bar<T> { a: T } impl<T:Add<int,T>> Foo<int, T> for Bar<T> { fn fun(&self, f:int) -> T { self.a.add(f) } } let a = Bar { a: 22i }; a.fun(6)
[06:16:09] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/cWRV
[06:16:16] *** Quits: Cromulent (Cromulent@moz-983B638D.cable.virginmedia.com) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[06:16:29] <aatch> rusti: trait Foo<F, T: Add<F,T>> { fn fun(&self, f: F) -> T; } struct Bar<T> { a: T } impl<T:Add<int,T>> Foo<int, T> for Bar<T> { fn fun(&self, f:int) -> T { self.a.add(&f) } } let a = Bar { a: 22i }; a.fun(6)
[06:16:30] -rusti- 28
[06:16:37] <aatch> Hurrah
[06:18:10] *** Quits: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net) (Ping timeout)
[06:19:04] <dbaupp> rusti: trait Foo<T: Sub<T,T>> { fn fun(&self, f: T) -> T; } impl Foo<~[int]> for uint { fn fun(&self, f:~[int]) -> ~[int] { f } } 1u.fun(~[])
[06:19:05] -rusti- ~[]
[06:19:22] <dbaupp> hm, those bounds appear to be useless
[06:19:34] <dbaupp> rusti: ~[1i] - ~[1i]
[06:19:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FAbb
[06:19:41] *** Joins: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP)
[06:20:05] <dbaupp> yep, Rust ignores them at the moment.
[06:21:10] <brson> nmatsakis: just remembered something about the scheduler that is pertinent to our discussion today
[06:22:37] <brson> nmatsakis: using the type system to distinguish in_task_context vs not doesn't give much safety because the scheduler is always pulled out of tls, which isn't typed
[06:22:56] <brson> at least, so far i've allocated a single tls slot to the runtime
[06:23:39] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[06:25:37] *** Quits: doy (doy@moz-5FE28A32.akrasiac.org) (Ping timeout)
[06:28:37] *** Joins: doy (doy@moz-5FE28A32.akrasiac.org)
[06:29:53] *** Joins: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net)
[06:31:20] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[06:32:20] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[06:34:17] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[06:34:38] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[06:34:40] <adu> done!
[06:34:44] <adu> https://gist.github.com/andydude/5711998
[06:36:26] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Ping timeout)
[06:37:25] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[06:37:39] <dbaupp> adu: would you like comments? :)
[06:37:43] <Luqman> adu: i don't think you need to copy both times in `print_count`
[06:38:10] <adu> dbaupp: sure!
[06:38:39] <dbaupp> adu: you shouldn't need to copy filename in print_total
[06:38:54] <dbaupp> (since println takes a slice, and ~str is automatically coerced to &str if necessary)
[06:39:00] <adu> but rustc complained about it when I didn't copy
[06:39:07] <dbaupp> really?
[06:39:18] <dbaupp> I'm surprised by that
[06:39:54] <adu> I get "error: use of moved value: `filename`"
[06:39:55] <dbaupp> in fact, all those functions could just take &str, rather than ~str
[06:40:08] <dbaupp> hm, maybe not... does Path take ~str?
[06:40:10] <adu> oh, maybe that's my problem
[06:40:20] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[06:40:42] *** Joins: fabiand (fabiand@moz-E3D55CB1.adsl.alicedsl.de)
[06:40:47] <dbaupp> seems it takes &str, which is nice
[06:40:47] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[06:41:20] <dbaupp> also, if you use let mut args = os::args(); let program = args.shift(); you don't need the copy there, and don't need the args.tail() call later
[06:42:00] <adu> right, that seems better than using .tail() twice
[06:42:39] <dbaupp> and, you probably can leave the subtotal struct on the stack, i.e. have the counting functions return Total
[06:42:41] <adu> cool so ~str => &str got rid of the error
[06:42:57] <adu> ok
[06:43:07] <dbaupp> and just use `let subtotal; if filename == ~"-" { subtotal = print_count(..., &shw) } else { ... };
[06:43:09] <dbaupp> `
[06:43:20] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[06:43:34] *** Quits: cdidd (cdidd@moz-94729EED.broadband.corbina.ru) (Input/output error)
[06:44:09] <dbaupp> or even, `let subtotal = print_count(if filename == ~"-" {"/dev/stdin"} else {filename}, &show);`
[06:44:33] <Blei> so, are export lists still a thing?
[06:44:44] <dbaupp> Blei: I don't think so
[06:44:47] <Blei> because i think i've spotted some code in the compiler to deal with them
[06:44:53] <dbaupp> it's just controlled by pub/priv, right?
[06:45:04] <Blei> that's what i thought as well
[06:45:11] <Blei> i might try ripping it out
[06:46:12] *** Quits: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net) (Ping timeout)
[06:47:03] <dbaupp> adu: another thing: s.char_len() has to traverse the whole string, just like s.each_char, so having total.chars += 1; in that loop is possibly more efficient (if you're optimising for speed)
[06:47:04] *** Joins: JesseH (JesseH@moz-2E766C3E.mc.at.cox.net)
[06:47:11] <adu> dbaupp: ok, I just updated it with those comments
[06:47:27] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Ping timeout)
[06:48:38] <adu> also, when I switch s.each_chari |i, ch| ro s.each_char |ch| I get a really strange error
[06:49:07] <dbaupp> oh, the one about multiple applicable methods in scope?
[06:49:22] <adu> wc.rs:39:4: 39:5 error: failed to find an implementation of trait core::io::Reader for <V14>
[06:49:31] <dbaupp> yeah, you can use str::each_char(s) |ch| { .. } to get around it
[06:49:36] <dbaupp> adu: oh, right that one
[06:49:54] <dbaupp> adu: it's because there is an each_char method on the ReaderUtil trait
[06:50:02] <adu> oh
[06:50:29] <dbaupp> and so Rust tries to use that method, but it requires the Self type to have implemented Reader
[06:51:06] <adu> sounds like a mind blow
[06:51:34] *** Joins: berak (chatzilla@C5635815.5291F4C0.16E13E53.IP)
[06:51:49] <adu> so did I do ok for my first attempt at wc?
[06:52:23] <dbaupp> it looks pretty good
[06:52:32] *** Joins: alisdair (textual@moz-EBE9F394.bchsia.telus.net)
[06:52:36] *** Quits: victorporof (victorporo@15C56EF0.2484615.4A6B528C.IP) (Quit: victorporof)
[06:52:40] <dbaupp> (and did so before your improvements, they were just surface changes)
[06:53:42] <dbaupp> one last ideomatisation, if you want: you can drop the `return`'s often, e.g. print_count(...) -> Total { let total = ... ; print_total(...); total }
[06:54:15] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[06:55:11] <dbaupp> hm, another thing. strings are automatically multiline
[06:55:14] <adu> that would be a great application of begin0
[06:55:28] <adu> oh, for usage?
[06:55:31] *** Quits: webber46 (webber46@moz-D5AF41D7.cust.bredband2.com) (Quit: webber46)
[06:55:33] <dbaupp> yeah
[06:55:45] <adu> multiline strings scare me
[06:55:50] <dbaupp> (you have to unindent them though)
[06:55:53] <dbaupp> heh
[06:55:57] <dbaupp> :)
[06:56:13] <engla> strings are multiline?
[06:56:30] <dbaupp> engla: yup
[06:56:32] <Eridius> engla: newlines don't break string literals
[06:56:43] <engla> that's cool I guess
[06:56:56] <engla> very logical
[06:57:08] <dbaupp> engla: yeah, and you can escape the newline with a \, if you just want to avoid having a very long line
[06:57:20] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[06:58:17] <adu> well most languages require \\n, some don't, some strip indents for you, some don't
[06:58:35] <engla> dbaupp: there the magic begins.. if I escape the newline, the indent is stripped as well
[06:58:39] <adu> I would always prefer just specifying multiple strings
[06:58:41] <Eridius> adu: only languages I know of that strip indents only do so with heredocs
[06:58:50] <dbaupp> engla: yup,
[06:58:53] <Eridius> engla: whoaaaa
[06:59:05] <dbaupp> engla: I guess one can think of the \ as escaping all the following whitespace
[06:59:06] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[06:59:22] <Eridius> rusti: ~"foo\ bar"
[06:59:23] -rusti- foo.rs:10:9: 10:10 error: unknown string escape: 32
[06:59:23] -rusti- foo.rs:10          ~"foo\ bar"
[06:59:23] -rusti-                    ^
[06:59:23] -rusti- application terminated with error code 101
[06:59:27] <Eridius> pffft
[06:59:30] <engla> it's unintuitive it would escape more than one character. but ok
[06:59:39] <dbaupp> Eridius: only when the next character is a \n :P
[07:00:02] <adu> anyways, I'm getting sleepy
[07:00:05] <adu> good night
[07:04:52] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[07:05:59] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[07:06:22] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[07:08:32] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Quit: pragmatic)
[07:10:35] *** Quits: alisdair (textual@moz-EBE9F394.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzzâ€¦)
[07:13:16] *** Parts: berak (chatzilla@C5635815.5291F4C0.16E13E53.IP) ()
[07:19:07] *** Quits: brson (brson@5F06B402.AD1E507F.3688B332.IP) (Quit: leaving)
[07:22:03] *** Joins: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr)
[07:22:57] <mark_edward> so... i've been staring at the networking docs and i can't see how to retrieve data from a url
[07:23:14] <mark_edward> the net::tcp module needs IP's
[07:23:18] *** Joins: Seldaek (seld@moz-5DEA7688.ch)
[07:23:46] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:23:50] <mark_edward> but there seems to be no way to go from net::url::Url -> net::IpAddr
[07:25:21] *** Quits: balpert (alpert@moz-793B8F0F.khanacademy.org) (Quit: balpert)
[07:25:54] <dbaupp> mark_edward: I'm not sure, but I guess the reason is there is no HTTP/FTP/high level protocol support yet
[07:26:15] <dbaupp> you could look how servo does it, I guess
[07:26:27] <mark_edward> ok
[07:26:50] <Eridius> semi-serious suggestion: use libcurl
[07:27:08] <Eridius> or write an http library and try to get it integrated into extra
[07:27:13] <Eridius> s/library/module/
[07:28:44] *** Joins: Voomer (Voomer@moz-E97E8EB7.br.br.cox.net)
[07:28:50] <dbaupp> mark_edward: https://github.com/mozilla-servo/rust-http-client
[07:30:04] <mark_edward> thanks
[07:31:57] <aatch> rusti: 0b1111111111111111
[07:31:59] -rusti- 65535
[07:32:05] <aatch> rusti: 0b111111111111
[07:32:06] -rusti- 4095
[07:32:23] <aatch> rusti: 0b0111111111111111
[07:32:24] -rusti- 32767
[07:32:31] *** Joins: webber46 (webber46@moz-AC14FDEA.se)
[07:34:13] *** Joins: doener (bs@moz-AA189A5A.unitymedia.biz)
[07:38:57] <mark_edward> man, an http client sure would be nice.
[07:39:35] <mark_edward> why is libuv used? couldn't a library be written using C sockets and stuff
[07:41:06] *** Quits: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca) (Quit: ChatZilla 0.9.90 [Firefox 22.0/20130528181031])
[07:41:26] <mcpherrin> mark_edward: sure, it could.  But libuv is a nice abstraction
[07:41:56] <mark_edward> seems to add a lot of stuff. IoTasks, global_loops
[07:42:16] <mark_edward> but who am i to criticize, I haven't the slightest idea how to do what i suggest
[07:42:59] *** Joins: fabiand_ (fabiand@moz-E3D55CB1.adsl.alicedsl.de)
[07:43:49] *** Quits: fabiand (fabiand@moz-E3D55CB1.adsl.alicedsl.de) (Ping timeout)
[07:44:09] *** Joins: balpert (alpert@moz-B247840C.hsd1.ca.comcast.net)
[07:44:40] *** Quits: blitter (blitter@moz-BA14D5CF.dyn.centurytel.net) (Ping timeout)
[07:47:17] *** Quits: balpert (alpert@moz-B247840C.hsd1.ca.comcast.net) (Quit: balpert)
[07:47:45] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[07:57:40] *** Quits: devbug (quassel@moz-E1DE087C.bchsia.telus.net) (Connection reset by peer)
[08:07:51] *** Joins: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:13:08] <doomlord> in the absence of ' lifetime names - all the & pointers are in the same region i guess.
[08:13:38] <doomlord> libuv: i had problems with this in the makefiles while trying to get something going on the iphone .... i wondered what that was
[08:13:59] *** Joins: oksobul (Instantbir@5420C305.88F2F905.4A037BC4.IP)
[08:14:39] <doomlord> i see there is a minimal runtime version of rust or somethign (someone showed me their stub project here...) i wonder if that would make getting somethgin on the iphonne eaiser
[08:15:31] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Ping timeout)
[08:23:42] <mark_edward> can there be static `~str`s?
[08:24:35] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Connection reset by peer)
[08:25:19] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[08:25:52] <doener> mark_edward: no. Why would you need that instead of just a plain static string?
[08:26:18] <mark_edward> a lot of things in the standard library need a ~str
[08:26:35] <mark_edward> and the clone method doesn't work for &str
[08:27:04] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Ping timeout)
[08:27:12] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[08:27:34] *** Joins: victorporof (victorporo@15C56EF0.2484615.4A6B528C.IP)
[08:28:50] <doener> mark_edward: you can create an owned string from a slice using .to_owned()
[08:29:04] <doener> rusti: let x = "Hoohaa"; x.to_owned()
[08:29:05] -rusti- ~"Hoohaa"
[08:29:10] * mark_edward facepalms
[08:29:19] <mark_edward> thanks, I didn't see that method for some reason
[08:30:18] *** Quits: victorporof (victorporo@15C56EF0.2484615.4A6B528C.IP) (Ping timeout)
[08:31:44] *** Joins: victorporof (victorporo@15C56EF0.2484615.4A6B528C.IP)
[08:33:48] <Eridius> mark_edward: a static ~str wouldn't make sense, because the moment you gave it to a method that takes a ~str you'd be taking ownership away from the static, and you can't do that
[08:34:24] <mark_edward> ah yes, that makes sense
[08:35:40] *** Joins: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net)
[08:38:26] *** Joins: lucian (lucian@moz-D82F7974.zone16.bethere.co.uk)
[08:40:25] *** Quits: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com) (Ping timeout)
[08:40:27] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[08:42:12] *** Joins: lucian_ (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[08:42:55] *** Quits: lucian (lucian@moz-D82F7974.zone16.bethere.co.uk) (Ping timeout)
[08:43:16] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[08:45:45] *** Joins: EXetoC (ex@moz-C741B177.customer.t3.se)
[08:45:54] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[08:46:32] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[08:54:23] *** Joins: mib_xrwa7m (Mibbit@moz-A0E225F0.avcosystems.co.uk)
[08:57:27] *** Joins: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de)
[09:01:37] *** Quits: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net) (Ping timeout)
[09:04:38] *** Quits: SimonSapin (simon@5924A8D9.7F79A810.4065847B.IP) (Quit: Leaving.)
[09:04:53] *** Quits: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de) (Ping timeout)
[09:06:27] *** Joins: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk)
[09:08:09] *** Joins: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de)
[09:15:38] *** Joins: donri (dag@moz-9BB61102.tbcn.telia.com)
[09:16:06] *** Joins: koomi (koomi@moz-27085084.pools.arcor-ip.net)
[09:19:39] *** Joins: trapni (trapni@moz-6A0EA166.dawanda.com)
[09:19:41] *** Quits: trapni (trapni@moz-6A0EA166.dawanda.com) (Quit: trapni)
[09:20:08] *** Quits: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de) (Ping timeout)
[09:35:35] *** Quits: victorporof (victorporo@15C56EF0.2484615.4A6B528C.IP) (Quit: victorporof)
[09:59:27] *** Joins: victorporof (victorporo@15C56EF0.2484615.4A6B528C.IP)
[10:01:06] <oksobul> Hello. I have installed rust under windows. How can I compile the librusti crate?
[10:01:06] <oksobul> It seems that it is not a part of installer. Simply rustc librusti.rc doesn't work even when I use -L..\libstd
[10:02:19] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[10:02:51] *** Quits: wilsonk|2 (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[10:03:04] *** Quits: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net) (Ping timeout)
[10:05:14] *** Joins: sk (sk@EA324BFE.54A580E3.78DD174B.IP)
[10:05:37] *** Quits: heftig (heftig@moz-E33F9AA4.dip0.t-ipconnect.de) (Ping timeout)
[10:05:41] <Blei> oksobul: what's the error?
[10:08:25] *** Joins: eevee (eevee@moz-A643AA65.evrt.wa.frontiernet.net)
[10:12:37] <oksobul> Blei: 
[10:12:37] <oksobul> rusti.rc:24:0: 24:31 error: can't find crate for `std`
[10:12:37] <oksobul> rusti.rc:24 extern mod std(name = "extra");
[10:12:37] <oksobul>             ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[10:14:50] <Blei> hmmm, what installer are you using?
[10:15:03] <Blei> or rather, which rust version are you using?
[10:15:06] *** Joins: heftig (heftig@moz-C11B5B9D.dip0.t-ipconnect.de)
[10:15:08] <Blei> (rustc -v)
[10:16:25] <oksobul> rustc 0.6
[10:16:25] <oksobul> host: i686-pc-mingw32
[10:16:29] *** Quits: wuwei (wuwei@AEB9B9C2.818D7924.FAA9ED67.IP) (Ping timeout)
[10:16:43] <oksobul> I don't know if a newer installer exists...
[10:17:49] <Blei> where did you get the rusti sources? where they part of the installer?
[10:20:01] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[10:26:31] *** Joins: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP)
[10:26:58] *** Joins: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[10:27:23] <doener> the name "extra" is not yet used in 0.6. That code is for a newer version of rust
[10:27:54] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[10:31:28] <oksobul> Ok so I am mixing things from various versions. I have official installer and sources from incoming branch. :-)
[10:31:28] <oksobul> I forgot that rust is very actively developing.
[10:32:55] <Blei> yeah, that won't work
[10:35:40] *** kimundi is now known as zz_kimundi
[10:35:40] *** Joins: wuwei (wuwei@AEB9B9C2.818D7924.FAA9ED67.IP)
[10:38:07] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[10:40:28] <EXetoC> and plenty of changes have been made since 0.6
[10:41:22] *** Joins: emartin (emartin@moz-C3D4EEBF.caltech.edu)
[10:41:50] <emartin> hi, how can I pad a vector out to a fixed length? ie I have a vector of length k, want to add n - k zeros to this vector
[10:41:59] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[10:43:29] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Quit: WeeChat 0.4.2-dev)
[10:43:30] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[10:51:37] <mib_xrwa7m> vec::grow
[10:54:10] *** Joins: moonchrome (moonchrome@4C0859E0.C952C54B.76F1346C.IP)
[10:54:37] <Blei> why is rustc so slow, ugh
[11:09:20] <emartin> is there any way to get a backtrace on task failures?
[11:11:03] <dbaupp> emartin: what operating system?
[11:11:20] *** Joins: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net)
[11:11:52] <dbaupp> `RUST_LOG=::rt::backtrace foo` works on Linux (it should work on osx, but I think it doesn't, and no idea about windows)
[11:14:55] *** Joins: Sorella (queen@B12A78F5.BA14766C.95C8B7C6.IP)
[11:17:51] *** Quits: victorporof (victorporo@15C56EF0.2484615.4A6B528C.IP) (Ping timeout)
[11:20:22] <moonchrome> Rc<[Node<T>]> -> error: bare `[]` is not a type - what am I missing here :|
[11:20:44] <moonchrome> can I have ~ in Rc<> ?
[11:21:13] <moonchrome> and isn't Rc implemented as a pointer internally anyway ? so I need to create a pointer to a pointer ?
[11:21:47] <dbaupp> moonchrome: yes to both
[11:21:55] <dbaupp> (well, all three)
[11:22:07] <dbaupp> Rc<~[Node<T>]> is what you want
[11:22:27] <moonchrome> ok then :)
[11:23:05] *** Joins: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[11:23:17] <dbaupp> (it's a consequence of how vectors are represented, which is possibly/hopefully changing with the "Dynamically sized types" proposal)
[11:23:56] <moonchrome> would be nice, having 2 pointers just kills locality
[11:24:22] <Blei> moonchrome: is the array size known?
[11:24:35] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[11:24:35] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/1k7-aw
[11:24:35] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[11:24:37] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[11:24:37] <ghrust> 01[13rust01] 15bors pushed 3 new commits to 06auto: 02http://git.io/FhTwJw
[11:24:37] <ghrust> 13rust/06auto 1416086ec 15Patrick Walton: libsyntax: Remove `pub impl` from the language
[11:24:37] <ghrust> 13rust/06auto 148114d0e 15Patrick Walton: librustc: Disallow multiple patterns from appearing in a "let" declaration....
[11:24:37] <ghrust> 13rust/06auto 14de82bde 15bors: auto merge of #6944 : pcwalton/rust/multiple-patterns-in-let, r=nikomatsakis...
[11:24:40] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[11:24:44] <moonchrome> Blei, it has an upper bound yes
[11:24:46] <dbaupp> yeah, I think that this (custom smart pointers) one of good reasons for DST being quite attractive
[11:25:08] <Blei> moonchrome: then you could specify that on the type and i think it should work
[11:25:24] <Blei> something like Rc<[Node<T> * 115]>
[11:25:28] *** Joins: cdidd (cdidd@moz-7D146F62.broadband.corbina.ru)
[11:25:42] <moonchrome> Blei, yeah, but then I need to add None to my Node<T> enum, ah well
[11:25:43] <dbaupp> Blei: the syntax is now [Node<T>, .. 115]
[11:26:06] <Blei> dbaupp: isn't that only for initialization? or maybe i missed a language change
[11:26:14] <dbaupp> Blei: both
[11:26:19] <Blei> i see, thanks
[11:26:27] <dbaupp> Blei: the type was changed to be consistent with initialisation
[11:26:34] <Blei> makes sense
[11:30:34] <moonchrome> Blei, but how do I allocate that Rc, where do I pull the value array from, something like "let foo : Rc<[uint, ..32]> = rc_from_owned(*~[0 as uint, ..32])" ?
[11:31:10] <moonchrome> I can't just pass stack vector ?
[11:31:27] *** Quits: a_m0d (a_m0d@moz-9F925EFA.hm.shawcable.net) (Quit: Leaving.)
[11:31:42] <doener> hm, got int as "self by value" working, but only by passing it by ref internally... :-/ The ByValue/ByRef choice is made before the final sizes are known, so I don't know whether the value fits into the env pointer (think u64 on 32bit), so any non-pointer immediate has to by passed by ref AFAICT :-/
[11:31:55] <dbaupp> moonchrome: let foo : Rc<[uint, ..32]> = rc_from_owned([0 as uint, ..32])
[11:32:04] *** Joins: untothebreach (paul@15A17709.47300931.30F15291.IP)
[11:32:20] <moonchrome> dbaupp, isn't that reference counting a stack vector :|
[11:32:27] <dbaupp> moonchrome: nope
[11:32:44] <dbaupp> moonchrome: the fixed length vectors are the same as `(uint, uint, ..., uint)`
[11:33:20] <dbaupp> doener: that's a bit strange...
[11:33:32] <moonchrome> dbaupp, so they aren't passed by value ?
[11:33:43] <moonchrome> *by ref
[11:34:05] <dbaupp> moonchrome: yeah, from a users point of view, they a passed by value
[11:34:18] <moonchrome> rc_from_owned gets a pointer to something :|
[11:34:23] <moonchrome> I assume
[11:34:45] <dbaupp> no, it's passed by value
[11:35:06] <dbaupp> and then a Rc box is created and the value is moved into it
[11:35:23] *** Quits: sankha93 (Instantbir@4D7129CB.291909EC.8B6C1D65.IP) (Quit: Instantbird 1.4 -- http://www.instantbird.com)
[11:35:37] <moonchrome> so rc_from_owned creates a copy when it puts it in to ref counted box, yea that actually makes sense
[11:35:40] <dbaupp> doener: would it be possible to set a flag that indicated "pass this by value if possible", or would that break the rest of the code
[11:35:54] <moonchrome> too used to thinking about pointers instead of boxes
[11:36:17] <dbaupp> moonchrome: it's not just a copy -- the ownership moves -- but yes
[11:36:44] <doener> dbaupp: ByRefIfLLVMLovesYou?
[11:36:46] <doener> dbaupp: might work
[11:36:55] <dbaupp> doener: heh
[11:37:37] <dbaupp> doener: yeah, something like that... although I have no idea what I'm talking about when it comes to rustc's codegen
[11:38:21] <doener> dbaupp: I don't have that much more of a clue ;-) I'm using this to try to learn about it
[11:39:29] <dbaupp> doener: I've heard it's horrible
[11:39:42] <dbaupp> (have fun, I guess? :P )
[11:39:56] <doener> hm, I guess that "if it fits, it sits^W is passed by value" won't fit into my "it's compiling" breaks, so that will have to wait for the evening
[11:39:58] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[11:40:43] <doener> it's... not so easy to navigate. Especially for someone who last worked on a compiler when he was still in school
[11:41:13] <dbaupp> haha
[11:42:05] *** Joins: doomlord (doomlod@moz-3CF8202D.range81-159.btcentralplus.com)
[11:44:12] <dbaupp> Blei: how much faster is `each_path` with your change?
[11:44:27] <Blei> i didn't measure it, it can't be much
[11:44:47] <Blei> but it's definitely not slower
[11:45:07] <Blei> (unless rustc/llvm does something very strange with the code...)
[11:45:44] <dbaupp> oh, cool :)
[11:45:59] <dbaupp> nice cleanup, in any case
[11:46:22] <dbaupp> (do you happen to be trawling through rustc looking for code to remove? :) )
[11:46:56] <Blei> i'm trying to fix https://github.com/mozilla/rust/issues/6919 and am discovering misc stuff on the way :)
[11:47:22] *** Quits: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net) (Ping timeout)
[11:48:47] <dbaupp> Blei: for that PR, it looks like you can replace `ast_map::path_to_str_with_sep` with `ast_map::path_to_str`
[11:48:57] <dbaupp> (and remove the ~"::" argument)
[11:49:51] *** Joins: a__ (a__@moz-250D9B4.nycmny.fios.verizon.net)
[11:50:46] *** Quits: ziad (ziad@moz-5003F925.members.linode.com) (Ping timeout)
[11:50:55] *** Quits: jld (jld@moz-B94C75AD.xlerb.net) (Ping timeout)
[11:53:05] <dbaupp> Blei: that issue looks tricky
[11:53:16] *** Joins: ziad (ziad@moz-5003F925.members.linode.com)
[11:53:22] *** Joins: jld (jld@moz-B94C75AD.xlerb.net)
[11:54:00] <emartin> is there a way to generate a random number between 0 and 1 in rust?
[11:54:16] <dbaupp> emartin: rand::random()
[11:54:37] <dbaupp> emartin: it returns a random value of any type that implements the `Rand` class
[11:54:39] <dbaupp> *trait
[11:54:49] <dbaupp> which includes float/f32/f64
[11:55:08] <dbaupp> rusti: rand::random::<float>()
[11:55:10] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/GMIT
[11:55:17] <dbaupp> rusti: std::rand::random::<float>()
[11:55:19] -rusti- 0.51290903
[11:55:31] <dbaupp> rusti: 1.0f + std::rand::random()
[11:55:32] -rusti- 1.41147865
[11:55:49] <Blei> dbaupp: thanks, will do
[11:55:53] *** Joins: novabyte (Instantbir@moz-9B83A1F0.mullvad.net)
[11:56:04] <dbaupp> emartin: (it's in the crate that used to be called 'core', depending what version of Rust you're on)
[11:57:04] <dbaupp> emartin: http://static.rust-lang.org/doc/core/rand.html for more flexibility
[11:57:55] <emartin> hmm, neither of the things you put in rusti worked with my rust version :(
[11:58:29] <dbaupp> try core::rand::random() ?
[11:58:37] <dbaupp> (what version do you have?)
[11:59:07] *** Joins: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP)
[12:00:01] *** Joins: jensnockert (jensnocker@moz-217004C.mobileonline.telia.com)
[12:01:10] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[12:02:36] *** Quits: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com) (Quit: caitp)
[12:04:50] <emartin> dbaupp: built from master yesterday. random is still in core, but random::rand<float>() gives error about not knowing the type float
[12:05:23] <dbaupp> emartin: incoming is the more interesting one to build ;)
[12:05:41] <dbaupp> development happens on incoming, and master gets updated to point at incoming very occasionally
[12:05:54] <dbaupp> emartin: that seems like very strange error message
[12:06:18] <dbaupp> are you sure you used the correct thing? (because what you've typed there isn't correct)
[12:07:09] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[12:07:51] <emartin>  rand::random<float>()
[12:07:51] <emartin> <anon>:36:13: 36:18 error: unresolved name `float`.
[12:08:25] <emartin> ^ dbaupp
[12:08:26] <dbaupp> you need the `::` after random
[12:08:58] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[12:09:18] <dbaupp> Rust is big on being easy to parse, and that's one of the concessions, since otherwise it could parse as comparisons: e.g. `rand::random < (float > ())`
[12:09:33] <dbaupp> (to be specific `rand::random::<float>()`)
[12:09:57] <dbaupp> but normally, type inference should work, so you don't need to specify the type, i.e. rand::random() should be fine
[12:10:14] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[12:11:05] <emartin> thanks! another question: is there a way to implement something like ToStr for Option<T>? I tried doing this and it wouldn't work unless I used a specfic type
[12:11:48] <dbaupp> impl<T> ToStr for Option<T> { .. } will probably work
[12:11:50] <emartin> I tried "impl ToStr for Option<T>" and "impl<T> ToStr for Option<T>", couldn't get either to work
[12:11:58] <dbaupp> oh, right
[12:12:01] <dbaupp> hm
[12:12:02] <emartin> that had some error about cross crate something
[12:12:07] <bstrie> you have to be in the right crate
[12:12:09] <dbaupp> oh, yes
[12:12:14] <bstrie> which in this case is the stdlib
[12:12:30] <dbaupp> you can only implement traits when either (or both) the trait or the type is defined in the current crate
[12:13:00] <emartin> "impl ToStr for Option<MySpecificType>" worked though
[12:13:56] <dbaupp> is MySpecificType defined in the current crate?
[12:14:21] <emartin> yes (but Option isn't)
[12:14:38] <emartin> oh, got it, when either of them is in the current crate
[12:15:31] <emartin> i'm a bit out of it atm, been up all night trying to finish a class project (implementing reed solomon codes) for today
[12:15:42] <dbaupp> in Rust?
[12:15:48] <emartin> yes
[12:16:21] *** zz_kimundi is now known as kimundi
[12:16:38] <dbaupp> bstrie: https://github.com/mozilla/rust/pull/6948, https://github.com/mozilla/rust/pull/6947 and https://github.com/mozilla/rust/pull/6946, r? :)
[12:16:47] <dbaupp> emartin: nice!
[12:17:09] <emartin> I might try to clean it up a bit later and put it on github or something. I have most of a nice polynomial over arbitrary fields library
[12:17:31] <dbaupp> bstrie: and, https://github.com/mozilla/rust/pull/6945
[12:17:34] *** Quits: igl1 (igl@moz-A787C6B.adsl.alicedsl.de) (Ping timeout)
[12:18:00] *** Joins: igl (igl@moz-6AD5A569.adsl.alicedsl.de)
[12:18:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:18:42] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/FhTwJw
[12:18:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:21:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:21:42] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/ZMnSHQ
[12:21:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:21:42] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[12:21:42] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/gzspPg
[12:21:42] <ghrust> 13rust/06auto 14c08df70 15Philipp BrÃ¼schweiler: rust::driver: remove accidental double freevar calculation
[12:21:42] <ghrust> 13rust/06auto 14e2d0a30 15bors: auto merge of #6947 : Blei/rust/fix-dup-freevars, r=bstrie
[12:21:42] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[12:22:19] <bstrie> dbaupp: r+ on the first two, I'll have time to take a look at the rest in an hour or so
[12:22:49] <Blei> bstrie: thanks!
[12:23:49] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[12:29:23] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[12:30:58] *** Joins: caitp (caitp@moz-9FE842F.cpe.net.cable.rogers.com)
[12:31:19] *** Joins: olsonjeffery (pf@moz-9E9CF15C.members.linode.com)
[12:31:44] <emartin> this is giving me " attempt to implement an unknown trait":  https://gist.github.com/anonymous/5713531
[12:32:12] *** Quits: barosl (barosl@1E71221E.C81E10FB.7544CABF.IP) (Quit: ëžœë¤ì€ ì‡ í‡´í–ˆìŠµë‹ˆë‹¤.)
[12:32:17] <emartin> any thoughts anyone?
[12:32:25] <dbaupp> emartin: (the u8::rand syntax won't work, either Rand::rand(rng) or rng.gen())
[12:32:30] *** Joins: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP)
[12:32:33] <dbaupp> not sure about the trait problem though
[12:33:43] <dbaupp> rusti: use std::rand::Rand; struct A; impl Rand for A { fn rand<R: Rng>(_: &mut R) -> A { A } } std::rand::random::<A>()
[12:33:45] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EEdG
[12:33:52] <Blei> how about: `use core::rand::Rng;`
[12:34:14] <dbaupp> emartin: yeah as Blei says, `use core::rand::{Rand, Rng}`
[12:34:37] <dbaupp> (also, the `-> Self` needs to be `-> GF32FieldElement`)
[12:34:52] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[12:35:02] <emartin> thanks!
[12:35:51] <kimundi> Can't wait till the 0.7 release, the core/std std/extra rename makes help progressivily more complicated xD
[12:36:34] <Blei> it would also be great if incoming could finally be merged with master
[12:36:47] <Blei> once and for all
[12:36:54] <dbaupp> yeah
[12:37:22] <dbaupp> do you happen to know why the merge hasn't happened yet?
[12:38:05] <kimundi> someone has to set it up, and there are a few other things to think about afaik
[12:38:22] <kimundi> bors makes sure that incoming is mostly green, but not 100%
[12:38:25] <Blei> i think there were some test failures that only cropped up when doing some extended tests? not sure
[12:38:38] <kimundi> It doesn't run most of the windows testsuites for example
[12:40:06] <kimundi> However, if bors would run the full testsuite while being idle, and merge master to it on sucess, that might be an other solution
[12:40:34] <kimundi> Question is if that's worth the effort
[12:41:07] *** Quits: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net) (Ping timeout)
[12:43:08] *** Joins: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de)
[12:43:20] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[12:43:47] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[12:44:58] <Blei> blerg... my fix fixes too much
[12:46:24] *** Joins: huhlig-home (huhlig@moz-C8339267.hfc.comcastbusiness.net)
[12:46:33] *** Joins: victorporof (victorporo@7BA1BC15.46B7202A.D111398B.IP)
[12:47:10] <doener> rusti: trait Frobz { fn m(self); } impl Frobz for int { fn m(self) { self } } let x = 5; x.m()
[12:47:11] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/ADIL
[12:47:30] <doener> rusti: trait Frobz { fn m(self) -> Self; } impl Frobz for int { fn m(self) -> int { self } } let x = 5; x.m()
[12:47:31] -rusti- line longer than 150 columns, pastebinned: http://sprunge.us/VKgL
[12:48:06] <doener> rusti: trait Frobz { fn m(self) -> Self; } impl Frobz for ~int { fn m(self) -> int { self } } let x = ~5; x.m()
[12:48:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bBRU
[12:48:15] <doener> rusti: trait Frobz { fn m(self) -> Self; } impl Frobz for ~int { fn m(self) -> ~int { self } } let x = ~5; x.m()
[12:48:17] -rusti- ~5
[12:48:23] <doener> rusti: trait Frobz { fn m(self) -> Self; } impl Frobz for ~int { fn m(self) -> ~int { self } } let x = ~5 as ~Frobz; x.m()
[12:48:24] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/POPY
[12:48:37] <doener> ah, finally :-)
[12:49:10] <doener> is it expected that the method is found for ~int but not ~Frobz?
[12:49:30] <doener> rusti: trait Frobz { fn m(self) -> Self; } impl Frobz for ~int { fn m(self) -> ~int { self } } let x = ~~5 as ~Frobz; x.m()
[12:49:32] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/EAjB
[12:49:47] <doener> this was the actual error I meant to show...
[12:52:59] <dbaupp> rusti: trait Frobz { fn m(self) -> Self; } impl Frobz for ~int { fn m(self) -> ~int { self } } let x = ~~5 as ~Frobz; (*x).m()
[12:53:01] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/GWBj
[12:53:52] <MaikKlein> wow pretty crazy https://github.com/numenta/nupic
[12:53:53] <dbaupp> doener: yeah, I think that you can have a trait object impl if the methods have Self in their typees
[12:54:08] <dbaupp> doener: since the "Self" type information is lost in a trait object
[12:57:44] <doener> dbaupp: s/can/can't/ ?
[12:57:52] <dbaupp> doener: oh, right yes
[12:58:22] <doener> ok, so that's nothing to worry about WRT ByValueIfPossible
[13:00:51] <doener> rusti: trait Frobz { fn m(&self, x: Self); } impl Frobz for ~int { fn m(&self, x: ~int) { println(x.to_str()); } } let x: ~Frobz = ~~5 as ~Frobz; x.m(~~6 as ~Frobz)
[13:00:55] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/dWCO
[13:01:19] <doener> yup, that gives a better error message
[13:02:22] *** Quits: jensnockert (jensnocker@moz-217004C.mobileonline.telia.com) (Input/output error)
[13:04:29] *** Quits: victorporof (victorporo@7BA1BC15.46B7202A.D111398B.IP) (Ping timeout)
[13:04:56] *** Quits: keruspe (keruspe@moz-F2539FEC.imagination-land.org) (Ping timeout)
[13:05:27] *** Quits: dju (dju@moz-83BD5EC.dmz.me) (Ping timeout)
[13:05:55] *** Quits: tristram (tristram@moz-C498CC41.eu) (Ping timeout)
[13:09:11] *** Joins: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net)
[13:09:41] *** Joins: dju (dju@moz-83BD5EC.dmz.me)
[13:10:09] *** Joins: tristram (tristram@moz-C498CC41.eu)
[13:10:29] *** Joins: keruspe (keruspe@moz-F2539FEC.imagination-land.org)
[13:11:16] *** Joins: victorporof (victorporo@60FA9E67.483E5FE1.9B1E38F4.IP)
[13:11:25] *** Quits: untothebreach (paul@15A17709.47300931.30F15291.IP) (Quit: leaving)
[13:14:30] *** Quits: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr) (Quit: pyrac)
[13:16:04] *** Quits: jack (jack@8ABE2BFB.9F8380A1.A535BD55.IP) (Quit: Leaving.)
[13:16:58] *** Quits: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de) (Ping timeout)
[13:17:01] *** Joins: saml (sam@moz-14C16814.cst.lightpath.net)
[13:23:34] *** Joins: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP)
[13:24:56] *** Joins: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de)
[13:25:42] *** Quits: wuwei (wuwei@AEB9B9C2.818D7924.FAA9ED67.IP) (Ping timeout)
[13:27:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:27:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/gzspPg
[13:27:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:28:08] *** Joins: igl1 (igl@moz-8782C0CF.adsl.alicedsl.de)
[13:28:17] *** Quits: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de) (Ping timeout)
[13:28:17] *** Quits: igl (igl@moz-6AD5A569.adsl.alicedsl.de) (Ping timeout)
[13:30:14] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:33:24] *** Joins: snearch (snearch@moz-951068BE.pool.mediaways.net)
[13:35:34] *** Joins: Diamond (dick@moz-625C0DAF.ks.ok.cox.net)
[13:36:01] <emartin> i'm getting a bunch of "cannot borrow `(*r)[]` as immutable because it is also borrowed as mutable
[13:36:06] <emartin> " from this code cannot borrow `(*r)[]` as immutable because it is also borrowed as mutable
[13:36:29] <emartin> from this code: https://gist.github.com/anonymous/5713867 (on lines 26-29)
[13:39:33] <SiegeLord> Is there any plotting packages in Rust atm?
[13:39:34] *** Quits: bytbox (s@moz-D83E9B31.wireless.umd.edu) (Ping timeout)
[13:39:37] <SiegeLord> *Are
[13:42:50] *** Joins: bytbox (s@moz-D83E9B31.wireless.umd.edu)
[13:43:42] <dbaupp> emartin: try using temporaries for the pushes
[13:44:02] <emartin> what does that mean/involve?
[13:44:09] <dbaupp> emartin: i.e. let tmp = r[idx(i-2)] - quotient * r[idx(i-1)]; r.push(tmp);
[13:44:30] <dbaupp> emartin: the problem is the borrow checker doesn't treat this situation properly
[13:44:38] *** Quits: illissius (illissius@A518C422.3F1C0C4.3AEF08B3.IP) (Quit: )
[13:44:42] <dbaupp> rusti: let mut r = ~[1]; r.push(r[0]); r
[13:44:43] -rusti- ~[1, 1]
[13:44:44] *** Joins: int3_ (int3_@moz-ABE52D50.hsd1.ca.comcast.net)
[13:44:47] <dbaupp> hm
[13:44:58] <dbaupp> maybe not?
[13:45:11] *** Joins: wuwei (wuwei@1A513F49.818D7924.FAA9ED67.IP)
[13:46:02] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[13:46:14] <Blei> rusti: let mut r = ~[1]; while r.len() < 10 { r.push(1); }
[13:46:15] -rusti- ()
[13:46:19] <Blei> hmm
[13:46:26] <Blei> what's pdiv?
[13:46:52] <SiegeLord> Teehee: https://gist.github.com/SiegeLord/5713967
[13:46:58] <emartin> just a function i wrote, polynomial division
[13:47:16] <emartin> wrote that instead of operator overloading so I could use it for both division and modulus
[13:47:37] <dbaupp> emartin: there is a div_mod function on one of the traits, somewhere
[13:47:46] <dbaupp> (designed for exactly this purpose)
[13:47:47] <Blei> could you paste the declaration? maybe it's borrowing stuff
[13:47:58] <dbaupp> (although it doesn't give any operator overloadings.)
[13:48:52] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:48:52] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/WryI5Q
[13:48:52] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:48:52] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[13:48:53] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/7dKkPg
[13:48:53] <ghrust> 13rust/06auto 14b871c46 15Huon Wilson: syntax: Remove an unnecessary allocation.
[13:48:53] <ghrust> 13rust/06auto 14de3000a 15bors: auto merge of #6948 : huonw/rust/less-alloc, r=bstrie
[13:48:53] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[13:49:01] <emartin> Blei: https://gist.github.com/anonymous/5713988
[13:49:50] <Blei> hmm, that shouldn't be the problem
[13:50:30] *** Quits: seth_ (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[13:50:45] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[13:52:08] <doener> emartin: try: loop { if (r[idx(i)].degree() < stop= { break; } ... }
[13:52:11] <Blei> rusti: let mut r = ~[1]; while r.len() < 10 { r.push(r[0] + 1); } r
[13:52:12] -rusti- ~[1, 2, 2, 2, 2, 2, 2, 2, 2, 2]
[13:52:47] <Blei> rusti: let mut r = ~[1]; while r[r.len()-1] < 10 { r.push(r[r.len() - 1] + 1); } r
[13:52:50] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/OKRa
[13:53:25] <Blei> rusti: let mut r = ~[1]; r.push[r[0] + 1]; r
[13:53:26] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/XCFf
[13:53:32] <Blei> rusti: let mut r = ~[1]; r.push[r[0]]; r
[13:53:34] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YARC
[13:53:43] <dbaupp> rusti: let mut r = ~[1]; loop { if r[r.len()-1] < 10 { break; } r.push(r[r.len() - 1] + 1); } r
[13:53:44] <Blei> oh, sorry
[13:53:44] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/HEFK
[13:53:50] <Blei> rusti: let mut r = ~[1]; r.push(r[0]); r
[13:53:51] -rusti- ~[1, 1]
[13:53:56] <Blei> rusti: let mut r = ~[1]; r.push(r[0]-1); r
[13:53:57] -rusti- ~[1, 0]
[13:54:05] <Blei> rusti: let mut r = ~[1]; r.push(r.len()-1); r
[13:54:07] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/caUJ
[13:54:10] <Blei> aha
[13:54:15] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:54:38] <Blei> rusti: let mut r = ~[1]; r.push(r.len()); r
[13:54:39] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/JQDZ
[13:54:42] <dbaupp> rusti: let mut r = ~[1]; while r[r.len()-1] < 10 { let tmp = r[r.len() - 1] + 1; r.push(tmp); } r
[13:54:44] -rusti- ~[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
[13:55:00] *** wuwei is now known as wuwei|sleep
[13:55:07] *** Joins: tbrock (tbrock@34641662.FB4DE631.66C78B76.IP)
[13:55:12] <dbaupp> emartin: ok, it is the temporary variable thing
[13:55:13] *** Joins: berak (chatzilla@4F15D8E4.6062171A.1A5CC7E5.IP)
[13:55:25] *** kimundi is now known as zz_kimundi
[13:58:21] *** Parts: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net) (argh argh it's got my foot ar)
[13:58:28] *** Joins: Axord (xord@moz-C3CCF156.lsanca.dsl-w.verizon.net)
[13:59:17] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[14:02:08] *** Joins: scriptdevil (scriptdevi@moz-9E850855.xen.prgmr.com)
[14:02:46] <scriptdevil> Is there any reason the else in the final conditional in section 4.1 uses a return? I tried it without return and the example still worked.
[14:02:46] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: WeeChat 0.4.1)
[14:03:01] <scriptdevil> Section 4.1 of the tutorial in trunk
[14:04:16] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[14:04:48] *** Quits: emartin (emartin@moz-C3D4EEBF.caltech.edu) (Ping timeout)
[14:04:49] <dbaupp> scriptdevil: probably not. do you feel like fixing it and sending a pull request? :)
[14:06:42] <scriptdevil> dbaupp: Sure :)
[14:07:15] *** Joins: orshem (orshem@19491716.F0FDCE77.E3D28531.IP)
[14:09:43] *** Joins: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net)
[14:11:02] *** Parts: berak (chatzilla@4F15D8E4.6062171A.1A5CC7E5.IP) ()
[14:11:11] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[14:11:11] *** ChanServ sets mode: +o dherman
[14:14:40] *** Joins: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net)
[14:17:29] *** Quits: scriptdevil (scriptdevi@moz-9E850855.xen.prgmr.com) (Quit: leaving)
[14:23:25] <strcat> heh
[14:23:34] <strcat> this guy is still going on about C++ somehow being memory safe
[14:23:40] <strcat> http://www.reddit.com/r/programming/comments/1fkhwa/removing_garbage_collection_from_the_rust_language/cacjnd1
[14:23:53] <SiegeLord> He's just bitter his 2 C++ replacements failed
[14:29:19] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[14:30:29] *** Quits: annodomini (lambda@moz-9AC5B452.hsd1.ma.comcast.net) (Quit: annodomini)
[14:30:34] <SiegeLord> I remember he was so set on replacing C++ with his own creation, but nobody could agree what subset of C++ to keep... eventually he ended up creating a parser library and stopped there
[14:31:11] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[14:31:14] <SiegeLord> Given that, this C++ fanboyism is strange... either he had a VERY big change of heart, or he's trolling (I think the latter, imo :P)
[14:33:47] *** Quits: aruniiird (arun@92D70115.B332A52C.E3D0A897.IP) (Ping timeout)
[14:41:45] *** zz_kimundi is now known as kimundi
[14:42:39] <strcat> SiegeLord: http://www.reddit.com/r/programming/comments/1fkhwa/removing_garbage_collection_from_the_rust_language/cacjlk7?context=3 also apparently C++ somehow has pattern matching
[14:42:43] * strcat shrugs ;p
[14:43:23] <SiegeLord> Well, everybody misunderstands pattern matching at first
[14:45:39] <cmr> strcat: why are you bothering?
[14:45:52] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[14:45:52] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/7dKkPg
[14:45:52] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[14:46:03] <strcat> cmr: apparently other people find my comments interesting because I got ~250 upvotes for them in this thread ;p
[14:46:20] <Earnestly> cmr: Because https://xkcd.com/386/ , also, that ^ \o
[14:46:23] <strcat> he's spreading disinformation, I know he's not going to change his mind but other people will
[14:47:19] *** Quits: webber46 (webber46@moz-AC14FDEA.se) (Quit: webber46)
[14:50:02] *** Joins: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de)
[14:50:52] <dbaupp> strcat: I have a little feeling a quite a few of those upvotes are from "preaching to the converted", i.e. people who are already rusties. :P
[14:51:11] <cmr> there are that many rusties/
[14:51:54] <dbaupp> well, strcat's made quite a few comments
[14:52:19] <strcat> I'm not going to reply to axilmar anymore ;p
[14:52:28] <strcat> he keeps posting nonsense as replies to stuff I wrote
[14:52:57] <dbaupp> I can't quite believe that axilmar thought that "modifying a data structure" didn't include adding/removing elements from a collection that it stores
[14:53:23] <dbaupp> strcat: yeah, there's always one person who doesn't know what they're blabbering about :/
[14:53:50] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[14:53:54] <SiegeLord> Oh wait... 2 was a great under-estimate... he also proposed a new language back in 2004
[14:54:33] <dbaupp> SiegeLord: axilmar has a reputation?
[14:54:56] <SiegeLord> Well... over at my forums (and in principle there's a chance it's a different person with the same nick)
[14:55:03] <MaikKlein> what are you talking about? Did I miss sth important?
[14:55:20] *** Joins: brendan (brendaneic@moz-825E629B.sub-70-211-69.myvzw.com)
[14:56:09] <cmr> LLVM 3.3 being released today supposedly
[14:56:27] <dbaupp> MaikKlein: http://www.reddit.com/r/programming/comments/1fkhwa/removing_garbage_collection_from_the_rust_language/cab8ezu
[14:56:34] <dbaupp> that whole comment thread
[14:56:36] <SiegeLord> Just glance at this list and try to reconcile them with the Reddit posts: https://www.allegro.cc/forums/thread/608160/0
[14:56:44] <dbaupp> specifically "axilmar"'s comments
[14:58:27] *** Quits: novabyte (Instantbir@moz-9B83A1F0.mullvad.net) (Quit: bye bye)
[14:59:16] <dbaupp> SiegeLord: they sound almost reasonable there
[15:00:47] <dbaupp> "The first and most important goal is safety. The second goal is performance." isn't that essentially exactly Rust?
[15:01:09] *** Joins: biz (BizarreCak@32C9829A.151E84E7.561471F8.IP)
[15:01:44] <strcat> SiegeLord: yeah but he still seems to think there's a reasonable memory safe subset
[15:01:56] <strcat> and there isn't, because you need references/iterators or your code is going to be slower than Java anyway
[15:02:11] <strcat> if you use std::shared_ptr whenever you need a reference...
[15:02:21] <strcat> shared_ptr is ridiculously slow.
[15:02:42] *** Joins: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu)
[15:02:46] <SiegeLord> I hope he wouldn't disagree that it'd be slower than the "unsafe C++"
[15:03:02] <dbaupp> cmr: I was just thinking, the lz4 change will probably make the test suite run (much?) faster
[15:03:09] <dbaupp> cmr: which'd be nice
[15:03:17] *** Quits: BizarreCake (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Quit: Leaving)
[15:03:22] <cmr> dbaupp: yes
[15:03:29] *** Quits: biz (BizarreCak@32C9829A.151E84E7.561471F8.IP) (Quit: Leaving)
[15:03:32] <cmr> speaking of lz4, I just got it woring :)
[15:03:42] *** Joins: seth_ (seth@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net)
[15:03:47] <MaikKlein> I never understand why ppl are trolling 24/7
[15:03:48] <dbaupp> no crashes? :D
[15:03:52] <strcat> SiegeLord: the problem is he can't use a single existing library that way, since everyone uses references/iterators
[15:04:12] <SiegeLord> That's an argument against "just use a subset" in general
[15:04:16] <cmr> nope
[15:04:18] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[15:04:23] <strcat> it's not really a language that exists (C++ with only stack allocation, unique pointers and shared_ptrs - no references/iterators)
[15:04:34] <cmr> decompressing is now 9th for an empty file (fn main() {})
[15:04:43] <cmr> 2.37%, instead of ~20%
[15:04:47] <dbaupp> cmr: it was first before?
[15:04:49] *** Quits: doener (bs@moz-AA189A5A.unitymedia.biz) (Quit: leaving)
[15:04:50] <cmr> dbaupp: yeah
[15:05:26] <friggle> nice
[15:05:41] <strcat> SiegeLord: I guess you could write your iterators with shared_ptr too... and reference them from the container
[15:05:50] <strcat> a vector of 'checked out' iterators
[15:06:01] <dbaupp> cmr: awesome!
[15:06:15] <strcat> anyway if you did stuff like that you'd have a much slower language than java/ocaml/haskell anyways.
[15:06:28] *** Quits: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP) (Quit: Leaving.)
[15:07:19] <cmr> haskell is slow? I thought it was among the faster ones
[15:08:11] <friggle> no, all of java/haskell/ocaml give pretty decent performance as long as your code fits in with their optimisation strategies
[15:08:51] <moonchrome> friggle, Java/JVM doesn't even have value types outside of it's primitives 
[15:09:17] <dbaupp> moonchrome: it's still fast, because the JVM's JIT is amazing
[15:09:18] <moonchrome> decent performance is very loose term with just that fact in mind
[15:09:44] <moonchrome> JIT can't save you from million tiny allocations of Point like objects
[15:10:08] <strcat> cmr: ocaml is basically as fast as C++ outside of allocation
[15:10:25] <dbaupp> moonchrome: http://benchmarksgame.alioth.debian.org/u64q/java.php
[15:10:35] <dbaupp> moonchrome: it's within 2x for all of them
[15:11:03] <cmr> look at that nasty memory consumption though
[15:11:08] <dbaupp> moonchrome: I've heard that the JVM also has an amazing allocator (and corresponding GC) too
[15:11:39] <caitp> what does the backlog parameter actually do in std::net_tcp::listen?
[15:11:44] <dbaupp> (this shouldn't be taken as me advocating Java/the JVM though. heh.)
[15:11:53] <cmr> caitp: see listen(2)
[15:12:04] <strcat> cmr: haskell is *relatively* fast compared to a scripting language but it takes a special case or convoluted code to get it to the 2-3x range in the benchmarks game
[15:12:06] <cmr> caitp: it's how many pending connections there will be before connectionsa re refused
[15:12:07] <moonchrome> dbaupp, it does, and you can fine tune it a lot, but there are limits because of JVM design
[15:12:23] <MaikKlein> but are those microbenchmarks really meaningful?
[15:12:24] <strcat> cmr: just look at the examples ;p, it's mostly all procedural ST code with unsafe indexing, etc.
[15:12:29] <strcat> MaikKlein: no
[15:12:33] <caitp> i don't remember libc's listen() having a backlog parameter
[15:12:35] <caitp> weird
[15:12:54] <caitp> well that works
[15:13:16] <strcat> MaikKlein: they don't demonstrate the cost of language features since they are just hardcoded, small programs not using generics or anything
[15:13:28] <strcat> binary trees is supposed to be a gc benchmark and they all just use an arena
[15:13:30] <SiegeLord> It's too bad Rust's benchmark game entries also use unsafe in spots
[15:13:41] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[15:13:53] <MaikKlein> why isn't rust in there?
[15:14:05] <SiegeLord> It's too bad that benchmark game website even exists :P
[15:14:06] <MaikKlein> I know that rust has those benchmarks
[15:14:19] *** Joins: lmandel (lmandel@FE1F74.86ED00A7.971E19F6.IP)
[15:16:27] <MaikKlein> well doesn't really matter anyway
[15:17:29] *** Quits: lucian_ (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[15:17:32] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[15:19:31] <moonchrome> since rust can guarantee that a peace of data is immutable type GCImmut<T> proves that there are no cycles in T (just like Rc) - but if you can only access objects allocated in GCImmut trough that type then you also have encapsulated all mutable references from your program - this should make pause times to get consistent state minimal  and GC fully parallelizable trivially
[15:20:06] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[15:20:13] <moonchrome> something like Clojure immutable collections + this sort of GC = almost pauseles fully parallel shared GC for immutable types
[15:20:22] <dbaupp> moonchrome: well, GC pointers are task-local
[15:20:34] <moonchrome> dbaupp, I'm talking about a custom GC
[15:20:45] <moonchrome> that you could build because of type guarantees in rust
[15:20:52] <moonchrome> and ownership
[15:21:35] <strcat> moonchrome: there are non-Const objects so you can have cycles in an immutable pointer type
[15:21:51] <dbaupp> it's possibly to have a mutable object in the "reference tree" of an immutable object
[15:22:10] <moonchrome> strcat, but you limit that by design
[15:22:30] <moonchrome> only allowing immutable types inside this GC
[15:23:15] <Thiez> free compiler ICE, so nice with the sun shining
[15:23:57] <moonchrome> it would essentially give you all clojure persistent data structures + atoms to work with shared memory - no need for silly ARC
[15:25:07] <EXetoC> meep meep
[15:25:34] <dbaupp> Thiez: can I have one too? ;P
[15:26:26] <Thiez> dbaupp: is there any particular flavour you prefer?
[15:26:38] <Thiez> I hear iterator-ice is popular this summer
[15:26:59] <dbaupp> sounds good! I'll take 2
[15:27:03] *** Quits: ivan (ivan@moz-531C3EC9.members.linode.com) (Ping timeout)
[15:27:29] *** Quits: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de) (Ping timeout)
[15:29:04] * Thiez crashes the compiler twice.
[15:29:15] <Thiez> here, have some :p
[15:29:52] <Thiez> little more serious, I think I've found a new way to crash it just now, hope I can get a smaller example
[15:30:48] <Thiez> it crashes in typeck check regionck regionck_fn, I don't think I've seen that one yet :p
[15:31:34] *** Joins: bent (chatzilla@moz-BE33DA21.fw1.sfo1.mozilla.net)
[15:32:01] <strcat> Thiez: I have, but I don't think I reported it yet
[15:32:22] *** Joins: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net)
[15:32:24] <strcat> there are at least 2-3 type inference bugs it runs into, weird region bugs and method resolve issues
[15:32:45] *** Joins: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com)
[15:32:46] <strcat> luckily it still works 90% of the time :)
[15:32:48] *** Quits: \n (NDesaulnie@moz-C2B49FFE.hsd1.ca.comcast.net) (Quit: \n)
[15:32:48] <Thiez> will explicitly stating the types help?
[15:33:00] <strcat> Thiez: for the type inference bugs it does
[15:33:03] <strcat> not for regions, afaik
[15:33:28] *** Joins: ivan (ivan@moz-531C3EC9.members.linode.com)
[15:34:09] <kimundi> strcat: Btw I found that replacing iter::to_vec gets... ugly.
[15:34:41] <kimundi> Like, iter::FromIter::from_iter::<T, ~[T]> ugly
[15:34:55] <Thiez> I'll &'static everything! :p
[15:35:27] <strcat> kimundi: why do you need hints to it?
[15:35:58] <strcat> it should just be 'let x: ~[T] = FromIter::from_iter(it)' since it'll be in prelude
[15:36:20] <kimundi> It seems that it doesn't pick up the hints from the iterator closure you're passing
[15:36:37] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[15:37:57] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[15:37:57] <strcat> kimundi: sounds like a bug then
[15:38:07] <kimundi> To be honest I didn't try much to get it to work yet, try-and-error takes way to long for modification to the testsuite
[15:39:14] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[15:39:22] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[15:42:28] *** Joins: eholk (eholk@moz-4CCE9748.uconnect.utah.edu)
[15:43:12] <Thiez> look familiar? rust: task failed at 'ty_fn_sig() called on non-fn type: &ty_err', /home/thiez/sources/rust/src/librustc/middle/ty.rs:2853
[15:43:19] <strcat> nope
[15:43:25] <caitp> does rust have anything wrapping gethostbyname or something? I don't see such a routine in net_ip
[15:43:45] *** Joins: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de)
[15:43:46] <strcat> caitp: no, but gethostbyname is deprecated
[15:44:00] <strcat> supposed to use getaddrinfo or something now ;p
[15:44:13] * strcat forgets the details
[15:44:23] <caitp> the question is if there is any sort of name resolution routine
[15:44:28] <strcat> caitp: no, I don't think so
[15:44:36] <caitp> that's too bad, ah well
[15:44:53] <dbaupp> caitp: you could look at how https://github.com/mozilla-servo/rust-http-client handles networking
[15:45:17] <dbaupp> (no idea if it's actually helpful, but it seems like it's possibly in the same space as whatever you're doing :) )
[15:46:03] <dbaupp> also, https://github.com/mozilla/servo/tree/master/src/components/net
[15:47:27] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[15:50:22] *** Quits: brendan (brendaneic@moz-825E629B.sub-70-211-69.myvzw.com) (Quit: brendan)
[15:54:40] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[15:55:06] *** Quits: Benvie (brandon@5FD20F9A.53D07D95.EFF8B7BF.IP) (Quit: )
[15:57:12] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[15:57:51] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:57:51] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/MarlQg
[15:57:51] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:57:51] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[15:57:51] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/sHpcEA
[15:57:51] <ghrust> 13rust/06auto 144936421 15Ramkumar Ramachandra: contributing: wrap lines for readability...
[15:57:51] <ghrust> 13rust/06auto 1438b1d60 15bors: auto merge of #6952 : artagnon/rust/contributing-wrap, r=bstrie...
[15:57:51] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[15:58:37] *** Joins: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP)
[15:58:49] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:00:15] *** Quits: dbaupp (Thunderbir@moz-C6B1454A.lns20.syd7.internode.on.net) (Ping timeout)
[16:00:39] *** Joins: Blei (philipp@moz-96D25F7A.cust.bluewin.ch)
[16:01:17] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[16:08:45] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Connection reset by peer)
[16:09:28] *** Joins: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk)
[16:11:12] *** Joins: frogonia (Mibbit@moz-D3D15A0C.vie.surfer.at)
[16:12:35] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[16:13:42] *** jdm is now known as jdm|away
[16:17:39] *** Joins: mib_5nfde2 (Mibbit@moz-244CF33A.amazon.com)
[16:17:55] *** Quits: mib_5nfde2 (Mibbit@moz-244CF33A.amazon.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:18:21] <bblum> hmm, uh oh
[16:18:39] <bblum> since mutable struct fields went away, cant_nest: () in RWARCs now doesn't make it non-Const
[16:18:58] *** Joins: mattin (user@9E32F7E8.DC7A989C.7F8AB798.IP)
[16:19:04] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[16:19:24] <strcat> bblum: I added #[mutable] and #[non_owned] though
[16:19:29] <strcat> bblum: I guess you can remove that
[16:19:47] * strcat didn't understand why it was there, makes sense now that it was a mut field
[16:19:58] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Input/output error)
[16:20:23] <bblum> strcat: oh thank you
[16:20:28] <strcat> anyway ARCs are "Owned" (we should really rename that to Send again...)
[16:20:38] <bblum> yeah i liked Send
[16:20:41] <bblum> but, i don't see where your #[mutable] tag is?
[16:20:59] <bblum> i see that UnsafeAtomicRcBox has a *mut pointer in it, which should save us
[16:21:44] <strcat> bblum: RWARC itself has #[mutable] so I don't think that will matter
[16:22:05] <bblum> oh, there it is
[16:22:06] *** Joins: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr)
[16:22:21] <bblum> anyway i remembered i also put a compile-fail for trying to nest time
[16:22:24] <bblum> *them
[16:22:39] <strcat> bblum: ah so the *mut must have kept it non-Const
[16:22:50] <bblum> as did the #[mutable] which i now see :P
[16:23:04] <strcat> bblum: well I added that long after mut fields were rm'ed :)
[16:23:12] <strcat> it was for extra::rc
[16:23:13] <bblum> i see
[16:23:33] <strcat> I didn't really think about whether the *mut made it non-Const...
[16:23:45] <bblum> probably nobody did
[16:24:26] <bblum> do we have priv struct fields/
[16:24:27] <bblum> ?
[16:24:33] <strcat> bblum: yeah
[16:24:56] *** Quits: sk (sk@EA324BFE.54A580E3.78DD174B.IP) (Quit: Leaving)
[16:26:01] <bblum> is there a way to do the opposite of #[mutable], give something the Const kind that wouldn't otherwise have it?
[16:26:09] <strcat> bblum: no, I don't think so
[16:26:15] <bblum> it would obviously be unsafe
[16:26:19] <bblum> but ARC<T> should have it
[16:26:20] <kimundi> Got a strange error while running make check and reaching the rust tool:
[16:26:20] <kimundi> compile_and_link: x86_64-unknown-linux-gnu/stage1/test/rusttest-x86_64-unknown-linux-gnu
[16:26:20] <kimundi> error: linking with `cc` failed with code 1
[16:26:23] <strcat> I mostly added #[mutable] to stop Cell from being a workaround way to make cycles in ARC/Rc
[16:26:36] * strcat hates Cell ;p
[16:26:43] <bblum> yeah, Cell is gross
[16:26:54] <bblum> ~mut Option<T> was less concise but considerably more honest
[16:27:00] <strcat> + I needed non_owned to make Rc/RcMut non-sendable
[16:27:08] <bblum> nod
[16:27:32] *** Quits: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se) (Ping timeout)
[16:27:34] <strcat> and there are probably a lot of C binding refcounted things like gobject that need it
[16:27:54] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[16:28:12] * strcat wonders if gtk/qt are even really safely usable right now...
[16:28:26] <strcat> I think you have to keep event handling in a single thread?
[16:28:37] * strcat shrugs
[16:28:51] <strcat> I guess that's what the pluggable event loop would accomplish
[16:28:57] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[16:29:03] *** Quits: frogonia (Mibbit@moz-D3D15A0C.vie.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[16:29:39] *** Joins: bjz (brendanzab@B398BE78.F804C29E.D35A31DF.IP)
[16:30:45] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[16:30:56] <bblum> i was trying to think of whether i could get failure-in-destructors-during-failure to result in coerce(A)->B, not just the obvious memory leaks
[16:31:10] <bblum> i realized i could do it with RWARC.write_cond
[16:31:41] *** Joins: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP)
[16:31:49] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[16:33:02] *** Quits: mib_xrwa7m (Mibbit@moz-A0E225F0.avcosystems.co.uk) (Quit: http://www.mibbit.com ajax IRC Client)
[16:33:36] <strcat> bblum: hm, are ARCs a hole in the only-owned-things-have-destructors rule? or is that just related to managed boxes specifically
[16:34:21] <cmr> r? https://github.com/mozilla/rust/pull/6954
[16:34:22] <bblum> it uses #[unsafe_destructor]
[16:34:24] <bblum> strcat: ^
[16:34:43] <strcat> bblum: I mean you can include an ARC in a struct and impl Drop on it
[16:35:00] <bblum> you... can?
[16:35:11] <strcat> afaik yes, because it's Owned - sec
[16:37:12] <strcat> rusti: extern mod extra; struct Foo { x: extra::arc::RWARC<int> } impl Drop for Foo { fn finalize(&self) {} } true
[16:37:14] *** Joins: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP)
[16:37:14] -rusti- foo.rs:10:9: 10:26 error: "extern mod" declarations are not allowed here
[16:37:15] -rusti- foo.rs:10          extern mod extra; struct Foo { x: extra::arc::RWARC<int> } impl Drop for Foo { fn finalize(&self) {} } true
[16:37:15] -rusti-                    ^~~~~~~~~~~~~~~~~
[16:37:15] -rusti- error: aborting due to previous error
[16:37:15] -rusti- application terminated with error code 101
[16:37:24] <strcat> rusti: struct Foo { x: extra::arc::RWARC<int> } impl Drop for Foo { fn finalize(&self) {} } true
[16:37:26] -rusti- true
[16:37:31] <strcat> bblum: is that bad? ^
[16:37:36] <bblum> that's not bad, no
[16:37:43] <bblum> just curious that it's the case
[16:37:48] <benh> it sounds weird that they're owned though
[16:37:52] *** Joins: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net)
[16:38:02] <strcat> they're not owned, they're Owned :)
[16:38:03] <strcat> Owned is silly
[16:38:14] <benh> :)
[16:38:18] <strcat> unrelated to whether something is owned.
[16:38:29] <strcat> correlated, I guess ;p
[16:39:14] *** Quits: Ralith (ralith@moz-50F3C77.vc.shawcable.net) (Ping timeout)
[16:40:44] <bblum> finally lets you use non-owned things in destructors, right?
[16:40:54] <bblum> with the interface restriction that it stays on your stack frame or something
[16:42:00] <bblum> if so, then finally + rwarc + condvar should be able to implement coerce
[16:42:29] <bblum> (the goal here is to produce a motivator for an effect system which can prevent destructors from failing a 2nd time)
[16:44:01] *** Quits: snearch (snearch@moz-951068BE.pool.mediaways.net) (Quit: Verlassend)
[16:44:18] <MaikKlein> wow I have written my first functional java code
[16:44:41] *** Quits: wuwei|sleep (wuwei@1A513F49.818D7924.FAA9ED67.IP) (Ping timeout)
[16:44:46] <mleise> O.o _functional_ style?
[16:44:59] <MaikKlein> yes http://pastebin.com/NDvXCG5M
[16:45:47] <strcat> not very functional if it mutates stuff ;p
[16:45:52] <MaikKlein> :D
[16:46:15] <bstrie> I demand homoiconic java
[16:46:42] <bstrie> wait I guess I'm describing closure
[16:46:47] <bstrie> er, clojure
[16:47:24] <bstrie> John Carmack â€@ID_AA_Carmack 1h
[16:47:26] <MaikKlein> is rust homoiconic?
[16:47:26] <bstrie> The lack of strong typing in lisp is freaking me out, even in tiny programs. Writing an industrial program like this seems... unsound.
[16:47:47] <bstrie> MaikKlein: http://calculist.org/blog/2012/04/17/homoiconicity-isnt-the-point/
[16:48:13] <MaikKlein> ok I think I need to translate the word into my language first
[16:48:50] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[16:48:50] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/sHpcEA
[16:48:50] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[16:49:12] <MaikKlein> weirdest word I have ever seen to be honest
[16:50:07] <bstrie> MaikKlein: thanks, now I have to spend my entire lunch break thinking of weirder words
[16:50:48] <MaikKlein> :)
[16:51:38] <cmr> r? https://github.com/mozilla/rust/pull/6954
[16:56:34] *** Joins: mr_trousers (Mibbit@moz-2B578ECB.w90-52.abo.wanadoo.fr)
[16:56:45] *** Quits: mr_trousers (Mibbit@moz-2B578ECB.w90-52.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[16:57:12] *** Joins: jclements (jclements@moz-20AD2EFB.dsl.static.sonic.net)
[16:58:35] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[16:59:32] *** Quits: MaikKlein (maik@moz-C2C01F77.dip0.t-ipconnect.de) (Ping timeout)
[16:59:55] <adu> what word?
[17:00:03] <cmr> adu: homoiconic
[17:00:14] *** Quits: pnkfelix (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Quit: Leaving.)
[17:00:55] <orshem> sorry to barge in like this, but reading the conversation I'm getting confuse..r by the second
[17:00:56] <adu> ah
[17:01:01] <orshem> what's the difference between Owned Send Const Non_mutable, and why are some trait and some attributes?
[17:01:15] <orshem> is there a venn diagram of the possible legal combination and their meanings? :)
[17:01:28] <adu> my definition of homoiconic is that a parser is builtin to the language's core library
[17:01:59] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:02:02] *** Quits: cyndis (cyndis@moz-FA10A1CD.fi) (Client exited)
[17:02:31] <adu> so JavaScript is not homoiconic, but Python is because of ast.parse
[17:02:47] <strcat> orshem: Send doesn't exist anymore
[17:02:58] <strcat> Owned means sendable, and should really be renamed to Send again
[17:03:18] <strcat> Const means it inherits mutability or is immutable
[17:03:39] <strcat> that's all - they're 2 traits, #[mutable] and #[non_owned] are for unsafe code to disable them when the compiler doesn't know
[17:03:45] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:04:01] <adu> and if that's what libsyntax is, then rust is homoiconic with my definition
[17:04:25] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:04:38] <kimundi> adu: Isn't every sefhosting language homoiconic then?
[17:04:49] <kimundi> self*
[17:05:04] <adu> kimundi: not necessarily, only if the parsing library is exported by default
[17:05:35] <strcat> afaik it has to be accessible during runtime?
[17:05:40] <adu> yes
[17:06:01] *** Quits: z0w0 (zack@moz-91043B9D.lns10.woo.bigpond.net.au) (Client exited)
[17:06:07] <strcat> well I don't see how rust is then, you can't modify the AST at runtime of existing code
[17:06:14] *** Quits: davbo (dave@moz-3FFA637C.oucs.ox.ac.uk) (Client exited)
[17:06:27] <adu> the magic of lisp is in (read), if you had to write your own read, or install your own read, then it wouldn't be magic
[17:06:28] <strcat> and change behaviour of that code
[17:07:08] <strcat> adu: the magic is that the existing code is represented as that data structure at runtime and can be modified, isn't it?
[17:07:49] <orshem> strcat: Thanks. learing Rust is fun. there us so much I barely understand!
[17:07:52] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[17:08:02] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:08:02] *** ChanServ sets mode: +o pcwalton
[17:08:05] <jclements> you might want to have a look at dave herman's post, "homoiconicity isn't the point": http://calculist.org/blog/2012/04/17/homoiconicity-isnt-the-point/
[17:08:11] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[17:08:19] <adu> jclements I've been reading it
[17:08:38] <jclements> adu: ah! perhaps I missed the early part of this conversation, sorry.
[17:09:11] *** Joins: tikue (tkuehn@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:09:19] *** Joins: jviereck (Adium@moz-5F34B228.ethz.ch)
[17:09:58] <adu> ok, suppose you wanted to define your own versions of try/catch/finally
[17:10:19] <adu> in rust, can those be implemented as ! functions?
[17:10:29] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:10:31] <cmr> you mean macros?
[17:10:42] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[17:10:55] <bblum> hm oh wait, maybe i can't
[17:10:58] <strcat> adu: no, you can't define them
[17:11:14] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[17:11:22] <adu> the fmt! type thing
[17:11:31] <strcat> syntax extensions output a valid rust AST
[17:11:38] <strcat> anything you do has to be possible in rust already
[17:11:44] <strcat> and failure can only be caught at a task boundary
[17:12:15] <adu> strcat: do you mean a function boundary?
[17:12:20] <strcat> no, a task boundary
[17:12:28] <adu> ok, what's a task?
[17:12:32] <strcat> a thread, basically
[17:12:33] <cmr> Lightweight thread
[17:12:35] <adu> oh
[17:12:51] <cmr> http://static.rust-lang.org/doc/core/task.html
[17:12:52] <adu> now, what's a task boundary?
[17:12:57] <strcat> failures are unrecoverable errors (within a task)
[17:13:04] <strcat> adu: the parent task has to catch it
[17:13:06] <kimundi> rusti: if true { fail!("Nothing can stop me now!") }
[17:13:08] <strcat> a task can't can't a failure in itself
[17:13:10] -rusti- rust: task failed at 'Nothing can stop me now!', foo.rs:9
[17:13:10] -rusti- rust: domain main @0xd031b0 root task failed
[17:13:11] -rusti- application terminated with error code 101
[17:13:32] *** Joins: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net)
[17:13:37] <adu> interesting
[17:13:52] <strcat> objects don't have to make things that can fail transactional. there's no need for exception safety beyond calling destructors (which is done as unwinding happens)
[17:14:01] <adu> so you're saying that try/catch/finally is the one syntax extension that you can't write
[17:14:16] <strcat> not *the* one, just one
[17:14:20] <pcwalton> you can do it monadically :)
[17:14:49] <adu> what if try launches a new task?
[17:14:59] <pcwalton> that works
[17:15:00] <cmr> adu: http://static.rust-lang.org/doc/core/task.html#function-try
[17:15:08] <kimundi> rusti: do std::task::try { if false { fail!("Nothing can stop me now!") }; 42_u8 }
[17:15:10] -rusti- Ok(42)
[17:15:17] <kimundi> rusti: do std::task::try { if true { fail!("Nothing can stop me now!") }; 42_u8 }
[17:15:19] -rusti- rust: task failed at 'Nothing can stop me now!', foo.rs:9
[17:15:19] -rusti- Err(())
[17:15:56] *** Joins: solancile (solancile@moz-A1CFFAE5.hsd1.wa.comcast.net)
[17:15:57] <adu> cmr: so you're saying that it is possible after all?
[17:16:10] <kimundi> adu: That spawns a new task
[17:16:28] *** Joins: cyndis (cyndis@moz-FA10A1CD.fi)
[17:17:22] <kimundi> adu: Basically, a task either succcedes or fails, and you can spawn tasks and query if they did fail or not
[17:17:27] <adu> so is it possible to define mytrycatch!({â€¦}, |err| {â€¦});
[17:18:19] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[17:18:39] <kimundi> adu: That has the BIF advantage that you only have to write your code in a way where it either succedes, or fails. The problem with try/catch is the _catch_, aka the ebility to resume the code after it failed
[17:19:29] <kimundi> adu: Yeah, it's just kinda expensive to use, so not really a replacement
[17:19:36] <strcat> adu: match std::task::try(foo) { Ok(result) => ..., Err(_) => ... } is what's there
[17:20:02] <strcat> they can't currently actually return an error atm, failure isn't useful for handling expected errors at all
[17:20:25] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[17:20:39] <adu> hmm ok, well that was an educational example
[17:20:52] <strcat> lots of applications probably just want to replace unwinding with abort
[17:21:26] <cmr> adu: there's also the condition system
[17:21:32] <strcat> they aren't useful as much more than asserts if your destructors don't have external effects and you don't catch them in parent tasks
[17:21:42] <adu> cmr: condition system?
[17:22:32] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[17:22:37] <kimundi> adu: conditions look a bit like exceptions, but have an important difference
[17:23:00] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[17:23:08] *** Joins: eschweic (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:23:15] <adu> kimundi: which is?
[17:23:23] <Blei> (and are currently not working cross crate iirc)
[17:23:48] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[17:24:06] <adu> i see
[17:24:13] <kimundi> adu: They don't 'throw'. Instead if a condition is raised they can substitude an replacement value directly in place of the function that is currently in process of causing an error
[17:24:16] <strcat> Blei: they're also unsound...
[17:24:34] *** bent is now known as bent|away
[17:24:40] <Blei> strcat: how so?
[17:24:52] <strcat> Blei: they let you break the borrow checking rules
[17:25:33] <Blei> really? i should reread how they work once more
[17:25:41] *** Joins: james4k (james@moz-726FE3EE.com)
[17:25:50] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[17:25:55] <strcat> https://github.com/mozilla/rust/issues/6459
[17:26:10] <strcat> well I guess it's just because closures are unsound
[17:26:14] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[17:26:20] *** Quits: victorporof (victorporo@60FA9E67.483E5FE1.9B1E38F4.IP) (Quit: victorporof)
[17:26:28] *** Quits: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP) (Ping timeout)
[17:26:31] <adu> strcat: what?
[17:27:15] <strcat> rust's current implementations of closures and conditions aren't memory safe
[17:27:36] <strcat> known problems with it that are going to be fixed
[17:28:28] <Blei> cmr: is there a noticeable speed difference when using lz4?
[17:30:31] <kimundi> what's this lz4?
[17:32:16] *** jdm|away is now known as jdm
[17:32:49] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: Computer has gone to sleep.)
[17:34:13] <kimundi> Or rather, where is lz4 used in rust that it would speed up the testsuite?
[17:34:29] <bstrie> compressing the metadata
[17:34:31] <Yoric> Oh, lz4 is already in rust?
[17:34:44] <Yoric> We are still attempting to add it to Gecko :)
[17:34:48] <bstrie> no, now we use deflate
[17:34:50] <kimundi> ah, okay. Guessed as much.
[17:36:12] *** Quits: judder (maradukewa@385DDD8F.206937E4.78E362FE.IP) (Ping timeout)
[17:36:51] <jclements> pcwalton: have any time this morning to read my patch?
[17:37:01] <pcwalton> jclements: link?
[17:37:15] <jclements>  https://github.com/mozilla/rust/pull/6938
[17:40:03] *** Quits: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net) (Client exited)
[17:40:15] *** Joins: parcha (quassel@moz-A9A9F340.hsd1.ma.comcast.net)
[17:40:36] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[17:41:56] *** Quits: jviereck (Adium@moz-5F34B228.ethz.ch) (Quit: Leaving.)
[17:44:23] *** Joins: \n (NDesaulnie@moz-BE33DA21.fw1.sfo1.mozilla.net)
[17:48:30] <pcwalton> jclements: r+, but we'll need a high-level description of the hygiene algorithm in there somewhere :)
[17:48:36] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[17:48:36] *** ChanServ sets mode: +o brson
[17:48:52] <jclements> pcwalton: you betcha.
[17:49:06] *** Joins: Ralith (ralith@moz-3767A14F.wireless.sfu.ca)
[17:51:37] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:51:46] <jclements> pcwalton: do you want that in there before the pull request goes in?
[17:51:52] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[17:52:02] *** Quits: Yurume (yurume@AC58A8CE.8A059B47.E313B915.IP) (Connection reset by peer)
[17:52:55] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[17:56:20] *** Joins: dherman (dherman@2557E599.66715431.D25A875A.IP)
[17:56:20] *** ChanServ sets mode: +o dherman
[17:57:20] <pcwalton> jclements: it's fine as is
[17:57:53] <pauls> hygiene is approaching?!?! \o/
[18:00:13] *** Joins: carter (carter@moz-BDFE46F6.nyc.biz.rr.com)
[18:00:33] *** Joins: jyeo (user@F2D29657.F60B0462.67AC9B1.IP)
[18:01:37] *** Quits: KindOne (KindOne@moz-65B0B365.dynamic.ip.windstream.net) (Ping timeout)
[18:02:22] <bblum> sup pauls
[18:02:46] <pauls> bblum: I gotta go to a meeting now! Bye!
[18:02:53] <bblum> :O
[18:03:08] *** Joins: jensnockert (jensnocker@moz-8BE55278.customer.t3.se)
[18:05:30] <sully> something is funny with unused import warnings.
[18:06:18] *** Quits: Amanieu (amanieu@moz-D5D10CA8.halls.manchester.ac.uk) (Ping timeout)
[18:06:19] *** Joins: KindOne (KindOne@moz-74BCFC6C.dynamic.ip.windstream.net)
[18:07:17] <jclements> brson: has anything changed about the makefiles w.r.t. make install, recently? It's complaining that it can't find the needed .mk files from my "build" subdirectory.
[18:08:20] <Thiez> I don't suppose we have a coverage tool for rust?
[18:08:52] <Thiez> would be interesting to see which parts of the code are never used when compiling the compiler, the libraries, and all the tests
[18:09:13] <Thiez> might help identifying legacy cruft
[18:09:26] <brson> jclements: I don't think so. can you gist the error?
[18:09:37] <bblum> Thiez: that sure would be nice
[18:09:57] <bstrie> Thiez: write one and call it "zinc"
[18:10:19] <jclements> brson: yep: https://gist.github.com/jbclements/5715905
[18:10:20] <bblum> hmm, the effects paper totally punts on the issue of flow-control-based effects
[18:10:28] <bblum> which i was planning to do as well but i hoped they would do better
[18:10:39] <moonchrome> bjz, I'm looking over lmath-rs - why do you define all these traits like BaseVec<T> - is there anywhere where polymorphism is actually useful on vec2/3/4 types 
[18:11:12] <moonchrome> bjz, especially since you can't parametrize dimensions with rust generics
[18:11:13] <bblum> (e.g. "fn get_default(opt: Option<T>, default: T) -> T { if opt.is_none() { default } else { opt.get() } }")
[18:11:29] <bblum> (to a human's eyes, obvious that it can't fail)
[18:11:39] <Blei> bikeshedding time: how to best mangle < and > when you have the following characters available: a-z, A-Z, 0-9, _, ., $
[18:11:57] <bblum> Blei: $lt and $gt
[18:12:08] <Blei> so far i'm using _lt_ and _gt_ but that doesn't balance out nicely
[18:12:12] <bblum> season with underscores to taste
[18:12:18] <Blei> s/nicely/visually/
[18:12:26] <jclements> Blei how about _L_ and _7_ ?
[18:12:35] <SiegeLord> Nice
[18:12:42] <Blei> jclements: cool idea!
[18:12:47] <jclements> somewhat juvenile, I admit ...
[18:12:51] <EXetoC> win
[18:12:56] <bblum> xXx_L3Ss_Th4n_2013_xXX
[18:13:08] <jclements> :)
[18:13:23] <Thiez> _GT_BLEI_IS_AWESOME and _LT_
[18:13:29] *** Quits: lucian (lucian@6B2B4644.4304AE1E.CE5E78F6.IP) (Ping timeout)
[18:13:31] <moonchrome> bblum, that would collide with my gaming user name :|
[18:13:35] <brson> jclements: that only happens with 'install'?
[18:13:38] <Blei> Thiez: this will be implemented! right now!
[18:14:04] <jclements> brson: just finished a "make" successfully. Maybe I need to start over with a "../configure" ?
[18:17:02] <jclements> brson: this could be related to my hitting ctrl-C during an earlier build, I suppose. I'm going to try a make clean/configure/make/make install. sigh.
[18:17:23] <brson> jclements: I don't think so. it looks like the $(CFG_SRC_DIR) variable is not being expanded correctly. does config.mk contain a value?
[18:17:42] <brson> it could be related to hitting ctrl-C during configure
[18:18:27] <sully> is there a list of build targets somewhere?
[18:18:40] <Blei> i like the _L_ and _7_, they stand out a lot more than the alternatives
[18:19:47] <brson> sully: the wiki contains a lot of the test targets and environment variables but there isn't a general list of build targets
[18:19:51] <brson> https://github.com/mozilla/rust/wiki/Note-testsuite
[18:19:55] <brson> maybe I can throw one together real quick
[18:19:59] <jclements> brson: no, I have no binding for CFG_SRC_DIR in config.mk: https://gist.github.com/jbclements/5715968  â€¦ sounds like I killed the build while it was writing that file. Thanks!
[18:20:11] <sully> I can probably figure out what I need from that
[18:20:19] <sully> but such a list /would/ be generally useful
[18:20:34] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[18:20:49] <moonchrome> bjz, around ?
[18:20:54] *** Quits: ssbr (ssbr@moz-F4C1E66D.dsl.bell.ca) (Ping timeout)
[18:21:42] <strcat> jclements: make --dry-run is nice btw, to see where it goes wrong
[18:21:49] <strcat> prints out everything expanded
[18:21:53] <strcat> that it would run
[18:22:34] <jclements> sighâ€¦ easier just to burn another hour of CPU time, I think. (only about 20 minutes of wall clock)
[18:22:52] * brson still bisecting. 5 steps left
[18:23:09] <Thiez> is bors sleeping?
[18:23:53] <jclements> Thiez: looks like bors updated about 2 mins ago, no?
[18:24:16] <jclements> Thiez: I believe bors checks every 3 minutes. Apologies if you knew all this already.
[18:24:25] <strcat> just nothing in the queue
[18:26:36] *** Quits: jgilbert (jgilbert@moz-4C088FCE.hsd1.ca.comcast.net) (Ping timeout)
[18:26:57] *** Joins: annodomini (lambda@moz-6424FBF8.hfc.comcastbusiness.net)
[18:27:11] <Thiez> it's just that it appears to be ignoring the hygiene pull request even though it was r+'d almost half an hour ago
[18:27:34] <Thiez> and I know it polls every few minutes :)
[18:28:28] <Blei> is it still possible that types contain { or } ?
[18:28:34] <jclements> Thiez: the r+ went on the commit that wasn't at the tip of the tree.  This is because sometimes GitHub doesn't show the commits in logical order. I just re-r+'ed the tip of the tree, that should get it.
[18:28:54] <strcat> github sorts them by date in the PR thing for some strange reason
[18:29:02] <Thiez> silly github
[18:29:08] *** Quits: oksobul (Instantbir@5420C305.88F2F905.4A037BC4.IP) (Ping timeout)
[18:29:19] <strcat> they sort properly elsewhere.
[18:29:24] <strcat> maybe I should report that ;p
[18:29:39] *** Quits: jyeo (user@F2D29657.F60B0462.67AC9B1.IP) (Input/output error)
[18:34:12] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:34:13] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/vzf6VQ
[18:34:13] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:34:16] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[18:34:16] <ghrust> 01[13rust01] 15bors pushed 20 new commits to 06auto: 02http://git.io/tMPeiQ
[18:34:16] <ghrust> 13rust/06auto 14c24da2b 15John Clements: add renaming and sctable funs
[18:34:16] <ghrust> 13rust/06auto 14f74e246 15John Clements: change to newer macro escape mechanism, using uints in more places
[18:34:16] <ghrust> 13rust/06auto 14616314b 15John Clements: comments & whitespace
[18:34:17] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[18:34:22] *** Joins: blitter (blitter@moz-BA14D5CF.dyn.centurytel.net)
[18:35:46] <caitp> can a nomitive enum value be an alias for another one? like pub enum Foo { FooAcronymName, FooMoreReadableName = FooAcronymName, } or something
[18:36:03] <caitp> s/nomitive/nominal
[18:36:34] <pcwalton> caitp: not using that syntax, but you can "pub use"
[18:37:09] <caitp> what like pub use AcronymEnumName = NiceEnumName?
[18:38:08] *** Joins: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is)
[18:38:14] *** Quits: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[18:38:21] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: eatkinson)
[18:38:57] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:39:45] *** Joins: pcwalton (pcwalton@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:39:45] *** ChanServ sets mode: +o pcwalton
[18:40:16] <strcat> rusti: struct Foo(int); impl Drop for Foo { fn finalize(&self) { println("drop") } } let x = Foo(5); println("before")
[18:40:22] -rusti- before
[18:40:22] -rusti- drop
[18:40:22] -rusti- ()
[18:40:28] <strcat> rusti: struct Foo(int); impl Drop for Foo { fn finalize(&self) { println("drop") } } Foo(5); println("before")
[18:40:30] -rusti- drop
[18:40:30] -rusti- before
[18:40:30] -rusti- ()
[18:40:40] <strcat> oh good that works like I expected it :)
[18:41:29] <strcat> pcwalton: I wonder if it would make sense to use RAII "failures" like 'write -> Failure<Error>' and then have it fail!() unless you handle it
[18:41:40] <strcat> instead of conditions when you don't actually have a way to subst a value or anything
[18:42:10] <Thiez> ruediger: struct Foo(int); impl Drop for Foo { fn finalize(&self) { println("drop") } } let x - Foo(5); let _ = x ; println("before")
[18:42:19] <Thiez> eh, lol
[18:42:20] <Thiez> soryr
[18:42:26] <Thiez> rusti: struct Foo(int); impl Drop for Foo { fn finalize(&self) { println("drop") } } let x - Foo(5); let _ = x ; println("before")
[18:42:28] -rusti- foo.rs:10:93: 10:94 error: expected `;` but found `-`
[18:42:29] -rusti- foo.rs:10          struct Foo(int); impl Drop for Foo { fn finalize(&self) { println("drop") } } let x - Foo(5); let _ = x ; println("before")
[18:42:29] -rusti-                                                                                                        ^
[18:42:29] -rusti- application terminated with error code 101
[18:42:32] <tikue> how would one import from outside the current crate?
[18:42:34] <Thiez> ru+tab != rusti ^^
[18:43:01] <Eridius> tikue: you can import from the root by prefixing with ::
[18:43:03] <Eridius> e.g. ::std::foo
[18:43:08] <strcat> Thiez: _ gets dropped at the end of a block atm
[18:43:13] <tikue> Eridius: thanks very much
[18:43:20] <strcat> rusti: let _ = 5; _
[18:43:20] -rusti- foo.rs:10:20: 10:21 error: unexpected token: `_`
[18:43:20] -rusti- foo.rs:10          let _ = 5; _
[18:43:20] -rusti-                               ^
[18:43:20] -rusti- application terminated with error code 101
[18:43:20] <Thiez> yes I see (pm'd rusti)
[18:43:30] <strcat> weird that we do that
[18:44:00] <Eridius> strcat: if _ was treated as a variable name instead of special, then `let _ = 5; let _ = 6;` would kill the first one immediately
[18:44:09] *** Quits: dimension (dimension@moz-4CCD79C5.dsl.dynamic.simnet.is) (Quit: Leaving)
[18:44:12] <Eridius> but you said the value gets dropped at the end of the block, not when _ is "reassigned"
[18:44:26] <Eridius> also, that would probably make `let (a, _, b, _) = foo` not work
[18:44:36] <Eridius> rusti: let (a, b, a, c) = (1, 2, 3, 4); (a, b, c)
[18:44:37] -rusti- (3, 2, 4)
[18:44:39] <strcat> it does get dropped at the end of the block, but it's not treated as a variable name
[18:44:39] <Eridius> oh huh
[18:44:40] <Thiez> rusti: #[inline(always)] fn kill<T>(_:T){} struct Foo(int); impl Drop for Foo { fn finalize(&self) { println("drop") } } let x = Foo(5); kill(x); println("before")
[18:44:42] -rusti- drop
[18:44:42] -rusti- before
[18:44:42] -rusti- ()
[18:44:54] <brson> sully: some notes https://github.com/mozilla/rust/wiki/Note-build-system
[18:45:06] <Thiez> it's rather trivial to trigger an early drop
[18:45:41] <Thiez> even without nice '_ = ' syntax
[18:45:42] <strcat> Thiez: yep just annoying that _ doesn't do it :)
[18:45:53] <Thiez> this is true.
[18:46:47] <strcat> I was just curious if unused rvalues were dropped right away (they are)
[18:48:12] <kimundi> AAAAARRRRGGG
[18:48:35] *** bent|away is now known as bent
[18:49:03] <bblum> rusti: util::ignore
[18:49:05] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/FJAf
[18:49:37] <kimundi> I just spent the last 2 days renaming Cell::take to Cell::take_out so that IteratorUtil can be included in Prelude. I just finished that change and now I'm seeing that Taretator::last() conflicts as well...
[18:49:44] <bblum> rusti: std::util::ignore
[18:49:45] -rusti- error: internal compiler error: unexpected failure
[18:49:46] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[18:49:46] -rusti- note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues
[18:49:46] -rusti- application terminated with error code 101
[18:49:51] <bblum> ...wat
[18:50:01] <strcat> rusti: None
[18:50:01] -rusti- error: internal compiler error: unexpected failure
[18:50:01] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[18:50:01] -rusti- note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues
[18:50:01] -rusti- application terminated with error code 101
[18:50:05] <strcat> bblum: bugs!
[18:50:10] <strcat> ;p
[18:50:13] <bblum> good grief
[18:50:21] <bblum> rusti: std::util::ignore::<()>
[18:50:42] <strcat> bblum: it might be because of the stuff it wraps everything in
[18:51:13] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("cat", [~"foo.rs"]).output))
[18:51:14] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YZRh
[18:51:43] *** Joins: brendan (brendaneic@moz-825E629B.sub-70-211-69.myvzw.com)
[18:51:58] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[18:52:11] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:52:19] *** Quits: fabiand_ (fabiand@moz-E3D55CB1.adsl.alicedsl.de) (Quit: Verlassend)
[18:52:29] *** Quits: tikue (tkuehn@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: tikue)
[18:52:44] <kimundi> strcat: {ImmutableVector, IteratorUtil}::last() conflict as well :(
[18:52:51] <bblum> strcat: so fmt! %? doesn't work with polymorphic values?
[18:52:53] <bblum> is this a known bug?
[18:53:11] <strcat> bblum: I don't think so
[18:53:28] <strcat> rusti: fmt!("%?", None)
[18:53:28] -rusti- error: internal compiler error: unexpected failure
[18:53:28] -rusti- note: the compiler hit an unexpected failure path. this is a bug
[18:53:28] -rusti- note: try running with RUST_LOG=rustc=1,::rt::backtrace to get further details and report the results to github.com/mozilla/rust/issues
[18:53:28] -rusti- application terminated with error code 101
[18:53:32] *** Joins: ssbr (ssbr@moz-F4C1E66D.dsl.bell.ca)
[18:53:40] <bblum> just reproduced without rusti
[18:53:44] <bblum> will file
[18:53:46] *** Quits: dylukes (dylukes@moz-B5418F79.hsd1.pa.comcast.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[18:54:09] <Thiez> if it can't infer type, it dies :(
[18:54:12] <kimundi> rusti: let s: Some(int) = None; s
[18:54:14] -rusti- foo.rs:10:20: 10:21 error: expected `;` but found `(`
[18:54:15] -rusti- foo.rs:10          let s: Some(int) = None; s
[18:54:15] -rusti-                               ^
[18:54:15] -rusti- application terminated with error code 101
[18:54:28] <Blei> so, what about _C_ for ( and _3_ for ), or is this too much?
[18:54:32] <Thiez> rusti: let s: Option<int> = None ; s
[18:54:34] -rusti- None
[18:54:35] <kimundi> rusti: let s: Option<int> = None; s
[18:54:38] -rusti- None
[18:55:14] <bblum> strcat: the bug appears to be "ty_fn_sig() called on non-fn type: &ty_err"
[18:55:28] <Thiez> Blei: how about $LPAR$ $RPAR$ ?
[18:55:31] *** Joins: tikue (tkuehn@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:55:37] <Thiez> bblum: I know that one!
[18:55:50] <Thiez> I got it like an hour ago
[18:55:51] <bblum> Thiez: oh?
[18:56:23] <Thiez> eh, a little more than an hour it seems
[18:56:23] *** Quits: seth_ (seth@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net) (Connection reset by peer)
[18:56:43] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[18:56:43] <Blei> Thiez: that's so long...
[18:56:44] <Thiez> a little over 3 hours ago :p
[18:56:57] <Thiez> $LP$ $RP$ ?
[18:57:09] <bblum> ok, existing bug is #6458
[18:59:09] <kimundi> strcat: How should I proceed? Rename vec.last()? rename iter.last()? Give up?
[18:59:24] *** Quits: \n (NDesaulnie@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: \n)
[18:59:37] <Blei> kimundi: fix the underlying bug ;)
[18:59:38] *** Quits: Jesin (Jessin_@moz-3AD6F09F.res.lehigh.edu) (Ping timeout)
[18:59:56] <kimundi> He, I wish I could in a reasonable time
[19:00:04] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[19:00:06] *** Joins: seth_ (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:00:34] <strcat> kimundi: just call it last_ in IteratorUtil and add a fixme to the same bug as the 'transform' one points to
[19:00:36] <Thiez> fix it in unreasonable time :p
[19:00:40] <strcat> it's a rarely useful one anyway
[19:01:20] <kimundi> Hm, could rename transform to map_ as well then.
[19:01:23] <bblum> strcat: how would you rate the difficulty of giving strcat a "print the type of this expression" mode?
[19:01:39] <strcat> bblum: rusti? :p
[19:01:44] <bblum> oops yes
[19:01:50] *** Joins: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP)
[19:02:00] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[19:02:02] <strcat> bblum: well rusti the bot is just a rustc wrapper, do you know how to do it already?
[19:02:03] <rpearl> no, when an expression is handed to you, you are expected to print its type, strcat.
[19:02:09] <strcat> rpearl: :)
[19:02:19] <bblum> strcat: i don't know how to do it already, is the thing :P
[19:02:39] <strcat> bblum: well I don't know ;)
[19:02:39] *** Quits: moonchrome (moonchrome@4C0859E0.C952C54B.76F1346C.IP) (Quit: Leaving)
[19:02:44] <bblum> i see
[19:03:17] *** Quits: pnkfelix|rcirc (pnkfelix@moz-801E009D.vlan502.asr1.cdg2.gblx.net) (Ping timeout)
[19:03:20] *** Quits: askalski (akuda@2BA4E5A7.CC7751E8.6712E96B.IP) (Quit: Wychodzi)
[19:03:28] <strcat> ugh I really need to sort out this ssh-agent nonsense one day
[19:03:34] <strcat> I end up with a dozen of them orphaned ;p
[19:03:43] <kimundi> strcat: Mind if I rename transform to map_ while I'm at it? 'transform' is so... long. :P
[19:03:49] *** Quits: ssbr (ssbr@moz-F4C1E66D.dsl.bell.ca) (Ping timeout)
[19:03:50] <strcat> kimundi: that sounds sane
[19:03:54] <kimundi> kay
[19:03:56] <strcat> people will expect 'map' to be the name
[19:04:34] <strcat> it just didn't work so I called it what C++ does ;p
[19:04:41] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[19:04:42] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[19:04:43] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[19:05:16] *** Joins: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP)
[19:06:06] * strcat should make a web interface to the evalbot
[19:06:13] <strcat> but I hate css ;[
[19:06:30] <strcat> and that's mostly what it will involve.. ;p
[19:09:15] *** Joins: webber46 (webber46@moz-DC342D45.cust.bredband2.com)
[19:09:47] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[19:10:06] <Thiez> perhaps there's someone here who likes css?
[19:10:15] <Thiez> it's a big channel these days...
[19:10:17] * Yoric shudders at the thought.
[19:10:20] <strcat> no one likes css.
[19:10:30] <strcat> :)
[19:11:47] <Thiez> brson: that messagequeue thing you need for runtime, what types of data will it contain?
[19:12:53] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:12:53] <ghrust> 01[13rust01] 15bors 04force-pushed 06auto from 14bfbc306 to 1438b1d60: 02http://git.io/N3iJvQ
[19:12:53] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:12:53] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[19:12:53] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/DZ6mwA
[19:12:53] <ghrust> 13rust/06auto 1450f96c1 15Ramkumar Ramachandra: .mailmap: tolerate different names, emails in shortlog...
[19:12:53] <ghrust> 13rust/06auto 14c5fea4a 15bors: auto merge of #6955 : artagnon/rust/mailmap, r=brson...
[19:12:54] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[19:13:59] *** Joins: MaikKlein (maik@moz-72D6CA68.dip0.t-ipconnect.de)
[19:14:10] <brson> Thiez: I think it can be generic but it will contain an enum called SchedMessage: https://github.com/brson/rust/blob/io/src/libstd/rt/sched.rs#L87
[19:14:21] <brson> Thiez: These messages will sometimes contain ~Tasks
[19:14:46] <brson> Thiez: the naive implementation is here: https://github.com/brson/rust/blob/io/src/libstd/rt/message_queue.rs
[19:14:52] *** Quits: Blub\w (wry@moz-331A9081.wireless.dyn.drei.com) (Ping timeout)
[19:15:39] <Thiez> brson: I've seen that one, I was working on a lockless version (algorithm from 'The Art of Multiprocessor Programming')
[19:16:26] <brson> Thiez: awesome. I'll put a note about that on the issue. what's your github nick?
[19:16:44] <Thiez> 'Thiez'
[19:16:49] <Thiez> (no, really)
[19:19:46] *** Quits: paulproteus (quassel@rose.makesad.us) (Quit: Quitters never win.)
[19:20:09] <strcat> http://ix.io/603 ;p
[19:20:37] <strcat> http://ix.io/604 simple! the backend, at least
[19:20:42] *** Quits: tikue (tkuehn@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: tikue)
[19:20:44] <strcat> I hate the actual web programming part of this kind of thing
[19:20:47] <kimundi> strcat: Lol, now IteratorUtil::all() conflicts. I'm tempted to just add an underscore to all of it's methods
[19:20:57] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[19:21:02] *** Quits: eholk (eholk@moz-4CCE9748.uconnect.utah.edu) (Quit: eholk)
[19:21:07] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: eatkinson)
[19:21:16] *** Quits: brendan (brendaneic@moz-825E629B.sub-70-211-69.myvzw.com) (Quit: brendan)
[19:21:18] <strcat> kimundi: meh maybe just don't put IteratorUtil in prelude
[19:21:23] <strcat> it will conflict with user-defined stuff too...
[19:21:37] *** Joins: ssbr (ssbr@moz-B9B9415A.s-ip.magma.ca)
[19:22:08] <bstrie> but if there's any conflicts in the stdlib, that means that users won't be able to use any two arbitrary modules at the same time, right?
[19:22:12] <bstrie> which seems bad
[19:22:21] *** Joins: Blub\w (wry@moz-F4722437.wireless.dyn.drei.com)
[19:22:36] <strcat> they aren't actual conflicts
[19:22:38] <strcat> it's only a bug
[19:22:41] <bstrie> ah ok
[19:22:53] <strcat> and it's a pervasive bug, it's not IteratorUtil's fault
[19:22:54] <bstrie> it seemed weird that rust was mistaking a cell and an iterator as the same thing...
[19:23:08] <strcat> impls on generic types conflict with *everything*
[19:23:20] <strcat> even types that don't meet the bounds
[19:23:32] <strcat> impl<T: Foo> Bar for T
[19:23:42] <strcat> if that defines a bar() method, now nothing else can define a bar method while it's in scope
[19:23:48] <strcat> even if they don't impl Foo.
[19:24:38] *** Joins: tikue (tkuehn@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:25:16] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[19:26:54] *** Joins: paulproteus (quassel@moz-E86A3B42.makesad.us)
[19:27:35] *** Quits: webber46 (webber46@moz-DC342D45.cust.bredband2.com) (Quit: webber46)
[19:28:22] *** Joins: doener (doener@moz-121949B3.unitymediagroup.de)
[19:28:25] <kimundi> Meh, Iterators are useful, and not preluding them just hides the current problem. Gonna add a _suffix to all thet conflict
[19:28:38] <SirSkidmore> bjz: you pinged me earlier?
[19:28:53] <SirSkidmore> well, last night, after I had gone to bed
[19:30:15] <bstrie> kimundi: ...so you'd have to write foo._all instead?
[19:30:23] <Blei> brson: re #6921 , what do you think about: _ZN97std..option..Option$LT$std..rt..comm..StreamPayload$LT$std..comm..ChanOne$LT$$LP$$RP$$GT$$GT$$GT$17_ad4d1c2ea494cee115glue_drop_23665E
[19:30:40] *** Joins: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi)
[19:30:46] <kimundi> bstrie: foo.iter().all_()...
[19:31:08] <strcat> kimundi: I don't think it's worth doing that
[19:31:10] <bstrie> kimundi: that sounds absolutely terrible. what type is the other .all() on?
[19:31:12] <strcat> we should just fix method resolve
[19:31:19] <strcat> bstrie: lots
[19:31:28] <strcat> vectors (shouldn't be), strings (shouldn't be) and so on
[19:31:44] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[19:31:52] <bstrie> well I agree that sticking underscores in random places is the wrong solution
[19:32:03] <kimundi> bstrie: It's only a workaruond until the bug is fixed that causes thet to be a problem in first place
[19:32:05] <bstrie> no use trying to paper over such an obviously broken feature
[19:32:50] <bstrie> kimundi: a workaround that will inspire enormous WTFs and cause tons of breakage later
[19:33:10] <strcat> I can actually avoid that temporary foo.rs file...
[19:33:22] <Blei> what's the # of that bug? i have some free time this week and am looking to fill it
[19:33:25] <strcat> rustc /dev/stdin -o out <<<'fn main() {}'
[19:33:27] <strcat> works
[19:34:32] <kimundi> bstrie: What other solution is there atm?
[19:34:37] <strcat> rusti: 5
[19:34:37] -rusti- error: error opening /dev/stdin
[19:34:37] -rusti- application terminated with error code 101
[19:34:40] <strcat> heh
[19:34:42] <brson> Blei: that looks ok to me
[19:34:45] <strcat> I need to create /dev/stdin and whitelist it
[19:35:09] <Blei> brson: ok, thanks. i'll submit a PR
[19:35:11] <strcat> oh it's just /proc/self/fd/0 anyways
[19:35:29] <bstrie> kimundi: the other solution is to help Blei fix the problem :)
[19:35:30] <strcat> rusti: 5
[19:35:31] -rusti- 5
[19:35:34] <strcat> :D
[19:35:57] *** Joins: snadon (chatzilla@moz-3BC727E8.mc.videotron.ca)
[19:36:40] <kimundi> bstrie: Well, explain me all the relevant bits of the compiler and I will do that ;)
[19:37:08] <strcat> rusti: print(std::str::from_bytes(std::run::process_output("cat", [~"/usr/local/bin/rust.sh"]).output))
[19:37:09] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/jZdS
[19:37:28] <brson> i wish i had more time
[19:37:29] * strcat could get rid of that silly wrapper
[19:37:34] <kimundi> rusti: let foo = ~[1, 2, 3, 4, 5, 6,]; foo.iter().to_vec()
[19:37:35] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/bdSS
[19:37:38] <strcat> brson.deep_clone()
[19:37:42] <kimundi> rusti: let foo = ~[1, 2, 3, 4, 5, 6]; foo.iter().to_vec()
[19:37:43] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Ping timeout)
[19:37:44] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/aWGI
[19:37:48] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[19:37:52] <brson> cmr: I'm going to take a look at jemalloc today. have you learned anything about why it's not linking?
[19:37:55] <brson> strcat: lol
[19:38:13] *** Joins: tjc (tjc@36B3FF50.4D3A0C06.43B20542.IP)
[19:38:13] *** ChanServ sets mode: +o tjc
[19:38:21] <strcat> brson: I think jemalloc must have LDLIBS/LDFLAGS and since it's being statically linked in librustrt, we need to make librustrt use what jemalloc needs
[19:39:19] <kimundi> rusti: let foo = ~[1, 2, 3, 4, 5, 6]; do foo.iter().advance |&i| { print(fmt!("%? ", i)) }
[19:39:21] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/XSXP
[19:39:38] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[19:40:12] <brson> strcat: ok. i'll look into it
[19:40:12] <strcat> oh rustc has -
[19:40:18] <strcat> didn't realize that.
[19:40:18] <kimundi> rusti: use std::iterator::*; let foo = ~[1, 2, 3, 4, 5, 6]; foo.iter().to_vec()
[19:40:20] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/MMGO
[19:40:34] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Ping timeout)
[19:41:24] <kimundi> rusti: use std::iterator::*; let foo = ~[1, 2, 3, 4, 5, 6]; foo.iter().transform(|&i|i).to_vec()
[19:41:26] -rusti- ~[1, 2, 3, 4, 5, 6]
[19:41:26] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[19:41:43] <kimundi> rusti: use std::iterator::*; let foo = ~[1, 2, 3, 4, 5, 6]; foo.iter().transform(|&i|i).last()
[19:41:44] -rusti- Some(6)
[19:42:05] <kimundi> rusti: use std::iterator::*; let foo = ~[1, 2, 3, 4, 5, 6]; foo.iter().transform(|&i|i).all(|&i|i>3)
[19:42:06] -rusti- false
[19:42:08] <bstrie> strcat: does https://github.com/mozilla/rust/issues/3429 look like the right bug?
[19:42:12] <kimundi> rusti: use std::iterator::*; let foo = ~[1, 2, 3, 4, 5, 6]; foo.iter().transform(|&i|i).any(|&i|i>3)
[19:42:13] -rusti- true
[19:42:43] <strcat> bstrie: yeah
[19:43:12] *** Quits: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org) (Ping timeout)
[19:43:54] <strcat> kimundi: where does rust run put the tmp file? assuming it has one?
[19:43:54] *** Joins: victorporof (victorporo@60FA9E67.483E5FE1.9B1E38F4.IP)
[19:44:07] <kimundi> strcat: cwd
[19:44:34] <kimundi> rust run foo.rs -> ./footest~
[19:44:42] <kimundi> err, rust run foo.rs -> ./foo~
[19:44:52] <kimundi> rust test foo.rs -> ./footest~
[19:44:58] <strcat> echo 'fn main() { println("foo") }' | rust run -
[19:45:08] *** Joins: mitsuhiko (mitsuhiko-@moz-BC29B73E.srv.pocoo.org)
[19:45:12] *** Joins: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net)
[19:45:12] <strcat> note: gcc: error: unrecognized command line option â€˜-~.oâ€™
[19:45:14] <strcat> ;[
[19:45:26] <strcat> we don't escape what we pass to gcc. that's not good
[19:45:46] <kimundi> He, I wouldn't trust rust run with such things yet
[19:45:50] <kimundi> :P
[19:46:02] <strcat> yeah just using 'rustc - -o out'
[19:46:11] <kimundi> I really need to make its commandline handling better...
[19:46:32] <strcat> and it shouldn't make it in the cwd, there are better places
[19:47:00] <kimundi> IT should probebly also remove it aferwards :P
[19:47:51] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: eatkinson)
[19:47:55] <strcat> $XDG_RUNTIME_DIR/rust/$pid/tmp and rm it after (if that's set), for example
[19:48:27] *** Joins: kermie (Mibbit@moz-D3D15A0C.vie.surfer.at)
[19:48:42] *** Quits: eschweic (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving.)
[19:48:56] <strcat> anyway not a big deal
[19:49:23] <kimundi> Ha, I have no idea what that does...
[19:50:14] <strcat> XDG_RUNTIME_DIR is the fancy new temp dir on *nix, it's per-user and goes away when you log out
[19:50:27] <strcat> anyway have to deal with windows too
[19:50:51] <strcat> and older *nix OSes.... (atomically create dir in /tmp, yay!)
[19:52:47] <strcat> anyway I'll fix it later so I can get rid of this wrapper script
[19:52:58] *** Joins: moonchrome (moonchrome@4C0859E0.C952C54B.76F1346C.IP)
[19:55:08] *** Quits: MaikKlein (maik@moz-72D6CA68.dip0.t-ipconnect.de) (Ping timeout)
[19:56:00] *** Quits: Ralith (ralith@moz-3767A14F.wireless.sfu.ca) (Ping timeout)
[19:56:47] <kermie> Are you guys planning to do the closure reform and the proposed GC removal within the 0.7 timeframe?
[19:57:17] *** Joins: \n (NDesaulnie@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net)
[19:57:21] *** Quits: pragmatic (pragmatic@moz-1A421840.hsd1.ca.comcast.net) (Quit: pragmatic)
[19:57:35] *** Joins: jviereck (Adium@moz-59682FA5.ethz.ch)
[19:58:41] *** Quits: jviereck (Adium@moz-59682FA5.ethz.ch) (Quit: Leaving.)
[19:58:42] *** Joins: jviereck (Adium@moz-59682FA5.ethz.ch)
[19:58:47] <strcat> rusti: 5
[19:58:48] -rusti- error: Could not write output: Error opening output file 'out.o'
[19:58:48] -rusti- application terminated with error code 101
[19:58:58] <strcat> rusti: 5
[19:58:59] -rusti- 5
[19:59:21] *** Quits: mzabaluev (mzabaluev@moz-91FFD755.dhcp.inet.fi) (Ping timeout)
[19:59:22] <moonchrome> are you a wizard ?
[19:59:32] *** Joins: MaikKlein (maik@moz-72D6CA68.dip0.t-ipconnect.de)
[19:59:41] *** Joins: webber46 (webber46@moz-DC342D45.cust.bredband2.com)
[19:59:47] <strcat> huh? ;p
[20:00:03] <Thiez> when normal people do the same thing twice, the same result happens
[20:00:06] <Thiez> strcat is a wizard
[20:00:12] <strcat> but it wasn't the same thing :)
[20:00:16] <Eridius> strcat has magical powers over rusti's sandbox
[20:00:18] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[20:00:18] <Thiez> he can do the same things twice and get a different result :D
[20:01:01] <strcat> rusti: 2 + 2
[20:01:01] -rusti- 3
[20:01:06] <Eridius> lol
[20:01:25] <moonchrome> what sort of sorcery is that
[20:01:36] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:01:36] <strcat> rusti: 2 + 2
[20:01:37] -rusti- 4
[20:02:01] *** Quits: tikue (tkuehn@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: tikue)
[20:02:15] <Eridius> strcat: are you mucking with the template rusti uses to compile the code?
[20:02:43] <strcat> Eridius: I made playpen do 'puts("3"); return 0;' ;p
[20:02:49] <Eridius> hehe
[20:03:31] <mark_edward> rusti: 2 + 2
[20:03:32] -rusti- 4
[20:04:23] *** Quits: victorporof (victorporo@60FA9E67.483E5FE1.9B1E38F4.IP) (Quit: victorporof)
[20:04:42] <mark_edward> do std::vec::foldl(0, [1,2,3,4,5,6,7,8,9,10]) |acc, elem| {acc + *elem}
[20:04:51] <mark_edward> rusti: do std::vec::foldl(0, [1,2,3,4,5,6,7,8,9,10]) |acc, elem| {acc + *elem}
[20:04:51] -rusti- 55
[20:05:55] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[20:06:37] <bstrie> strcat: I made a comment on 
[20:06:42] <bstrie> https://github.com/mozilla/rust/issues/3429
[20:06:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:06:46] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/DZ6mwA
[20:06:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:06:51] <bstrie> let me know if the test case is on the right track
[20:07:09] <bstrie> strcat: considering that the issue itself is apparently controversial, perhaps you should also weigh in
[20:08:27] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[20:09:07] *** Quits: MaikKlein (maik@moz-72D6CA68.dip0.t-ipconnect.de) (Ping timeout)
[20:09:44] *** Joins: huddler (Mibbit@D3C6BC74.AF9E85CD.562F188B.IP)
[20:09:48] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:09:48] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02https://github.com/mozilla/rust/compare/c5fea4a6738c...c5fea4a6738c
[20:09:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:11:29] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[20:11:31] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: tgt)
[20:12:03] *** Joins: eholk (eholk@moz-4CCE9748.uconnect.utah.edu)
[20:12:46] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:12:46] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02https://github.com/mozilla/rust/compare/c5fea4a6738c...c5fea4a6738c
[20:12:46] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:12:49] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[20:12:50] <ghrust> 01[13rust01] 15bors pushed 20 new commits to 06auto: 02http://git.io/N_wcmQ
[20:12:50] <ghrust> 13rust/06auto 1477c2c09 15John Clements: add renaming and sctable funs
[20:12:50] <ghrust> 13rust/06auto 14d7638f9 15John Clements: change to newer macro escape mechanism, using uints in more places
[20:12:50] <ghrust> 13rust/06auto 14b24b453 15John Clements: comments & whitespace
[20:12:51] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[20:13:07] *** Joins: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP)
[20:13:14] *** Quits: lerc (quassel@moz-598ED764.telstraclear.net) (Ping timeout)
[20:16:36] *** Parts: huddler (Mibbit@D3C6BC74.AF9E85CD.562F188B.IP) ()
[20:17:31] <moonchrome> Couldn't ARC be replaced with a immutable GC - since objects that go in to ARC are immutable and all tasks need to keep references to it in a special type, collecting between tasks is trivial (immutable data is acyclic, that's why refcounting works, which guarantees no pointers to new generation in old generation) and causes 0 pause (since you keep references in a special type explicitly it's easy to keep a task local reference list for
[20:17:31] <moonchrome>  a coherent state view) ?
[20:18:35] <Eridius> moonchrome: immutable data isn't necessarily acyclic
[20:18:38] <strcat> an 'immutable' gc would still have to be a copying gc
[20:19:15] <strcat> which in a concurrent program with many writes to the exchange heap would be really costly...
[20:19:16] <moonchrome> strcat, yea but encapsulating all references in a single special type makes it easy to track and update all task references efficiently
[20:19:44] <strcat> moonchrome: it still has to scan the heap
[20:20:08] <moonchrome> strcat, not if you keep all tasks ARC_GC instances in a list
[20:20:26] <strcat> moonchrome: refcounting will be faster than allocations in a list
[20:20:37] <strcat> + scanning the heap
[20:21:11] <moonchrome> strcat, depends on how you implement it 
[20:21:35] <strcat> an allocation is going to be slower than a hundred reference counts
[20:21:47] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[20:22:33] <moonchrome> strcat, why ? if you have a preallocated memory chunk it's just incrementing a count pointer and writing a new ref value
[20:22:51] <strcat> it's locking a doubly linked list
[20:23:03] <moonchrome> strcat, it's task local - why locking ?
[20:23:09] <strcat> arc isn't task-local
[20:23:15] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:23:21] <strcat> a stands for atomic
[20:23:29] <strcat> rc for reference counting
[20:23:43] <moonchrome> I know, but keeping task specific references to shared memory is local
[20:23:43] <Blei> heh, look at the title of this commit message https://github.com/Blei/rust/commit/eb627817206aa0ca5faf4ffb68f53da0f5ddbde5
[20:23:45] <Blei> oh github
[20:24:02] <strcat> moonchrome: they're not local, the references are sendable
[20:24:18] <bstrie> Blei: hahaha
[20:24:24] <Eridius> Blei: wat. why is github doing that?
[20:24:35] <bstrie> Eridius: emoticons
[20:24:39] <strcat> Eridius: because it treats :foo: as special
[20:24:39] <bstrie> :back: and :link
[20:24:40] <moonchrome> strcat, ofcourse, but the list is local, the list is only used to tell the GC what references this task is currently referencing
[20:24:46] <bstrie> er, :link:
[20:24:57] <strcat> moonchrome: doesn't really work that way. you can pass a reference to another task
[20:24:59] <Eridius> so the title is rustc::back::link: redo symbol mangling?
[20:25:02] <bstrie> yes
[20:25:05] <bstrie> quite amusing
[20:25:05] <Eridius> I see
[20:25:09] <strcat> you can have ~[ARC<T>] and pass it to another task
[20:25:23] <strcat> without a copy.
[20:25:25] <Eridius> <>): <- is that a frowning man with a goatee?
[20:25:45] <bstrie> I mean, it's still readable via the emoticons... assuming that you like rebuses
[20:25:52] <strcat> moonchrome: you don't pay for the reference count when you pass them by-value, only when you explicitly copy them
[20:25:58] <Blei> Eridius: hah, not intentionally  <>):
[20:25:58] <strcat> they move
[20:26:00] <moonchrome> strcat, so then two tasks have a reference to that memory and entries in their ref list 
[20:26:10] <strcat> moonchrome: how does it get added to the second task's list?
[20:26:24] <strcat> when it sees you pass anything containing ARC it has to walk the entire data structure?
[20:26:35] <strcat> that'd make sending these things immensely expensive
[20:26:52] <strcat> they can be a recursive data structure like a tree
[20:27:52] <moonchrome> strcat, I don't understand the problem, say you have task A and task B, they have their thread local list of references to use shared heap locations. if something goes out of scope in A it's removed in A ref list, if something goes out of scope in ref B it's removed in B ref list
[20:28:07] <strcat> you pass ~[ARC<T>] from A to B
[20:28:08] <moonchrome> GC then occasional stops tasks - copies that list and determines live values
[20:28:12] <strcat> ~[] is passed by pointer-copy
[20:28:19] <strcat> you now have an unknown number of new references in B
[20:28:40] *** Joins: devbug (quassel@moz-E1DE087C.bchsia.telus.net)
[20:28:48] <moonchrome> so both A and B point to all ARC<T> inside that list
[20:28:56] <strcat> how?
[20:28:58] <moonchrome> unless it goes out of scope in A then you remove it
[20:29:03] <moonchrome> simply append to B list
[20:29:06] <strcat> how does B get the references added to the list
[20:29:12] <strcat> it's not known at compile-time how many were passed
[20:29:24] *** Quits: mattin (user@9E32F7E8.DC7A989C.7F8AB798.IP) (Ping timeout)
[20:29:28] *** Quits: chadz (uid979@moz-A588D045.irccloud.com) (Quit: Connection closed for inactivity)
[20:29:41] <strcat> passing ~[ARC<T>] by-value to another task isn't a deep copy, it copies the vector pointer
[20:29:42] <moonchrome> surely you can add a copy constructor to a type ?
[20:29:47] <strcat> moonchrome: it's not a copy
[20:30:01] <strcat> you can send between tasks without copies
[20:30:30] <strcat> passing ARC by-value doesn't touch the refcount
[20:30:34] <strcat> it moves it
[20:30:47] <moonchrome> I see :|
[20:30:47] <strcat> anyway in that case the vector is being moved
[20:30:57] <strcat> so it's an 8-byte copy on x86_64, no runtime checks
[20:31:18] <strcat> moonchrome: I don't know why you don't want it to use reference counting, it's efficient
[20:31:19] <moonchrome> is there a way to catch that moving between tasks
[20:31:36] <bstrie> moonchrome: still interested in those luajit bindings?
[20:31:38] <strcat> moonchrome: no, and if you could you would have to scan the data structure - you'd make an operation that's supposed to be very fast slow
[20:32:06] <strcat> you'd need ARC integrated into the compiler + it'd just make them slower
[20:32:22] <strcat> there are two reasons why reference counting for @ is a bad thing
[20:32:29] <strcat> 1) there can be cycles, so you still need tracing
[20:32:35] <strcat> 2) it copies implicitly, rather than moving
[20:33:13] <strcat> if it moved, refcounting would be great
[20:33:17] <moonchrome> strcat, interestingly enough - if you move those ~[ARC<T>] between tasks - they are still in task A local ref list
[20:33:34] *** Quits: jviereck (Adium@moz-59682FA5.ethz.ch) (Quit: Leaving.)
[20:33:44] <strcat> moonchrome: and task A can end
[20:33:49] <strcat> and they're still around
[20:33:53] <strcat> in an unknown task
[20:33:59] <strcat> or maybe they aren't around
[20:34:06] <strcat> they could be freed in B, at least some
[20:34:41] *** Joins: eschweic (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:34:42] <moonchrome> strcat, indeed 
[20:35:01] <moonchrome> bstrie, sure 
[20:35:39] <bstrie> moonchrome: https://github.com/bstrie/luabind/tree/master/lj
[20:36:10] <bstrie> moonchrome: the test0.rs and test1.rs are confirmed to work on my system
[20:36:20] <bstrie> I have luajit2 installed, and I compiled it with -fPIC
[20:36:39] <bstrie> you can run 0.sh and 1.sh to compile the 1 and 2 tests in C and Rust
[20:36:54] *** Joins: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:36:55] <bstrie> er, the 0 and 1 tests
[20:37:01] <Thiez> brson: I don't suppose you have any tests lying around for the messagequeue?
[20:37:01] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:37:02] *** Joins: tikue (tkuehn@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:37:50] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[20:38:26] *** Quits: jaen (jaen@moz-E0979827.copit.pl) (Quit: WeeChat 0.4.1)
[20:38:38] <moonchrome> strcat, although I don't get how can there be cycles if you have only immutable data ?
[20:38:57] <strcat> moonchrome: I didn't mention cycles
[20:40:11] <moonchrome> oh sry Eridius said that 
[20:40:14] *** Quits: azita (Azita@2557E599.66715431.D25A875A.IP) (Quit: azita)
[20:40:24] <strcat> moonchrome: you mean with @?
[20:40:34] <strcat> @ can have cycles because it can contain inherently mutable things
[20:40:40] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Client exited)
[20:40:47] <strcat> ARC can't because it requires T: Const
[20:40:57] <moonchrome> strcat, yea but I'm talking about a GC that works only with immutable values just like ARC
[20:41:15] <moonchrome> Eridius, said immutable data isn't necessarily acyclic
[20:41:28] <Blei> huh, rust allows unicode identifiers? interesting
[20:41:35] <bstrie> indeed
[20:41:37] <Eridius> moonchrome: immutable data may have once been mutable
[20:41:40] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[20:41:45] <bstrie> rusti: let ÃŸ = 2; ÃŸ
[20:41:46] -rusti- 2
[20:42:03] <moonchrome> Eridius, doesn't that break Rc<T> then ?
[20:42:09] <Blei> hrm, this complicates the link mangler
[20:42:17] <strcat> moonchrome: Rc requires T: Const
[20:42:25] <bstrie> Blei: is that something for rustdoc?
[20:42:30] <strcat> or T: Owned
[20:42:36] <strcat> and Rc is non-owned
[20:42:44] <Eridius> moonchrome: "Const types are used for freezable data structures"
[20:42:49] <Blei> bstrie: no, object linking not html linking
[20:43:02] <strcat> Eridius: Const means either it inherits mutability or it's immutable
[20:43:18] <strcat> @mut and RcMut are dynamically freezable, but that's not Const
[20:43:46] *** Quits: pyrac (pyrac@moz-96C2FD1F.w109-214.abo.wanadoo.fr) (Quit: pyrac)
[20:43:52] <moonchrome> oh my bad wrong terminology, yea I meant Const where I used immutable, essentially anything that guarantees Rc<T> is acyclic is enough to guarantee ImmutableGC<T> will be as well
[20:44:07] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[20:44:14] <strcat> we already have @ for gc though
[20:44:28] <strcat> Rc exists for when you don't want gc
[20:44:56] <strcat> it has move semantics so you only pay for reference counts you absolutely require, and it has deterministic cleanup
[20:44:58] <moonchrome> strcat, I know but that's task local, I'm thinking about shared GC that deals specifically with acyclic values
[20:45:05] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[20:45:08] <moonchrome> strcat, are you familiar with clojure ?
[20:45:11] <strcat> @T where T is Const does exist
[20:45:14] *** Quits: maxli (maxli@F2D29657.F60B0462.67AC9B1.IP) (Quit: Leaving.)
[20:45:30] <strcat> moonchrome: yes
[20:45:45] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[20:46:05] <moonchrome> strcat, essentially consider how painfully slow implementing clojure persistent tries would be if I used ARC to ref count the shared trie nodes
[20:46:22] <strcat> moonchrome: I can't see why it'd be slow
[20:46:22] <moonchrome> it would increase node size by x2 = ruins caching
[20:46:53] <moonchrome> and atomic operations on every operation = again slow
[20:47:04] <strcat> only needs to be atomic if it's global
[20:47:05] <moonchrome> *every write operation
[20:47:08] *** Joins: pragmatic (pragmatic@43CB6079.66715431.D25A875A.IP)
[20:47:12] <strcat> and if it's global the gc needs be be atomic
[20:47:22] <strcat> as in freeze the entire heap and page fault on writes
[20:48:19] <Blei> hmm, no, linking seems to work well enough even with weird symbol names...
[20:48:30] <Blei> does this also work on osx and windows?
[20:48:59] <moonchrome> strcat, but that's where I was hoping I could use ImmutableGC<T> - it encapsulates all refs to global GC - only those values need to be looked at, if you could find them quickly inside of task heap you could have almost pauseless shared GC
[20:49:05] *** Quits: \n (NDesaulnie@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net) (Ping timeout)
[20:49:32] <erickt> brson / tjc / pcwalton: what do you all think about having our bay area meetup at Mozilla SF or MV either next week (June 9-13) or in 3 weeks (June 23-29)?
[20:49:46] <pcwalton> 3 weeks might be easier
[20:49:46] *** Quits: kermie (Mibbit@moz-D3D15A0C.vie.surfer.at) (Quit: http://www.mibbit.com ajax IRC Client)
[20:49:56] <tjc> erickt: I won't be around for the first one, and may not be around for the second
[20:50:01] <tjc> dont' let that stop you, though...
[20:50:09] <tjc> and 3 weeks might be easier, yeah, what with room reservations
[20:50:24] <strcat> moonchrome: it's still completely contrary to rust's goals of scaling well
[20:50:32] <strcat> touching another thread's memory == cache sync/flush
[20:50:43] <strcat> especially with NUMA
[20:50:53] *** Joins: \n (NDesaulnie@moz-BE33DA21.fw1.sfo1.mozilla.net)
[20:51:13] <erickt> tjc: when are you available?
[20:51:17] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[20:51:23] <Thiez> perhaps it would be possible to distinguish between a global and a local refcount
[20:51:30] <tjc> erickt: I'm definitely back in Mountain View after June 29, possibly after June 22 but I won't know for a couple more days
[20:52:05] <strcat> moonchrome: ARC is really only for very special cases when you have a huge data structure
[20:52:23] <erickt> tjc: ok
[20:52:39] <moonchrome> strcat, I'm just playing around to see if I can implement clojure primitives in rust
[20:52:57] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[20:53:02] <doomlord> i think i was told 'arc' in response to the sort of cases i was interested in - large immutable datastructure read by many worker threads (eg collision detection of many entities versus a static landscape)
[20:53:12] <strcat> gc > rc for short-lived, small objects, rc > gc for long-lived, large objects (and that's what ARC is for)
[20:53:34] <strcat> doomlord: on a NUMA machine though, ARC is really bad
[20:53:52] <strcat> you want a copy per thread or you have cache syncing
[20:54:08] *** Joins: Earnestly (earnest@6A917A59.5E1FD793.39C00A7A.IP)
[20:54:09] <doomlord> copying a subset is what the PS3 did
[20:54:16] *** Quits: Sodel_the_V (user@moz-853663E1.va.shawcable.net) (Quit: Eaten by a grue)
[20:54:26] <doomlord> DMA to copy chunks of some source immutable large datastructure into localstores
[20:54:28] <moonchrome> meh that's easy to partition off
[20:55:04] <doomlord> the use case i'm thinking of is one large immutable structure, many cores consuming it and producing independant data
[20:55:11] <doomlord> (producing independant results)
[20:55:11] <erickt> pcwalton / tjc: What about an informal meet-and-greet next week, and plan for something more formal with presentations in July? That'll let us do some community building now so we can get some good turnout for the presentations
[20:55:21] <strcat> jemalloc can do 8-byte allocations, and it packs stuff together so...
[20:55:21] <pcwalton> that sounds good to me
[20:55:23] <tjc> erickt: Sure!
[20:55:25] <doomlord> shared resources basically
[20:55:26] <strcat> in a cache line you can have 8 objects
[20:55:29] *** Joins: Ralith (ralith@moz-50F3C77.vc.shawcable.net)
[20:55:35] <tjc> I approve of starting with something informal and non-intimidating :-)
[20:55:40] <erickt> :)
[20:55:49] <strcat> if you're even touching one of those from another thread, the cacheline is being locked/synced as a whole
[20:55:52] *** Quits: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net) (Ping timeout)
[20:56:04] *** Joins: wilsonk-laptop (kvirc@moz-39EFBFC2.cg.shawcable.net)
[20:56:12] *** Quits: Blei (philipp@moz-96D25F7A.cust.bluewin.ch) (Quit: gnight)
[20:56:31] <strcat> shared memory is slow. even if it's immutable
[20:56:39] <moonchrome> strcat, most of the time tho you're not, unless you're trying to work on same atom from multiple threads at same time
[20:56:59] <moonchrome> even without the cache misses it's slow because of retries
[20:57:19] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Ping timeout)
[20:57:25] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[20:57:37] <Thiez> hmmn delicious false sharing
[20:57:47] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[20:57:50] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[20:58:04] <moonchrome> strcat, although do caches really need to sync when they all have read only caches ?
[20:58:28] <Thiez> moonchrome: not as far as I'm aware, as long as you don't make the cache dirty by writing
[20:58:46] <Thiez> but perhaps that's not true on all architectures
[20:58:49] <moonchrome> exactly, which is why ref counting < immutable shared GC
[20:59:12] <strcat> gc isn't magic, it touches the page table
[20:59:36] <strcat> it's going to flush the whole cache when it scans anyway
[20:59:44] *** Quits: \n (NDesaulnie@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[20:59:51] <moonchrome> but not while the program is running
[21:00:12] <strcat> yes while the program is running, if it's a concurrent gc
[21:00:23] <erickt> is anyone else on #rust thinking about coming to this bay area meetup?
[21:00:34] <doomlord> i would have thought with ref-counting you can control the granularity better in the cases i'm thinking of
[21:00:46] <strcat> even sending small ~ allocations is bad because they are packed in other thread's cache lines
[21:00:47] <moonchrome> strcat, I meant not in the same way ref-counting will - at every write operation
[21:00:55] <Thiez> erickt: I would, but it's a long walk, followed by a long swim, followed by an even longer walk :(
[21:01:00] *** Joins: \n (NDesaulnie@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net)
[21:01:05] <erickt> hehe :)
[21:01:14] <strcat> moonchrome: reference counting only writes when you make a copy
[21:01:33] <moonchrome> strcat, which is every time you update your persistent data structure
[21:01:39] <moonchrome> strcat, because of structural sharing
[21:01:49] <strcat> moonchrome: no it only touches the node that split
[21:01:57] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Quit: Jesse)
[21:02:24] <moonchrome> strcat, actually it increases ref counts for all nodes referenced by update path
[21:02:34] <moonchrome> because they all become shared with one more instance
[21:02:48] <strcat> I don't think so
[21:02:55] <strcat> a -> b -> c
[21:02:58] <strcat> a is the root
[21:02:59] <strcat> copy the data structure
[21:03:03] <strcat> only a is refcounted
[21:03:31] * brson on a bisection roll - 3 steps done today
[21:03:49] <moonchrome> say you modify C - you need to update A and B (ie. update path)
[21:03:59] <moonchrome> and A and B contain 32 childs
[21:04:02] <moonchrome> *children
[21:04:13] <moonchrome> or how many your implementation has
[21:04:55] <strcat> moonchrome: you don't need to
[21:05:09] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:05:11] <pcwalton> so many rust stickers around the office now
[21:05:13] *** Quits: seth_ (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[21:05:16] <pcwalton> I count 3 Â® stickers
[21:05:32] <moonchrome> strcat, then how do you share data between a and a' ?
[21:05:46] *** Joins: mschifer1 (Adium@2557E599.66715431.D25A875A.IP)
[21:05:46] *** Quits: mschifer (Adium@2557E599.66715431.D25A875A.IP) (Connection reset by peer)
[21:05:47] <brson> what's the right wo to convert str -> int?
[21:05:55] <strcat> moonchrome: modifying c means making a whole new list
[21:05:59] <strcat> there are no refcounts
[21:06:03] *** Quits: mschifer1 (Adium@2557E599.66715431.D25A875A.IP) (Quit: Leaving.)
[21:06:06] <strcat> it's a newly allocated list
[21:06:06] <pcwalton> brson: FromStr::from_str ?
[21:06:08] *** Joins: mschifer (Adium@2557E599.66715431.D25A875A.IP)
[21:06:11] <brson> pcwalton: thanks
[21:06:28] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[21:06:50] *** Parts: mschifer (Adium@2557E599.66715431.D25A875A.IP) ()
[21:06:51] <strcat> a -> b -> c -> d -> e -> f -> g
[21:06:56] <strcat> lets say you want to modify c
[21:07:06] <strcat> you make a new a' -> b' and refcount c
[21:07:10] <strcat> 1 atomic operation
[21:07:39] <moonchrome> strcat, I'm assuming -> means child in tree right ?
[21:07:44] <strcat> yes
[21:08:26] <moonchrome> strcat, clojure vectors are hash tries, they store 32 values per node, so A has 32 child nodes, B has 32 child nodes, etc.
[21:08:52] <strcat> moonchrome: it's still a single reference count to modify a sub-structure
[21:09:00] <doomlord> has anyone tried translating (manually) source of existing programs into rust . i realise that might sound vague since concepts wont match exactly..
[21:09:10] <strcat> moonchrome: afaict...
[21:09:11] <tikue> rusti: struct Foo; let x = Foo; let y = x; println(fmt!("%? == %? ?", &x, &y));
[21:09:12] -rusti- &{} == &{} ?
[21:09:12] -rusti- ()
[21:09:15] <bstrie> doomlord: you can translate C pretty easily
[21:09:15] <moonchrome> strcat, how would you have structural sharing then ?
[21:09:37] <doomlord> the ability to translate C sounds pretty exciting to me
[21:09:59] <doomlord> i suppose you could get code from GC languages with a lot of @ ..
[21:10:01] <bstrie> doomlord: I've translated a few benchmarks from C to rust, and although the rust wasn't really idiomatic it still worked
[21:10:01] <moonchrome> strcat, when you update C, since tree is immutable, you need to create new node for each parent, those new nodes point to old tree except for the new nodes you created (update path)
[21:10:23] <bstrie> though there are concepts in C to watch out for, i.e. unions and varargs
[21:10:32] <strcat> and enums
[21:10:36] <Thiez> pcwalton: where can I order my Rust t-shirt? ;)
[21:10:44] <strcat> enums aren't always c_int
[21:10:56] <strcat> so far I just pretend only gcc + long enums exists...
[21:11:00] <strcat> and x86
[21:11:03] <doomlord> #defines would be problematic ?
[21:11:07] <tikue> rusti: struct Foo; let foo = Foo; let x = &foo; let y = &foo; println(fmt!("%? == %? ?", x, y));
[21:11:08] -rusti- &{} == &{} ?
[21:11:08] -rusti- ()
[21:11:11] <bstrie> doomlord: yes, very
[21:11:14] <doomlord> so many crazy uses of #defines...
[21:11:39] *** Joins: mattin (user@1CF07A06.DC7A989C.7F8AB798.IP)
[21:11:40] <bstrie> doomlord: though if you looked at the C code post-pre-processing, that might work
[21:12:31] *** Joins: thou (thou@moz-1C1CA9F7.fasttrackcomm.net)
[21:12:36] *** Joins: lerc (quassel@moz-598ED764.telstraclear.net)
[21:12:45] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:12:45] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/N_wcmQ
[21:12:45] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:13:02] <doomlord> heh. rust DOOM anyone?
[21:13:09] *** Quits: dherman (dherman@2557E599.66715431.D25A875A.IP) (Quit: dherman)
[21:13:20] <doomlord> or rust quake
[21:13:40] *** Quits: eholk (eholk@moz-4CCE9748.uconnect.utah.edu) (Quit: eholk)
[21:14:02] <strcat> moonchrome: *shrug*, I guess you would be using a different data structure
[21:14:47] *** Quits: tjc (tjc@36B3FF50.4D3A0C06.43B20542.IP) (Quit: zzzzzzzzzz)
[21:15:03] <erickt> brson / pcwalton: are you and the interns working out of the SF or MV office?
[21:15:14] <pcwalton> erickt: normally MV but today we're in SF
[21:15:17] <pcwalton> except brson
[21:15:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:15:44] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/Ue3CBA
[21:15:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:15:47] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[21:15:47] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/X5BpeQ
[21:15:47] <ghrust> 13rust/06auto 14eb62781 15Philipp BrÃ¼schweiler: rustc::back::link: redo symbol mangling...
[21:15:47] <ghrust> 13rust/06auto 142c65e2e 15bors: auto merge of #6956 : Blei/rust/fix-symbol-mangling, r=catamorphism...
[21:15:48] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[21:15:53] <erickt> so MV would be easiest for you all?
[21:15:57] <pcwalton> do we have working up to date GLFW bindings?
[21:16:01] <tikue> make
[21:16:06] <tikue> woops
[21:16:07] <pcwalton> yup
[21:16:18] <moonchrome> pcwalton, I just compiled them and they work :)
[21:17:07] <bjz> pcwalton: bjz/glfw-rs
[21:17:30] <pcwalton> cool
[21:17:32] <moonchrome> bjz, the gl won't compile tho
[21:18:22] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[21:18:24] * pcwalton is going to port Servo to it
[21:18:28] <pcwalton> since I want my mouse wheel
[21:18:33] <bjz> hehe
[21:18:45] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[21:18:47] *** Joins: azita (Azita@2557E599.66715431.D25A875A.IP)
[21:19:00] <moonchrome> bjz, error: obsolete syntax: named external module
[21:19:21] <moonchrome> bjz, on glcore
[21:19:38] <bjz> moonchrome: sure, I'll fix
[21:19:48] <Thiez> is there any way to tell if I malloc without free'ing in rust?
[21:20:11] <bjz> moonchrome: re. lmath, possibly not
[21:20:21] *** Joins: MaikKlein (maik@moz-72D6CA68.dip0.t-ipconnect.de)
[21:20:30] *** Quits: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net) (Ping timeout)
[21:21:54] <moonchrome> bjz, I guess it doesn't hurt :) I was just thinking if it was required for something, what did you say was blocking you from implementing operator overloading ?
[21:21:56] <strcat> Thiez: you mean in unsafe code?
[21:21:57] <Thiez> never mind, it seems valgrind is good for this :)
[21:22:13] <Thiez> strcat: yes, I had to do some manual mallocs
[21:22:21] <strcat> Thiez: why?
[21:22:43] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Quit: Computer has gone to sleep.)
[21:22:49] *** Joins: tjc (tjc@moz-69395CA0.hsd1.wa.comcast.net)
[21:22:49] *** ChanServ sets mode: +o tjc
[21:23:17] *** Quits: tjc (tjc@moz-69395CA0.hsd1.wa.comcast.net) (Quit: Places to go, people to annoy)
[21:23:20] <Thiez> because I wanted multiple pointers to the same piece of memory mostly, and I don't think I can cast ~T to *T because ~T has a header
[21:23:23] <tikue> what is the idiom for getting an enum from an int? a getter method in the enum's impl? Or enum::new with a big match block? or something else?
[21:23:47] <Thiez> strcat: and they had to be mut, so & was not an option :)
[21:24:05] *** Joins: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net)
[21:24:06] <Thiez> it's for the lockless message queue
[21:24:11] *** Quits: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu) (Ping timeout)
[21:24:15] *** Quits: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[21:24:50] *** Quits: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) (Ping timeout)
[21:25:07] *** Joins: bblum (bblum@moz-2B41ACB5.andrew.cmu.edu)
[21:25:48] <bjz> pcwalton: re. glfw, I want to move to using newtype structs to make things more self-documenting, but I had some issues with matching I think
[21:25:52] <Thiez> idealy I could allocate with ~T, cast to *T, and cast back to ~T when I want to free
[21:26:03] <pcwalton> hmm
[21:26:24] <MaikKlein> what are newtype structs?
[21:26:44] *** Quits: doener (doener@moz-121949B3.unitymediagroup.de) (Quit: leaving)
[21:26:57] <strcat> Thiez: well ~ shouldn't have headers :)
[21:27:11] <Thiez> strcat: but it does, doesn't it? ;)
[21:27:17] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[21:27:17] <strcat> Thiez: yep. but it's a really bad bug
[21:27:24] <bblum> what's the header in ~?
[21:27:32] <strcat> bblum: 32-byte unused header, same as @
[21:27:32] *** Joins: rntz (rntz@moz-C76A8D96.sp.cs.cmu.edu)
[21:27:44] <strcat> bblum: used to distinguish ~ containing @ from ~ not containing @
[21:28:02] <strcat> I think it reads a field that's either -1 or -2 at runtime
[21:28:08] <Thiez> 32 bytes for a single bit of information :D
[21:28:08] <strcat> but it knows that information at compile-time...
[21:28:12] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[21:28:14] <Thiez> are you sure it's not 32 bits?
[21:28:16] <bblum> why do we need to distinguish that?
[21:28:22] <strcat> Thiez: 4 words, 32-byte on x86_64
[21:28:27] <strcat> bblum: we don't, it's poorly implemented
[21:28:27] *** Quits: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com) (Quit: Computer has gone to sleep.)
[21:28:28] <pcwalton> hmm, glfw 3 doesn't build. :(
[21:28:33] *** Quits: \n (NDesaulnie@moz-C03D0C61.vlan426.asr1.sfo1.gblx.net) (Quit: \n)
[21:28:33] <bblum> strcat: o_O
[21:28:37] <strcat> bblum: but it does read it so it's not as simple as removing it
[21:28:44] <strcat> bblum: anyway it's pretty bad. because the header is aligned
[21:28:46] *** Quits: pragmatic (pragmatic@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[21:28:51] <strcat> so an 8 byte allocation is 64-byte instead of 8-byte
[21:28:53] <strcat> yeah.
[21:28:54] <bjz> pcwalton: yeah I just realised there were some updates to the glfw repo last night
[21:29:22] <strcat> bblum: well, let me check the jemalloc size table...
[21:29:23] <moonchrome> bjz, the tests run 
[21:29:28] <bjz> pcwalton: it's just shy on being released
[21:29:32] <strcat> glibc isn't as well documented ;p
[21:29:35] <pcwalton> maybe I should just use SDL
[21:29:47] <pcwalton> or maybe I should fix it and send a PR?
[21:29:50] <sully> hm, is unsafe supported to be inherited through closures?
[21:29:56] <pcwalton> sully: yes
[21:30:05] <strcat> ok jemalloc has 48-byte allocations
[21:30:08] <sully> ok, so some of the warnings for unused unsafes are legit
[21:30:12] <sully> and the unsafes should go
[21:30:15] <strcat> so it's possible an 8-byte allocation is only 48-byte
[21:30:19] <strcat> "only" ;p
[21:30:42] <bjz> pcwalton: wait, where are you getting glfw from?
[21:30:46] <strcat> bblum: anyway that's the biggest performance issue for treemap atm...
[21:30:50] *** Quits: mattin (user@1CF07A06.DC7A989C.7F8AB798.IP) (Ping timeout)
[21:30:51] <sully> I've decided that I am going to give up on figuring out what is going on with unused imports until there has been a snapshot
[21:30:54] <bjz> pcwalton: the glfw/glfw repo?
[21:30:56] <Thiez> I wonder how much smaller building rustc would be without the ~header bug
[21:30:56] <strcat> bblum: among other things
[21:30:57] <pcwalton> bjz: yeah that one
[21:31:09] <pcwalton> with the commits by the guy with the furry anime icon
[21:31:10] <moonchrome> bjz, nothing in the change changed interface from what I can see only docs change https://github.com/glfw/glfw/commits/master/include/GLFW/glfw3.h
[21:31:16] * sully make CFG_RUSTC_FLAGS="-A unused-import"
[21:31:32] *** Quits: ssbr (ssbr@moz-B9B9415A.s-ip.magma.ca) (Quit: Application borked.)
[21:31:33] <bjz> pcwalton: have you set it to build with the shared libs
[21:31:38] <pcwalton> yeah
[21:31:41] <pcwalton> let me find the problem
[21:31:46] <bjz> hum
[21:31:53] <pcwalton> yeah
[21:31:56] <pcwalton> it's that it isn't Snow Leopard compatible
[21:31:59] <pcwalton> and I'm still on 10.6
[21:32:04] <pcwalton> let me fix and submit a PR, it's just one method...
[21:32:05] <bjz> moonchrome: yeah, only one constant name
[21:32:32] <bblum> brson: https://github.com/mozilla/rust/issues/6957 the conversation we just had
[21:32:55] <moonchrome> bjz, but no the value I think, they changed a couple of values a week back that was a hell to catch xD
[21:32:58] <Thiez> aatch: unstable::atomics was yours, correct?
[21:33:36] <brson> bblum: thanks
[21:34:17] *** Joins: reyre_ (reyre@moz-9002CDDA.cpe.net.cable.rogers.com)
[21:34:31] <moonchrome> bjz, can you link me your gl loader and the issue that's blocking it when you get time so I can bookmark it
[21:35:15] <bjz> moonchrome: http://github.com/bjz/gl-rs
[21:35:24] <pcwalton> yeah, it looks like it's just plain incompatible with Mac 10.6
[21:35:26] <Thiez> aatch: small point, perhaps it would be nice to have AcqRel ordering too :)
[21:35:33] <pcwalton> can I use 2.7?
[21:35:35] <pcwalton> or am I just stuck
[21:35:40] *** Quits: jst (quassel@2557E599.66715431.D25A875A.IP) (Input/output error)
[21:36:13] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[21:36:23] <bjz> moonchrome: https://github.com/mozilla/rust/pull/6661
[21:36:28] <bjz> pcwalton: dang
[21:36:33] <MaikKlein> no the api has completely changed from 2.7 to 3.0
[21:36:46] <bjz> pcwalton: yeah, it's incompatible, sorry :(
[21:36:50] <strcat> heh, clang sort of supports the C++14 constexpr
[21:36:59] <bjz> pcwalton: might need to use SDL then :(
[21:37:02] <strcat> with relaxed restrictions
[21:37:03] <Thiez> brson: I noticed your locking MessageQueue has '&mut self' methods, how do you plan to do this with multiple tasks having &mut to the same object?
[21:37:07] *** Quits: adu (ajr@moz-96FE9B84.washdc.fios.verizon.net) (Quit: adu)
[21:38:08] <kimundi> strcat: This is getting more hilarious each time. With transform -> map_, I now get a conflict in the tessuite because of some random test Trait :P
[21:38:20] <pcwalton> maybe I'll just see if I can manually register a hacky event handler for the mouse wheel
[21:38:20] <pcwalton> a
[21:38:21] *** Joins: \n (NDesaulnie@moz-BE33DA21.fw1.sfo1.mozilla.net)
[21:38:26] <pcwalton> all I need is GLUT + mouse wheel
[21:38:30] <brson> Thiez: Each task has a different MessageQueue instance that encapsulate atomically reference counted state
[21:38:31] <pcwalton> which works on linux but not on mac
[21:38:34] <strcat> kimundi: it's going to conflict with user code though...
[21:38:37] <Thiez> fwiw I have a cheating version that takes &self (struct annotated with #[mutable]) that casts to '&mut self' using evil magicks, but if you prefer &mut self I can probably do that
[21:39:06] <pcwalton> aha, addGlobalMonitorForEventsMatchingMask
[21:39:12] <strcat> Thiez: #[mutable] doesn't make it safe though
[21:39:16] <brson> Thiez: I prefer &mut
[21:39:22] <Thiez> ok, I'll &mut it
[21:39:24] <strcat> Thiez: you still have to enforce all the borrow checking guarantees, etc.
[21:39:43] <moonchrome> bjz, ha I see D code in your github repos - you given up on it too :\ ?
[21:40:08] <kimundi> strcat: I'll probably not commit the renamings, but I'm almost at the point where I'm done, so I wanna finish it to get a batter picture.
[21:40:16] <kimundi> better*
[21:40:17] <sully> ok, the build system seems to be dropping an empty file called "file" in my directory
[21:40:23] <sully> is this a thing that happens to other people?
[21:40:37] <bjz> moonchrome: indeed
[21:40:59] <strcat> sully: yep, I don't know why though
[21:41:08] <sully> also, I submitted a pull request yesterday, but it failed tests
[21:41:20] <sully> I have fixed it; what is the procedure for resubmitting?
[21:41:23] <bjz> moonchrome: I don't have any hard feelings against it though
[21:41:26] <strcat> sully: you can rebase it
[21:41:42] <strcat> sully: github just treats a pull request as a pointer to a branch, you can replace what's in the branch or add commits
[21:41:44] <sully> and do a forced push to the branch in my repo?
[21:41:47] <strcat> sully: yeah
[21:41:50] <sully> ok
[21:42:38] <bjz> moonchrome: ok, on to glcore
[21:42:58] <sully> and then post on the bug saying r? again?
[21:43:31] <cmr> yup
[21:43:34] <moonchrome> bjz, thanks
[21:43:56] <moonchrome> bjz,  btw - this quote sums how I feel about D "C++ is an octopus made by nailing legs onto a dog. D is a language made by people who saw that dog and thought, "Oh man, I know how I could make a great centipede…""
[21:44:03] *** Joins: brendan (brendaneic@2557E599.66715431.D25A875A.IP)
[21:44:28] *** Joins: pragmatic (pragmatic@43CB6079.66715431.D25A875A.IP)
[21:44:30] <doomlord> aliasing assumptions: in C++, the copmiler can't assume T* or T& wont alias a  const T* or const T& ... but in rust i guess it could assume a mut &/~/@T  wont alias any &/~/@ T.... because these are pointers with more elaborate semantics??
[21:45:39] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[21:45:50] <MaikKlein> the turn down for me was the global blocking gc and that the std lib required the GC in D
[21:45:56] *** Joins: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net)
[21:45:56] <strcat> doomlord: &T for T: Const doesn't alias, in LLVM terms
[21:46:15] <bjz> moonchrome: and rust is....? :D
[21:46:20] <strcat> doomlord: &mut aliases @mut and &const
[21:46:45] *** Joins: mattin (user@86CC76C4.DC7A989C.7F8AB798.IP)
[21:46:47] <moonchrome> MaikKlein, it's much deeper than that - D just has no focus scope - it tries to be everything and is actually good at nothing
[21:47:08] <bjz> moonchrome: that's what caused me concern most
[21:47:13] <moonchrome> bjz, rust is very well defined in focus
[21:47:29] <strcat> memory unsafe + gc are strange bedfellows, D is pretty unique there ;p
[21:47:43] <pcwalton> well, Go too
[21:47:44] <bjz> moonchrome: and that's exactly what made rust appeal to me
[21:47:44] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[21:47:50] <pcwalton> with GOMAXPROCE>1
[21:47:53] <pcwalton> GOMAXPROCS rather
[21:47:55] <pcwalton> anyway
[21:48:04] <strcat> pcwalton: go is 'memory safe' though, data races are just undef behaviour, but not unsafe behaviour
[21:48:13] <pcwalton> strcat: no, not if GOMAXPROCS>1
[21:48:15] <pcwalton> you can segfault
[21:48:21] <strcat> pcwalton: huh. didn't realize
[21:48:29] <strcat> I thought it was just like java/python
[21:48:38] <pcwalton> http://research.swtch.com/gorace
[21:48:52] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[21:48:54] <pcwalton> maps and arrays aren't memory safe
[21:49:39] <cmr> So LZ4 is only a 16% speedup but increased filesize of (for the worst offender, libstd) 22%
[21:49:52] <moonchrome> problem with D is unlike Go, it would like to work in places where you can't afford a crappy GC (which is inherent because of the language design with little constraints in place to allow efficient implementation)
[21:50:02] <moonchrome> but they don't have a no-gc story :\
[21:50:09] <MaikKlein> moonchrome, what is really weird ..... the guys behind D have a really great reputation. But I didn't do too much research in D ... GC turned me down because I am creating a realtime application.
[21:50:40] <bjz> moonchrome: fixed (I hope)
[21:51:00] <strcat> MaikKlein: andrei still contributes a lot to C++ though
[21:51:07] <strcat> he's not just a D guy
[21:51:34] <Earnestly> D still has dangling pointers, no?
[21:51:42] <strcat> yes, with references
[21:51:45] <moonchrome> bjz, ./find_local_extensions.sh: 2: ./find_local_extensions.sh: glewinfo: not found - I need glew ?
[21:51:48] <strcat> or I guess ranges
[21:52:38] <strcat> they could add safe references with something like borrowck to 'safe' functions (atm they are forbidden)
[21:52:38] <tikue> rusti: enum Foo { X, Y, } struct Bar { baz: [0, ..Y as uint] }
[21:52:38] -rusti- <anon>:10:47: 10:48 error: expected type, found token LIT_INT_UNSUFFIXED(0)
[21:52:38] -rusti- <anon>:10          enum Foo { X, Y, } struct Bar { baz: [0, ..Y as uint] }
[21:52:38] -rusti-                                                          ^
[21:52:38] -rusti- application terminated with error code 101
[21:52:44] *** Joins: engla (engla@moz-DBD1D96E.cust.bredbandsbolaget.se)
[21:53:15] <tikue> rusti: pub enum Foo { X, Y, } pub struct Bar { baz: [0, ..Y as uint] }
[21:53:15] -rusti- <anon>:10:55: 10:56 error: expected type, found token LIT_INT_UNSUFFIXED(0)
[21:53:15] -rusti- <anon>:10          pub enum Foo { X, Y, } pub struct Bar { baz: [0, ..Y as uint] }
[21:53:15] -rusti-                                                                  ^
[21:53:15] -rusti- application terminated with error code 101
[21:53:39] <Thiez> moonchrome: D has pretty great templates tho
[21:53:51] <Thiez> that's the one thing it has going for it
[21:54:01] <strcat> Thiez: and compile-time function execution, much better than C++11's constexpr
[21:54:05] <moonchrome> MaikKlein, they have a great reputation in C++ world, and it really shows in D - like I said that quote about c++ being a octopus made by gluing legs on to a dog and D being a centipede built that way is spot on
[21:54:08] <Thiez> yup, that too
[21:54:09] <strcat> C++14's constexpr is better
[21:54:20] <Thiez> someone wrote a raytracer in D CTFE :D
[21:54:23] <tikue> rusti: pub enum Foo { X, Y, };
[21:54:24] -rusti- ()
[21:54:25] <Eridius> rusti: pub enum Foo { X, Y } Y as uint
[21:54:27] -rusti- 1
[21:54:32] <strcat> not quite as good as ctfe in D but it's getting there
[21:54:36] <tikue> rusti: pub enum Foo { X, Y, }; pub struct Bar { baz: [0, ..Y as uint] };
[21:54:37] -rusti- <anon>:10:56: 10:57 error: expected type, found token LIT_INT_UNSUFFIXED(0)
[21:54:37] -rusti- <anon>:10          pub enum Foo { X, Y, }; pub struct Bar { baz: [0, ..Y as uint] };
[21:54:37] -rusti-                                                                   ^
[21:54:37] -rusti- application terminated with error code 101
[21:54:43] <strcat> Thiez: http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3652.html
[21:54:44] * sully tries to track down this "file"
[21:54:46] <Eridius> rusti: pub enum Foo { X, Y } [0, ..(Y as uint)]
[21:54:47] -rusti- error: internal compiler error: node_id_to_type: no type for node `expr Y as uint (id=36)`
[21:54:47] -rusti- application terminated with error code 101
[21:54:53] <cmr> sully: good luck! :)
[21:55:00] <tikue> Eridius: am I trying to do bad things?
[21:55:05] <Eridius> tikue: no idea
[21:55:10] <cmr> sully: I did a quick grep through the various makefiles and didn't see it explicitly mentioned
[21:55:11] <Eridius> rusti: [0, 1]
[21:55:12] -rusti- [0, 1]
[21:55:14] <Eridius> rusti: [0, ..1]
[21:55:15] -rusti- [0]
[21:55:20] <Thiez> strcat: I'm not really following C++, except for the atomic stuff
[21:55:29] *** Quits: jensnockert (jensnocker@moz-8BE55278.customer.t3.se) (Input/output error)
[21:55:29] <Eridius> rusti: let n = 3; [0, ..3]
[21:55:30] -rusti- [0, 0, 0]
[21:55:32] *** Joins: jaen (jaen@moz-E0979827.copit.pl)
[21:55:36] <Eridius> rusti: let n = 3; [0, ..n]
[21:55:37] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/aEHe
[21:55:39] *** Joins: tiffany (kawaii@moz-1E0FE6E8.dhcp.embarqhsd.net)
[21:55:40] <Eridius> rusti: let n = 3; ~[0, ..n]
[21:55:41] -rusti- more than 5 lines of output, pastebinned: http://sprunge.us/YiTQ
[21:55:42] *** Quits: ksev (DrunkenPan@745B767B.989A61DC.CA5B6332.IP) (Ping timeout)
[21:55:44] <strcat> Thiez: well the atomic stuff is done ;p
[21:55:45] <Eridius> tikue: yeah I think you are
[21:55:54] *** Joins: royw (royw@moz-E9B4079C.hsd1.ca.comcast.net)
[21:56:10] <Thiez> the atomic stuff is pretty nice though
[21:56:14] <tikue> Eridius: pcwalton says it should be acceptable, probably a bug
[21:57:12] <kimundi> tikue: "pub struct Bar { baz: [0, ..Y as uint] };" should at minimum be "pub struct Bar { baz: [int, ..Y as uint] };"
[21:57:23] <strcat> Thiez: C++14 is going to have less restricted constexpr and generic lambdas, at least
[21:57:31] <tikue> kimundi: good point
[21:57:38] <tikue> rusti: pub enum Foo { X, Y, }; pub struct Bar { baz: [int, ..Y as uint] }
[21:57:39] -rusti- error: internal compiler error: node_id_to_type: no type for node `unknown node (id=37)`
[21:57:39] -rusti- application terminated with error code 101
[21:57:44] <royw> Hello, I'm new to Rust had hacking on some toys while on paternity leave.  QQ:  What's the idiomatic way to iterate through all of the values of an enum?
[21:57:44] <Thiez> I couldn't c++ myself out of a cardboard box ;)
[21:58:01] <cmr> royw: there is none, very unfortunately.
[21:58:13] <kimundi> [T, ..N] == Type, [0, ..N] == expression 
[21:58:13] <tikue> royw: there isn't :) bothers me, too. I'm actually trying to find a way around that at this exact momeny
[21:58:38] <strcat> Thiez: well there's a nice subset of C++ that's cruftier rust without borrowck :p
[21:58:39] <royw> cmr: OK, so should I use int::range for now?
[21:58:56] <tikue> royw: I think what I'm going to do is put an enum at the end called SIZE, and then do for int::range(SIZE).each
[21:59:03] <Thiez> strcat: that sounds nice, but why use that when I have rust? ^^
[21:59:09] <tikue> SIZE as uint rather
[21:59:24] <strcat> Thiez: well the compiler is correct and there are nicer libraries... ;p
[21:59:35] <Thiez> strcat: those things are vastly overrated :p
[22:00:02] <Thiez> at least with the Rust compiler, when it explodes, I have a vague idea how I might be able to fix it every now and then
[22:00:05] <royw> tikue: That looks cool, but unfortunately wouldn't work for me as my enums don't start at 0
[22:00:36] <strcat> until rustc has built-in support for reading C headers at compile-time, I am very tempted to use C++11
[22:00:39] <royw> one more question:  is there an easy way to convert an enum to a string?  #[deriving(ToStr)] doesn't seem to work in Rust 0.6
[22:00:43] <tikue> royw: you could write an enum::from_uint() method and pass in i + offset
[22:00:47] <strcat> or if there's some missing lib I don't feel like writing
[22:00:57] <strcat> parser combinators.
[22:00:57] <tikue> royw: try printing it, it will pretty print as the enum name
[22:01:02] <Thiez> strcat: write a syntax extension ;)
[22:01:09] <cmr> strcat: bindgen?
[22:01:23] <Thiez> performEvilHeaderLoad!("filename.h")
[22:01:26] <strcat> cmr: no, it needs to run when rustc compiles and actually be correct enough to need zero help
[22:01:45] <tikue> rusti: pub enum Foo(X, Y); println(fmt!("i have an %? and a %?", X, Y));
[22:01:46] -rusti- <anon>:10:21: 10:22 error: expected `{` but found `(`
[22:01:46] -rusti- <anon>:10          pub enum Foo(X, Y); println(fmt!("i have an %? and a %?", X, Y));
[22:01:46] -rusti-                                ^
[22:01:46] -rusti- application terminated with error code 101
[22:01:49] <Thiez> I hear linking with c++ is challenging
[22:02:01] <tikue> pub enum Foo{X, Y}; println(fmt!("i have an %? and a %?", X, Y));
[22:02:10] <strcat> Thiez: linking with rust is harder
[22:02:22] <kimundi> rusti: pub enum Foo{X, Y}; println(fmt!("i have an %? and a %?", X, Y));
[22:02:23] -rusti- i have an X and a Y
[22:02:23] -rusti- ()
[22:02:25] <strcat> you can expose C ABIs from C++ too
[22:02:29] <Thiez> strcat: yes but nobody complains about it because our libraries suck ;)
[22:02:38] <tikue> kimundi: why didn't it like mine ?
[22:02:50] <kimundi> you gorgot the 'rusti: '
[22:02:56] <strcat> Thiez: well by definition a good C++ library or rust library won't have a C interface
[22:02:57] <tikue> kimundi: doh
[22:02:57] *** Quits: carter (carter@moz-BDFE46F6.nyc.biz.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[22:03:07] <strcat> because good libraries will have automatic resource management, generics, etc.
[22:03:42] *** Joins: tjc (tjc@moz-DCA18F9D.telebyte.com)
[22:03:42] *** ChanServ sets mode: +o tjc
[22:03:45] <MaikKlein> bjz, any idea what causes this error? /usr/lib/libglfw-13f753cda49c681f-0.1.so: undefined reference to `glfwSetScrollCallback' . Seems like it doesn't link correctly?
[22:03:52] *** Joins: carter (carter@moz-BDFE46F6.nyc.biz.rr.com)
[22:04:04] <Eridius> MaikKlein: did you pass the right -l flag?
[22:04:14] <bjz> MaikKlein: are you using glfw3?
[22:04:19] <bjz> or glfw 2.7?
[22:04:23] <MaikKlein> glfw3
[22:04:41] <MaikKlein> Eridius, I thought extern mod glfw does -lglfw for me?
[22:04:53] <bjz> did you build glfw3 with shared libs switched on?
[22:04:57] <MaikKlein> yes
[22:05:00] <Eridius> MaikKlein: what rust version are you using?
[22:05:05] <MaikKlein> 4 days old
[22:05:08] <MaikKlein> incoming
[22:05:17] *** Joins: jack (jack@8ABE2BFB.9F8380A1.A535BD55.IP)
[22:05:19] <Eridius> wasn't `extern mod foo` removed?
[22:05:23] <cmr> no
[22:05:27] <Eridius> isn't it now `mod foo { extern { ... } }
[22:05:28] <bjz> is glfw installed on youe PATH?
[22:05:31] <cmr> extern mod foo { ... }
[22:05:32] <brson> my laptop can no longer do 4 rust builds in parallel
[22:05:33] <cmr> was removed
[22:05:38] <MaikKlein> no
[22:05:39] <brson> 8GB is not enough ram
[22:05:44] <Eridius> cmr: yeah that's what I meant
[22:05:58] <MaikKlein> but in sublime I added the search path ["rustc","-L","/usr/lib/","$file"],
[22:06:03] <Eridius> MaikKlein: how are you declaring glfwSetScrollCallback to rust?
[22:06:03] <MaikKlein> at least it finds it then
[22:06:33] <bjz> Eridius: he's using my glfw-rs lib
[22:06:41] <strcat> brson: make a snapshot and it might be :)
[22:06:53] <strcat> brson: stage0 uses 2500MiB but it's down like a gigabyte in stage1
[22:06:58] <MaikKlein> maybe it's a -L snafu
[22:07:07] <MaikKlein> Maybe I should just add it to the path
[22:07:13] <Eridius> bjz: I see
[22:07:29] <MaikKlein> never done that manually, have to look it up first :p
[22:07:32] <sully> ok, "file" doesn't show up with I just run a stage1 build, but does when I do a check
[22:07:49] <bjz> MaikKlein: you can do make install with glfw
[22:08:01] * sully had chmoded the file 0 and is hoping that will cause it to not work
[22:08:03] <MaikKlein> oh
[22:08:05] <MaikKlein> didn't know that
[22:08:08] <Jesse> brson: why are you trying to do 4 rust builds in parallel?
[22:08:13] <sully> and fail with an error I can track down
[22:08:18] <cmr> sully: it's probably used as a timestamp
[22:08:20] <sully> if that doesn't work I will make it a bogus symlink
[22:08:22] *** Joins: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[22:08:28] <strcat> sully: chattr +i
[22:08:33] <sully> what is +i?
[22:08:36] <strcat> immutable
[22:08:36] <cmr> immutable
[22:08:42] <strcat> even root can't modify it ;p 
[22:08:45] *** Quits: noam__ (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[22:08:46] <strcat> has to -i
[22:08:59] <moonchrome> bjz, error: unresolved import. maybe a missing `extern mod libc`?, src/functions.rs:1557         fn glDrawElementsInstancedBaseInstance(mode: ::GLenum, count: ::GLsizei, gltype: ::GLenum, indices: *::libc::c_void, instancecount: ::GLsizei, baseinstance: ::GLuint);
[22:09:29] <bjz> moonchrome: yoiks, I'll have a look
[22:10:31] <brson> Jesse: i've got nothing better to do while waiting for builds than to launch more builds
[22:10:35] <MaikKlein> bjz, ah you mean if glfw is in my path? yes it is
[22:10:47] <pascal_> Why is client_chan moved illegally here? https://gist.github.com/pascalj/4a749af0eae2cd3d445b
[22:10:51] *** pascal_ is now known as pascal
[22:10:53] <moonchrome> bjz,  6 same errors, here's the list : https://gist.github.com/moonchrome/5717733
[22:11:06] *** Quits: brson (brson@2557E599.66715431.D25A875A.IP) (Quit: leaving)
[22:11:34] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[22:11:37] *** Joins: seth_ (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:11:53] <moonchrome> bjz, assuming just replace it with glvoid ?
[22:11:54] <MaikKlein> is it correct that I have to supply my search path like this? rustc -L /usr/lib test.rs
[22:11:58] <MaikKlein> seems kinda weird
[22:13:31] <bjz> MaikKlein: where exactly are you getting the error
[22:13:37] <bjz> when building glfw-rs?
[22:13:53] <MaikKlein> no
[22:14:03] <MaikKlein> when I test some of your examples
[22:14:04] <bjz> or when using it in another crate?
[22:14:08] <bjz> oh
[22:14:13] <bjz> interesting
[22:14:16] <pcwalton> rusti: static X: uint = 3; static Y: [i8, ..X] = [ 1, 2, 3 ];
[22:14:17] -rusti- <anon>:10:19: 10:23 error: unknown start of token: 28
[22:14:17] -rusti- <anon>:10          static X: uint = 3; static Y: [i8, ..X] = [ 1, 2, 3 ];
[22:14:17] -rusti-                              ^~~~
[22:14:17] -rusti- application terminated with error code 101
[22:14:58] <moonchrome> bjz, %s/*::libc::c_void/*::GLvoid/g - in vim fixed it
[22:14:59] <pcwalton> rusti: static X: uint = 3; static Y: [i8, ..3] = [ 1, 2, 3 ];
[22:14:59] -rusti- <anon>:10:19: 10:23 error: unknown start of token: 28
[22:14:59] <bjz> MaikKlein: cd examples && make?
[22:14:59] -rusti- <anon>:10          static X: uint = 3; static Y: [i8, ..3] = [ 1, 2, 3 ];
[22:14:59] -rusti-                              ^~~~
[22:14:59] -rusti- application terminated with error code 101
[22:15:22] *** Quits: devinus (devinus@moz-B4AF84BC.ptr.us.xo.net) (Ping timeout)
[22:15:22] <bjz> moonchrome: I ghenged it, I think it works - shall I push it?
[22:15:26] <bjz> *changed
[22:15:30] <pcwalton> rusti: static Y: [i8, ..3] = [ 1, 2, 3 ];
[22:15:30] -rusti- ()
[22:15:40] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:15:40] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/X5BpeQ
[22:15:40] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:16:07] <MaikKlein> yes
[22:16:18] <MaikKlein> bjz, yes but I double check again if glfw3 is installed correctly
[22:17:04] <bjz> moonchrome: fixed
[22:17:10] <bjz> MaikKlein: sorry :(
[22:17:54] *** Quits: tjc (tjc@moz-DCA18F9D.telebyte.com) (Ping timeout)
[22:18:38] <kimundi> woha, what happend to rustcs colors?
[22:18:52] <strcat> kimundi: fixed
[22:18:55] <strcat> uses terminfo now
[22:18:57] <cmr> kimundi: What terminal do you use?
[22:19:00] <strcat> but it wants >=16 colors
[22:19:10] <kimundi> the mint default one
[22:19:17] <kimundi> its monochrome now
[22:19:23] <strcat> kimundi: tput colors
[22:19:25] <cmr> echo $TERM; tput colors
[22:19:27] <moonchrome> bjz, works now thnx
[22:19:43] *** Joins: tjc (tjc@moz-DCA18F9D.telebyte.com)
[22:19:43] *** ChanServ sets mode: +o tjc
[22:19:50] <kimundi> xterm 8
[22:20:01] <MaikKlein> bjz, I clone the newest incoming now
[22:20:17] <strcat> kimundi: which terminal is it? gnome-terminal?
[22:20:19] <cmr> kimundi: plain xterm isn't ansi-compliant, extra::term only provides an ANSI-terminal interface.
[22:21:24] <kimundi> Well, the about winow says "MATE Terminal 1.4.0" :P
[22:21:34] <Eridius> cmr: did you see my latest comment about Terminal.app? As of OS X 10.8, Terminal.app defaults to xterm-256color and won't even let you pick xterm-color (unless you're using an existing profile from an older OS that customed TERM already)
[22:21:41] <strcat> kimundi: well that's vte, so xterm is wrong
[22:21:51] *** Joins: eholk (eholk@moz-4CCE9748.uconnect.utah.edu)
[22:22:09] <strcat> kimundi: should yell at them to make it xterm-mate-terminal and set proper terminfo ;p
[22:22:48] <strcat> kimundi: it probably lets you override the TERM in settings so xterm-256color would get your color but... it's just ever so slightly less wrong
[22:23:08] <cmr> Eridius: I did not see that. That's good.
[22:23:43] <Eridius> cmr: it actually defaulted to xterm-256color in 10.7
[22:23:45] *** Quits: seth_ (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Ping timeout)
[22:23:52] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:24:10] <Eridius> cmr: apparently they're loathe to create a new xterm-* entry, because that's "reserved for xterm", but they are considering making a brand new entry with their own prefix
[22:24:15] *** Quits: brendan (brendaneic@2557E599.66715431.D25A875A.IP) (Quit: brendan)
[22:24:21] <cmr> good
[22:24:26] <Eridius> although they acknowledge the issues with existing scripts/commands that look for xterm-*
[22:24:31] <strcat> Eridius: problem with a brand new entry is that vim/emacs won't have mouse support
[22:24:38] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:24:38] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/OLiSUw
[22:24:38] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:24:40] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[22:24:40] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/dPtZoA
[22:24:40] <ghrust> 13rust/06auto 141a98726 15Ramkumar Ramachandra: Makefile.in: simplify logic for CFG_VER_HASH...
[22:24:40] <ghrust> 13rust/06auto 14f5ef076 15bors: auto merge of #6951 : artagnon/rust/makefile-git, r=brson...
[22:24:40] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[22:24:40] <strcat> because mouse support isn't in terminfo
[22:24:49] <Eridius> strcat: Terminal.app doesn't have mouse support anyway
[22:24:53] <strcat> Eridius: ah
[22:24:59] <Eridius> which is a radar I filed a while back ;)
[22:25:23] <strcat> anyway I have an incomplete list of differences between xterm/vte
[22:25:28] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[22:25:49] <kimundi> strcat: Hm I don't see a relevant setting to change that stuff in the gui
[22:25:55] <strcat> vte has no blink, no ctrl-backspace (it's the same as backspace)
[22:26:15] <cmr> kimundi: it probably doesn't have one. set the environment variable somewhere else
[22:26:30] <strcat> it has italics (unlike the xterm terminfo), etc.
[22:26:37] <strcat> sad that they don't just use a sane TERM.
[22:27:16] <strcat> kimundi: *shrug* ;p
[22:27:45] *** Joins: brson (brson@2557E599.66715431.D25A875A.IP)
[22:27:46] *** ChanServ sets mode: +o brson
[22:28:27] <kimundi> I also accept proposals for a better terminal! :P
[22:28:34] <cmr> I hear iterm2 is great
[22:28:39] <cmr> Oh wait you're linux
[22:28:46] <cmr> heh, sorry :p
[22:28:49] *** Joins: emartin (emartin@moz-C3D4EEBF.caltech.edu)
[22:28:57] *** Quits: jgilbert (jgilbert@2557E599.66715431.D25A875A.IP) (Ping timeout)
[22:29:01] <cmr> kimundi: termite is nice. so is urxvt.
[22:29:05] <strcat> kimundi: well the terminal I use (wrote) assumes the window manager has tabbing/stacking and doesn't bother doing it itself ;p
[22:29:44] *** Joins: Jeaye_ (Jeaye@moz-FD505E54.hsd1.ca.comcast.net)
[22:30:21] *** Quits: emartin (emartin@moz-C3D4EEBF.caltech.edu) (Quit: leaving)
[22:31:51] *** Quits: Jeaye (Jeaye@moz-FD505E54.hsd1.ca.comcast.net) (Quit: Don't tell them I was here...)
[22:31:53] *** Quits: koomi (koomi@moz-27085084.pools.arcor-ip.net) (Ping timeout)
[22:33:11] <MaikKlein> is it somehow possible to predict the build time while doing make? I'll never know how long I have to wait :(
[22:33:19] <cmr> MaikKlein: no
[22:33:37] <cmr> for rust it's usually pretty consistent though
[22:33:51] <MaikKlein> yeah like 15-20 min I guess
[22:34:14] *** Quits: moonchrome (moonchrome@4C0859E0.C952C54B.76F1346C.IP) (Ping timeout)
[22:34:25] *** Joins: moonchrome (moonchrome@4C0859E0.C952C54B.76F1346C.IP)
[22:34:58] <MaikKlein> but It should be possible to do sth like " 22 more files to go!"
[22:35:24] <cmr> well if you watch the log it's easy to tell based on compiled_and_link
[22:35:32] <moonchrome> man I'm slow, reading trough rustpkg example "let platform = if os::is_toaster() { ~"platform=toaster" }" took me 2 mins to figure out is_toaster is an example and not an actual function inside ::os module 
[22:35:33] <cmr> It has the stage number and the file it's compiling in it
[22:35:50] <MaikKlein> ah ok
[22:35:59] <cmr> *compile_and_link
[22:36:14] <Eridius> moonchrome: submit a pull request to add os::is_toaster()
[22:36:36] <Eridius> pub fn is_toaster { /* FIXME: update if we ever support toasters */ false }
[22:36:38] <moonchrome> Eridius, missing but featured in documentation
[22:36:45] <strcat> Eridius: we do support toasters
[22:36:50] <cmr> MaikKlein: it goes stage0 std -> extra -> syntax -> rustc -> stage1 std -> extra -> syntax -> rustc -> stage2 std -> extra -> syntax -> rustc -> rustpkg -> rustdoc -> rust, or something like that.
[22:36:51] <strcat> :D
[22:37:05] <MaikKlein> thanks
[22:38:23] <aatch> Unfortunately, it's not possible to do an "x no. files" because it all gets compiled into an AST early on, so there's no way to know how many files are left to go.
[22:38:27] <sully> ha! found it
[22:38:31] <sully> run-pass/stat.rs
[22:38:50] <aatch> Also, for building rustc itself, about 80% of the time is optimization
[22:41:11] * brson closing in on the incoming bustage
[22:42:11] <aatch> brson for the win
[22:42:23] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[22:42:44] <strcat> brson: bisecting is when nightlies would be super nice
[22:43:33] <strcat> depending on the kind of bug :)
[22:44:05] <MaikKlein> btw why are there so many unused imports when I compile rust?
[22:44:22] <strcat> because they're unused in some stages but not others so they're a pain to mark
[22:44:40] <aatch> MaikKlein, also, sometimes refactoring makes them unused and people don't bother to clean up.
[22:44:48] <strcat> you can remove one and it will turn out to be used in stage2 ;p
[22:45:03] *** Quits: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net) (Connection reset by peer)
[22:45:11] *** Joins: seth (seth@moz-BE33DA21.fw1.sfo1.mozilla.net)
[22:45:13] *** Quits: tjc (tjc@moz-DCA18F9D.telebyte.com) (Ping timeout)
[22:45:33] *** Joins: jgilbert (jgilbert@43CB6079.66715431.D25A875A.IP)
[22:45:35] <aatch> same with stuff like unsafe blocks, where they aren't needed in one stage, but are in another because the rules around unsafe changed
[22:45:39] <sully> something is rotten here.
[22:46:05] <sully> well, also the unused import diagnostic is broken
[22:46:34] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[22:48:15] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[22:50:05] *** Joins: tjc (tjc@moz-DCA18F9D.telebyte.com)
[22:50:05] *** ChanServ sets mode: +o tjc
[22:51:04] <sully> what is the right way to do debug output now?
[22:51:49] <cmr> sully: what specifically are you looking for?
[22:51:55] <sully> nevermind, found it
[22:52:02] <cmr> debug-info is broken atm, but RUST_LOG works
[22:52:59] *** Quits: donri (dag@moz-9BB61102.tbcn.telia.com) (Client exited)
[22:53:14] *** Quits: annodomini (lambda@moz-6424FBF8.hfc.comcastbusiness.net) (Quit: annodomini)
[22:54:11] *** Quits: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[22:55:49] *** Joins: jst (quassel@2557E599.66715431.D25A875A.IP)
[22:56:58] *** Quits: \n (NDesaulnie@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: \n)
[22:57:52] <bstrie> does #[deriving(IterBytes)] work?
[22:59:47] <strcat> bstrie: not correctly
[23:00:03] <bstrie> what's missing?
[23:00:08] <strcat> but yeah, it works and gives you a hash vulnerable to solutions in many cases ;p
[23:00:12] <strcat> err
[23:00:16] <strcat> s/solutions/collisions/
[23:00:35] *** Quits: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP) (Quit: Leaving.)
[23:00:57] <bstrie> strcat: are you referring to https://github.com/mozilla/rust/issues/5257 ?
[23:01:07] <strcat> yes it's the same issue
[23:01:14] <strcat> it doesn't include the length of each sub-section
[23:01:39] <pcwalton> hah, I monkey patched the Mac version of GLUT at runtime to give me the scroll wheel
[23:01:42] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: Computer has gone to sleep.)
[23:01:43] *** Quits: Jesse (jruderman@2557E599.66715431.D25A875A.IP) (Quit: Jesse)
[23:01:46] <pcwalton> now to translate this code to Rust
[23:02:01] <pcwalton> objective-C monkey patching is awesome
[23:02:34] <bstrie> pcwalton: awesome ironically, or genuinely?
[23:02:46] <Eridius> pcwalton: swizzling?
[23:02:48] <pcwalton> well, I don't have to fix GLFW or use SDL
[23:02:53] <pcwalton> Eridius: almost
[23:02:57] <pcwalton> just class_addMethod
[23:03:06] <Eridius> ah
[23:03:21] *** Quits: eschweic (Adium@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: Leaving.)
[23:04:40] <Eridius> pcwalton: I invented the modern method swizzle ;)
[23:04:53] <pcwalton> oh really :)
[23:05:24] *** Quits: eatkinson (eatkinson@moz-BE33DA21.fw1.sfo1.mozilla.net) (Quit: eatkinson)
[23:05:31] <Eridius> pcwalton: I invented the trick of adding the original method back to the class you're swizzling, before doing the swizzle, in order to avoid accidentally mucking with a superclass
[23:05:52] <pcwalton> ah, I see
[23:05:57] <Eridius> before that, people would just swap out the IMPs indiscriminately, but if the class they were swizzling inherited the method it didn't behave right
[23:06:07] <pcwalton> thankfully I'm just making a subclass override a method it didn't implement before
[23:06:32] <aatch> pcwalton, can you please re-visit some of your older PRs? you have several where the latest code over a month old and the only activity is tjc mentioning that it needs a rebase.
[23:06:33] <Eridius> pcwalton: if you ever look at JRSwizzle, which is Jonathan Rentzsch's library for doing swizzling easily on all platforms, the "Ballard implementation" is mine
[23:06:47] <pcwalton> aatch: yeah, I will once I finish some of this backwards incompatible stuff.
[23:07:17] *** Joins: echristo (echristo@D423593A.D6CCE4AE.77834EAA.IP)
[23:07:52] <bstrie> do we have a policy for rebasing and re-submitting stale PRs even if you're not the original author?
[23:08:27] <cmr> bstrie: I've done it for a PR where the original author disappeared.
[23:09:19] *** Joins: erickt (erickt@8C9ECD8F.3A598286.F12515B4.IP)
[23:09:20] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Quit: Leaving)
[23:09:29] *** Joins: Sodel_the_V (user@moz-853663E1.va.shawcable.net)
[23:09:41] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[23:11:28] <tjc> aatch: thanks for going through the pull request queue!
[23:12:31] <aatch> tjc, np. I find having stale stuff around bothersome
[23:12:45] <tjc> aatch: yeah, me too (even though I'm guilty of having some stale stuff sitting there right now)
[23:13:19] *** Joins: dherman (dherman@moz-BF6CB667.hsd1.ca.comcast.net)
[23:13:20] *** ChanServ sets mode: +o dherman
[23:13:34] *** Quits: webber46 (webber46@moz-DC342D45.cust.bredband2.com) (Quit: webber46)
[23:14:03] <aatch> The PR queue's not too bad actually. With most of them being less than two weeks old.
[23:14:37] <aatch> but return-unwinding was old-as-hell, and as I commented, I'm not sure it's even possible any more.
[23:14:52] *** Joins: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP)
[23:15:24] *** Joins: mschifer1 (Adium@43CB6079.66715431.D25A875A.IP)
[23:16:01] <bjz> nmatsakis: I seem to remember you mentioning making some of the operator traits use associated functions instead of methods
[23:16:16] <bjz> I'm beginning to think that might make sense
[23:16:21] *** Joins: mschifer2 (Adium@2557E599.66715431.D25A875A.IP)
[23:16:59] <bjz> ie. the add, sub, etc methods be associated functions, and add_assign, sub_assign etc could be methods
[23:17:08] <cmr> brson: I'm thinking LZ4 might not be worth it.
[23:17:12] *** Quits: mschifer1 (Adium@43CB6079.66715431.D25A875A.IP) (Ping timeout)
[23:17:31] *** Quits: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net) (Quit: ["Textual IRC Client: www.textualapp.com"])
[23:17:56] <bjz> nmatsakis: the former would be associated functions because the *construct* new values out of old, where as the latter mutate them
[23:18:02] <aatch> tjc, is this still relevant: https://github.com/mozilla/rust/issues/3300 ? I mean, I wouldn't mind it, but we don't actually have anonymous foreign mods anymore.
[23:18:05] <bjz> nmatsakis: I'm not sure though
[23:18:23] <tjc> aatch: I think it's obsolete -- I'll close it
[23:18:27] <tjc> thanks for catching it
[23:18:48] <bjz> nmatsakis: it would also mean we could kill the free-floating functions in the numeric mods
[23:18:54] <brson> cmr: why?
[23:20:02] <cmr> brson: marginally faster decompression but larger binary size and a bit slower compression (because I have it using the "high compression" mode, it's half as fast as zlib. it could be 10x faster but at the price of even worse compression)
[23:21:03] <brson> cmr: does it speed up the overall build to use lz4?
[23:21:08] <cmr> brson: nope
[23:21:17] <cmr> brson: slower by 8 seconds
[23:21:46] <brson> ok, that's unfortunate, and I agree it's not worth it. thank you for the investigation though
[23:21:56] <bstrie> yes, good to have data
[23:21:57] <cmr> np
[23:22:12] *** Quits: jdm (jdm@F2D29657.F60B0462.67AC9B1.IP) (Quit: Lost terminal)
[23:22:35] <bjz> nmatsakis: I'm also thinking it might be better for abs, sqrt, sin/cos/tan etc to be associated functions too
[23:22:36] <moonchrome> bjz, sent you a pull on glfw-rs
[23:22:45] <bjz> moonchrome: ooh
[23:22:49] * bjz checks
[23:23:43] <bjz> moonchrome: what does scancode do?
[23:23:53] <moonchrome> platform specific key scancode
[23:24:05] <moonchrome> not translated to GLFW key code
[23:24:23] <moonchrome> latest GLFW trunk API change
[23:24:24] <bjz> neat
[23:24:26] <bjz> thankyou!
[23:24:58] *** Joins: sp3d (a@moz-49806493.dhcp.stls.mo.charter.com)
[23:25:43] <bjz> moonchrome: I added you as a collaborator
[23:25:57] <bjz> moonchrome: that way you can do updates like that easier
[23:26:44] <moonchrome> ok will do 
[23:27:07] <bjz> moonchrome: It's hard for one man to do everything :)
[23:27:34] <bjz> moonchrome: for more architectual changes, a PR would be better though
[23:27:44] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:27:44] <ghrust> 01[13rust01] 15bors merged 06auto into 06incoming: 02http://git.io/dPtZoA
[23:27:44] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:27:54] *** Quits: tjc (tjc@moz-DCA18F9D.telebyte.com) (Ping timeout)
[23:28:15] <moonchrome> np, I just hope GLFW goes stable soon, having constants change out of the blue is not fun if you're working with bindings :)
[23:28:45] <bjz> moonchrome: I've subscribed to the repo personally
[23:29:00] <MaikKlein> yeah you are writing a wrapper for an unfinished lib in an unfinished language :D
[23:29:13] <bjz> moonchrome: I'm also going to have a go at those lmath changes you suggest
[23:29:23] <moonchrome> MaikKlein, living on the edge xD
[23:29:24] <bjz> moonchrome: but I'm heading out for now
[23:29:37] <bjz> moonchrome: you're welcome to have a crack though
[23:29:48] <moonchrome> bjz, well I'll see what I can do but I'm a newbie at rust
[23:29:52] <MaikKlein> it bleeds! let's compile it 
[23:29:54] *** Quits: jorendorff (jorendorff@moz-2F32ACA3.hsd1.tn.comcast.net) (Quit: jorendorff)
[23:30:02] <cmr> Why can't I close my own PR?
[23:30:06] <bjz> moonchrome: relevant issue: https://github.com/bjz/lmath-rs/issues/14
[23:30:44] <bjz> moonchrome: also, I think you can have multiple impls on the same type with different trait constraints
[23:30:51] *** Joins: tjc (tjc@moz-DCA18F9D.telebyte.com)
[23:30:51] *** ChanServ sets mode: +o tjc
[23:30:54] <bjz> moonchrome: which might be useful
[23:30:58] <MaikKlein> this is the latest version of rust right? rustc 0.6 (2c65e2e 2013-06-05 14:13:43 -0700)
[23:30:58] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:30:58] <ghrust> 01[13rust01] 15bors pushed 0 new commits to 06auto: 02http://git.io/7WfnUw
[23:30:58] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:31:03] *** Joins: ghrust (ghrust@moz-4EF5B6E5.rs.github.com)
[23:31:03] <ghrust> 01[13rust01] 15bors pushed 2 new commits to 06auto: 02http://git.io/NfqP8g
[23:31:03] <ghrust> 13rust/06auto 140f3ea3c 15Philipp BrÃ¼schweiler: rustc::middle::trans::reachable: remove some unneeded code...
[23:31:03] <ghrust> 13rust/06auto 1477a2a43 15bors: auto merge of #6945 : Blei/rust/remove-export-all, r=bstrie...
[23:31:04] *** Parts: ghrust (ghrust@moz-4EF5B6E5.rs.github.com) ()
[23:31:14] <bjz> moonchrome: look at libstd/option.rs for reference
[23:31:24] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke. It's all a joke.)
[23:31:35] <bjz> moonchrome: I'll be back in 40min-1hr
[23:31:47] <bjz> let me know if you have any luck!
[23:32:15] *** Quits: carter (carter@moz-BDFE46F6.nyc.biz.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzzâ€¦)
[23:32:16] <cmr> brson: Did you get anywhere with jemalloc yet?
[23:33:29] *** Quits: q66 (q66@6EE9DE40.46454B5D.33AABD5F.IP) (Client exited)
[23:33:45] <cmr> jemalloc's only external dependency seems to be pthread.
[23:34:02] *** Joins: brendan (brendaneic@8DFE0F5E.F1D38B1F.1D6E592A.IP)
[23:34:33] *** Joins: ssbr (ssbr@moz-A48A4550.s-ip.magma.ca)
[23:34:35] *** Quits: lkuper (lkuper@moz-C0CD33ED.hsd1.in.comcast.net) (Ping timeout)
[23:35:31] <bblum> https://github.com/mozilla/rust/wiki/Proposal-for-effects
[23:35:32] *** Joins: SiegeLord (siege@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:36:34] *** Joins: tgt (tgt@moz-D59EE478.aztw.cable.virginmedia.com)
[23:37:38] *** Quits: dherman (dherman@moz-BF6CB667.hsd1.ca.comcast.net) (Ping timeout)
[23:37:39] <MaikKlein> how can I check again if some lib is in my path?
[23:37:41] <MaikKlein> in linux
[23:38:07] *** Quits: SimonSapin (simon@A5049320.3E93794D.61EA6C28.IP) (Quit: Leaving.)
[23:38:50] <brson> cmr: I do have a working jemalloc build
[23:39:26] <cmr> bblum: Would this allow CTFE for certain effects?
[23:39:35] <brson> cmr: still doing some a bit of testing
[23:39:35] <erickt> brson / pcwalton / tjc: have any of you been to either Steins Beer Garden, Steven Green Irish Pub, or Molly Magees in Mountain View? If so, did you like it, and would it be a good place for a meetup?
[23:39:49] <bblum> cmr: what is CTFE?
[23:39:53] <tjc> erickt: Molly Magees and Stephen's Green are both REALLY LOUD
[23:39:59] <cmr> bblum: compile time function execution
[23:40:01] <tjc> I'm not sure where Steins Beer Garden is, let me check
[23:40:01] <brson> erickt: steins is great, also very very loud at night
[23:40:27] <bblum> cmr: not sure, seems hard but theoretically possible? can you give an example?
[23:40:30] <cmr> bblum: constexpr (from C++/D), basically
[23:40:35] <tjc> haven't been to Steins
[23:40:39] <tjc> erickt: Tied House might work as a venue...
[23:40:41] <erickt> shucks. Well I'll give them a call and see if they have quieter sections we could take over
[23:40:48] <tjc> local brewpub in downtown MV very near Caltrain
[23:40:52] <bblum> hmm, constexpr
[23:41:01] <erickt> tjc: I'll add that to my list too :)
[23:41:12] <brson> tied house and steins are across the street from each other
[23:41:29] <tjc> I'm thinking Tied House could work because it has some outdoor seating
[23:41:31] <brson> lot of beergardens in mv
[23:41:32] <tjc> which might be quieter
[23:41:34] <tjc> yeah
[23:42:00] *** Quits: royw (royw@moz-E9B4079C.hsd1.ca.comcast.net) (Quit: royw)
[23:42:18] <bblum> biergarten
[23:43:14] <erickt> Wow, there sure are a lot of beer gardens. I need to spend more time in MV
[23:43:54] <tjc> heh
[23:44:17] <tjc> ah, Steins only opened in March, that's why I don't know it
[23:44:23] <bblum> steins seems ok
[23:44:32] <bblum> i went there and was disappointed with my food and beer selections
[23:44:36] <bblum> but i would go again
[23:44:40] <bblum> and make different selections
[23:44:50] <bblum> beer selection is attractive, at least
[23:45:38] <mcpherrin> I'm missing out on a Rust meet up at Tied House?
[23:45:40] <mcpherrin> darn :P
[23:45:50] <tjc> mcpherrin: well, it's being planned at this very instant!
[23:45:52] <tjc> you can still have a say
[23:45:57] <Thiez> this is new, when I run my program under valgrind everything is okay, when I run it without valgrind it segfaults ^^
[23:46:14] <tjc> that's surprising
[23:46:45] <bblum> probably a heap layout issue
[23:46:48] <Thiez> that's what I thought.
[23:46:50] <bblum> i bet valgrind reports heap errors
[23:46:50] <mcpherrin> tjc: I won't be in MV for the next month, unfortunately
[23:47:01] <tjc> mcpherrin: Ah, well, I won't be either :-)
[23:47:02] <Thiez> the surprise, no the heap layout thing :D
[23:47:04] <MaikKlein> moonchrome, can you compile glcore with the latest incoming?
[23:47:05] <Eridius> meetup should be in SF ;)
[23:47:12] <tjc> there can be more than one meetup :-)
[23:47:59] *** Quits: mattin (user@86CC76C4.DC7A989C.7F8AB798.IP) (Ping timeout)
[23:48:01] <mcpherrin> There's always time for tied house!
[23:48:29] <MaikKlein> use of undeclared type name `libc::c_void`
[23:48:33] <MaikKlein> has this been renamed?
[23:49:05] <strcat> std::libc::c_void
[23:49:13] <strcat> modules aren't imported by default
[23:49:28] *** Quits: Scriptor (historium@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[23:49:38] *** Joins: dylukes (dylukes@moz-E4DF3FED.pitbpa.fios.verizon.net)
[23:50:09] *** Joins: royw (royw@moz-E9B4079C.hsd1.ca.comcast.net)
[23:51:04] <erickt> woo, Tied House is wide open next week, and we don't need to put down a payment for a group of 10 to 20 people
[23:51:18] *** Quits: eholk (eholk@moz-4CCE9748.uconnect.utah.edu) (Quit: eholk)
[23:51:31] *** Joins: Jesse (jruderman@2557E599.66715431.D25A875A.IP)
[23:51:46] <moonchrome> MaikKlein, yes
[23:52:01] <moonchrome> MaikKlein, but I have incoming from yesterday
[23:52:36] <erickt> Eridius: This restaurant is right next to caltrain, shouldn't be that bad to train down: http://tiedhouse.com/
[23:52:47] <moonchrome> MaikKlein, bjz fixed it just update glcore
[23:53:04] <Jesse> what's happening at tied house?
[23:53:16] <erickt> Jesse: planning a meetup :)
[23:53:20] <moonchrome> he replaced libc::c_void with GLvoid
[23:53:36] *** Joins: jrfeenst (jrfeenst@moz-F912484F.cpe.norwoodlight.com)
[23:54:01] <erickt> Anyone have a preference on an evening for the meetup? I can do any day Monday through Thursday
[23:54:09] <Eridius> erickt: I work in Cupertino...
[23:54:12] <Eridius> (but live in SF)
[23:54:26] <MaikKlein> moonchrome, already did but it doesn't work with the newest incoming
[23:54:36] <MaikKlein> moonchrome, some things got renamed or changed 
[23:54:44] <MaikKlein> moonchrome, gonna fix this tomorow
[23:55:01] <MaikKlein> have to sleep now gn8 all
[23:55:43] <Jesse> you can drink your beer from an affine stein
[23:55:58] <erickt> Eridius: great, then it'll be easy for you to make it :) I have to admit I'm being a little selfish with this since I don't want to get stuck in traffic driving up to SF
[23:57:22] <erickt> Jesse: are you in the bay area as well?
[23:57:43] <Jesse> i live in mountain view, closer to tied house than to the mozilla office ;)
[23:58:18] *** Joins: steven_is_false (user@moz-144077DE.bchsia.telus.net)
[23:58:35] <Eridius> erickt: if by "easy for you to make it" you mean "call a taxi you cheap bastard" then maybe ;)
[23:58:36] *** Quits: tjc (tjc@moz-DCA18F9D.telebyte.com) (Quit: Places to go, people to annoy)
[23:58:47] <erickt> heh
[23:59:07] *** Quits: vcl (chatzilla@741D4FEA.76F9E272.DA40C4B3.IP) (Ping timeout)
[23:59:07] <Eridius> oh wait.. you said next week, right?
[23:59:10] <erickt> yeah
[23:59:10] <Eridius> that's, um, that's WWDC week
[23:59:26] <erickt> ack
[23:59:29] <MaikKlein> moonchrome, you were right, I thought I would have updated but it wasn't the case
[23:59:47] <Jesse> Eridius: how do you commute between cupertino and SF?
[23:59:56] <Eridius> Jesse: company-provided bus
