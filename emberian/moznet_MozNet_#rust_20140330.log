[00:01:10] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[00:01:41] *** Joins: mib_7e4lyh (Mibbit@17C39DD.FA4CF353.CC1A2609.IP)
[00:01:45] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[00:02:09] *** Quits: Blub\w (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[00:02:26] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Input/output error)
[00:03:11] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[00:04:26] *** Quits: mib_7e4lyh (Mibbit@17C39DD.FA4CF353.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:05:00] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[00:05:25] *** Joins: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net)
[00:05:54] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[00:05:57] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[00:06:36] *** Quits: IanCormac84 (User@AB5E7670.2A8D8854.67DFF8B4.IP) (Ping timeout)
[00:06:50] *** Joins: IanCormac84 (User@738DF4F1.64D641E5.67DFF8B4.IP)
[00:08:06] *** Quits: derek_c (derek@moz-767CE985.nys.biz.rr.com) (Ping timeout)
[00:09:19] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[00:09:27] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[00:09:28] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[00:10:36] *** Quits: jxv (jxv@moz-D1F0EBC3.socal.res.rr.com) (Connection reset by peer)
[00:10:43] *** Joins: viatropos (viatropos@moz-F39AA1DC.hsd1.ca.comcast.net)
[00:11:01] *** Joins: jxv (jxv@moz-D1F0EBC3.socal.res.rr.com)
[00:12:31] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[00:13:47] *** Joins: IanCormac841 (User@FAB34EF9.64D641E5.67DFF8B4.IP)
[00:13:48] *** Quits: sw17ch (sw17ch@moz-4AF0345C.hfc.comcastbusiness.net) (Ping timeout)
[00:13:51] *** Quits: IanCormac84 (User@738DF4F1.64D641E5.67DFF8B4.IP) (Ping timeout)
[00:14:18] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[00:14:35] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Input/output error)
[00:15:31] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[00:19:17] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[00:19:42] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[00:19:49] *** Quits: leowoe (Leo@moz-EFCFC1AA.dip0.t-ipconnect.de) (Quit: Leaving.)
[00:21:32] *** Joins: IanCormac84 (User@7DCB9E41.2A8D8854.67DFF8B4.IP)
[00:21:37] *** Quits: IanCormac841 (User@FAB34EF9.64D641E5.67DFF8B4.IP) (Ping timeout)
[00:23:03] <viatropos> Hey I heard there were nightly builds of Rust? Can't seem to find them searching google, any ideas?
[00:23:39] <viatropos> for OSX
[00:23:45] <bvssvni> viatropos: ba ba ba pa! https://mail.mozilla.org/pipermail/rust-dev/2014-March/009223.html
[00:25:03] <viatropos> bvssvni: thanks!
[00:25:10] *** Joins: derek_c (derek@moz-767CE985.nys.biz.rr.com)
[00:25:12] *** Quits: jxv (jxv@moz-D1F0EBC3.socal.res.rr.com) (Ping timeout)
[00:25:12] *** Quits: richo (richo@moz-8032A9CB.pa.vic.optusnet.com.au) (Ping timeout)
[00:25:14] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[00:25:37] *** Joins: richo (richo@moz-C36D6D90.pa.vic.optusnet.com.au)
[00:25:47] *** Quits: nkoep (nik@moz-20720A4.pool.mediaways.net) (Client exited)
[00:25:49] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[00:28:23] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[00:28:25] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[00:28:30] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[00:28:30] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[00:28:47] *** Quits: paraze (paraze@moz-9E32EAAD.w90-27.abo.wanadoo.fr) (Quit: Quitte)
[00:29:30] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[00:29:42] *** Quits: mib_r6ngsi (Mibbit@moz-7AD9232F.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[00:30:11] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[00:30:12] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[00:31:25] *** Joins: fyolnish (fyolnish@moz-C1C7FA72.uqwimax.jp)
[00:32:03] *** Quits: IanCormac84 (User@7DCB9E41.2A8D8854.67DFF8B4.IP) (Ping timeout)
[00:32:27] *** Joins: IanCormac84 (User@59F81F12.64D641E5.67DFF8B4.IP)
[00:32:37] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[00:33:10] *** Quits: fyolnish (fyolnish@moz-C1C7FA72.uqwimax.jp) (Ping timeout)
[00:33:46] *** Joins: saml_ (saml@moz-AFAADF83.nycmny.east.verizon.net)
[00:36:45] *** Joins: jxv (jxv@moz-D1F0EBC3.socal.res.rr.com)
[00:37:49] *** Quits: voltagex (voltagex@moz-11D4D0E3.voltagex.org) (Ping timeout)
[00:38:50] *** Joins: strmpnk (sid2261@moz-E77DEB21.irccloud.com)
[00:42:57] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[00:44:49] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[00:45:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:46:48] *** Quits: Bewilderforce (Bewilderfo@moz-EA5D4D40.ed.shawcable.net) (Quit: Leaving)
[00:47:06] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:51:54] *** Quits: nszceta (nszceta@846F205A.518454BE.689607DE.IP) (Ping timeout)
[00:51:57] *** Joins: mr_boo (Mibbit@moz-A5C129C7.fbx.proxad.net)
[00:52:18] *** Joins: nszceta (nszceta@1D843F6D.FFAA71EC.37339E3A.IP)
[00:52:36] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Quit: synackse)
[00:53:13] *** Quits: mr_boo (Mibbit@moz-A5C129C7.fbx.proxad.net) (Quit: http://www.mibbit.com ajax IRC Client)
[00:53:18] <rchar> Can someone explain to me why the benchmarking tool reports parallel execution as 100x slower than serial execution on 0.9 for this toy program: http://pastebin.com/vKVUuE54 ? Watching the test output shows the parallel test finishes much faster, but is reported as 200,000ns/iter versus 2000ns/iter for the serial version.
[00:53:49] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[00:54:19] <bvssvni> rchar: the benchmarks runs until it has statistical significance
[00:54:37] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[00:54:39] <bvssvni> rchar: if it runs longer, it might mean it is more noise
[00:54:54] <cmr> bvssvni: that doesn't affect the per-iteration time
[00:54:56] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:54:56] <strcat> rchar: seems expected, making stuff parallel adds lots of overhead
[00:55:08] <strcat> the work units have to be large enough to overcome that
[00:55:12] <cmr> version that runs on master: https://gist.github.com/cmr/9865587
[00:55:19] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[00:55:23] <rchar> strcat I thought that too, but naively watching the output showed the parallel test finished far sooner
[00:55:52] <cmr>  38938 ns/iter (+/- 1050)
[00:55:53] *** Quits: nszceta (nszceta@1D843F6D.FFAA71EC.37339E3A.IP) (Ping timeout)
[00:55:54] <cmr>      0 ns/iter (+/- 0)
[00:55:55] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Connection reset by peer)
[00:55:56] <cmr> with optimizations
[00:55:58] <cmr> :p
[00:56:03] <strcat> (rust's tasks are a bad fit for pure CPU computations)
[00:56:14] *** Quits: derek_c (derek@moz-767CE985.nys.biz.rr.com) (Ping timeout)
[00:56:44] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[00:56:58] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[00:57:03] <SiegeLord> Hmm... don't we use native io library today?
[00:57:10] <JustAPerson> strcat: is that specific to rust or just spawning OS threads in general
[00:57:12] <cmr> SiegeLord: yes.
[00:57:13] <SiegeLord> *by default
[00:57:29] <SiegeLord> So does that mean that it is... a bit easier to work with C libraries with TLS?
[00:57:41] <strcat> SiegeLord: if you ignore libgreen
[00:57:53] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[00:57:57] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[00:57:57] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[00:58:03] <strcat> JustAPerson: not specific to rust and not related to OS threads
[00:58:03] <SiegeLord> I guess what I really want is a TLS struct
[00:58:13] <SiegeLord> That is thread-local, rather than task local
[00:58:24] <cmr> SiegeLord: #[thread_local] attribute on a static
[00:58:30] <strcat> JustAPerson: libgreen and libnative are equally bad for CPU-bound work where you aren't dividing it up yourself and doing load balancing yourself
[00:58:39] <cmr> but ... with libgreen you're going to migrate between threads.
[00:58:41] <SiegeLord> Although, perhaps it doesn't strictly matter, if I can just query the relevant stuff using the C library
[00:58:43] *** Joins: derek_c (derek@moz-767CE985.nys.biz.rr.com)
[00:59:08] <bvssvni> cmr: is there a page with list of all the annotations and description?
[00:59:16] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[00:59:18] <cmr> bvssvni: not descriptions, no.
[00:59:35] <strcat> JustAPerson: either way a task needs a large stack + other context stuff
[00:59:37] <cmr> after I'm done TWiR I'll see if I can update the manual with those.
[00:59:43] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[00:59:49] <bvssvni> cmr: :)
[00:59:52] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[00:59:57] <strcat> JustAPerson: calling mmap + mprotect alone means making a task isn't very cheap, so you need large units of work to make it profitable
[00:59:58] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[01:00:08] <strcat> imo tasks should be renamed
[01:00:13] <bvssvni> cmr: I always read through TWiR, it is really helpful
[01:00:15] *** Quits: jonathanmarvens (jonathanma@moz-5A7C3C77.hsd1.ma.comcast.net) (Quit: )
[01:00:17] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[01:00:17] <strcat> it should just be called a 'thread', that's what it is
[01:00:18] <JustAPerson> strcat: ahh, alright. That's sorta what I was thinking. Thanks for the further explanation
[01:00:18] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[01:00:24] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[01:00:27] <strcat> the name 'task' should be reserved for truly lightweight tasks
[01:00:39] <strcat> as in a task tree/graph without stacks
[01:00:43] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[01:00:57] <strcat> rust's tasks are no lighter than C threads - with or without libgreen
[01:01:17] <strcat> libgreen means you don't pay for the overhead of fair scheduling + preemption (but you pay in other ways), but they're not lighter
[01:01:26] <strcat> if anything they're more expensive due to libuv resources
[01:02:15] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[01:02:16] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[01:02:44] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[01:03:00] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[01:03:00] <bvssvni> is there a rule like 50 ms or something of when to spawn a task?
[01:03:22] *** Quits: jxv (jxv@moz-D1F0EBC3.socal.res.rr.com) (Quit: QUIT)
[01:03:37] <strcat> bvssvni: no hard rules
[01:03:49] <kimundi> woha, suddenly lost an hour
[01:03:53] <bvssvni> thumb rules?
[01:03:56] <kimundi> damn DST
[01:04:10] <kimundi> (The non-Rust meaning)
[01:06:41] *** Joins: voltagex (voltagex@moz-11D4D0E3.voltagex.org)
[01:08:48] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[01:09:12] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[01:09:48] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Quit: synackse)
[01:10:03] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:10:13] *** Quits: derek_c (derek@moz-767CE985.nys.biz.rr.com) (Ping timeout)
[01:10:26] *** Joins: derek_c (derek@moz-767CE985.nys.biz.rr.com)
[01:10:48] *** Quits: Rusky (russell@moz-37E87AF7.slkc.qwest.net) (Ping timeout)
[01:12:11] *** Quits: derek_c (derek@moz-767CE985.nys.biz.rr.com) (Ping timeout)
[01:12:30] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[01:12:56] *** Joins: derek_c (derek@moz-767CE985.nys.biz.rr.com)
[01:13:37] *** Quits: luz (lu.cy@moz-CD18B14B.customer.cdi.no) (Ping timeout)
[01:14:08] *** Quits: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se) (Ping timeout)
[01:14:54] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[01:15:10] *** Quits: o11c (ben@moz-23AECAB8.customer.t3.se) (Ping timeout)
[01:15:24] *** Joins: luz (lu.cy@moz-CD18B14B.customer.cdi.no)
[01:16:28] *** Quits: lfox (lfox@E8DE57A0.A6ED1BA6.ECED8BE3.IP) (Quit: ZZZzzz‚Ä¶)
[01:16:38] *** Joins: Mowah (Mowah@moz-8548F376.cust.bredbandsbolaget.se)
[01:16:41] <johnsoft> differently-scheduled timezones?
[01:16:55] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[01:17:03] <cmr> kimundi: you didn't lose an hour, it just took back the hour it gave you in the fall :)
[01:17:38] *** Quits: derek_c (derek@moz-767CE985.nys.biz.rr.com) (Ping timeout)
[01:17:59] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[01:18:00] <johnsoft> Is RACER the state of the art in rust autocompletion right now?
[01:18:12] <cmr> johnsoft: it's the first and only autocompletion tool, so yes.
[01:18:41] <johnsoft> alright, thanks
[01:18:45] <aatch> It is the worst rust autocompletion tool in existence :P
[01:19:36] <johnsoft> I wrote a sublime text plugin using it, and then discovered it was a lot more limited than I hoped
[01:19:59] *** Joins: Rusky (russell@moz-37E87AF7.slkc.qwest.net)
[01:21:21] *** Quits: Armavica (virgile@moz-AD428ED7.ens.fr) (Quit: Lost terminal)
[01:22:32] *** Joins: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net)
[01:22:56] *** Joins: Armavica (virgile@moz-AD428ED7.ens.fr)
[01:22:57] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[01:24:35] *** Quits: pepper_chico (pepper_chi@EB1D9484.8A9E5939.F546FA5F.IP) (Quit: WeeChat 0.4.1)
[01:24:43] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[01:27:31] *** Joins: lfox (lfox@E8DE57A0.A6ED1BA6.ECED8BE3.IP)
[01:29:37] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[01:31:14] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[01:31:20] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[01:31:27] *** Joins: fyolnish (fyolnish@moz-1319A8A0.uqwimax.jp)
[01:33:08] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Quit: WeeChat 0.4.3)
[01:33:18] *** Quits: fyolnish (fyolnish@moz-1319A8A0.uqwimax.jp) (Ping timeout)
[01:34:14] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[01:34:55] *** Quits: japaric (japaric@FCB3637C.59294C36.95AFB88D.IP) (Ping timeout)
[01:34:57] *** Joins: paraze (paraze@moz-9E32EAAD.w90-27.abo.wanadoo.fr)
[01:35:30] *** Quits: paraze (paraze@moz-9E32EAAD.w90-27.abo.wanadoo.fr) (Quit: Quitte)
[01:36:00] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[01:37:50] *** Quits: lfox (lfox@E8DE57A0.A6ED1BA6.ECED8BE3.IP) (Quit: ZZZzzz‚Ä¶)
[01:37:54] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[01:38:45] *** Joins: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP)
[01:42:27] *** Quits: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[01:42:35] *** Joins: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net)
[01:43:03] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[01:43:11] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[01:43:53] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[01:44:24] *** Quits: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[01:44:38] *** Joins: o11c (ben@moz-23AECAB8.customer.t3.se)
[01:45:16] *** Joins: aatch (aatch@moz-2BB0AC01.cable.telstraclear.net)
[01:45:41] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[01:46:15] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[01:46:23] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[01:48:03] *** Quits: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP) (Ping timeout)
[01:48:16] *** Joins: Blub\0 (wry@620605B3.71150E1A.237AE2BA.IP)
[01:49:23] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Quit: synackse)
[01:52:39] *** Quits: viatropos (viatropos@moz-F39AA1DC.hsd1.ca.comcast.net) (Quit: viatropos)
[01:53:19] *** Joins: viatropos (viatropos@moz-F39AA1DC.hsd1.ca.comcast.net)
[01:53:30] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[01:54:16] *** Joins: pepper_chico (pepper_chi@EB1D9484.8A9E5939.F546FA5F.IP)
[01:54:16] *** Quits: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com) (Quit: Leaving)
[01:54:53] <alan_andrade> In my current experiment, multiple processes write to one file. How should I coordinate the writing ?
[01:54:54] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[01:55:18] <sfackler> file locks maybe, but those are a nightmare
[01:55:23] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[01:55:39] <cmr> alan_andrade: have one task do the writing and have the others send messages to it.
[01:55:41] <alan_andrade> I thought about giving each process a file, and after all of them finish, read them with no importance of order
[01:55:49] <cmr> oh *processes*
[01:55:51] * cmr learns to read
[01:56:26] <sfackler> alan_andrade: alternatively, IPC synchronization between the processes
[01:56:31] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[01:56:33] <sfackler> but separate files is almost certainly the way togo
[01:56:36] <mcpherrin> alan_andrade: To do this sanely you need some sort of IPC for the processes to coordinate, I think
[01:56:53] <mcpherrin> .... which is exactly what sfackler just said :-P
[01:59:23] <alan_andrade> Alright, It makes sense. I think I will approach it both ways. Just to experiment.
[01:59:40] <doomlord_> name mangling is going to include alot of detail about tempalted/generic arguments i guess, isn't it
[01:59:41] <alan_andrade> Can't wait to share my blog post to receive feedback <3
[01:59:55] <cmr> doomlord_: it does, yes.
[02:00:09] <alan_andrade> thanks rusties.
[02:00:18] <cmr> doomlord_: as you can see with nm, our symbol names are very long. eddyb has a small "rustfilt" script to make them readable.
[02:01:24] <doomlord_> i'm just looking into C++/rust interop again; up till now i was only using C stubs ... at least you seem to be able to "extern"C""  a c++ free function with templated parameters (not a templated function obviously), if you can replicate similar datastructures yourself
[02:01:37] <doomlord_> i.e. pass vectors across
[02:01:45] <cmr> sure
[02:03:31] <doomlord_> i think that should be enough for me for the most part
[02:03:35] *** Quits: rylev (rylev@moz-2DA871B7.cust.telecolumbus.net) (Client exited)
[02:03:56] *** Joins: rylev (rylev@moz-2DA871B7.cust.telecolumbus.net)
[02:04:14] <YourBestFriend> guys
[02:04:18] <YourBestFriend> how long until 1.0?
[02:04:40] <kimundi> YourBestFriend: probably before 2015
[02:04:44] <doomlord_> perhaps it would be possible to have a #[] that gives a symbol a specific mangle (one could cut-paste the C++ ... )
[02:04:51] <cmr> YourBestFriend: https://docs.google.com/a/octayn.net/spreadsheet/ccc?key=0AlWBWplsaTZvdGdSdEVzZW1BeDA5dm0zM2FFeW0ySEE&usp=drive_web#gid=0
[02:05:27] <cmr> doomlord_: #[link_name="some mangled garbage"] fn foo() { ... }
[02:05:38] *** Quits: rylev (rylev@moz-2DA871B7.cust.telecolumbus.net) (Ping timeout)
[02:05:41] <cmr> doomlord_: unless you mean using a specific mangling scheme?
[02:06:13] <doomlord_> thats what i meant, thats exposing rust, can you go the other way:  #[link_name..] extern "C" fn ..... ;
[02:06:36] <doomlord_> (i.e. to view a c++ mangled function from rust)
[02:06:52] <cmr> I think we might be able to support a very limited form of C++ name mangling.
[02:06:53] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Input/output error)
[02:07:18] <cmr> We try to follow it now
[02:07:19] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[02:07:29] <cmr> We don't support stuff like :: in function names though
[02:07:32] <cmr> so that throws a wrench in it
[02:07:37] <cmr> at least for c++ namespaces
[02:07:58] <YourBestFriend> cmr: does that mean all there's left to do is TotalOrd/TotalEq?
[02:08:05] <doomlord_> i wonder if c++ compilers have something like the 'link-name' pragma..
[02:08:16] <cmr> YourBestFriend: no, green just means someone has claimed it to work on.
[02:08:35] <cmr> YourBestFriend: everything that is not crossed out still needs to be done.
[02:08:49] <YourBestFriend> ah
[02:08:54] <aatch> Man I *wish* we had DST >.>
[02:09:09] <YourBestFriend> daylight saving time?
[02:09:14] <cmr> aatch: nrc is working on it :)
[02:09:23] <cmr> YourBestFriend: http://smallcultfollowing.com/babysteps/blog/2014/01/05/dst-take-5/
[02:09:38] <aatch> cmr, I know, but I wish we had it **now**
[02:09:50] *** Quits: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net) (Ping timeout)
[02:10:00] * aatch is not known for patience
[02:10:14] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[02:10:41] <YourBestFriend> wait, rust doesn't have that?
[02:10:48] <YourBestFriend> you can't add items to vectors?
[02:10:59] <sfackler> aatch: http://www.youtube.com/watch?v=TRTkCHE1sS4
[02:11:30] <cmr> YourBestFriend: it's more nuanced than that
[02:11:42] <cmr> there is no unboxed array type.
[02:11:59] <cmr> all types whose size is not known at compile time must be behind a pointer.
[02:12:00] <YourBestFriend> I still don't know what a box is ;3
[02:12:09] <cmr> A chunk of memory that is malloc'd
[02:12:19] <cmr> (simplification, but good enough for explanation)
[02:12:22] <JustAPerson> when you "extern crate libname", what filename does rustc look for? Is the hash and version number necessary in the filename of the crate's .rlib? I'm trying to simplify writing this Makefile
[02:12:24] <YourBestFriend> ok
[02:12:44] <cmr> JustAPerson: yes, the hash and version number are necessary.
[02:12:51] <aatch> YourBestFriend, from the compiler's perspective a type that has a size defined at runtime might as well not have a size at all.
[02:13:00] <cmr> JustAPerson: https://github.com/KokaKiwi/rust-mk
[02:13:05] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[02:13:19] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[02:14:09] <YourBestFriend> I want to learn rust
[02:14:14] <YourBestFriend> I always give up, though
[02:14:46] *** Quits: robhobbes (robert@moz-9B3FF613.slc.googlefiber.net) (Quit: Leaving.)
[02:14:53] *** Quits: Saj (Saj@moz-840D0658.netvisao.pt) (Quit: Leaving)
[02:14:57] *** Quits: hacker_sam (hacker_sam@moz-F624512F.hsd1.pa.comcast.net) (Client exited)
[02:14:57] *** Joins: hacker_sam (hacker_sam@moz-F624512F.hsd1.pa.comcast.net)
[02:15:05] <kimundi> YourBestFriend: Just start using it a bit :)
[02:15:10] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[02:15:32] <YourBestFriend> on what?
[02:15:46] <Havvy> YourBestFriend:  How about implement 2048 in it?
[02:15:57] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:16:00] <JustAPerson> cmr: wow that's a mess. I'll give that try though. Thanks.
[02:16:27] <kimundi> Anything, really. Writing toy programs, hacking on the stdlib etc
[02:16:29] <YourBestFriend> I¬†don't know what that is?
[02:16:46] <sfackler> JustAPerson: here's a simpler makefile to look at as well: https://github.com/sfackler/rust-phf/blob/master/Makefile.in
[02:17:07] <cmr> that only handles one crate though
[02:17:20] <sfackler> it builds two!
[02:17:33] <cmr> fine, two  :p
[02:17:35] <kimundi> YourBestFriend: People seem to like solving https://projecteuler.net/ problems with Rust to learn the language
[02:17:52] <cmr> http://www.matasano.com/articles/crypto-challenges/ too
[02:18:00] <Havvy> kimundi:  I find that Project Euler was more about learning math than learning languages.
[02:18:08] *** Quits: hacker_sam (hacker_sam@moz-F624512F.hsd1.pa.comcast.net) (Client exited)
[02:18:18] <kimundi> Might be, haven't tried it.
[02:18:23] <YourBestFriend> yeah, I'm actually doing some of them in C++ right now
[02:18:29] *** Joins: hacker_sam (hacker_sam@moz-F624512F.hsd1.pa.comcast.net)
[02:18:35] <patpat> YourBestFriend: 2048's a game: http://en.wikipedia.org/wiki/2048_(video_game)
[02:20:04] <aatch> filling in gaps in Rosetta code would be a good way too.
[02:20:20] *** Joins: Nekit1234007_ (Nekit12340@1A3BF3D7.477D93D.4707F662.IP)
[02:20:31] <Havvy> There's a post talking about algorithms and data structures one guy did in C in /r/programming page 3 or 4.
[02:20:56] *** Quits: Nekit1234007 (Nekit12340@7B4CA0FD.CDD224AA.4707F662.IP) (Ping timeout)
[02:23:41] *** Quits: rook (rook@moz-DE88DB2D.hfc.comcastbusiness.net) (Quit: rook)
[02:23:42] *** Quits: richo (richo@moz-C36D6D90.pa.vic.optusnet.com.au) (Ping timeout)
[02:25:39] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Quit: synackse)
[02:26:42] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Input/output error)
[02:27:04] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[02:28:55] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[02:29:08] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[02:30:04] <YourBestFriend> can someone remind me of 0,4WHY we need to compile llvm and libuv? can't we just take the upstream versions?
[02:30:16] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:30:22] <cmr> YourBestFriend: no, we have patches.
[02:30:29] *** Quits: viatropos (viatropos@moz-F39AA1DC.hsd1.ca.comcast.net) (Quit: viatropos)
[02:30:44] <YourBestFriend> about what?
[02:31:04] <cmr> https://github.com/rust-lang/llvm/commits/rust-llvm-2014-02-26
[02:31:17] *** Joins: mib_jbsx6j (Mibbit@17C39DD.FA4CF353.CC1A2609.IP)
[02:31:23] <cmr> everything up to 12c9f92 are our own patches.
[02:31:27] *** Joins: fyolnish (fyolnish@moz-43B9BAF1.uqwimax.jp)
[02:31:34] *** kimundi is now known as zz_kimundi
[02:31:59] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[02:32:02] <cmr> and two patches on libuv, https://github.com/rust-lang/libuv/commits/rust-2014-02-16-do-not-delete
[02:32:24] <cmr> https://github.com/mozilla/rust/issues/4259 if you'd like to help upstream them :)
[02:33:10] *** Quits: fyolnish (fyolnish@moz-43B9BAF1.uqwimax.jp) (Ping timeout)
[02:34:05] *** Joins: Denommus (user@moz-D91EF312.user.veloxzone.com.br)
[02:38:03] *** Quits: zz_kimundi (kimundi@moz-C9206138.dip0.t-ipconnect.de) (Ping timeout)
[02:38:29] <Denommus> nphysics' Makefile doesn't make much of a sense -.-
[02:38:37] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[02:40:03] *** Joins: TinFox (TinFox@F3D0A69D.9F4E79F1.F7512391.IP)
[02:41:01] *** Quits: mib_jbsx6j (Mibbit@17C39DD.FA4CF353.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[02:41:16] *** Joins: japaric (japaric@F19FD5A3.A75B951F.A936879B.IP)
[02:41:18] <dsrx> what's that? a confusing makefile?
[02:41:23] *** Joins: zz_kimundi (kimundi@moz-8B5A2112.dip0.t-ipconnect.de)
[02:41:38] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[02:41:39] *** zz_kimundi is now known as kimundi
[02:41:45] <cmr> (in other words, every Makefile that does something useful)
[02:42:35] <JustAPerson> cmr: that matasano project looks very cool. thanks for linking that
[02:43:15] <cmr> JustAPerson: it's what I started using Rust with, almost a year ago (my first rustiversary is next month!)
[02:43:27] <cmr> JustAPerson: never did end up finishing it, been having too much fun with Rust ;P
[02:44:26] <sfackler> I started with the matasano challenge as well
[02:44:29] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[02:44:34] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[02:44:51] <JustAPerson> cmr: heh, nice. I sent them an email, does it take long for a response?
[02:44:57] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[02:45:04] <cmr> JustAPerson: I think they recently automated it, so it shouldn't.
[02:46:26] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[02:48:00] *** Joins: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP)
[02:48:04] <bollu> cmr: how come all of rust uses single line comments?
[02:48:12] <dpc> I'm compiling library and rustc warns about dead code.
[02:48:26] <dpc> What's the point? Isn't it obvious that library symbols are not always called directly?
[02:48:35] <cmr> dpc: they're only marked dead if they're not publically reachable.
[02:48:39] <bjeanes> is there a mdns resolver library for rust?
[02:48:45] <cmr> bjeanes: no.
[02:48:53] <bjeanes> yeah didn't think so...
[02:48:57] <bjeanes> thanks anyway :)
[02:49:04] <cmr> bjeanes: this is your chance to write the first one!
[02:49:06] <cmr> :)
[02:49:19] <sfackler> bollu: to avoid style wars over the multitude of ways to format multiline /** comments */ IIRC :P
[02:49:21] <cmr> bollu: because that's what the accepted style is.
[02:49:35] <dpc> I do have `pub fn` ...
[02:49:43] <bjeanes> hah I haven't even done any rust yet (other than the docs) but I had an idea for something that would need mdns. I won't jump straight to building said lib ... yet.
[02:49:45] <sfackler> dpc: is the module it's in public?
[02:49:53] <dpc> Hmmm...
[02:49:54] <cmr> dpc: it needs to be in a pub module, recursively, up to th crate root.
[02:49:56] <dpc> The struct wasn't ...
[02:50:01] <cmr> http://static.rust-lang.org/doc/master/tutorial.html#crates-and-the-module-system
[02:50:09] <bollu> sfackler: ah xD 
[02:50:16] <Havvy> We should really have a tutorial describing that.
[02:50:21] *** Joins: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu)
[02:50:22] *** Quits: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net) (Quit: bleibig)
[02:50:39] <cmr> dpc: the analysis that drives that lint is the same one that strips unreachable code from the compiled library, so if it says it is dead, you better believe it :)
[02:54:22] <bollu> limit_thread_creation_due_to_osx_and_valgrind <- this is hilarious
[02:54:37] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[02:54:39] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[02:57:42] *** Parts: rpearl (rpearl@moz-2B41ACB5.andrew.cmu.edu) ()
[02:58:10] <dpc> When I'm writting a library, should I wrap whole source int mod mylibraryname { ... } ?
[02:58:34] *** Quits: pepper_chico (pepper_chi@EB1D9484.8A9E5939.F546FA5F.IP) (Quit: WeeChat 0.4.1)
[02:58:44] <cmr> no.
[02:58:48] <cmr> never do that.
[02:59:07] <dpc> So what do I do?
[02:59:22] <dpc> Have a "lib.rs" and put "mod mylibraryname" ?
[02:59:26] <cmr> no.
[02:59:32] <cmr> #[crate_id = "mylibraryname"];
[02:59:36] <cmr> in lib.rs
[02:59:48] <cmr> #![crate_id = "mylibraryname"] if you have a new enough rustc.
[03:00:05] <dsrx> dang, I was hoping we'd get to the answer by process of elimination
[03:00:08] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[03:00:34] *** Joins: apollow (yellowy432@moz-DF01490A.lightspeed.sntcca.sbcglobal.net)
[03:00:39] <cmr> every item in your crate is a child of the unnamed root module.
[03:00:45] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[03:00:56] <cmr> other crates import your crate like `extern crate foo;`
[03:01:01] <bvssvni> dsrx: elementary, my dear Watson
[03:01:07] <cmr> by default it will look for libfoo-hash.rlib
[03:01:19] <cmr> the "foo" part in that comes from the crate_id your crate defines.
[03:01:26] <strcat> bollu: os x puts a very low arbitrary cap on OS threads, maybe because their scheduling is really bad
[03:01:27] <cmr> it can also do `extern crate foo = "bar";`
[03:01:38] <cmr> and it will look for libbar-hash.rlib instead.
[03:02:35] <strcat> rusti: fn foo() { foo() } foo()
[03:02:38] -rusti- task '<main>' has overflowed its stack
[03:02:38] -rusti- playpen: application terminated abnormally with signal 4 (Illegal instruction)
[03:02:42] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[03:02:52] <strcat> rusti: fn foo() { loop {} } foo()
[03:02:57] -rusti- playpen: timeout triggered!
[03:03:22] *** Quits: Doppp (Doppp@moz-CE720357.hfc.comcastbusiness.net) (Ping timeout)
[03:03:44] <JustAPerson> rusti: fn foo() { return foo()} foo()
[03:03:44] -rusti- task '<main>' has overflowed its stack
[03:03:44] -rusti- playpen: application terminated abnormally with signal 4 (Illegal instruction)
[03:03:55] <strcat> that's the same thing as foo() { foo() }
[03:04:20] <strcat> (it doesn't use -O so the tailcallelim pass isn't run)
[03:04:24] <JustAPerson> was trying to see if it would force tail-call elimination
[03:04:29] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[03:04:29] <JustAPerson> o
[03:04:35] <strcat> never going to be forced TCO
[03:04:44] <strcat> it ruins debugging, can't do it at --opt-level=0
[03:04:45] <cmr> not necessarily "never"
[03:04:49] <strcat> never.
[03:04:49] <cmr> the `be` keyword is reserved for this.
[03:04:54] <strcat> still ruins debugging
[03:04:58] <cmr> yeah
[03:05:02] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[03:05:23] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[03:05:35] <strcat> only good reason for --opt-level=0 is debugging, as otherwise you'd just use --opt-level=1
[03:05:40] <strcat> imo at least
[03:05:53] * strcat hasn't checked if =0 or =1 is faster to compile
[03:06:05] *** Joins: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net)
[03:06:07] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Quit: Leaving)
[03:06:16] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[03:07:11] *** Quits: jadbaires (jadrian@789756EE.68CD5565.6119BA41.IP) (Quit: Konversation terminated!)
[03:07:17] *** Joins: jadbaires (jadrian@moz-EA7AD167.dsl.telepac.pt)
[03:13:15] *** Joins: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net)
[03:13:35] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[03:13:46] <dsrx> oooh, collections::list is gone?
[03:13:50] <cmr> yes.
[03:14:21] *** Joins: rylev (rylev@moz-2DA871B7.cust.telecolumbus.net)
[03:15:51] <o11c> strcat: technically, it *is* possible to debug with TCO
[03:16:03] *** Quits: rylev (rylev@moz-2DA871B7.cust.telecolumbus.net) (Ping timeout)
[03:16:10] <o11c> strcat: just need the recursive frame to include a counter
[03:16:26] <strcat> o11c: does DWARF support it?
[03:16:50] <cmr> o11c: you still lose information from frames "above" the current one.
[03:17:08] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[03:17:14] <o11c> cmr: by the nature of TCO, there is no longer any relevant information in those frames
[03:17:23] <o11c> strcat: looking ...
[03:17:34] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[03:18:04] <cmr> o11c: I don't believe that. You lose the context of how the current frame came to be.
[03:18:41] <cmr> sure you can reverse whatever computation got you to that point
[03:18:43] <cmr> but that's still a pain.
[03:18:53] <cmr> actually you can't
[03:19:09] <cmr> (but you probably could for most tail recursive algorihthms)
[03:19:12] <o11c> the only possible information from those frames would be the expiring values that were passed to the next functions
[03:19:22] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[03:19:44] <doy> those expiring values are useful in debugging
[03:19:48] <mcpherrin> Is there any code coverage with --test
[03:19:56] <doy> and those aren't the only possible information anyway
[03:20:04] <cmr> fn foo(x: int) -> int { if x > 3000 { x } else { foo(x + random()) } }
[03:20:06] <sfackler> o11c: if I'm in a debugger, I expect to be able to look at the value of e.g. function arguments at any level in the call stack
[03:20:20] <doy> you lose the values of local variables too, which you would otherwise have
[03:20:23] <mcpherrin> Hooks for llvm-cov maybe?
[03:20:36] <cmr> mcpherrin: kcov works reasonably well.
[03:21:01] <cmr> mcpherrin: we don't run llvm's gcov generation passes yet.
[03:21:19] <mcpherrin> hmm, okay
[03:22:12] <mcpherrin> let's try out kcov.
[03:22:43] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[03:23:29] *** Quits: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl) (Quit: Leaving.)
[03:24:51] <mcpherrin> cmr: thanks! This is pretty good
[03:25:08] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[03:25:44] <mcpherrin> not sure how to interpret some if it output though, like what coverage info means on an enum
[03:25:50] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[03:26:39] <cmr> it's probably marking the constructor functions as that.
[03:26:40] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[03:26:50] *** Quits: oxum (anonymous@C28A3971.1F20C5D9.520CDC98.IP) (Ping timeout)
[03:26:52] *** Joins: synackse (jordyd@2D608993.77F880E0.D9401097.IP)
[03:27:36] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[03:28:41] <apollow> Hey does anyone here know a guide or a site on how to do simple casting?
[03:29:06] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[03:29:14] <cmr> apollow: do you have any specific questions?
[03:29:24] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[03:29:25] <bvssvni>  apollow: x as uint
[03:29:35] <apollow> Trying to cast u16 to an int, it should be eas-- ah.
[03:29:49] *** Quits: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:31:18] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[03:31:27] *** Joins: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp)
[03:33:00] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:33:17] *** Quits: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: It is tiem!)
[03:33:21] *** Quits: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp) (Ping timeout)
[03:36:36] *** Quits: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net) (Quit: Leaving.)
[03:36:38] *** Quits: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net) (Client exited)
[03:36:54] *** Joins: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net)
[03:37:18] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[03:40:08] *** Quits: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr) (Ping timeout)
[03:40:51] *** Joins: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp)
[03:40:51] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[03:41:05] *** Joins: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net)
[03:42:38] *** Joins: oxum (anonymous@67DB2C38.BBE46712.520CDC98.IP)
[03:44:44] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[03:45:18] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[03:45:42] <cmr> http://cmr.github.io/blog/2014/03/29/this-week-in-rust/
[03:46:58] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[03:51:24] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[03:52:22] <YourBestFriend> 0,4WHY did rust choose -3> for return type?
[03:52:26] <o11c> cmr: only internal attribute change
[03:52:38] <o11c> YourBestFriend: -> is pretty standard
[03:52:52] <YourBestFriend> o11c: how so?
[03:52:57] <YourBestFriend> I've seen it in C++
[03:53:05] <YourBestFriend> other than that‚Ä¶ not really
[03:53:12] <cmr> YourBestFriend: almost every language outside of the algol family uses it.
[03:54:16] <YourBestFriend> is C part of the algol family?
[03:54:27] <cmr> (though some might flame me for saying C is in the algol family ;p)
[03:54:33] <Valloric> cmr: the Algol family is pretty big though :)
[03:55:08] <cmr> Valloric: yeah, well, it's old :p
[03:55:27] <Valloric> cmr: sure it‚Äôs old, but it probably has 99.99% of the mindshare, if not more
[03:55:43] <Valloric> not that I‚Äôm saying I don‚Äôt like ->, I do
[03:56:08] <YourBestFriend> yeah
[03:56:25] <YourBestFriend> I¬†kind of feel neutral about it to be honest
[03:56:39] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[03:56:44] <dsrx> I think I'd prefer fn foo(x: In): Out { } but no issue with ->
[03:57:09] *** Joins: csherratt_ (csherratt@moz-7685819.cpe.teksavvy.com)
[03:57:20] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[03:57:21] *** csherratt_ is now known as csherratt
[03:57:47] <cmr> that's true, I amend my previous statement to mean -> or : for return type.
[03:57:56] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[03:58:03] <mcpherrin> dsrx: I think that syntax gets pretty confusing when you start getting higher order functions
[03:58:23] <Valloric> I noticed that vec::Vec has last(), but not first()‚Ä¶ and has tail(), but doesn‚Äôt have head()
[03:58:29] <Valloric> this seems‚Ä¶ suboptimal
[03:58:46] <Valloric> to be blunter, it seems downright ugly
[03:58:54] <cmr> Valloric: the complement to 'tail' is 'init', from scheme
[03:59:03] <dsrx> maybe i'm biased because i learned pascal as a youngin :)
[03:59:11] <Valloric> cmr: that makes complete sense /sarc
[03:59:30] <cmr> Valloric: it's the accepted terminology! at least we don't use cdr
[03:59:35] <sfackler> Valloric: at least it's not car, cdr!
[03:59:36] <sfackler> efb
[03:59:57] <Valloric> so the argument is ‚Äúyeah it‚Äôs bad but it could be worse‚Äù? :)
[04:00:13] <cmr> well, specifically my argument is "Vec's API isn't well designed"
[04:00:23] <Valloric> cmr: agreed WHOLEHEARTEDLY
[04:00:36] <cmr> the rust-core one was nice and small, but then it got blown up by all the crappy methods that were on ~[T]
[04:01:35] <Valloric> the general point I‚Äôm trying to make is that the API for such core types has to be pristine‚Ä¶ broken windows theory and all that
[04:01:41] <cmr> like "grow" and "grow_set", what the hell even is that.
[04:02:00] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[04:02:20] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[04:02:26] <cmr> Valloric: it's messy right now to make the transition from ~[] a straightforward refactor
[04:02:37] <cmr> which is pretty useful given the 200k codebase that needs migrating.
[04:02:49] <Valloric> cmr: I understand, just something to keep in mind
[04:02:59] <Valloric> I‚Äôm fully awary that I‚Äôm using a pre-1.0 lang
[04:03:04] <Valloric> aware*
[04:03:09] *** Quits: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP) (Ping timeout)
[04:03:21] <mcpherrin> Valloric: I agree with your general point.  I'd like to write up a proper naming scheme, and a taxonomy for how our names fit into that
[04:03:51] <cmr> (also `first` is somewhat unnecessary given that it can just be .get(0), where as `last` needs to be `.get(v.len()-1)`)
[04:04:03] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Ping timeout)
[04:04:08] <cmr> mcpherrin: kimundi wrote one, it's in an issue somewhere.
[04:04:36] <mcpherrin> cmr: I saw something for iterators, but all names?
[04:05:08] <cmr> well, not *all* names, but method names for coercions.
[04:05:17] <Valloric> great set of rules for good API design: http://www.infoq.com/articles/API-Design-Joshua-Bloch
[04:05:21] <mcpherrin> Yeah, I want to do *all* names ;)
[04:05:29] <mcpherrin> Mostly as a personal excercise in silliness
[04:05:40] <mcpherrin> but it's probably globally helpful
[04:05:42] <cmr> Edit https://github.com/mozilla/rust/wiki/Note-style-guide to your heart's content :)
[04:06:46] <strcat> Valloric: Vec wasn't supposed to have those methods
[04:06:56] *** Quits: WebeWizard (WebeWizard@moz-7CCD1DAE.ks.ks.cox.net) (Quit: Leaving)
[04:06:59] *** Quits: IanCormac84 (User@59F81F12.64D641E5.67DFF8B4.IP) (Ping timeout)
[04:07:11] <strcat> Valloric: the slice methods were supposed to be implemented for Vec all at once via a trait
[04:07:22] <strcat> Valloric: but people kept sending pull requests adding a method or two to Vec instead
[04:07:33] <Valloric> strcat: sigh‚Ä¶ :)
[04:07:37] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[04:07:43] *** Joins: IanCormac84 (User@4D3819B.2A8D8854.67DFF8B4.IP)
[04:07:51] <Valloric> such is life
[04:07:54] <strcat> Valloric: anyway I voiced my concern on one of those PRs, don't know what has happened since
[04:09:18] <Valloric> my pet example of bad API in Rust is actually the macro ‚Äúfragment specifiers‚Äù: http://static.rust-lang.org/doc/master/guide-macros.html#invocation-syntax
[04:09:46] <Valloric> ‚Äútype‚Äù shortened to ‚Äúty‚Äù‚Ä¶
[04:09:56] <Valloric> ‚Äúpat‚Äù instead of ‚Äúpattern‚Äù
[04:09:57] *** Joins: mib_844h7f (Mibbit@17C39DD.FA4CF353.CC1A2609.IP)
[04:10:10] <Valloric> you‚Äôd think the write was running out of characters 
[04:10:12] <cmr> those are the names used inside the compiler, makes perfect sense.
[04:10:13] <Valloric> writer*
[04:10:26] <Valloric> cmr: the user doesn‚Äôt care
[04:10:28] <cmr> also from the era of "no more than 3 char keywords"
[04:10:36] <Valloric> cmr: great era, that
[04:10:39] <cmr> Valloric: the user shouldn't be using macros, they're feature gated :P
[04:11:04] *** Quits: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net) (Quit: WeeChat 0.4.3)
[04:11:04] <dsrx> type is a reserved keyword i'm pretty sure
[04:11:15] *** Quits: IanCormac84 (User@4D3819B.2A8D8854.67DFF8B4.IP) (Ping timeout)
[04:11:15] <cmr> macros don't need to care about that.
[04:11:22] <cmr> they exist beyond syntax.
[04:12:09] *** Joins: IanCormac84 (User@49FC95BF.2A8D8854.67DFF8B4.IP)
[04:12:32] <bollu> cmr: will the feature gate be removed (on macros) ?
[04:13:21] <Valloric> bollu: I‚Äôd be surprised if Rust launched without macros in some form‚Ä¶ not that I have any information, but they seem like a great feature that‚Äôs fairly widely used and liked
[04:13:28] <YourBestFriend> in a match construct, can you have a mix of statements and blocks?
[04:13:48] *** Joins: IanCormac841 (User@B738930D.2A8D8854.67DFF8B4.IP)
[04:14:02] *** Quits: IanCormac84 (User@49FC95BF.2A8D8854.67DFF8B4.IP) (Ping timeout)
[04:14:03] <cmr> YourBestFriend: the rhs of a match arm is an expression.
[04:14:05] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[04:14:15] <cmr> bollu: someday probably.
[04:14:35] <cmr> bollu: their API and implementation need to be cleaned up a lot though.
[04:14:50] <bollu> cmr: they seem very... unreadable at the present 
[04:14:54] <Valloric> cmr: and the error messages around them
[04:14:56] <diodesign> ah a cmr. I was just reading your blog. a friend is implementing OS X kernel extensions and needs to disable __morestack checks. is there a way to apply that to the whole crate rather than per function?
[04:14:59] <cmr> bollu: that's never going to change, that's just inherent in macros.
[04:15:03] <YourBestFriend> cmr: yeah, or a block, right?
[04:15:08] <cmr> YourBestFriend: a block is an expression.
[04:15:19] <cmr> diodesign: no
[04:15:26] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[04:15:29] <YourBestFriend> yes a block expression
[04:15:30] <diodesign> ok
[04:15:34] <cmr> diodesign: your friend should use `--emit ir` and compile with llc or clang.
[04:15:46] <YourBestFriend> "It's often convenient to use a block expression for each case, in which case the commas are optional."
[04:15:53] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[04:15:57] <cmr> YourBestFriend: so it doesn't take a "block or expression", just an expression.
[04:15:58] <YourBestFriend> can you have a mix of both?
[04:15:59] <strcat> diodesign: https://github.com/thestinger/rust-core the workarounds needed are documented there
[04:16:24] <bollu> YourBestFriend: yep. 
[04:16:31] <YourBestFriend> can you omit the {} in one arm and not omit them in another arm?
[04:16:35] <YourBestFriend> ok
[04:16:37] <strcat> you'll also run into LLVM generating calls to memcpy/memmove/memset and a workaround being needed to define them, etc.
[04:16:39] <diodesign> strcat: oh thanks. FWIW I did manage to get (your?) code building
[04:16:42] <YourBestFriend> in that case, you still need the commas, right?
[04:16:57] <cmr> YourBestFriend: no, but everyone uses them anyway :)
[04:17:28] <diodesign> strcat: ah right, sorry. you're talking about stack safety. ok, got it. thanks.
[04:17:57] <strcat> diodesign: I'm talking about the other problems like the memcpy one
[04:19:31] *** Parts: mib_844h7f (Mibbit@17C39DD.FA4CF353.CC1A2609.IP) ()
[04:20:23] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[04:22:40] *** Quits: IanCormac841 (User@B738930D.2A8D8854.67DFF8B4.IP) (Ping timeout)
[04:23:33] <diodesign> hm ok
[04:23:58] *** Joins: IanCormac84 (User@E34F9E67.2A8D8854.67DFF8B4.IP)
[04:24:00] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[04:24:17] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[04:25:16] <YourBestFriend> does rust have the C kind of for loop?
[04:25:26] <strcat> no
[04:25:53] <strcat> rusti: for i in range(0, 4) { println("i: {}", i) }
[04:25:54] -rusti- <anon>:10:32: 10:39 error: unresolved name `println`.
[04:25:54] -rusti- <anon>:10         for i in range(0, 4) { println("i: {}", i) }
[04:25:54] -rusti-                                          ^~~~~~~
[04:25:54] -rusti- error: aborting due to previous error
[04:25:54] -rusti- playpen: application terminated with error code 101
[04:25:57] <strcat> rusti: for i in range(0, 4) { println!("i: {}", i) }
[04:25:58] -rusti- i: 0
[04:25:58] -rusti- i: 1
[04:25:58] -rusti- i: 2
[04:25:59] -rusti- i: 3
[04:25:59] *** concrete.mozilla.org sets mode: +M 
[04:26:01] -rusti- ()
[04:26:20] *** ChanServ sets mode: +o cmr
[04:26:23] *** cmr sets mode: -M 
[04:26:38] <strcat> that spam blocking is dumb
[04:26:40] <YourBestFriend> what if I¬†want a different step?
[04:26:42] <cmr> yeah.
[04:26:49] <cmr> YourBestFriend: use range_step
[04:26:57] <strcat> registered users shouldn't trigger a flood protection mechanism blocking non-registered users from talking
[04:26:59] <cmr> http://static.rust-lang.org/doc/master/std/iter/fn.range_step.html
[04:27:00] <strcat> ;s
[04:27:33] <cmr> there is a host of wonderful iterator goodness: http://static.rust-lang.org/doc/master/std/iter/index.html
[04:28:46] <YourBestFriend> I¬†see
[04:28:48] <YourBestFriend> that's great
[04:28:57] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[04:29:16] <strcat> rusti: range(0, 4).cycle().take(10).collect::<Vec<int>>()
[04:29:17] -rusti- [0, 1, 2, 3, 0, 1, 2, 3, 0, 1]
[04:29:31] <strcat> rusti: range(0, 4).cycle().map(|x| x * 2).take(10).collect::<Vec<int>>()
[04:29:31] -rusti- [0, 2, 4, 6, 0, 2, 4, 6, 0, 2]
[04:29:41] *** Quits: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net) (Ping timeout)
[04:31:41] <YourBestFriend> can you do something like for x, y in someiter()
[04:31:54] <cmr> for (x, y) in someiter() { ... }
[04:31:54] <YourBestFriend> someiter would return a tuple or idk
[04:31:59] <cmr> precisely
[04:32:05] <YourBestFriend> cool
[04:32:28] <YourBestFriend> I¬†like rust so far
[04:33:45] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[04:39:47] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[04:39:47] *** ChanServ sets mode: +ao brson brson
[04:43:21] <YourBestFriend> http://pastie.org/private/q8wfcdynstkt89un7idy1g
[04:43:29] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[04:43:31] <YourBestFriend> what are circle and rectangle? tuples?
[04:43:39] <cmr> They aren't anything concrete
[04:43:45] <cmr> They are variants of the enum.
[04:43:48] <carllerche> I'm a bit confused as to how HashMap.get is safe, it returns a ref of the value w/ a lifetime of the map. What happens if the entry is removed while the ref to the value is held?
[04:43:59] <cmr> carllerche: it can't be, the borrow prevents that.
[04:44:03] <sfackler> carllerche: the map can't be modified
[04:44:14] *** Quits: Valloric (Valloric@moz-288722BA.hsd1.ca.comcast.net) (Quit: Valloric)
[04:44:19] <cmr> carllerche: while a value is borrowed, it can't be mutated.
[04:44:29] <carllerche> how does that work?
[04:44:58] <carllerche> I must be missing somethign by which this is possible :P
[04:45:11] <YourBestFriend> is enum a bit like a union?
[04:45:13] <cmr> I think the name for it right now is freezing.
[04:45:21] <strcat> carllerche: rust performs borrow checking - it prevents you from modifying the map, statically
[04:45:27] <cmr> YourBestFriend: exactly, specifically it's like a "tagged union"
[04:45:35] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[04:45:36] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[04:45:38] <YourBestFriend> I¬†see
[04:45:41] <strcat> carllerche: either rust knows about the owner, or it already has an &/&mut reference
[04:46:02] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[04:46:15] <strcat> if you take an & ref, it won't allow taking an &mut ref, just more & refs
[04:46:22] <cmr> YourBestFriend: so something of type "Shape" can either be a Circle, or a Rectangle, and the only operation you can do on it is a `match`
[04:46:23] <strcat> if you take an &mut ref, you can't take any more & refs
[04:46:32] <strcat> carllerche: rust statically prevents iterator/reference invalidation
[04:47:01] <carllerche> ah, so you cannot perform gets on &mut refs to the HashMap?
[04:47:09] <carllerche> ah, there is a get_mut for that
[04:47:32] <YourBestFriend> hmmmmmm
[04:47:49] <strcat> carllerche: rust knows get takes & and returns a ref with the same lifetime
[04:47:50] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[04:48:00] <strcat> it also knows get_mut takes &mut and returns a ref with the same lifetime
[04:48:18] <strcat> and it statically forbids taking an &mut once you have another borrow
[04:48:38] <strcat> unless it's not overlapping
[04:48:57] <carllerche> right, but you can get value refs from a &mut‚Ä¶ i am going to have to experiment
[04:49:03] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Input/output error)
[04:49:10] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[04:49:14] <carllerche> it's probably too late on a saturday for my mind to wrap around this :P I will just accept it for now
[04:49:31] <strcat> carllerche: these things are part of the fundamental borrow checker design
[04:50:05] <strcat> you might find a soundness hole in something like the interactions with closures but I think the basics are quite solid
[04:50:16] <strcat> it's at least easy to understand why the (simplified) rules are safe
[04:50:41] <strcat> the finer points allowing the flexibility with control flow and so on is more complicated and I definitely don't have that full model in my head ;p
[04:50:59] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[04:51:06] <diodesign> hm, sorry for the newb question but: I'm confused. does rust do split stacks or not?
[04:51:11] <cmr> diodesign: it does not.
[04:51:15] <diodesign> right ok
[04:51:21] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[04:51:32] <cmr> diodesign: it uses the segmented stack prologue to do stack size checking, but aborts on overflow, rather than allocating a new segment.
[04:51:42] <strcat> rusti: let mut x = (1, 2); let c = { let (ref a, ref mut b) = x; *b = 10; a }; (*c, x)
[04:51:43] -rusti- (1, (1, 10))
[04:51:54] <strcat> carllerche: like there, it knows the `a` and `b` borrows aren't overlapping
[04:51:57] <cmr> diodesign: our stack safety regime right now is a bit funky.
[04:51:59] <carllerche> strcat: pretty sure this best sums up my thoughts for now :P https://www.youtube.com/watch?v=W9b_63G3iZU
[04:53:02] *** Joins: ganitsu1 (ganitsu@moz-CB91E096.dialup.adsl.anteldata.net.uy)
[04:53:02] <diodesign> cmr: ok, so it checks the stack has enough space, but __morestack doesn't do anything or isn't expected to do anyting ?
[04:53:09] <carllerche> i should look at the source to HashMap. It seemed to me that 'a refered to the lifetime of the hashmap, but i guess it's reallyt he lifetime of the value
[04:53:10] <cmr> diodesign: __morestack just aborts.
[04:53:30] *** Quits: ganitsu (ganitsu@moz-BD63915F.dialup.adsl.anteldata.net.uy) (Ping timeout)
[04:53:48] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[04:55:07] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[04:55:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:56:04] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[04:57:09] <strcat> carllerche: it refers to both
[04:57:17] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[04:57:24] <strcat> the function signature is 'fn foo<'a>(&'a self) -> Option<&'a T>'
[04:57:39] <strcat> carllerche: meaning the returned value is tied to the lifetime of the value the method was called on
[04:57:51] *** Joins: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net)
[04:58:11] <strcat> rust will a) prevent borrowing &mut or mutating the HashMap while that & borrow exists
[04:58:14] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[04:58:19] <cmr> (via magic)
[04:58:24] <strcat> and b) prevent keeping/using that & borrow after the value is gone
[04:58:34] <cmr> (also via magic)
[04:58:34] <strcat> it's not really magic - it knows about the owner, or it already had a reference
[04:58:37] <cmr> well, sure
[04:58:41] <cmr> the algorithm is magic to me though.
[04:58:48] <cmr> the high-level descriptoin of what it *does* is simple
[04:59:06] <strcat> there's no case where you don't see the variable or already have a reference, so that part seems simple
[04:59:15] <strcat> the flow control stuff, etc. is certainly more complicated
[04:59:20] <strcat> but I don't really think this is 'magic'
[05:00:13] *** Joins: lpy_ (lpy@E44EE2C4.F09091A8.1348A864.IP)
[05:00:22] <strcat> when the method is called, it's either called on a variable (now frozen) or you already had a guarantee that it was previously frozen, basically
[05:00:40] <strcat> the *unfreezing* part could be called magical, I guess
[05:00:46] <strcat> but the freezing part seems pretty trivial
[05:00:48] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[05:01:11] <strcat> the simple description is a stricter description of the checking
[05:01:19] <strcat> other than that it's accurate
[05:01:40] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[05:02:03] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[05:03:53] *** Quits: saml_ (saml@moz-AFAADF83.nycmny.east.verizon.net) (Quit: Leaving)
[05:04:10] *** Quits: heftig (heftig@moz-6B4FBFAD.dip0.t-ipconnect.de) (Ping timeout)
[05:07:19] *** Joins: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP)
[05:10:30] *** Joins: heftig (heftig@moz-D67BBF7.dip0.t-ipconnect.de)
[05:12:36] <hoverbear> https://gist.github.com/Hoverbear/6980a50f3a84c0afc190#file-gistfile1-rs-L21 How would I fix this error?
[05:13:01] <cmr> hoverbear: &&lookup
[05:13:23] <strcat> hoverbear: you're kind of doing a weird thing though
[05:13:28] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:13:34] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Connection reset by peer)
[05:13:36] <strcat> you should do HashSet<&str> not &~str
[05:13:43] <cmr> yeah
[05:13:45] <hoverbear> strcat: Oh, okay. Let me try that.
[05:13:49] <hoverbear> cmr: palindrome.rs:21:25: 21:27 error: unexpected token: `&&`, by the way :S
[05:14:09] <cmr> & &lookup
[05:14:19] <cmr> (sorry, I always forget about that parsing stupidity)
[05:14:25] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[05:14:29] <hoverbear> Ah :)
[05:15:17] *** Joins: bleibig (bleibig@moz-B4D9C5AF.hsd1.ca.comcast.net)
[05:15:42] *** Joins: japaric_ (japaric@CFC3E8D5.E67A32BD.5C7588CA.IP)
[05:15:55] *** Quits: japaric (japaric@F19FD5A3.A75B951F.A936879B.IP) (Ping timeout)
[05:16:13] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[05:16:45] <apollow> Anyone know how to properly return a struct? The struct contains a struct that requires implementation of clone.. which I don't know how to implement as google is failing me...
[05:16:59] <hoverbear> strcat: That gives me a lot of type errors, trying to sort them out
[05:17:12] <cmr> apollow: google is generally useful for Rust. too new, not enough information.
[05:17:15] <cmr> *useless
[05:18:11] <cmr> rusti: #[deriving(Show)] struct Foo { x: int, y: Vec<int> } fn foo() -> Foo { Foo { x: 42, y: vec!(1, 2, 3, 4) } } foo()
[05:18:12] -rusti- Foo { x: 42, y: [1, 2, 3, 4] }
[05:18:19] <diodesign> googling rustc things is fairly amusing - google search keeps autocorrecting it to rustic and I end up with recipes
[05:18:57] <apollow> How else am I going to figure out things in rust without bothering mirc with elementary-esque questions every couple of hours?
[05:19:04] <apollow> ><
[05:19:07] <cmr> apollow: that is expected and accepted :)
[05:19:10] <rweir> (irc)
[05:19:14] <hoverbear> strcat: Like this? extern crate collections;
[05:19:15] <hoverbear> use std::io::stdin;
[05:19:15] <hoverbear> use std::task;
[05:19:15] <hoverbear> use std::os;
[05:19:15] <hoverbear> use std::str;
[05:19:15] <hoverbear> use collections::hashmap::HashSet;
[05:19:16] <hoverbear> fn main() {
[05:19:16] <hoverbear>   let words: ~[&~str] = stdin().lines().map(|word| {
[05:19:16] <hoverbear>     // Pull and trim.
[05:19:16] <hoverbear>     word.unwrap().trim().to_owned()
[05:19:16] -concrete.mozilla.org- *** Channel msg/noticeflood detected (limit is 10 per 10 seconds), setting mode +M
[05:19:16] *** concrete.mozilla.org sets mode: +M 
[05:19:49] *** cmr sets mode: -M 
[05:19:51] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[05:19:52] <hoverbear> Sorry about that
[05:20:23] <hoverbear> strcat: https://gist.github.com/Hoverbear/6980a50f3a84c0afc190
[05:20:53] <o11c> ugh, mirc
[05:21:40] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:21:50] *** Joins: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP)
[05:22:04] <carllerche> If I have a ~[~str] is there any way to get an Iterator<&str> vs. Iterator<&~str>?
[05:22:26] <o11c> carllerche: .map(|x| *x)
[05:22:32] <cmr> carllerche: .iter().map(|x| x.as_slice())
[05:22:34] <aatch> carllerche, v.iter().map(|s| s.as_slice())
[05:22:47] * cmr wins
[05:22:52] <aatch> cmr, bah
[05:22:57] <cmr> o11c: error: type `~str` cannot be dereferenced
[05:23:04] <cmr> rusti: let x = ~"123"; *x
[05:23:09] <o11c> but it's a &~str ...
[05:23:11] -rusti- pastebinned 11 lines of output: http://ix.io/bkU
[05:23:13] <cmr> poop
[05:23:21] <cmr> (also I got the error message right!)
[05:23:24] <o11c> then the ~str should autodecay ...
[05:23:29] <aatch> cmr, actually it'd be error: cannot move out of dereference of &-ptr
[05:23:40] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:24:02] <cmr> rusti: let v = vec!(~"", ~""); println!("{}", v.iter().map(|x| *x))
[05:24:05] -rusti- pastebinned 8 lines of output: http://ix.io/bkV
[05:24:20] <cmr> herp, fail
[05:24:33] <cmr> rusti: let v = vec!(~"", ~""); v.iter().map(|x| *x).collect::<Vec<_>>()
[05:24:34] -rusti- <anon>:10:33: 10:73 error: cannot determine a type for this bounded type parameter: unconstrained type
[05:24:35] -rusti- <anon>:10         let v = vec!(~"", ~""); v.iter().map(|x| *x).collect::<Vec<_>>()
[05:24:35] -rusti-                                           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
[05:24:35] -rusti- playpen: application terminated with error code 101
[05:24:54] <cmr> that span is a bit overzealous
[05:25:02] * cmr goes back to useful things
[05:25:04] <aatch> rusti: let v = vec!(~"", ~""); v.iter().map(|x| *x).collect::<Vec<&str>>()
[05:25:07] -rusti- pastebinned 14 lines of output: http://ix.io/bkW
[05:25:24] <aatch> O.o
[05:25:30] <o11c> oh
[05:25:37] <o11c> maybe it *doesn't* auto-deref
[05:25:46] <aatch> o11c, it does sometimes.
[05:26:33] <aatch> o11c, but it has issues with coercion based on return types
[05:27:19] <hoverbear> Yeah, I don't really understand why I should be doing a HashSet<&str>
[05:28:50] <aatch> hoverbear, you probably shouldn't be using HashSet<&str>, you probably want HashSet<~str>
[05:29:08] <strcat> HashSet<&str> makes sense in some cases
[05:29:16] <carllerche> If I have a fn that wants to take an Iterator over a trait, I assume it should be something like: fn my_iterate<I: MyTrait>(iter: &Iterator<&I>)
[05:29:19] <aatch> strcat, hence "probably"
[05:29:19] <strcat> if it's not going to need to live as long as strings you already have stored somewhere else
[05:29:37] <strcat> carllerche: don't force &
[05:30:03] <strcat> (well at least, you probably don't want to.)
[05:31:10] <carllerche> strcat: so, if I have a foo: ~[MyTypeImplsMyTrait], and then try to pass that to my_iterate, it seems that I get Iterator<&MyTypeImplsMyTrait>  and that doesn't work
[05:31:24] <carllerche> I'm probably getting too abstract
[05:31:27] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:31:33] <aatch> carllerche, also, it's probably better to do it like this: `fn my_iterate<T: MyTrait, I: Iterator<T>>(iter: &mut I)`
[05:31:46] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[05:31:53] <strcat> yeah, it's very unlikely that you want to use iterator trait objects
[05:31:58] <carllerche> alright
[05:32:16] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[05:32:41] <aatch> carllerche, also, iterators are modified by you iterating over them, so you either need to take ownership or take a mutable reference.
[05:32:46] <hoverbear> aatch: Okay, when I do that I see "error: expected std::iter::FromIterator<&~str>, but found std::iter::FromIterator<~str> (expected &-ptr but found ~str)"
[05:33:18] <carllerche> is there a rule of thumb for when to use generic fns vs. trait objects?
[05:34:11] <aatch> carllerche, if you need runtime polymorphism, then use trait objects. For everything else, generic fns and enums
[05:34:24] *** Quits: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP) (Ping timeout)
[05:35:16] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[05:38:20] <carllerche> hmm‚Ä¶ seems like I made the compiler crash :)
[05:39:15] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[05:40:04] <hoverbear> How could I get access to http://static.rust-lang.org/doc/master/collections/hashmap/struct.HashSet.html#method.from_iterator if I have use collections::HashMap; in my file?
[05:40:16] *** Joins: derek_c (derek@B6D972EA.8B266987.AE6886F4.IP)
[05:40:56] <cmr> hoverbear: `let x: HashSet<T> = FromIterator::from_iterator(i);`
[05:41:07] <cmr> hoverbear: notably equivalent to the `collect` method :)
[05:41:27] <hoverbear> cmr: I was using collect but I'm having type issues when I use it. :S
[05:41:31] *** Quits: ryeguy (ryeguy@9C569A0.5D1143CD.E8644521.IP) (Quit: )
[05:42:14] *** Quits: philix_ (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[05:42:24] <hoverbear> cmr: https://gist.github.com/Hoverbear/6980a50f3a84c0afc190#file-gistfile1-rs-L15
[05:42:59] <cmr> words is a ~[~str]
[05:43:07] <cmr> iter returns a type that implements Iterator<&~str>
[05:43:32] <hoverbear> cmr: Right, and the HashSet that results should be HashSet<&~str>, however it was suggested by several people that that is the wrong way.
[05:43:37] <apollow> okay, here is the weird struct within a struct problem that I got.. http://pastebin.com/eV6XaHuf, someone explain to me whats going on here?
[05:43:41] <cmr> to collect into a type that implements FromIterator<~str>, you need to give it an Iterator<~str>
[05:43:51] <cmr> So you need an Iterator<~str>
[05:44:00] <hoverbear> cmr: Hm, okay.
[05:44:23] <cmr> I would suggest that using a HashSet<&str> is better here, though, because it won't need to clone the string.
[05:44:24] <hoverbear> cmr: So not by using .iter() I'd assume?
[05:44:39] <hoverbear> cmr: Okay, that's what I was trying initially.
[05:44:53] <cmr> hoverbear: you could use .move_iter(), at which point you can no longer use `words`, or you can use .iter().map(|x| x.to_owned())
[05:45:01] <hoverbear> cmr: So that will make reverse a ~[&str] right?
[05:45:36] <aatch> hoverbear, https://gist.github.com/Aatch/1c8901419b27795a4739
[05:45:37] <cmr> has_reverse? no
[05:46:24] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[05:46:38] <aatch> not exactly efficient, but it compiles.
[05:46:47] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[05:46:50] <hoverbear> aatch: https://gist.github.com/Aatch/1c8901419b27795a4739#file-palindrome-rs-L21 What's the signifigance of the space?
[05:46:57] <hoverbear> cmr: It's a filter though.
[05:47:10] <aatch> hoverbear, nothing, I just forgot to remove it.
[05:47:19] <hoverbear> aatch: Ah, okay. :)
[05:47:59] *** Quits: Amaranth (travis@moz-F81BB56A.cpe.cableone.net) (Quit: Linkinus - http://linkinus.com)
[05:48:24] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[05:48:28] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[05:48:37] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[05:48:45] *** Quits: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP) (Ping timeout)
[05:50:31] *** Joins: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP)
[05:51:14] *** Quits: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net) (Quit: Leaving.)
[05:51:19] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz‚Ä¶)
[05:51:48] <hoverbear> aatch: So that's doing a bunch of cloning though.
[05:52:00] <aatch> hoverbear, I just updated it to do less cloning.
[05:52:33] <cmr> hoverbear: version the first: https://gist.github.com/cmr/9868229, version the second: https://gist.github.com/cmr/9868232
[05:54:00] <hoverbear> cmr, aatch: Thank you, looking at those. I need to look at as_slice()
[05:54:16] <cmr> as_slice just does the coercion from ~str to &str explicitly
[05:54:26] <cmr> contains_equiv is needed here because the lifetimes of the &str's are different
[05:55:16] *** Quits: ganitsu1 (ganitsu@moz-CB91E096.dialup.adsl.anteldata.net.uy) (Quit: WeeChat 0.4.3)
[05:55:31] <mgax> is there a ready-made worker pool implementation, or should i roll my own, with channels?
[05:55:58] <cmr> mgax: servo might have one, but it might not be generic.
[05:56:18] <mcpherrin> Didn't pcwalton say something about that in his servo talk? I forget
[05:56:30] <edwardw> WorkQueue
[05:56:38] <cmr> ah, yes, I remember that now.
[05:57:14] <cmr> https://github.com/mozilla/servo/blob/master/src/components/util/workqueue.rs
[05:58:46] <mgax> cmr, edwardw, thanks!
[06:00:18] *** Quits: thesnowdog (doug@E8B162D2.CDB23781.6F17036B.IP) (Ping timeout)
[06:00:53] *** Joins: thesnowdog (doug@E8B162D2.CDB23781.6F17036B.IP)
[06:03:03] <hoverbear> cmr, aatch: That works, thank you. I'm starting to get the hang of pointers.
[06:03:27] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[06:06:30] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[06:08:41] *** Joins: tgkokk (user@moz-88CCC929.home.otenet.gr)
[06:09:42] <apollow> anyone here know how to handle returning a struct having a hashset of another struct?
[06:09:43] *** Quits: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP) (Ping timeout)
[06:10:19] <carllerche> hmm‚Ä¶ hashmap does not have find_equiv_mut, would that be a sensible addition?
[06:10:43] <apollow> no idea, but it probably would be
[06:10:44] <cmr> carllerche: probably.
[06:10:52] <strcat> well
[06:10:52] <cmr> apollow: crap, forgot about you, sorry!
[06:10:56] <strcat> I want to get rid of Equiv
[06:11:01] <strcat> I'm somewhat against adding more of it
[06:11:18] <cmr> strcat: replacing it with what? versions that take a closure?
[06:11:35] <strcat> yes
[06:11:42] *** Joins: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP)
[06:11:52] <cmr> I'd be in favor of that
[06:12:15] <cmr> apollow: are you using 0.9?
[06:12:26] <apollow> using the latest version of the pull... that was last night
[06:12:30] <cmr> oh ok
[06:12:38] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[06:12:44] <cmr> #[deriving(Hash)] on `Small_Foo` should fix that.
[06:13:01] <cmr> the problem being that it isn't hashable, so you can't have a HashSet of it
[06:13:20] <cmr> (additionally, the style convention is `SmallFoo` rather than `Small_Foo`)
[06:13:25] <cmr> https://github.com/mozilla/rust/wiki/Note-style-guide
[06:13:29] <apollow> noted
[06:14:36] <apollow> Anyway to make it hashable? that example was a little different, as it involves clonable problems vs tobytes
[06:14:52] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[06:14:57] <cmr> #[deriving(Hash)]
[06:15:11] <apollow> mmm
[06:15:38] <cmr> (http://static.rust-lang.org/doc/master/std/hash/index.html has some docs about this)
[06:16:06] <carllerche> hmm, just saw #13117 (crate-map removed), so it's no longer needed, and libnative is the default now?
[06:16:14] <cmr> carllerche: yes.
[06:16:30] <cmr> carllerche: you know about This Week in Rust, right?
[06:16:31] <carllerche> so now tasks are 1:1 -> threads?
[06:16:36] <cmr> carllerche: only when using libnative
[06:16:37] <carllerche> yes, haven't read it though :P
[06:16:39] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[06:16:45] <carllerche> this past week
[06:16:56] <carllerche> i should go catch up!
[06:16:57] <apollow> I'll take a look at it, thanks
[06:18:55] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:20:25] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[06:20:25] *** ChanServ sets mode: +ao brson brson
[06:21:24] *** Quits: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP) (Ping timeout)
[06:22:26] <syatchmenoff> rusti: let x: f32 = 7;
[06:22:26] -rusti- <anon>:10:22: 10:23 error: mismatched types: expected `f32` but found `<generic integer #0>` (expected f32 but found integral variable)
[06:22:27] -rusti- <anon>:10         let x: f32 = 7;
[06:22:27] -rusti-                                ^
[06:22:27] -rusti- error: aborting due to previous error
[06:22:27] -rusti- playpen: application terminated with error code 101
[06:22:35] <syatchmenoff> why can't we do this?
[06:22:55] *** Joins: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net)
[06:23:31] <syatchmenoff> is there some cases where allowing that would cause problems?
[06:23:34] *** Quits: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[06:23:46] <cmr> probably not. numeric type inference has a nuanced history.
[06:23:57] <cmr> you need to use 7. (or 7.0) instead.
[06:24:38] <syatchmenoff> yeah, I figured that out. I was just curious if there was a good reason it's the way it is, because I couldn't think of one
[06:26:10] <edwardw> rusti: let x: f32 = 7f32; x
[06:26:11] -rusti- 7
[06:26:11] <o11c> I imagine it might cause more problems with when you *don't* specify the type immediately
[06:28:31] *** Joins: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP)
[06:29:58] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[06:33:34] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[06:35:34] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[06:38:02] *** Quits: zztr (Thunderbir@moz-CA50D606.dsl.static.sonic.net) (Quit: zztr)
[06:38:08] *** Quits: thesnowdog (doug@E8B162D2.CDB23781.6F17036B.IP) (Ping timeout)
[06:38:38] *** Joins: thesnowdog (doug@E8B162D2.CDB23781.6F17036B.IP)
[06:39:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:39:34] *** Joins: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP)
[06:39:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:40:49] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[06:41:28] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[06:41:50] *** Joins: ofeldt (ofeldt@moz-45205924.dip0.t-ipconnect.de)
[06:42:05] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[06:42:42] *** Quits: ofeldt- (ofeldt@moz-6D9F21A5.dip0.t-ipconnect.de) (Ping timeout)
[06:43:18] <carllerche> So, back to my Iterator question. I got it working by using trait objects. my fn is: my_iterate<M: Message>(i: &mut Iterator<&M>), the & ended up being required. I tried implementing this as a generic fn but failed. It did not seem that I could do: my_iterate<M: Message, I: Iterator<&M>(i: I)
[06:43:24] <carllerche> is there something that I missed?
[06:47:22] *** Quits: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net) (Ping timeout)
[06:47:32] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[06:49:18] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[06:49:39] *** Quits: apollow (yellowy432@moz-DF01490A.lightspeed.sntcca.sbcglobal.net) (Ping timeout)
[06:50:31] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[06:52:11] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[06:52:53] *** Quits: dranov (dranov@D7856B16.470B7AFF.FCAAE698.IP) (Ping timeout)
[06:54:08] *** Joins: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr)
[06:54:26] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[06:54:56] *** Joins: figaro (Mibbit@17E06B08.8EB81240.43F332EA.IP)
[06:55:29] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[06:56:24] *** Quits: figaro (Mibbit@17E06B08.8EB81240.43F332EA.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:57:10] <dpc> Is there anything like try!( ... ) for writes and other IoREsults with ()
[06:57:39] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[06:57:46] <cmr> probably not, will need to roll your own macro. but try! only propagates the errors, so it shouldn't matter what the Ok type is?
[06:58:10] <o11c> cmr: there's a really neat macro for iterative matches
[06:58:24] <cmr> that crazy one on reddit?
[06:58:47] *** Joins: brson (brson@6A848D32.C1B840DD.76F66111.IP)
[06:58:47] *** ChanServ sets mode: +ao brson brson
[06:59:01] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[06:59:22] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[06:59:33] <o11c> cmr: I saw it in a gist, but ...
[06:59:54] <dpc> I just want to ignore write results without compiler complaining.
[07:00:48] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[07:00:56] <o11c> https://gist.github.com/bvssvni/9674632
[07:01:31] *** Quits: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net) (Ping timeout)
[07:01:52] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[07:02:27] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[07:03:13] <dsrx> argh.. anyone using flycheck + rust with a custom library path?
[07:03:47] <dsrx> still getting "can't find crate for `...`" errors 
[07:04:11] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[07:05:05] *** Joins: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net)
[07:07:47] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[07:09:21] *** Joins: morganb (morgan_b_@moz-5EAC75A2.hfc.comcastbusiness.net)
[07:09:25] <huon> huh? https://twitter.com/RUST_HULK
[07:09:43] *** Quits: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net) (Ping timeout)
[07:09:53] <cmr> is that eholk?
[07:10:01] <carllerche> I can't seem to get the generic fn version working (vs.the trait object one) https://gist.github.com/carllerche/f454e4b4d366d435a474
[07:10:02] *** Joins: slimer (Mibbit@17C39DD.FA4CF353.CC1A2609.IP)
[07:10:06] *** Joins: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net)
[07:10:14] <huon> cmr: does eholk smash memory?
[07:10:15] <eddyb> good morning, peoples
[07:10:19] <eddyb> [07:01] <cmr> like "grow" and "grow_set", what the hell even is that.
[07:10:37] <eddyb> why do people look weird at grow, grow_set and grow_fn?
[07:10:46] <eddyb> they feel natural to me
[07:10:56] <huon> carllerche: you have Iterator<G> rather than Iterator<&G>
[07:11:06] <huon> yeah, what's with the hate on grow?
[07:11:07] <cmr> huon: sometimes.
[07:11:12] <carllerche> huon: adding Iterator<&G> complains about a missing lifetime
[07:11:17] <huon> they seem like a natural complement to from_fn and from_elem
[07:11:29] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[07:11:32] * eddyb hugs huon
[07:11:35] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[07:11:40] <huon> carllerche: , ah, you need `<'a, G: Greeter, I: Iterator<&'a G>>`
[07:11:45] <cmr> it's just .extend(something)
[07:11:53] <huon> although you may need a really recent compiler to avoid the ICE
[07:11:58] <carllerche> ICE?
[07:12:08] <huon> cmr: from_fn is just range(0, n).map(...).collect() :P
[07:12:15] <cmr> huon: I agree, it should be removed.
[07:12:17] <aatch> ICE ICE BABY
[07:12:19] <huon> carllerche: internal compiler error, rustc crashing
[07:12:24] *** Joins: mib_ywaz6w (Mibbit@7864E232.7B7B2B62.A41A5D62.IP)
[07:12:31] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[07:12:36] <huon> cmr: ew, no; that invocation is so complicated.
[07:12:37] * aatch hums baseline from "Under Pressure"
[07:12:45] <cmr> carllerche: (https://www.youtube.com/watch?v=SRH-Ywpz1_I)
[07:13:05] <carllerche> hehe
[07:13:14] *** Quits: slimer (Mibbit@17C39DD.FA4CF353.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:13:40] <huon> carllerche: the reason for the lifetime needing to be there is because all generic type signatures need all lifetimes
[07:13:55] <eddyb> huon: do we have a repeat iterator to replace from_elem with?
[07:13:58] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[07:14:04] <carllerche> huon: I think that makes sense :P
[07:14:09] <huon> eddyb: dunno, check the docs/source
[07:14:09] <eddyb> repeat(x).take(n).collect()
[07:14:19] <cmr> Repeat::new(x).take(n).collect()
[07:14:33] <cmr> it never saw the good-looking iterator construction syntax.
[07:14:49] <huon> carllerche: it's a somewhat arbitrary rule, that may be relaxed; but may not...
[07:16:27] *** Quits: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net) (Ping timeout)
[07:19:26] <eddyb> it makes some sense if you think that the references returned by the iterator have some lifetime that's fed into the function
[07:19:43] <eddyb> *but* I'd still like to see anonymous lifetimes in bounds
[07:19:45] <huon> eddyb: yeah, hence 'somewhat'
[07:20:04] <cmr> it's not anonymous :p
[07:20:19] <huon> 'legion
[07:20:21] *** Joins: mno2 (mno2@C9C55379.F9BA5024.DA359910.IP)
[07:20:24] <cmr> hah
[07:21:08] <eddyb> if you take an explicit iterator, you can omit the lifetime - oh, wait, you were making a funneh, nevermind
[07:21:11] <carllerche> huon: hmm looks like I'm still hitting ICE (in my realcode) on the rustc that I compiled today :P
[07:21:24] <huon> carllerche: oh :(
[07:21:35] <huon> looks like it's the trait object + a FIXME for now :)
[07:21:38] <carllerche> but i am unsure that it is caused by this
[07:21:45] <huon> what's the message?
[07:22:49] *** Joins: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net)
[07:23:10] <huon> carllerche: is it something like "cannot bind region: ReLate(...)"
[07:23:14] * huon can't remember the whole thing
[07:23:18] <carllerche> huon: https://github.com/mozilla/rust/issues/13204 
[07:23:33] <huon> oh, weird
[07:23:43] <huon> eddyb: ^ seem familar
[07:24:10] <huon> carllerche: (i'm sure you know, but, a test case would be amazingly helpful :) )
[07:24:22] <carllerche> yeah.. but I am unsure what is causing it exactly
[07:24:27] <carllerche> short of my entire code base
[07:24:34] <carllerche> since the simple version compiled
[07:24:36] <huon> which is how large?
[07:25:49] <carllerche> huon: not huge, but it's currently private, though I can add individual people for debugging
[07:27:38] <carllerche> huon: so, switching the fn definition from trait obj -> generic w/o fixing the callers causes the crash, though I can't repro in the simple example
[07:27:40] *** Quits: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net) (Connection reset by peer)
[07:27:59] *** Joins: rchar (chatzilla@moz-9AC54D4D.lv.lv.cox.net)
[07:28:04] <huon> is the trait in your true code generic too?
[07:28:10] <huon> i.e.. `trait Foo<T> { ... }`
[07:28:27] <carllerche> huon: the trait is Iterator
[07:28:49] <huon> carllerche: I meant the equivalent to Greeter
[07:29:25] <carllerche> huon: the equivalent to Greeter is `pub trait Message : Clone + Eq`
[07:29:52] <huon> carllerche: and it's just `<'a, M: Message, Iterator<&'a M>>`, too?
[07:30:14] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[07:30:59] *** Joins: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net)
[07:31:15] <carllerche> huon: I made it public for now :P https://github.com/tildeio/buffoon/blob/ice/src/buffoon/output_stream.rs#L36-L37
[07:31:33] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[07:32:26] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:32:34] <carllerche> huon: compiling that w/ `rustc -O src/buffoon/lib.rs` crashes for me
[07:33:43] <huon> carllerche: where's it called?
[07:33:56] <carllerche> huon: well the calls aren't fixed and there are a bunch
[07:34:14] <huon> carllerche: aren't "fixed"?
[07:34:18] <carllerche> here is an example: https://github.com/tildeio/buffoon/blob/ice/src/buffoon/annotation.rs#L56
[07:34:25] <carllerche> huon: the calls are using the trait objs
[07:34:31] <carllerche> vs. generic
[07:34:36] *** Quits: mib_ywaz6w (Mibbit@7864E232.7B7B2B62.A41A5D62.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:35:09] <carllerche> but, i attempted to call a generic fn w/ a trait obj style, and that didn't crash in the simple case
[07:35:21] *** Quits: killerswan (kevincantu@moz-CC0DC654.hsd1.ca.comcast.net) (Quit: killerswan)
[07:36:22] <huon> carllerche: you can theoretically write just `for message in *messages { self.write_nested(...) }` btw
[07:36:31] <huon> I guess that probably doesn't work with the trait object though
[07:36:43] <huon> (I'm playing with it now, to see if I can repro an ICE.)
[07:37:16] <carllerche> huon: ah, maybe the * was what I was missing, but I was not successful in doing the for .. in style
[07:37:23] *** Joins: mye (mye@moz-8F16FDFE.swh.uni-giessen.de)
[07:39:19] <carllerche> huon: let me know if you can repro, i need to get some sleep soon :P
[07:39:58] <huon> carllerche: I'll post on this issue if I do find something... but this is feeling elusive atm :(
[07:40:23] <carllerche> huon: did just running `rustc -O src/buffoon/lib.rs` not do it for you?
[07:40:36] *** Quits: mye (mye@moz-8F16FDFE.swh.uni-giessen.de) (Quit: sleep message)
[07:40:43] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[07:40:53] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[07:41:05] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[07:41:17] <huon> carllerche: oh, I'm trying to just clean-room repro... but I guess starting with the known-broken code might be a good start too :)
[07:42:04] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[07:42:21] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[07:42:45] <huon> carllerche: yep, it does (I've cloned it, if you wish to make it private again)
[07:42:48] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[07:42:52] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[07:43:39] <carllerche> woot. good luck, im off to sleep :)
[07:43:41] <eddyb> TeXitoi: I hope you realize this code is broken https://github.com/mozilla/rust/issues/13202
[07:43:46] <eddyb> rusti: (return).to_str()
[07:43:49] -rusti- pastebinned 9 lines of output: http://ix.io/bl1
[07:43:56] <eddyb> but still, the ICE is silly
[07:44:00] <huon> carllerche: (btw, https://github.com/mozilla/rust/issues/11225 is fixed)
[07:44:25] <huon> eddyb: ICE means the compiler is broken, not matter how wrong the code is
[07:44:31] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Input/output error)
[07:44:40] <eddyb> huon: in case they thought they were blocked on the issue
[07:44:47] <cmr> yes they know
[07:44:52] *** Joins: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP)
[07:44:52] <cmr> I corrected them.
[07:46:39] *** Quits: claudiu (claudiu@81B10C62.5F4BC945.49B2C1AE.IP) (Ping timeout)
[07:47:13] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[07:48:21] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[07:48:51] <eddyb> http://www.codewars.com/ no Rust :(
[07:49:46] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[07:50:01] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[07:50:05] <cmr> let's wait for 1.0 before we start pushing our product on unsuspecting outsiders.
[07:50:35] *** Quits: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:51:02] <diodesign> I kinda wish rustc gave me a bit more info when it complains "error: duplicate entry" for a function name. would be nice to know where the duplication is happening :)
[07:51:17] <cmr> diodesign: open an issue, cc @cmr
[07:51:26] <diodesign> is there a way to coax some more info out of it? -Z debug and -Z verbose aren't helping
[07:51:32] <diodesign> ok
[07:51:53] <cmr> there's RUST_LOG, but you probably don't want that if you don't know what you're doing
[07:52:14] <cmr> (it's akin to trying to read the first few pages of dmesg output, uninitiated)
[07:52:53] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[07:53:32] <eddyb> cmr: aww I can't do that anymore
[07:53:36] * diodesign 's trying to use rust-core but I can't get rustc to not include the std library (#[no_std] in source and/or --cfg no_std on cmd line) so I'm getting lots of collisions like
[07:53:40] <diodesign> error: duplicate entry for `fail_bounds_check`
[07:53:47] <cmr> diodesign: #[no_std];
[07:53:49] <eddyb> cmr: dmesg starts at [315992.169285] for me :(
[07:53:52] <cmr> with a semicolon
[07:54:56] *** Quits: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr) (Ping timeout)
[07:59:07] <Vermeille> Guys, if any of you have a working example on how to use Rust's iterators, I'll try to write a Packrat parser generator :)
[07:59:10] *** Joins: doener (doener@moz-C68F600D.unity-media.net)
[07:59:26] *** Quits: khodzha1 (khodzha@8D462FD7.EF9FA30D.CA6E2165.IP) (Ping timeout)
[07:59:41] <cmr> Vermeille: what aspect of them? there's lots of docs at http://static.rust-lang.org/doc/master/std/iter/index.html :)
[07:59:48] <diodesign> cmr: hm ok, well that's moved progress on a bit. thanks
[07:59:53] <eddyb> and there's kind of an iterator guide
[07:59:57] *** Quits: tgkokk (user@moz-88CCC929.home.otenet.gr) (Ping timeout)
[08:00:22] <Vermeille> cmr : I just didn't manage to iterate over chars of a strings (not in a simple loop)
[08:00:42] <Vermeille> They are not trivial like C++'s
[08:00:48] <cmr> s.chars()
[08:00:56] <Vermeille> yep, but after :)?
[08:00:57] <cmr> they're far simpler than C++ iterators
[08:01:14] *** Joins: tgkokk (user@moz-88CCC929.home.otenet.gr)
[08:01:15] <cmr> iterators have a single method, `next`
[08:01:19] <cmr> you can use a for loop
[08:01:20] <eddyb> rusti: "foo¬ßbar".chars().collect::<Vec<char>>()
[08:01:21] -rusti- [f, o, o, ¬ß, b, a, r]
[08:01:24] <eddyb> lovely
[08:01:25] <cmr> or call other methods...
[08:01:38] <cmr> (rather, they require a single method, `next)
[08:01:54] <cmr> http://static.rust-lang.org/doc/master/guide-container.html#iterators
[08:01:59] <YourBestFriend> so you can only add items to ~[]'s, not []'s?
[08:02:06] <cmr> YourBestFriend: Vec<T>
[08:02:18] <cmr> [T] isn't a type right now, it will be with DST, but it will be fixed-size.
[08:02:23] <cmr> ~[T] will also be fixed size.
[08:02:39] <cmr> the only way to add items to it will be to create a Vec from it, push an item, and then convert back.
[08:02:40] <YourBestFriend> hmmmmmm
[08:02:53] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Quit: Leaving.)
[08:03:00] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[08:03:15] <cmr> conversion from Vec<T> to ~[T] is "free" (it just involves forgetting one of the fields)
[08:03:18] <YourBestFriend> what's DST¬†again? lol
[08:03:24] <cmr> http://smallcultfollowing.com/babysteps/blog/2014/01/05/dst-take-5/
[08:03:33] <cmr> dynamically sized types.
[08:04:08] *** Joins: khodzha (khodzha@8D462FD7.EF9FA30D.CA6E2165.IP)
[08:04:11] <mcpherrin> cmr: what about ~[T] to Vec<T>?  I hope that won't require a copy
[08:04:13] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[08:04:17] <cmr> mcpherrin: it won't.
[08:04:23] <cmr> but capacity = length
[08:04:24] <mcpherrin> That's good.
[08:04:27] <cmr> so...
[08:04:36] <cmr> pushing to it is going to be a realloc
[08:04:36] <YourBestFriend> so will it just be like C arrays?
[08:04:40] <huon> Vec<T> to ~[T] isn't free... it requires a shrink_to_fit
[08:04:44] <cmr> YourBestFriend: somewhat analogous.
[08:04:44] <YourBestFriend> with a length
[08:04:49] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[08:04:54] <YourBestFriend> known length*
[08:05:07] <cmr> We already have fixed-sized lengths of known length: [T, ..N]
[08:05:08] <eddyb> YourBestFriend: dynamic fixed length
[08:05:10] <cmr> where N is the length.
[08:05:22] <cmr> *fixed-sized arrays
[08:05:26] <eddyb> C++ can't into [[[T]]]
[08:05:39] <Vermeille> Hum, well, and let's say I need to pass the iterator as a parameter for a function, which type do I use? There is nothing stupid as an Iterator, you have a loooooooooot of variants
[08:05:51] <YourBestFriend> eddyb: what does dynamic mean then?
[08:06:01] <YourBestFriend> if the size is fixed
[08:06:15] <eddyb> it's unknown at compile time (hence dynamic)
[08:06:15] <cmr> Vermeille: you have two choices. fn foo<I: Iterator<char>(it: I), or fn foo(it: &mut Iterator<char>)
[08:06:22] *** Quits: brson (brson@6A848D32.C1B840DD.76F66111.IP) (Ping timeout)
[08:06:28] <eddyb> ^^ don't use the latter for the love of CPU cycles
[08:06:34] <YourBestFriend> I¬†see
[08:07:00] <eddyb> YourBestFriend: but fixed because... well, the length is a property of the handle
[08:07:21] *** Joins: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de)
[08:07:23] <eddyb> Rc<[T]> would store its length in every Rc handle, and they would all have to be identical
[08:07:35] <Vermeille> cmr: IIRC I had a problem because the type of iterator is not the same depending on their source, and a iterator reading a file won't be the same as an iterator over a string or stdin
[08:07:59] *** Quits: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP) (Ping timeout)
[08:08:00] <cmr> Vermeille: correct, but both of the example signatures I gave use polymorphism, and will take any type implementing Iterator
[08:08:00] <eddyb> Vermeille: you may want your types to also be generic over the iterator
[08:08:02] *** Joins: twi (Adium@moz-429185BE.cust.vodafonedsl.it)
[08:08:55] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[08:09:46] *** Quits: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:09:54] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[08:10:03] <strcat> Vermeille: it's not different from C++, where you would use template<typename I> void foo(I begin, I end);
[08:10:21] <strcat> the iteration protocol is simpler though
[08:10:23] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[08:10:26] <strcat> just next(&mut self) -> T
[08:10:33] <strcat> just next(&mut self) -> Option<T> *
[08:10:43] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[08:10:43] *** ChanServ sets mode: +ao brson brson
[08:11:02] *** Joins: Ms2ger (Ms2ger@moz-4CB19774.adsl-dyn.isp.belgacom.be)
[08:11:11] *** Joins: ch (ch@moz-8B0DC243.hsd1.ca.comcast.net)
[08:11:17] <strcat> not a current iterator, an end iterator, with deref overloaded, == overloaded, prefix/postfix ++ overloaded to advance
[08:11:46] <strcat> + sticking the iterator typedefs in it...
[08:12:15] <eddyb> and I was wondering why people hated on C++ back when I was still using it :P
[08:12:17] <Vermeille> Hum, now my code complains everywhere because Iterator<T> does not implement peek
[08:12:29] <eddyb> Vermeille: you want PeekableIterator
[08:12:32] <cmr> correct, you'll need to take PeekableIterator
[08:12:48] <cmr> or, just Peekable now I guess
[08:12:51] <cmr> http://static.rust-lang.org/doc/master/std/iter/struct.Peekable.html
[08:13:07] <Vermeille> what is the motivation for the simplest iterator not to be peekable?
[08:13:13] <cmr> It's the simplest iterator.
[08:13:21] <eddyb> Vermeille: few iterators are peekable
[08:13:23] <cmr> It doesn't need to keep state of what the next element.
[08:13:28] <Ms2ger> "error: unresolved name `error`. Did you mean `self`?"
[08:13:29] <Ms2ger> Ha
[08:13:31] <strcat> Vermeille: because they aren't buffered
[08:13:36] <eddyb> (without the adapter)
[08:13:36] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[08:13:56] <strcat> Vermeille: you can call peekable, it's a method on all iterators
[08:14:00] <strcat> returning a Peekable iterator
[08:14:12] <strcat> (it adds a buffer)
[08:14:16] <ch> anybody know if ~Any became not Send'able recently?
[08:14:29] <cmr> ch: default bounds on trait objects changed.
[08:14:34] <strcat> ch: ~Any:Send now
[08:14:38] <cmr> ch: https://github.com/mozilla/rust/pull/13050
[08:14:41] <strcat> before :Send was the default
[08:15:06] <ch> cool ty
[08:15:19] <cmr> ch: (http://cmr.github.io/blog/2014/03/29/this-week-in-rust/)
[08:15:30] <eddyb> Vermeille: rust's lexers buffer the next token themselves, you may want to do that instead of relying on a Peekable<I>
[08:15:39] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:16:00] <eddyb> cmr: s/Take/Taking/
[08:16:11] <cmr> thanks.
[08:16:47] <cmr> eddyb: PEG doesn't actually yield tokens.
[08:17:03] <eddyb> well, you'd buffer chars, not tokens
[08:17:16] <cmr> at that point, why not use Peekable? :p
[08:17:24] <Vermeille> Why using Peekable is wrong in that case oO?
[08:17:26] <eddyb> cmr: because you may want more than one
[08:17:32] <eddyb> Vermeille: I never said it was wrong
[08:17:34] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[08:17:51] <eddyb> Vermeille: I meant that you may want to consider holding a variable-length buffer yourself
[08:18:09] <eddyb> or fixed-length, depending on your constraints
[08:18:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Quit: Leaving...)
[08:18:49] <cmr> good point, I think PEG do need arbitrary-length lookahead.
[08:18:53] *** Joins: hk (hk@98FBA931.EE98108C.CE715904.IP)
[08:18:54] * cmr doesn't remember
[08:19:32] <eddyb> cmr: I had something like PEG, but it was recursive descent, i.e. naive overly-greedy recursive regular expressions
[08:19:34] <Vermeille> Actually PEG would load the whole file in memory
[08:19:57] <eddyb> cmr: powerful, but daamn was it slow
[08:20:01] <Vermeille> but I just would like to make my LL parser compile
[08:20:21] <eddyb> cmr: something like 30 seconds for a 40k lines C header
[08:20:26] <Vermeille> eddyb: strange, Packrat parsers are linear in complexity
[08:20:38] <eddyb> Vermeille: see "naive"
[08:20:49] <eddyb> it wasn't a parser generator, just a rule manager and invoker
[08:21:10] <cmr> Vermeille: also you're awesome for writing this! I'd love something like lpeg :)
[08:21:51] <Vermeille> Haha, thanks. Writing parser is the only thing I'm not that bad at <_<
[08:22:09] <Vermeille> Hum okay, now, the compiler complains that Peekable is not a trait
[08:22:26] <eddyb> Vermeille: Peekable<I> where I: Iterator<char>
[08:22:49] <eddyb> Vermeille: (Peekable being an adaptor, not an interface)
[08:23:17] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:19] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[08:23:27] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:37] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[08:23:41] <cmr> fn foo<I: Iterator<char>(x: Peekable<char, I>)
[08:23:42] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[08:23:52] <cmr> with an extra >
[08:24:05] <Vermeille> Okaaaaaaaay, now it works \o/
[08:24:37] <Vermeille> thanks, I couldn't have guessed that alone, I don't understand the std:: design enough for now
[08:25:08] <cmr> sure, it's what we are here for
[08:25:20] <Vermeille> (and well, you see, they are more complex than C++'s iterators :p)
[08:25:23] *** Quits: WalrusPony (retep998@moz-530D0BB2.dhcp.oxfr.ma.charter.com) (Ping timeout)
[08:25:45] <cmr> but they aren't! they have weird ++ and * -- and != end stuff :p
[08:26:01] *** Joins: kris (kris@moz-6D20263F.fullrate.dk)
[08:26:07] <eddyb> Vermeille: C++ doesn't have parametric polymorphism
[08:26:09] <cmr> a single method returning an optional value is much simpler
[08:26:17] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:26:53] <Vermeille> Haha :D Well, so maybe it's just habit. Anyway, how come that we need to specify "char" twice in "Peekable<char, Iterator<char>>"?
[08:26:53] <eddyb> with enforced concepts, C++ would definitely be more verbose
[08:27:05] <eddyb> Vermeille: for a few reasons
[08:27:13] <strcat> Vermeille: because rust doesn't have higher-kinded types
[08:27:22] <eddyb> nor associated types
[08:27:35] <eddyb> Vermeille: and that is not really precise
[08:27:51] <eddyb> <I: Iterator<char>> Peekable<char, I>
[08:28:08] <Vermeille> cmr: certainly, but it's much less flexible and intuitive that using them as pointers like a brainless code-monkey :)
[08:28:46] <strcat> Vermeille: C++ iterators aren't peekable, and don't have adaptors
[08:29:03] <strcat> rust's iterators are closer to Boost.Range, and that doesn't act like a pointer
[08:29:09] <cmr> eddyb: C++ does have parametric polymorphism, templates are exactly that. It doesn't have bounded polymorphism.
[08:29:22] <strcat> templates aren't really parametric polymorphism
[08:29:26] <eddyb> cmr: then someone in here used "parametric wrong"
[08:29:26] <cmr> why not?
[08:29:27] <Vermeille> Hum okay, that's because you can't have "typedefs" inside classes/structs/traits/whatever you call them
[08:29:29] <eddyb> or maybe not :D
[08:29:45] <eddyb> Vermeille: that's associated items
[08:29:48] <strcat> cmr: parametric polymorphism is haskell without type classes
[08:29:55] <strcat> cmr: or rust without traits
[08:30:27] <strcat> C++ templates let you do anything with the values
[08:30:27] <eddyb> cmr: but thanks, I'll use "bounded" next time :P
[08:30:31] <Vermeille> strcat: well, isn't *iterator exactly equivalent to peek()?
[08:30:34] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[08:30:51] <strcat> Vermeille: not really
[08:31:22] *** Joins: WalrusPony (retep998@moz-530D0BB2.dhcp.oxfr.ma.charter.com)
[08:31:32] <Vermeille> Please give an explanation
[08:31:50] <eddyb> C++ iterators have a current state and a way to advance that state
[08:31:59] <eddyb> Rust iterators can only advance
[08:32:03] <strcat> Vermeille: it can do work when you deref
[08:32:12] <strcat> well
[08:32:23] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Connection reset by peer)
[08:32:33] <strcat> I'm talking more about iterators that are doing I/O, etc.
[08:32:39] <cmr> strcat: Yes, that's parametric polymorphism, from the definition in TaPL
[08:32:40] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[08:32:43] <strcat> on containers they are more similar
[08:33:10] <cmr> Whereas ad-hoc polymorphism being overloading (per-type, not "generic")
[08:33:12] <strcat> cmr: https://en.wikipedia.org/wiki/Polymorphism_(computer_science)#Parametric_polymorphism
[08:33:16] <Vermeille> strcat: stream_iterators?
[08:33:18] <strcat> Parametric polymorphism allows a function or a data type to be written generically, so that it can handle values identically without depending on their type
[08:33:22] <strcat> cmr: that's not at all like templates
[08:34:10] <strcat> first of all, the C++ compiler has to find the matching template (via pattern matching), which is very much based on the type
[08:34:12] <eddyb> Vermeille: https://github.com/mozilla/rust/blob/master/src/libstd/iter.rs#L1426-L1474
[08:34:23] <Vermeille> Anyway, ok, I start to see how your std:: is designed
[08:34:43] <aatch> libstd was designed?
[08:34:46] <strcat> it can run pretty much anything with constexpr and use it to disable/enable templates
[08:34:59] <strcat> and then inside the template itself, types aren't treated identically
[08:35:08] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[08:35:16] <strcat> you can do *anything* with them, but the behaviour is specific to each type and determined during expansion
[08:35:34] * strcat shrugs
[08:35:49] <strcat> auto x = foo.bar(); baz(x);
[08:35:53] <strcat> lets say foo is a generic type T
[08:35:58] <strcat> baz is another template
[08:36:05] <strcat> templated function*
[08:36:13] *** Joins: nicksome (quassel@EB6CE212.38C653A8.5670445F.IP)
[08:36:15] <strcat> the return type of the bar method may vary per T
[08:36:21] *** flaper87|afk is now known as flaper87
[08:36:23] <strcat> and can lead to a completely different baz expansion
[08:36:26] <eddyb> why would you need a turing-complete language at runtime, when you can have it at parse time :P
[08:36:33] <strcat> it might expand 20 templates deep, 1 template deep, infinite templates deep
[08:36:44] * strcat shrugs
[08:36:46] <eddyb> (IIRC templates have to be handled during parsing)
[08:36:46] <cmr> Ok, this is true, templates can be used for more than parametric polymorpihsm.
[08:36:50] <Vermeille> metaprogramming <3
[08:37:03] <strcat> cmr: but you usually do
[08:37:03] <aatch> eddyb, correct, so does type-checking
[08:37:07] <cmr> yes.
[08:37:09] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Connection reset by peer)
[08:37:12] *** Quits: nicksome (quassel@EB6CE212.38C653A8.5670445F.IP) (Quit: quit)
[08:37:13] *** Joins: nicksome (nicksome@EB6CE212.38C653A8.5670445F.IP)
[08:37:14] <cmr> well, *I* don't :P
[08:37:17] <cmr> I just use rust :p
[08:37:22] <strcat> I don't think std::max is parametric polymorphism, for example
[08:37:24] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[08:37:33] <strcat> because it uses properties that vary between types
[08:37:51] <aatch> eddyb, because you need to know what are types and what aren't in order make an unambigious parse.
[08:37:58] <Vermeille> strcat: the best example IMHO is std::swap
[08:37:59] <strcat> std::max(x, y) may return x for some types and y for others, and it's not due to it being non-deterministic
[08:38:04] <cmr> I believe substitution failure is allowed in system f but I'd need to check that.
[08:38:16] <strcat> Vermeille: because of ADL?
[08:38:34] <strcat> or you mean something else
[08:38:39] <Vermeille> and trillion of overloads /, specializations
[08:39:16] <strcat> http://en.cppreference.com/w/cpp/utility/move_if_noexcept or just stuff like that.
[08:39:24] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:39:29] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[08:39:33] <strcat> (std::vector uses that internally)
[08:40:00] * cmr is curious if C++'s complexity will ever stop increasing
[08:40:10] <strcat> due to exception safety, std::vector has to allocate a whole new array
[08:40:12] <strcat> while keeping the old one
[08:40:27] <strcat> if the type has a noexcept move ctor, it can then move them all over
[08:40:33] <strcat> if it doesn't, it has to copy them all over
[08:40:35] <eddyb> doesn't sound cheap
[08:40:36] <Vermeille> cmr: no, now that the ISO comittee is active, C++ is becoming more and more complex everyday
[08:40:42] <Vermeille> ... that's why I switched to Rust.
[08:40:47] <strcat> in rust, Vec<T> just calls realloc
[08:41:02] <cmr> eddyb: keeping in mind that copy and move constructors are all overloadable.
[08:41:21] <aatch> No move or copy constructors in Rust :D
[08:41:23] <strcat> (which even falls through to mremap for large allocations with a good allocator - and that can expand 200MiB -> 400MiB with no memory copying at all - the magic of virtual memory)
[08:41:29] <eddyb> copy constructors... boy oh boy
[08:41:32] <eddyb> built-in Clone!
[08:41:38] <strcat> eddyb: yes and by default.
[08:41:43] <eddyb> it's crazy!
[08:41:51] <strcat> except if you have a temporary, it's the default
[08:41:57] <strcat> well
[08:42:07] <aatch> Ah C++, where `a = b` can throw an exception.
[08:42:12] <strcat> move/copy construction basically just works via overloading
[08:42:19] <strcat> aatch: and worse, a = std::move(b) can throw
[08:42:29] <strcat> thus std::move_if_noexcept
[08:42:38] <strcat> thus std::move_if_nothrow *
[08:42:44] <strcat> ew
[08:42:45] <strcat> noexcept*
[08:42:47] <Vermeille> worse, a = std::move(b) may not move anything at all... and copy :D
[08:42:47] <eddyb> fn move<T>(x: T) -> T {x} // pls
[08:42:47] <strcat> brain is broken.
[08:43:01] *** Quits: kris (kris@moz-6D20263F.fullrate.dk) (Ping timeout)
[08:43:02] <strcat> yeah since move ctors just rely on being a more specific overload
[08:43:09] <strcat> std::move just casts to an rvalue 
[08:43:14] <strcat> that's all it is.
[08:43:16] <Vermeille> Absolutely
[08:43:29] <strcat> http://en.cppreference.com/w/cpp/utility/move sample implementation is there
[08:43:31] <strcat> ;D
[08:43:56] <eddyb> http://en.cppreference.com/w/cpp/language/value_category
[08:43:59] <Vermeille> But if b is const or something, the cast "fails", and the universal ref is turned into a "lvalue ref" instead
[08:43:59] <eddyb> because
[08:44:20] <strcat> Vermeille: and then there are xvalue, glvalue, prvalue
[08:44:36] <eddyb> (I want something similar for Rust's lvalues, which can be obtained by deref, field access or indexing)
[08:44:43] <strcat> http://en.cppreference.com/w/cpp/language/value_category
[08:44:45] <strcat> mmm
[08:44:53] <eddyb> I just linked it
[08:44:59] <strcat> ah
[08:45:01] <strcat> nvm
[08:45:29] <aatch> I have enough trouble with r/lvalues, I don't need 3 more >.>
[08:45:31] <strcat> std::forward
[08:45:36] <Vermeille> strcat: glvalue are nothing, just "all values", prvalues are just "moveable" values, and xvalues is a temporary
[08:45:41] <strcat> std::forward_as_tuple
[08:45:48] <strcat> Vermeille: sure
[08:45:53] <strcat> Vermeille: but it matters for forwarding, etc.
[08:46:06] <strcat> auto x = foo(); // x is *never* a reference
[08:46:08] <Vermeille> Yup. Perfect forwarding is so easy to get wrong
[08:46:32] <Vermeille> ...and there's almost no way to know it, aside heavy testing
[08:46:50] <eddyb> that alone is a very good reason to not use C++
[08:46:55] <strcat> decltype(auto) x = foo(); // C++14
[08:47:07] <strcat> Vermeille: don't worry, they added a new auto
[08:47:08] <strcat> ;p
[08:47:13] <eddyb> X_X
[08:47:26] <Vermeille> strcat: hahahaha, do you really want to talk about decltype(auto) and decltype((auto)) :D ?
[08:47:35] <eddyb> strcat: is it anything but trainwreck?
[08:47:50] <strcat> eddyb: well there are too many non-orthogonal features
[08:47:57] <strcat> there are too many complex interactions between things
[08:48:05] <strcat> they added std::begin and std::end to deal with C arrays
[08:48:07] <strcat> etc.
[08:48:13] <Vermeille> eddyb: false. Before C++11 no one cared about moves, you can continue that way :D
[08:48:20] <strcat> Vermeille: Boost.Move
[08:48:37] <eddyb> strcat: lol, Boost
[08:48:46] <strcat> C++11 move semantics are compiler support for a C++98/C++03 library lots of people used ;p
[08:48:50] <Vermeille> I absolutely don't want to know what is inside Boost.Move.
[08:48:58] <strcat> Vermeille: boost phoenix is the best
[08:49:06] <strcat> they had lambdas in C++98
[08:49:06] <eddyb> ES5 and C++03 - the two languages in which you can polyfill massive amounts of nextgen features
[08:49:07] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[08:49:15] <eddyb> strcat: oh yeah
[08:49:20] <eddyb> _1 + _2
[08:49:27] <strcat> Vermeille: http://www.boost.org/doc/libs/1_55_0/libs/phoenix/doc/html/phoenix/modules/scope/lambda.html lol
[08:49:30] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[08:49:39] <strcat> yeah and comma operator
[08:49:43] <Vermeille> C++ is black magic. I don't want to know what black magic boost implements over a black magic language.
[08:49:58] <strcat> C++11 standardized a dozen or more boost libraries
[08:50:06] <eddyb> strcat: oh dear the comma operator
[08:50:11] <strcat> eddyb: you can overload it
[08:50:18] <eddyb> nothing is sacred
[08:50:23] <strcat> it's used for making a DSL like this
[08:50:23] <aatch> -.-
[08:50:27] <cmr> I want an overloadable semicolon.
[08:50:29] <Vermeille> Yep, Lua does absolutely wonderful things with that
[08:50:39] <strcat> Vermeille: procedural macros are so much saner ;)
[08:50:45] <strcat> when you get to that point...
[08:50:51] <Vermeille> Boost Preprocessor :D ?
[08:50:51] <cmr> (metalua!)
[08:50:52] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[08:51:01] <aatch> I want overloadable parentheses
[08:51:02] <strcat> Vermeille: no, real macros :)
[08:51:14] <Vermeille> aaaaaaah, like Template Haskell :D ?
[08:51:19] <strcat> Vermeille: sure, or rust
[08:51:24] <eddyb> ;;)
[08:51:25] <Jesse> i want overloadable whitespace
[08:51:27] <aatch> I've no idea what I'd do with them though >.>
[08:51:33] <aatch> Jesse, genuis!
[08:51:35] <eddyb> aatch: LISP
[08:51:38] <strcat> Vermeille: https://github.com/sfackler/rust-phf
[08:51:50] <Vermeille> strcat: tssssss, I will certainly play *a lot* with that kind of metaprogramming :D
[08:51:56] <strcat> Vermeille: or just the example of type-safe format strings (with trait-based formatters) in the stdlib
[08:52:04] <cmr> Vermeille: unfortunately it's only syntactic, at least easily.
[08:52:05] * aatch apparently cannot ever spell "genius" correctly
[08:52:13] <strcat> Vermeille: #[deriving(...)] is also a syntax extension
[08:52:17] <eddyb> aatch: almost "genuine"
[08:52:19] <strcat> you could make your own #[deriving_foo]
[08:52:36] <eddyb> strcat: there is no technical reason you couldn't register your own deriving
[08:52:46] <cmr> sfackler: are you working on making #[deriving(...)] loadable?
[08:52:46] <eddyb> strcat: it shouldn't be hard to implement
[08:52:49] <strcat> rusti: #[deriving(Show, Eq)] struct Foo(f32, f32); (Foo(5.5) == Foo(2.2), Foo(2.2))
[08:52:52] -rusti- pastebinned 11 lines of output: http://ix.io/bl3
[08:53:05] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[08:53:07] <strcat> rusti: #[deriving(Show, Eq)] struct Foo(f32, f32); (Foo(5.5, 8.6) == Foo(2.2, 2.0), Foo(2.2, -1.0))
[08:53:08] -rusti- (false, Foo(2.2, -1))
[08:53:17] <strcat> eddyb: yeah but atm you have to give it a crappier name
[08:53:27] <strcat> #[deriving_MyTrait] or w/e
[08:53:29] <eddyb> strcat: no, I mean, deriving is pretty pluggable
[08:53:36] <strcat> hm
[08:53:37] <eddyb> strcat: it just doesn't expose an interface
[08:53:45] <strcat> well that's what I mean
[08:53:52] *** Quits: hk (hk@98FBA931.EE98108C.CE715904.IP) (Quit: Leaving...)
[08:53:52] <strcat> atm, you have to use a bad name
[08:54:07] <strcat> because it doesn't let you write deriving(Foo)
[08:54:11] <strcat> it could, sure
[08:54:27] <Vermeille> cmr: can't wait to see what kind of black magic could be implemented with such powerful stuff
[08:54:27] <eddyb> what I'm saying is that it could, given ten minutes of work :P
[08:54:51] <eddyb> strcat: *sigh* nothing is simple, I was thinking ahead
[08:55:15] <Vermeille> However, I think that CPP will always be useful for stuff like X-Macros :D
[08:55:20] <eddyb> strcat: we still need to move more things to trait objects so we can actually store stuff in syntax extensions
[08:55:24] <strcat> Vermeille: well you can certainly do a lot with it, any arbitrary token tree transform
[08:55:37] <strcat> Vermeille: rust has include!() (in fact it's a procedural macro itself)
[08:56:05] <Vermeille> (I'm also thinking about a CPP on steroids, which would also include some string manipulation stuff)
[08:56:20] <Vermeille> strcat: I don't see how you can use X-Macros with that
[08:57:00] <strcat> Vermeille: once upon a time, we used a procedural macro to create modules based on files
[08:57:13] <strcat> before we replaced that with a single simpler macro
[08:57:25] <strcat> forget what it was called
[08:57:42] <strcat> template!(foo, int, 1) or something
[08:57:55] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[08:59:07] <Vermeille> strcat: as long as I can do that kind of black magic, it's okay for me :D https://bitbucket.org/Vermeille/gaymulator/src/3fabc25d16e2a56d065583875f9984df74462722/z80.cpp?at=master#cl-67
[08:59:30] <strcat> Vermeille: sure, you can write procedural macros doing arbitrary stuff
[08:59:36] *** Quits: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de) (Ping timeout)
[08:59:51] <strcat> Vermeille: you could write wget!("https://foo.com/bar.txt") fetching that web page and including it as a string token
[08:59:55] * strcat shrugs
[09:00:18] <aatch> Vermeille, pcwalton made a NES (I think) emulator in Rust
[09:00:24] <strcat> (please don't do that though ;p)
[09:00:29] <Vermeille> Oh nice!
[09:00:31] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[09:00:33] <aatch> Called Sprocket.
[09:00:56] <Vermeille> strcat: Yeah, I know, I thought about doing that kind of crazy shit =')
[09:00:58] *** Quits: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP) (Ping timeout)
[09:00:58] *** Quits: indirect (indirect_m@moz-A838903C.hsd1.ca.comcast.net) (Ping timeout)
[09:01:02] <mcpherrin> strcat: wget! reminds me I have #include <http://foo.com/bar.h> and -Lhttp://foo.com/ -lbar.o 
[09:01:07] *** Joins: indirect (indirect_m@moz-A838903C.hsd1.ca.comcast.net)
[09:01:12] <mcpherrin> for gcc
[09:01:29] <eddyb> LOL?
[09:01:35] <Vermeille> Well, the "strange" thing is that you have no guarantee that 1/ the compilation will terminate 2/ the compilation is safe
[09:01:49] <Vermeille> I mean, you have to compile in a sandbox...
[09:01:50] <eddyb> mcpherrin: like PHP wasn't enough
[09:01:53] <aatch> https://github.com/pcwalton/sprocketnes
[09:01:57] <mcpherrin> eddyb: WEB SCALE COMPILERS
[09:01:59] <aatch> Vermeille, ^^
[09:02:03] <mcpherrin> who needs a package manager when you have *the web*
[09:02:06] <strcat> you can include urls directly in C source code because they're labels called http: followed by a comment
[09:02:07] <strcat> ;p
[09:02:33] <eddyb> Vermeille: you can do better than what you have, even with rule-based macros
[09:02:46] <Vermeille> mcpherrin: OMG THX =') I will make my teachers cry with that =')
[09:02:46] <mcpherrin> https://github.com/mcpherrinm/webscale
[09:03:14] <mcpherrin> hmm I dunno where the README went
[09:03:19] <mcpherrin> I guess I never checked it in.
[09:03:20] <strcat> um
[09:03:27] <strcat> rusti: "hey guys, are you talking about me?"
[09:03:28] -rusti- hey guys, are you talking about me?
[09:03:41] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[09:03:46] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[09:04:01] <eddyb> Vermeille: like, you wouldn't need Instr<
[09:04:10] * strcat still thinks https://github.com/videlalvaro/gifsockets is the pinnacle of web scale
[09:04:14] <cmr> I agree
[09:04:15] *** Quits: nlminhtl (ignotus@moz-393BCEC.la.net.ua) (Client exited)
[09:04:21] <mcpherrin> strcat: haha, I feel I should use that sometimes.  http://bugtracker/23256 right in the coe
[09:04:25] <mcpherrin> code*
[09:05:03] *** Joins: jesse98 (jjones@6251EDC2.15651213.B46B86FA.IP)
[09:05:29] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[09:05:37] <strcat> it's too bad websockets were added to browsers
[09:05:44] <strcat> imagine a world where we actually had to use gifsockets
[09:05:50] <diodesign> strcat: is it me, or does the very latest rustc fail the latest rust-core test? https://gist.github.com/diodesign/9869944
[09:06:15] <strcat> diodesign: dunno, I don't really maintain rust-core well anymore
[09:06:18] <cmr> diodesign: this is the attribute syntax changes.
[09:06:22] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[09:06:28] <cmr> Change every attribute that has a semicolon at the end
[09:06:29] <cmr> to #![foo]
[09:06:33] <cmr> instead of #[foo];
[09:06:58] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[09:07:15] <diodesign> ah
[09:07:33] <diodesign> ok, I thought something had changed! the other night I didn't need semicolons
[09:07:42] <strcat> the stdlib should support freestanding usage
[09:07:52] <diodesign> thanks for your help, cmr and strcat, it's much appreciated
[09:08:05] <diodesign> strcat: oh
[09:08:24] <cmr> diodesign: that is an ideal, not a reality today.
[09:08:25] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[09:08:32] <cmr> the stdlib is absolutely not usable freestanding today
[09:08:54] <strcat> it kind of is if you stub everything out
[09:09:02] <strcat> ofc then it's totally unsafe
[09:09:04] <strcat> and most things don't work
[09:09:13] <cmr> so, not really usable :p
[09:09:13] <eddyb> Vermeille: wow I can't see how this could be efficient https://bitbucket.org/Vermeille/gaymulator/src/master/z80.cpp#cl-383
[09:09:21] <strcat> cmr: yeah, but it should be usable
[09:09:28] <strcat> and I don't really feel like maintaining rust-core anymore
[09:09:32] <cmr> agree
[09:09:36] <strcat> although I'll merge PRs if people send them
[09:10:02] <eddyb> Vermeille: you'd get better performance out of an if/else chain created by a macro (turns into a switch). too bad you can't (yet) generate arbitrary match arms from rule-based macros
[09:10:03] <myname> wtf gaymulator
[09:10:04] <strcat> if the stdlib doesn't support freestanding use then I don't really think rust is a useful language for freestanding use
[09:10:12] <Vermeille> Do you know how recruiting goes in Mozilla? If I apply, can I choose  to wor on Rust?
[09:10:18] <eddyb> myname: don't judge
[09:10:28] <eddyb> Vermeille: now you make me feel like an idiot
[09:10:35] <eddyb> though I have other good reasons
[09:10:42] <Vermeille> eddyb? getting the function pointer is O(1) in complexity
[09:10:56] <eddyb> Vermeille: std::function is not just a function pointer
[09:10:58] <Vermeille> if-else/switchs are O(N)
[09:11:12] <eddyb> Vermeille: switch isn't O(N)
[09:11:24] <eddyb> if/else chains are optimized to a LLVM switch
[09:11:29] <Vermeille> it is
[09:11:35] <aatch> Vermeille, computational complexity isn't the be-all of performance anyway
[09:11:35] <Vermeille> look at the asm
[09:11:51] <eddyb> strcat: can you take over?
[09:11:52] *** Joins: krdln (krdln@moz-C271714F.dynamic.chello.pl)
[09:11:53] <cmr> eddyb: it can be optimized to a jump table...
[09:12:08] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[09:12:23] <eddyb> cmr: LLVM will always lower an exhaustive switch to a jump table
[09:12:25] <Vermeille> eddyb: in that exact case, std::function just wraps a function pointer
[09:12:31] <strcat> but it's more fun to write it with computed gotos
[09:12:31] <aatch> function pointers are death to to your pipeline and are much harder to branch predict than other jumps.
[09:12:54] <strcat> computed gotos > *
[09:13:02] <eddyb> Vermeille: pretty sure std::function is like our old ~fn
[09:13:05] <eddyb> or @fn, even
[09:13:08] <strcat> ~fn
[09:13:27] <eddyb> strcat: but std::string is still CowArc, right?
[09:13:30] <cmr> Vermeille: Mozilla *had* a Rust position open, but I can't seem to find it on https://careers.mozilla.org/en-US/listings/, it was perhaps filled?
[09:13:34] <strcat> eddyb: no
[09:13:45] <eddyb> strcat: people have been misinforming me then :/
[09:13:47] <Vermeille> cmr: It's just for an internship
[09:13:50] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Ping timeout)
[09:13:58] <strcat> eddyb: C++11 forbids COW for std::string
[09:14:07] <strcat> a stdlib doing that (like libstdc++) is not a C++ stdlib
[09:14:09] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:14:09] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:14:11] <strcat> ;p
[09:14:12] <eddyb> Vermeille: ah, not a full time job. nevermind previous comment
[09:14:14] <Vermeille> strcat: yes, but gcc continues to use COW
[09:14:16] *** Joins: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[09:14:18] <cmr> Vermeille: ah! https://careers.mozilla.org/en-US/university/
[09:14:26] <strcat> Vermeille: yeah and libstdc++ isn't a C++11 stdlib ;)
[09:14:32] <strcat> you can use gcc with libc++
[09:14:39] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:14:39] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:15:06] <cmr> Vermeille: unfortunately you've missed the deadline by two months I think
[09:15:09] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:15:09] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:15:10] <strcat> ha, it mentions persona
[09:15:16] <eddyb> strcat: noticed that myself
[09:15:21] <eddyb> wasn't persona dead?
[09:15:21] <diodesign> hm, in this case, it's not the #[inline] that's upsetting rustc, it's https://github.com/thestinger/rust-core/blob/master/core/cell.rs#L41
[09:15:26] <strcat> eddyb: well, not dead
[09:15:29] <Vermeille> cmr: it's for feb 2015, I think I'm still on time
[09:15:30] <strcat> dead in the same way as thunderbird
[09:15:39] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:15:39] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:15:44] <cmr> diodesign: impl <T: Copy>, rather than Pod
[09:15:50] <eddyb> yay internships I'll never be eligible for
[09:15:54] *** Quits: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net) (Quit: Leaving.)
[09:16:00] <strcat> diodesign: Pod needs to be renamed to Copy
[09:16:06] <strcat> and "pod" to "copy"
[09:16:06] <cmr> diodesign: and change the #[lang="pod"] to #[lang="copy"]
[09:16:09] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:16:09] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:16:19] *** Joins: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP)
[09:16:23] <strcat> anyway
[09:16:28] <aatch> Interestingly, I watched a talk from some compiler devs at Microsoft talking about optimisations where they replaced virtual function calls to short if-else chains to static functions
[09:16:31] <strcat> there are plenty of broken things in rust-core now
[09:16:39] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:16:39] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:16:46] <strcat> lots of things stopped being memory safe due to Freeze
[09:17:05] <aatch> with a virtual call at the end if all the checks failed.
[09:17:09] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:17:09] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:17:10] <strcat> the only viable way to maintain it is copy-paste of the stdlib + fixing it for freestanding usage
[09:17:20] <strcat> which I am not really interested in doing atm
[09:17:56] <eddyb> Vermeille: I'm curious, where did you get the idea that switch is O(N)?
[09:18:04] <strcat> aatch: meh, GNU C is wonderful for that stuff
[09:18:09] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:18:09] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:18:19] <strcat> eddyb: it can be, it depends on what the compiler does
[09:18:23] <strcat> and what the ranges of values are
[09:18:38] <Vermeille> eddyb: gcc -S ...
[09:18:39] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[09:18:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:18:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:18:41] <strcat> usually it will do a series of branches (small), a jump table (medium) or binary search (large)
[09:18:53] <eddyb> Vermeille: without -O3?
[09:19:00] <Vermeille> I don't remember
[09:19:01] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[09:19:04] <eddyb> Vermeille: ...
[09:19:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:19:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:19:27] <strcat> making jump tables by hand is way more fun
[09:19:31] <cmr> it really is.
[09:19:39] <eddyb> Vermeille: LLVM master can lower switches to perfect hash functions
[09:19:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:19:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:19:41] <cmr> especially if you're not using labels, and instead use offsets.
[09:20:03] <YourBestFriend> does rust have a sqrt function?
[09:20:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:20:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:20:11] <strcat> YourBestFriend: yes
[09:20:12] <aatch> YourBestFriend, yes.
[09:20:13] <cmr> YourBestFriend: the docs have a search: http://static.rust-lang.org/doc/master/std/index.html
[09:20:14] *** Joins: nkoep (nik@moz-4D8B1323.pool.mediaways.net)
[09:20:21] <eddyb> Vermeille: when they're sparse, that is. compact switches will end up in a jump table most of the time
[09:20:35] <myname> you can only sqrt floats, though (iirc)
[09:20:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:20:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:20:50] <Vermeille> okay, that might have been the flaw I mesured
[09:21:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:21:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:21:12] <eddyb> Vermeille: your instruction set is anything but sparse :P
[09:21:23] <Vermeille> ... but how different is it from my own table?
[09:21:23] <eddyb> it's pretty much an exhaustive match over a byte
[09:21:43] <eddyb> Vermeille: std::function is a heap closure, not just a function pointer
[09:21:50] <strcat> meh
[09:21:54] <strcat> the numeric stuff is truly a mess
[09:22:19] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[09:22:22] <eddyb> Vermeille: and the compiler doesn't see a switch, it just sees an array with heap closures in it
[09:22:23] <Vermeille> (please apologize my english, I did not sleep that night)
[09:22:27] <strcat> there's no reason for it to have free functions *and* methods
[09:22:30] <Vermeille> eddyb: what do you call "heap closure"?
[09:22:36] <eddyb> Vermeille: std::function
[09:22:52] <Vermeille> thanks for the mutually recursive definition!
[09:23:03] <eddyb> haha
[09:23:14] <eddyb> it's a closure and it stores its data on the heap
[09:23:16] <eddyb> hence, heap closure
[09:23:28] <Vermeille> which data?
[09:23:30] <eddyb> strcat knows more
[09:23:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:23:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:23:56] <strcat> Vermeille: std::function can be created from an arbitrary struct with operator() overloaded (or a lambda with captures)
[09:24:08] <strcat> it erases the difference between function ptrs and closures with indirection
[09:24:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:24:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:24:17] *** Quits: tgkokk (user@moz-88CCC929.home.otenet.gr) (Quit: ERC Version 5.3 (IRC client for Emacs))
[09:24:24] <Vermeille> Yep, but they internally uses type-erasure
[09:24:31] <eddyb> haha, it's worse than I thought
[09:24:36] <aatch> Vermeille, so the main issue you have is that neither the compiler nor the CPU can see through the call to the std::function wrapper.
[09:24:39] <eddyb> Vermeille: you end up with double indirection
[09:24:52] <eddyb> Rust closures are single indirection
[09:25:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:25:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:25:18] <Vermeille> I think that's two pointers won't kill my perfs, honestly
[09:25:20] <eddyb> (well, maybe not)
[09:25:30] <aatch> Vermeille, oh, you'd be surprised.
[09:25:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:25:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:25:41] <aatch> pipeline stalls kill performance on modern machines.
[09:25:55] <eddyb> Vermeille: I was just pointing out that you can get something nicer and faster even with rule-based macros ;)
[09:26:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:26:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:26:18] <aatch> doomlord_ can attest to that.
[09:26:34] <cmr> (egads, aatch has summoned the eldritch god)
[09:26:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:26:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:26:41] <eddyb> doomlord_ has touched unholy stuff
[09:27:01] <Vermeille> Well, in my current absolute tiredness, I can't think of a way to remove those std::function
[09:27:05] <eddyb> (aaand now I notice his nick. heh)
[09:27:09] <eddyb> Vermeille: function pointers?
[09:27:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:27:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:27:11] *** Joins: rylev (rylev@moz-C15AA19A.cust.telecolumbus.net)
[09:27:27] <Vermeille> eddyb: there's certainly a reason if I didn't do that
[09:27:40] <eddyb> C++'s crazy member pointer stuff, I bet
[09:27:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:27:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:27:45] <aatch> cmr, eddyb, this is a Gamebody emulator we're talking about, so it does somewhat intersect with what doomlord_ does.
[09:28:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:28:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:28:19] <Vermeille> eddyb: it should have something to do with the type system I think
[09:28:24] <eddyb> yeah, I know, I like my emulator hot loops tight
[09:28:33] <eddyb> Vermeille: mhmm
[09:28:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:28:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:29:04] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[09:29:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:29:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:29:29] *** Quits: ch (ch@moz-8B0DC243.hsd1.ca.comcast.net) (Ping timeout)
[09:29:30] *** Joins: ch (ch@moz-E2E14174.reverse.softlayer.com)
[09:29:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:29:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:30:10] <Vermeille> May I ask you what you think about my resume? http://vermeille.fr/dotclear2/public/guillaume_sanchez_cv.pdf
[09:30:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:30:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:30:31] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[09:30:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:30:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:30:56] *** Nekit1234007_ is now known as nekit1234007
[09:31:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:31:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:31:27] *** Joins: jackneill (jackneill@moz-9DF68D6A.pool.digikabel.hu)
[09:31:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:31:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:32:09] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[09:32:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:32:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:32:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:32:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:32:52] <eddyb> Vermeille: it's... good
[09:33:07] * eddyb stares at an empty piece of paper
[09:33:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:33:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:33:28] <eddyb> *sigh* I bet I was doing something before I got lost in IRC
[09:33:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:33:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:34:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:34:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:34:14] <Vermeille> Thanks :) So do you think I can send it as is to Moz?
[09:34:21] <aatch> eddyb, you and me both
[09:34:35] <YourBestFriend> how can I¬†avoid that casting hell? http://pastie.org/8979979
[09:35:05] <eddyb> Vermeille: you can poke brson or maybe discuss further with cmr in PM *shrug*
[09:35:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:35:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:35:31] <Vermeille> Thanks for the pointers eddyb :)
[09:35:40] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:35:40] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:35:45] <aatch> YourBestFriend, `range(1, max).map(|x| x as f32)`
[09:35:56] <eddyb> aatch: well, it's not exactly empty. but nothing interesting. I've never completed a project. ever
[09:36:10] *** Joins: reyre (reyre@8A257803.33EE9F8A.1139E686.IP)
[09:36:10] *** Quits: reyre (reyre@8A257803.33EE9F8A.1139E686.IP) (Max SendQ exceeded)
[09:36:20] <aatch> eddyb, oh, I meant doing something before getting lost in IRC.
[09:36:32] <eddyb> aatch: lol
[09:36:50] *** Quits: rylev (rylev@moz-C15AA19A.cust.telecolumbus.net) (Client exited)
[09:36:55] <eddyb> "Use Pastie in your quest to save humanity, not in your evil plots to take over the world! " meh
[09:37:18] <aatch> eddyb, though I also have difficulty finishing projects.
[09:37:36] <eddyb> aatch: I can barely finish rust PRs!
[09:37:45] <aatch> eddyb, I generally find I get to the "yep, I can do that" stage, where I've solved all the fun problems.
[09:38:34] <eddyb> aatch: "yepp, I can totally make a decompiler. now to actually have it output C code. eeeeh"
[09:39:38] <aatch> eddyb, "I can make a parser, now I actually have to make it friendly..."
[09:39:49] <aatch> Stupid users wanting decent error messages.
[09:40:21] <aatch> Just don't write stuff that won't parse, then the fact that all you get is "Parse Error" won't matter!
[09:40:40] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[09:41:44] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[09:42:42] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[09:42:51] <diodesign> let queue = Queue::<Option<proc()>>::new(); <-- what's that code trying to do? :/
[09:42:51] *** Joins: NiccosSystem` (NiccosSyst@moz-ED196BB4.customer.lyse.net)
[09:42:58] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[09:43:20] <cmr> diodesign: creates a new Queue with a type parameter substituted with Option<proc()>
[09:43:27] <cmr> where it's `struct Queue<T>`
[09:43:37] *** Joins: ch_ (ch@moz-8B0DC243.hsd1.ca.comcast.net)
[09:44:21] *** Quits: ch (ch@moz-E2E14174.reverse.softlayer.com) (Ping timeout)
[09:44:23] <huon> It can often be written as `Queue::new()`, letting type inference handle working out the Option<proc()> part
[09:46:27] *** Quits: hacker_sam (hacker_sam@moz-F624512F.hsd1.pa.comcast.net) (Ping timeout)
[09:47:10] <Vermeille> aatch: I solved this issue by making the error handling a challenge too
[09:47:16] <diodesign> cmr: ok. I suppose specifically it was the Option<proc()> bit that threw me
[09:47:31] <Vermeille> How would you collect the more information to make the best error message ever?
[09:47:39] *** Quits: ch_ (ch@moz-8B0DC243.hsd1.ca.comcast.net) (Client exited)
[09:47:43] <Vermeille> How would you try to continue nevertheless?
[09:47:46] <Vermeille> etc etc
[09:48:00] *** Joins: ch (ch@moz-8B0DC243.hsd1.ca.comcast.net)
[09:48:04] <aatch> Vermeille, eh, tends to not be that hard to figure out.
[09:48:13] <eddyb> Vermeille: if you use lookahead sparingly, it should be fine
[09:48:17] <aatch> Having ADHD doesn't really help either
[09:48:33] * eddyb raises hand
[09:48:59] <YourBestFriend> aatch: what after that, though? what does map return?
[09:49:46] <aatch> YourBestFriend, so you should do `for a in range(1, max).map(|x| x as f32) { ... }`
[09:49:50] *** Quits: ch (ch@moz-8B0DC243.hsd1.ca.comcast.net) (Ping timeout)
[09:49:57] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:50:16] <eddyb> aatch: range doesn't work on floats? :(
[09:50:32] <aatch> eddyb, no, because of accumulating error
[09:50:49] <aatch> if we had a range_float, it'd pretty much be that anyway.
[09:50:50] <eddyb> rusti: range(1.0f32, 50.0).collect::<Vec<f32>>()
[09:50:53] -rusti- pastebinned 1 lines of output: http://ix.io/bld
[09:51:03] <eddyb> aatch: it... works :)
[09:51:08] <aatch> huh, apparently it does.
[09:51:10] <aatch> TIL.
[09:51:20] <eddyb> YourBestFriend: so you can have your ranges over floats
[09:51:29] <eddyb> aatch: it will stop instead of accumulating errors
[09:51:39] <YourBestFriend> they both need to be float, though
[09:51:47] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:52:10] <eddyb> rusti: range(10e30f32, 11e30f32).collect::<Vec<f32>>()
[09:52:15] -rusti- playpen: timeout triggered!
[09:52:19] <eddyb> haha?
[09:52:27] <aatch> eddyb, that's still 1e30 elements...
[09:52:34] <eddyb> rusti: range(10e50f32, 11e50f32).collect::<Vec<f32>>()
[09:52:35] -rusti- []
[09:52:38] <eddyb> there we go
[09:53:16] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[09:53:33] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[09:53:40] <YourBestFriend> alright, that's what I have now: http://pastie.org/8980009
[09:54:10] <aatch> Ah, it's range_step that won't accept floats.
[09:54:39] <YourBestFriend> if only sqrt would accept ints, I¬†wouldn't need all of these
[09:55:09] <huon> it doesn't make sense for sqrt to take an int :P
[09:55:32] <YourBestFriend> 0,4WHY not?
[09:55:41] <eddyb> YourBestFriend: because maths
[09:55:52] <huon> because sqrt doesn't map N to N
[09:55:52] <YourBestFriend> btw how do I¬†break out of those nested loops
[09:55:55] <huon> (natural numbers)
[09:55:56] <huon> break
[09:55:59] <eddyb> https://gist.github.com/eddyb/e74ff9c3c1c4e5ea90c4 is neater IMO
[09:56:10] <eddyb> (two spaces isn't bad as long as you're consistent)
[09:56:23] <huon> or `'label: for a in range(...) { for b in range(...) { .... break 'label; } }`
[09:56:30] <eddyb> YourBestFriend: you can label outer loops with... nvm huon gave example
[09:56:44] <huon> also, if you move the sqrt inside the if, your program will be faster
[09:56:58] <eddyb> huon: if depends on sqrt
[09:57:00] <aatch> YourBestFriend, also, equality with floats.
[09:57:02] <huon> since sqrt is significantly more expensive than sqrt
[09:57:04] <huon> oh
[09:57:08] <eddyb> lol?
[09:57:08] <huon> whoops
[09:57:13] * huon can't read
[09:57:45] <YourBestFriend> I¬†knew D¬†could do that, but didn't know rust could
[09:58:49] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[09:58:49] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[09:58:51] <huon> btw, there's also http://static.rust-lang.org/doc/master/std/num/fn.hypot.html
[09:58:51] <YourBestFriend> problem9.rs:6:8: 6:9 error: expected one of `;`, `}` but found `:`
[09:58:56] <YourBestFriend> lol, are you sure you actually can?
[09:59:02] <huon> yes
[09:59:17] * huon was the person who made the compiler accept labels on for loops
[09:59:41] <huon> rusti: 'a: for _ in range(0, 10) { loop { break 'a } fail!() }
[09:59:43] -rusti- ()
[09:59:55] *** Joins: alonlevy (alon@moz-61A0AD83.red.bezeqint.net)
[10:00:11] <aatch> huon, must have been fun integrating that into middle::*
[10:00:29] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:00:44] <huon> aatch: ... just using the label support for `loop` :P
[10:00:53] <huon> I only had to touch libsyntax
[10:00:54] <aatch> huon, ahh, right.
[10:01:59] <YourBestFriend> eddyb: I prefer { to be on its own line
[10:02:46] <YourBestFriend> btw I¬†still don't understand 0,4WHY sqrt shouldn't accept ints
[10:02:59] <YourBestFriend> accept an int, return a float?
[10:03:06] <eddyb> YourBestFriend: can you tune that bold red invert thing down? it's obnoxious
[10:03:13] <YourBestFriend> sorry
[10:03:16] <eddyb> YourBestFriend: because not all integers can be represented as floats
[10:03:19] <aatch> YourBestFriend, then it would have to always return an int
[10:03:28] <aatch> I mean always return a float
[10:03:37] <aatch> Specifically, always return a specific float.
[10:03:50] <aatch> instead of returning the same type you pass in.
[10:03:55] <YourBestFriend> you mean specific size?
[10:04:20] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[10:04:23] <aatch> YourBestFriend, yes, but the way it's implemented means you could use it on arbitrary precision numbers too.
[10:04:50] *** Joins: Saj (Saj@moz-840D0658.netvisao.pt)
[10:05:58] *** Joins: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de)
[10:06:04] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[10:06:08] *** Joins: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de)
[10:06:18] <aatch> So if you have some sort of `APFloat` type, you can do `let a = APFloat::from_f32(4.0); let b : APFloat = std::num::sqrt(a);`
[10:06:36] <aatch> Assuming that `APFloat` implements the `Float` trait.
[10:07:28] <YourBestFriend> I¬†see
[10:07:34] <aatch> because the signature of `sqrt` is `fn sqrt<T:Float>(value: T) -> T`
[10:07:44] <aatch> so it takes in the same type as it returns.
[10:07:51] <strcat> those free functions really need to be removed
[10:07:56] <strcat> sqrt is already a method on Float
[10:08:11] * strcat shrugs
[10:08:31] <YourBestFriend> rusti: 100f32.sqrt()
[10:08:31] <strcat> there's std::f64::sqrt/std::num::sqrt and they're entirely redundant
[10:08:32] -rusti- 10
[10:08:39] <strcat> they just call the method
[10:08:53] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[10:08:54] *** Joins: peeves (Mibbit@moz-A4549DF5.dynamic.ufanet.ru)
[10:09:04] <YourBestFriend> does it also return a float?
[10:09:10] <strcat> yes
[10:09:18] <strcat> there isn't an integer square root in the stdlib
[10:09:23] <TeXitoi> https://github.com/mozilla/rust/pull/13206
[10:09:34] *** Quits: peeves (Mibbit@moz-A4549DF5.dynamic.ufanet.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[10:09:34] <YourBestFriend> you never know, man
[10:09:37] <YourBestFriend> you never know!
[10:09:45] *** Quits: alonlevy (alon@moz-61A0AD83.red.bezeqint.net) (Ping timeout)
[10:09:56] <diodesign> hang on, with `fn sqrt<T:Float>(value: T) -> T` what's the point of using T if you've stated it's a float?
[10:10:08] <strcat> diodesign: Float is a trait, not a type
[10:10:08] <YourBestFriend> so you can't add ints and floats together without casting the ints?
[10:10:08] <cmr> diodesign: it's generic over f32 and f64
[10:10:10] <huon> Float is a trait
[10:10:18] <huon> satisfied by both f32 and f64
[10:10:18] <cmr> (ie, that types that implement the Float trait)
[10:10:19] <strcat> diodesign: there's no point of having the function at all though
[10:10:19] <diodesign> ooh
[10:10:26] <strcat> it's entirely redundant
[10:10:30] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[10:10:33] <huon> YourBestFriend: yes, a strong type system :)
[10:10:42] * diodesign is still getting his head around rust's type system, sorry :)
[10:11:03] <aatch> Proper type systems are hard if you're not used to them.
[10:11:13] <YourBestFriend> I¬†kind of wish you could do that
[10:11:52] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[10:13:43] <eddyb> YourBestFriend: you can write a sqrt_via_f64 function, generic over everything that can be turned into f64
[10:14:00] <eddyb> YourBestFriend: I think ToPrimitive has a method for that
[10:14:39] <eddyb> but it won't let you pass (1u64 << 55) in :P
[10:14:47] <YourBestFriend> no I¬†mean I wish I¬†could add ints and floats together without casting
[10:15:01] <eddyb> (or maybe you need to add 1 to that so it becomes invalid)
[10:15:08] <eddyb> YourBestFriend: ah, we're past sqrt
[10:15:13] <YourBestFriend> yes
[10:15:23] <eddyb> automatic promotion causes troubles in the long run
[10:15:31] <YourBestFriend> how so?
[10:15:40] <eddyb> and even serious memory safety issues
[10:15:51] <eddyb> inb4 strcat comes with twenty examples
[10:16:28] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[10:16:28] <aatch> Also, coercion between int and float types isn't free.
[10:17:08] <kimundi> YourBestFriend: Its a lossy conversion in both directions
[10:18:10] <kimundi> loosing digits is a great source of bugs ;)
[10:18:19] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[10:18:47] *** Joins: tgkokk (user@moz-88CCC929.home.otenet.gr)
[10:18:58] <YourBestFriend> int + float = float, there's no loss
[10:19:03] <kimundi> there is
[10:19:10] <kimundi> not every int is representable as a float
[10:19:15] <cmr> f64 cannot represent every i64.
[10:19:29] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[10:19:33] <YourBestFriend> oh shit
[10:19:44] <YourBestFriend> we need bigger floats
[10:19:48] <cmr> heh
[10:19:54] <cmr> f80, aka x87 :p
[10:20:00] <kimundi> bigints and bigrationals
[10:20:04] <strcat> cmr: which is deprecated ;p
[10:20:44] <aatch> rusti: let n = 0x7FFFFF01i32; (n, n as f32 as i32) /* I don't know if this works */
[10:20:45] -rusti- (2147483393, 2147483392)
[10:21:00] <strcat> ieee754 only defines 16/32/64/128-bit
[10:21:21] <strcat> aatch: btw overflowing casts from int -> float or float -> int are undefined behaviour in LLVM
[10:21:23] <strcat> but we don't check
[10:22:14] <aatch> strcat, well that doesn't exactly take away from the "don't coerce between numeric types" argument
[10:22:25] <aatch> rusti: let n = 0x7FFFFFF0i32; (n, n as f32 as i32) /* I don't know if this works */
[10:22:25] -rusti- (2147483632, -2147483648)
[10:22:36] <aatch> Haha!
[10:22:38] <strcat> yeah just warning you that you're in the realm of UB
[10:22:56] <strcat> rusti: int::MIN
[10:22:59] -rusti- pastebinned 11 lines of output: http://ix.io/blh
[10:23:00] <strcat> rusti: int::MIN_VALUE
[10:23:03] -rusti- pastebinned 11 lines of output: http://ix.io/bli
[10:23:08] <strcat> rusti: std::int::MIN_VALUE / -1
[10:23:08] -rusti- <anon>:11:9: 11:28 error: unresolved name `std::int::MIN_VALUE`.
[10:23:08] -rusti- <anon>:11         std::int::MIN_VALUE / -1
[10:23:09] -rusti-                   ^~~~~~~~~~~~~~~~~~~
[10:23:09] -rusti- error: aborting due to previous error
[10:23:09] -rusti- playpen: application terminated with error code 101
[10:23:12] * strcat cries
[10:23:16] <strcat> rusti: std::int::MIN / -1
[10:23:16] -rusti- -9223372036854775808
[10:23:19] <strcat> that too
[10:23:31] <strcat> rusti: 1u8 << 8
[10:23:31] -rusti- 0
[10:23:33] <strcat> that too
[10:23:44] <huon> rusti: -128i8/-1
[10:23:45] -rusti- 0
[10:24:00] <strcat> UB ;)
[10:24:03] <huon> (^example of it being UB.)
[10:24:11] <huon> yup
[10:24:20] <strcat> well the whole program could be memory unsafe due to an optimization made based on it
[10:24:34] <strcat> that can't happen -> chop off the end of the function
[10:24:43] <Vermeille> Do you have any thought about making also popular compiling Rust to LLVM bytecode to improve portabilty and allow JIT?
[10:24:48] *** Quits: kvanb (kvanb@moz-BA670ED4.lnse2.win.bigpond.net.au) (Ping timeout)
[10:25:09] <strcat> Vermeille: hm?
[10:25:12] <strcat> LLVM bytecode isn't portable
[10:25:14] <eddyb> "popular"?
[10:25:25] <Vermeille> strcat: wait wat?
[10:25:27] <eddyb> (can't parse that sentence)
[10:25:31] <strcat> Vermeille: LLVM bytecode is platform-specific.
[10:25:53] <Vermeille> okay, so my question sucked, nvm
[10:26:00] <strcat> Vermeille: it has all kinds of low level alignment stuff, etc.
[10:26:20] <eddyb> Vermeille: rlib (Rust static libraries) have a LLVM .bc file in them ;)
[10:26:23] <strcat> Vermeille: LLVM doesn't know about padding, calling conventions or anything
[10:26:25] <strcat> well
[10:26:30] <strcat> it has the low level calling conventions
[10:26:34] <strcat> but most of the work is done by the frontend
[10:26:51] <eddyb> Vermeille: but you can't do much with it other than compile for a stricter CPU model than the original
[10:27:03] <strcat> you can compile rust to pnacl bytecode
[10:27:04] <eddyb> like, enable AVX
[10:27:05] <Vermeille> What are the conceptual differences between LLVM and, say, .NET?
[10:27:10] *** Joins: kvanb (kvanb@moz-797C6BA.lnse5.lon.bigpond.net.au)
[10:27:16] <eddyb> Vermeille: or Java
[10:27:18] <cmr> Vermeille: .NET has a much richer type system etc.
[10:27:18] <strcat> Vermeille: LLVM is a low-level platform specific bytecode
[10:27:21] <cmr> It's very high level.
[10:27:34] <cmr> LLVM is generic compiler infrastructure.
[10:27:39] <strcat> Vermeille: LLVM IR is *very much* an IR (internal representation) of a compiler
[10:27:46] <mgax> combinetwistharborsagan
[10:27:51] <strcat> Vermeille: it doesn't exist for portability, it's not designed for that
[10:27:56] <strcat> not intended to be portable
[10:28:04] <aatch> I think mgax just told us a password
[10:28:04] <diodesign> argh, I've tried to solve this but I can't. how do you set the type of function in this match() block? https://github.com/thestinger/rust-core/blob/master/core/thread.rs#L334
[10:28:10] <strcat> PNaCl defines a portable bytecode based on a small subset of LLVM
[10:28:13] <strcat> LLVM IR*
[10:28:15] <Vermeille> Okay, so LLVM is more an abstraction over a given architecture than a "universal" VM
[10:28:20] <mgax> aatch, thanks for the catch :(
[10:28:39] <eddyb> aatch: I thought it was a LLVM instruction
[10:28:45] <diodesign> rustc complains Some(function) => function() 'type of this value must be known in this context'. I just can't work out the syntax to set the type
[10:28:45] <eddyb> aatch: I guess you know better :P
[10:28:55] <cmr> eddyb: combine twist harbor sagan?
[10:29:07] <eddyb> cmr: I was thinking shuffles
[10:29:10] <cmr> although I'm sure that's some funky simd thing
[10:29:12] <cmr> yeah :p
[10:29:19] <mgax> cmr, yes, it's an ckdd style password :)
[10:29:26] <mgax> xkcd
[10:29:35] <mgax> http://xkcd.com/936/
[10:29:42] <eddyb> /sbin/ckdd
[10:30:36] <aatch> Little Known Fact(TM): LLVM contains the entire of "Pale Blue Dot" which plays when you use that instruction.
[10:31:44] *** Quits: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp) (Client exited)
[10:31:45] <kimundi> diodesign: Could you paste what you're trying to do? This sounds like you just need to gov inference a typehint
[10:32:54] *** Joins: Ferreus (ferreus@moz-C3128393.lsn.wtnet.de)
[10:33:42] <strcat> Vermeille: it's just the compiler's internal representation - that's all
[10:34:02] *** lpy_ is now known as lpy
[10:34:03] <strcat> optimization/analysis passes on performed on the IR
[10:34:10] <strcat> then CodeGen takes the IR and turns it into machine code
[10:34:20] <eddyb> aatch: I wish
[10:34:38] <strcat> Vermeille: the bytecode format is required for link-time optimizatio
[10:34:40] <strcat> n
[10:35:14] <eddyb> rustilite: #[no_std]; fn main(){} #[start] fn start(_: int, _: **u8) -> int {fail!("foobar")}
[10:35:16] -rustilite- pastebinned 8 lines of output: http://ix.io/bll
[10:35:19] <diodesign> kimundi: let me gist it
[10:35:20] <strcat> there's the in-memory representation, bytecode (bc files) for LTO, text for humans (ll files)
[10:35:35] <eddyb> oh, oops
[10:35:44] <eddyb> rustilite: #![no_start] fn main(){} #[start] fn start(_: int, _: **u8) -> int {fail!("foobar")}
[10:35:51] -rustilite- pastebinned 6 lines of output: http://ix.io/blm
[10:35:56] <strcat> Vermeille: https://developers.google.com/native-client/dev/reference/pnacl-bitcode-abi
[10:36:01] <strcat> Vermeille: rust does compile to pnacl, I tried
[10:36:15] <strcat> the performance overhead isn't very high and threads, etc. all work
[10:36:37] <eddyb> aww ILP32
[10:37:14] <kimundi> Would "functional update" be a good name for what vec::append_one does, as opposed to .push() ?
[10:37:30] <eddyb> strcat: how do pointers work on x64, though?
[10:37:31] <Vermeille> strcat: PNaCl is the native client Chrome wants to embed in order to have a compilation target for web browsers, right?
[10:37:39] <eddyb> strcat: is it like x32?
[10:37:59] <strcat> Vermeille: well it's not just for web browsers, but yes - it's a sandboxed/portable bytecode
[10:38:07] <strcat> Vermeille: the pepper flash player is written in it
[10:39:01] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[10:39:22] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[10:40:10] <diodesign> kimundi: https://gist.github.com/diodesign/9870802 
[10:40:37] <Vermeille> So if I understand correctly, LLVM is a kind of abstraction over an architectures which abstracts to you register allocations, types, linking and executable generation?
[10:41:25] <eddyb> diodesign: give a type to let queue
[10:41:27] <Vermeille> (and does a lot of optimizations)
[10:41:29] <strcat> Vermeille: frontends target LLVM and then don't need to reinvent analysis/optimization passes, etc.
[10:41:39] <strcat> Vermeille: it doesn't have real 'types' as you have in rust
[10:41:41] <strcat> they are just layouts
[10:41:44] <kimundi> diodesign: You define nowhere what T the queue actually contains. That error message just tells you that
[10:41:49] <strcat> essentially like C without any type punning rules
[10:41:56] <cmr> Vermeille: well, LLVM is a project that consists of many related tools and libraries :p
[10:42:04] <diodesign> kimundi: I'm such a newbie that I don't understand the compiler's error, sorry
[10:42:08] <eddyb> (and SSA form)
[10:42:11] <strcat> yes but LLVM is also a specific piece of software part of the LLVM project
[10:42:20] <Vermeille> strcat: byt type I mean signed/unsigned, sizes of ints, floats and that's it
[10:42:25] <diodesign> eddyb: what type do you suggest?
[10:42:29] <strcat> Vermeille: it doesn't have signed/unsigned
[10:42:31] <eddyb> diodesign: the original one
[10:42:38] <eddyb> diodesign: Queue<Option<proc()>>
[10:42:50] <kimundi> diodesign: Just from the code, it doesn't know if its a fn() -> (), a || -> (), proc() -> () or even something completely different. You just need to tell it what you want :)
[10:43:02] <strcat> Vermeille: it has arbitrary integer sizes (i1, i8, i16, i32, i53, i72, i235, whatever)
[10:43:19] <strcat> Vermeille: it uses two's complement arithmetic so there's no difference between signed/unsigned
[10:43:39] <strcat> you can add nsw (no-signed-wrap) and nuw (no-unsigned-wrap) markers to ask for undefined overflow instead of two's complement
[10:43:44] <Vermeille> strcat: Wow. i42 :D Okay, I have to do a little project on top of it, I think
[10:43:46] <strcat> clang asks for nsw on C signed ints by default
[10:43:51] *** Joins: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp)
[10:44:00] *** Quits: Kxepal (Miranda@moz-6DDBE711.pppoe.mtu-net.ru) (Quit: Kxepal)
[10:44:12] <diodesign> kimundi: yeah, but I'm learning the hard way what teh syntax is. I can see overall what it means, but I need to turn 'I think I know what it wants' into the character sequences to satisfy it
[10:44:18] <Vermeille> like a simple language that I compile to LLVM
[10:44:20] *** Joins: Kxepal (Miranda@moz-6DDBE711.pppoe.mtu-net.ru)
[10:44:30] <strcat> Vermeille: you have an infinite number of single assignment registers, something like a mutable variable you do via memory (a pointer)
[10:44:34] <aatch> LLVM is a compiler backend, primarily. Part of that is that it has an Intermediate Representation (IR) of the program that is lower-level than the language, but higher-level than assembly.
[10:44:42] <strcat> %1 = alloca ..., giving you a pointer to memory on the stack
[10:45:15] <strcat> Vermeille: anyway it does have first-class aggregates (but they don't insert any padding and only have meaning in terms of layout) and vectors
[10:45:26] <kimundi> diodesign: "let queue = Queue::new();" => " let queue: Queue<MyType> = Queue::new();"
[10:45:42] <aatch> The IR is designed to be easy to analyze and optimize compared to ASM.
[10:46:07] <strcat> it's also designed to abstract the difference between architectures for a *frontend* - but the code you generate isn't portable
[10:46:18] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[10:46:25] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[10:46:57] *** Parts: krdln (krdln@moz-C271714F.dynamic.chello.pl) ()
[10:46:59] <aatch> Vermeille, btw, LLVM has a tutorial where you make a simple language called Kaleidoscope(sp?).
[10:47:12] <Vermeille> aatch: yup, I was thinking about it
[10:47:20] <Vermeille> strcat: okay, I see
[10:48:11] <strcat> Vermeille: LLVM does have the ability to do JIT compilation, but what that really means is dynamic AOT compilation ;p
[10:48:31] *** Joins: ch (ch@moz-8B0DC243.hsd1.ca.comcast.net)
[10:48:42] <strcat> you build LLVM IR, it translates to machine code in-memory and uses linker magic to make it callable
[10:48:50] <strcat> it doesn't do any dynamic optimizations or anything
[10:48:55] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[10:49:05] <aatch> strcat, well, it will if you ask it to.
[10:49:10] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[10:49:22] <strcat> apple plans on using it in webkit, but it's going to be a underneath 3 other tiers of compilation
[10:49:36] <Vermeille> Oh
[10:49:36] <strcat> interpreter -> baseline JIT -> slow JIT -> LLVM
[10:49:50] <strcat> so it will only be run on code that's already optimized a lot from a high-level
[10:49:52] <strcat> and specialized
[10:49:58] <aatch> And for CSS selectors.
[10:50:13] *** Quits: ch (ch@moz-8B0DC243.hsd1.ca.comcast.net) (Ping timeout)
[10:50:13] *** Quits: derek_c (derek@B6D972EA.8B266987.AE6886F4.IP) (Ping timeout)
[10:50:15] <strcat> it's not capable of doing optimization at a high enough level to directly deal with a dynamically typed language
[10:50:25] <strcat> google tried to do that for python, and it was *barely* any faster than cpython
[10:50:26] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:50:28] <diodesign> kimundi, eddyb: all right, let me fiddle some more. thanks forthe pointers
[10:50:37] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[10:50:42] <strcat> (see: the failed unladen swallow project)
[10:50:57] <pczarn> diodesign: see the implementation of concurrent:::Queue<T>. queue.pop() returns T, so T must be inferred somewhere
[10:51:26] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Quit: huon)
[10:51:39] <Vermeille> strcat: that said I don't understand how Haskell can have such poor performances. The purity should allow the compiler to literally rewrite your code
[10:51:53] <cmr> Vermeille: it doesn't have poor performance.
[10:51:59] <cmr> ghc is the most advanced compiler in existence.
[10:52:06] <strcat> cmr: typical haskell code performs pretty poorly
[10:52:07] *** Joins: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net)
[10:52:07] *** ChanServ sets mode: +o huon
[10:52:22] <strcat> as in high-level code actually using lists, etc.
[10:52:23] <Vermeille> cmr: it does, unless you really know how to optmize Haskell
[10:52:23] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[10:52:36] <aatch> isn't most the performance issue because of all the boxing?
[10:52:38] <Vermeille> cmr: Just compare some naive Haskell and naive C++.
[10:52:39] <cmr> Vermeille: isn't that true of, like, everything?
[10:52:50] <strcat> if you write haskell with strictness annotations everywhere, explicitly unboxed data structures, etc.
[10:52:54] <cmr> well, naive c++ is going to have memory leaks and correctness problems ;p
[10:53:00] <strcat> then you can get to the java perf tier
[10:53:04] <eddyb> Vermeille: optimizing Haskell compilers are NP-hard
[10:53:05] <strcat> well, not as fast as java
[10:53:13] <Vermeille> cmr: not false... :D
[10:53:18] <aatch> cmr, fine, naive Rust vs naive Haskell
[10:53:18] <eddyb> Vermeille: goes for any sufficiently high level FP language
[10:53:26] <strcat> Vermeille: purity doesn't really let you do as much as you'd hope
[10:53:31] <cmr> Vermeille: considering what goes *into* ghc I think what comes out of it is pretty impresive.
[10:53:38] <strcat> there's still lots and lots of mutation going on under the hood
[10:53:44] <strcat> pointer aliasing issues are still there
[10:53:48] <eddyb> GHC is just as impressive as GCC :P
[10:53:58] *** Quits: EastByte_ (EastByte@moz-C164E01D.ewe-ip-backbone.de) (Ping timeout)
[10:54:00] *** Joins: EastByte_ (EastByte@moz-445B3961.ewe-ip-backbone.de)
[10:54:00] <cmr> eddyb: have you looked at its internals?
[10:54:13] <strcat> Vermeille: the purity annotations allow very high-level transforms to be done safely
[10:54:25] <huon> <3 rewrite rules
[10:54:38] <strcat> Vermeille: for example, N traversals of a list can *sometimes* be converted into a single one
[10:54:40] <strcat> via rewrite rules
[10:54:54] <strcat> AST rewriting rules run into there aren't more changes basically
[10:54:59] <diodesign> pczarn: yeah, still a bit lost
[10:55:03] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[10:55:13] <huon> (s/into/until/)
[10:55:15] <Vermeille> Haskell is just perfect for AST manipulation
[10:55:16] <strcat> so, that works very well for something like adding optimizations for a big integer type
[10:55:31] <Vermeille> I don't get how the other compilers can do that in C++.
[10:55:32] <eddyb> strcat: oh, btw, did I tell you how betrayed I felt when I realized the IO monad doesn't pack impure operations to run outside of regular haskell?
[10:55:38] <strcat> but in rust you just use an iterator for those cases
[10:55:47] *** Quits: sellout (greg@moz-F7BC9302.us-west-2.compute.amazonaws.com) (Ping timeout)
[10:55:47] <strcat> it already does a single pass
[10:55:49] <eddyb> strcat: it just works around purity like an unsafe {...} block in Rust
[10:56:11] <strcat> eddyb: purity is pretty sketchy anyway
[10:56:15] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[10:56:18] <strcat> eddyb: is using memory pure?
[10:56:20] *** Joins: newbie (kvirc@moz-E7BC7E0A.dip0.t-ipconnect.de)
[10:56:32] <strcat> what about to the point where the system is chugging along swapping and stuff starts being killed?
[10:56:32] <eddyb> strcat: you can have better purity notations in Rust than Haskell
[10:56:49] <strcat> eddyb: is an infinite loop pure?
[10:56:55] *** Quits: eibwen (kvirc@moz-7F361249.dip0.t-ipconnect.de) (Ping timeout)
[10:56:58] <strcat> especially a busy loop using 100% of a core
[10:57:01] <eddyb> I'm talking about IO that looks pure
[10:57:04] <strcat> heating up the room as the fan spins on 100%
[10:57:07] <strcat> ;p
[10:57:17] <eddyb> strcat: the RealWorld hack
[10:57:32] <huon> it's not a hack... :/
[10:57:42] <pczarn> then the fan is imprue
[10:57:48] <pczarn> *impure
[10:57:56] <eddyb> haha
[10:57:56] <aatch> impossibru!
[10:58:28] <eddyb> huon: if you have a RealWorld then you can call a pure function and it has side effects
[10:58:33] <eddyb> huon: you can't optimize based on that
[10:59:25] *** aatch is now known as aatch|home
[10:59:26] <eddyb> LLVM has better purity than Haskell IMO. we only need to expose that in a sane way through Rust's type system to get some nice optimizations around trait objects
[11:00:06] <diodesign> let queue: Queue<Option<proc()>> = Queue::new(); generates instantiating a type parameter with an incompatible type `option::Option<proc()>`, which does not fulfill `Send`
[11:00:14] <diodesign> has something happened to Send? 
[11:00:23] <eddyb> diodesign: proc():Send I think
[11:00:31] <cmr> proc:Send()
[11:00:39] <cmr> I'm pretty sure.
[11:00:55] <eddyb> rusti: let _: prod:Send(); 5
[11:00:56] -rusti- <anon>:11:25: 11:26 error: expected `;` but found `(`
[11:00:56] -rusti- <anon>:11         let _: prod:Send(); 5
[11:00:56] -rusti-                                   ^
[11:00:56] -rusti- playpen: application terminated with error code 101
[11:00:59] <eddyb> rusti: let _: proc:Send(); 5
[11:01:00] -rusti- 5
[11:01:16] <diodesign> you guys are great
[11:02:04] <diodesign> but without asking you to type out a manual, what does proc:Send() mean?
[11:02:17] <cmr> http://smallcultfollowing.com/babysteps/blog/2013/10/10/fn-types-in-rust/
[11:02:17] <eddyb> it means a proc that fulfills Send
[11:02:28] <Vermeille> Really noobish question: can you define member variables in traits? (Let's say I want to implement default implementation which would use some member variables)
[11:02:35] <eddyb> (i.e. it can be sent across tasks)
[11:02:36] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[11:02:43] <eddyb> Vermeille: fields in traits? no
[11:02:49] <eddyb> another RFC to write /o\
[11:03:17] <Vermeille> eddyb: so you'd have to write the fields in all implementors?
[11:03:44] <eddyb> you can have accessors and use those to implement the default methods
[11:04:05] <diodesign> cmr: great, thanks
[11:04:13] <pczarn> thanks, I had the same problem with Send
[11:04:20] <eddyb> (e.g. most of the methods on ImmutableVector only need as_slice() to work)
[11:04:55] *** Joins: jviereck1 (Adium@moz-69AB5E7B.dip0.t-ipconnect.de)
[11:04:55] *** Quits: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de) (Connection reset by peer)
[11:05:08] *** Quits: gwty (gwtypc@D17752E3.C4444A44.137C914F.IP) (Ping timeout)
[11:05:08] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[11:05:37] *** Quits: devbug (quassel@moz-8C40558B.bchsia.telus.net) (Connection reset by peer)
[11:06:48] <diodesign> pczarn: are you playing with rust-core too?
[11:06:54] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[11:07:04] <pczarn> diodesign: yes, trying to implement allocators
[11:09:12] *** Joins: leowoe (Leo@moz-9AE774CE.dip0.t-ipconnect.de)
[11:11:12] *** Joins: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP)
[11:11:22] *** Quits: mno2 (mno2@C9C55379.F9BA5024.DA359910.IP) (Quit: mno2)
[11:13:43] <mgax> so i ended up implementing my own worker queue
[11:14:13] <mgax> partly because i needed my workers to keep resources from one task to the next
[11:14:29] <mgax> https://github.com/mgax/rustiles/blob/master/src/work.rs
[11:15:29] <mgax> also because i always wanted to implement a worker queue myself :)
[11:15:52] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[11:16:13] <mgax> do you guys think this is useful as a library? or in the stdlib?
[11:17:12] <cmr> With documentation and benchmarks, it might be!
[11:18:31] <mgax> ok. what might the benchmarks measure?
[11:18:59] <cmr> (also spawn_test_worker should be #[cfg(test)]
[11:19:05] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[11:19:30] <mgax> ah ok was wondering about that :)
[11:19:47] *** Quits: jviereck1 (Adium@moz-69AB5E7B.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:20:26] *** Joins: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de)
[11:20:34] <cmr> mgax: benchmarks of time it takes to do X work, perhaps?
[11:20:39] <cmr> not entirely sure
[11:21:31] <mgax> cmr, like how quickly it can execute empty tasks, to measure its overhead?
[11:21:37] <cmr> that'd be a good one!
[11:22:07] <cmr> Any new feature should come with some way to measure its performance, I think.
[11:24:24] <mgax> i remember something about benchmarks in unit tests, maybe it was in the tutorial, but i can't find it any more
[11:24:36] <cmr> http://static.rust-lang.org/doc/master/guide-testing.html#microbenchmarking
[11:25:08] <mgax> that one :)
[11:27:35] *** Quits: tgkokk (user@moz-88CCC929.home.otenet.gr) (Ping timeout)
[11:28:02] *** Quits: twi (Adium@moz-429185BE.cust.vodafonedsl.it) (No route to host)
[11:28:17] *** Joins: twi (Adium@moz-429185BE.cust.vodafonedsl.it)
[11:33:13] *** Joins: matematikaadit (adit@637FECDA.475B8306.E99CBB2C.IP)
[11:33:23] *** Quits: matematikaadit (adit@637FECDA.475B8306.E99CBB2C.IP) (Client exited)
[11:33:41] *** Quits: robn (robn@moz-76B0302C.static.internode.on.net) (Ping timeout)
[11:34:38] *** Joins: robn (robn@moz-76B0302C.static.internode.on.net)
[11:34:50] <mgax> i added a couple of benchmarks
[11:34:54] <mgax> for creating workers
[11:35:03] <mgax> and for dispatching trivial tasks
[11:35:05] <mgax> test work::bench_1000_tasks_4_threads ... bench:  23350538 ns/iter (+/- 5522607)
[11:35:07] <mgax> test work::bench_100_workers          ... bench:  21425498 ns/iter (+/- 989063)
[11:35:20] <cmr> you're using -O right?
[11:35:26] <mgax> umm, no
[11:35:31] <cmr> you should do that always
[11:35:37] <cmr> or you will be very unhappy
[11:36:15] <TeXitoi> cmr: https://github.com/mozilla/rust/pull/13206 and sorry for the failure
[11:36:49] <mgax> the results with -O are not much different
[11:36:51] <mgax> test work::bench_1000_tasks_4_threads ... bench:  21163084 ns/iter (+/- 3924491)
[11:36:52] <mgax> test work::bench_100_workers          ... bench:  20704222 ns/iter (+/- 1225075)
[11:37:26] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[11:37:44] *** Quits: twi (Adium@moz-429185BE.cust.vodafonedsl.it) (Quit: Leaving.)
[11:38:30] <cmr> are you kidding? it's 2.18ms faster :p
[11:38:39] <mgax> :)
[11:38:55] *** Joins: twi (Adium@moz-429185BE.cust.vodafonedsl.it)
[11:39:10] *** Quits: nekit1234007 (Nekit12340@1A3BF3D7.477D93D.4707F662.IP) (Ping timeout)
[11:39:11] <huon> (libstd is optimised by default, and most of the time will be spent there or in the kernel for spawning a lot of things)
[11:39:37] <cmr> mgax: the work being done in each iteration might be too much.
[11:39:48] <cmr> mgax: perhaps a macro-benchmark might be more suitable.
[11:39:56] <cmr> not really sure how to best accomplish that :(
[11:40:24] <mgax> cmr, i could just decrease the numbers, the benchmark should still be relevant
[11:40:34] <cmr> worth trying
[11:40:49] <cmr> the usual speed to shoot for is less than 1ms per iteration
[11:43:30] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Input/output error)
[11:44:55] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[11:49:53] <mgax> i scaled down the benchmark and it still looks stable, what do you think?
[11:49:55] <mgax> test work::bench_50_tasks_4_threads ... bench:   1157307 ns/iter (+/- 224993)
[11:49:57] <mgax> test work::bench_spawn_5_workers    ... bench:    603600 ns/iter (+/- 51001)
[11:51:10] <cmr> that's more managable, yes.
[11:51:21] <cmr> though the first one is still on the long side.
[11:51:21] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:51:28] <cmr> but definitely usable.
[11:52:27] <mgax> ok, so what now? add documentation and make a pull reuqest? :)
[11:52:38] <cmr> yup
[11:52:47] <mgax> what should it be called?
[11:52:52] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[11:53:02] <cmr> WorkQueue might be a good enough name...
[11:53:03] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[11:53:21] <cmr> I don't know where it would go
[11:53:24] <cmr> maybe libsync
[11:53:27] <cmr> possibly its own crate.
[11:54:35] *** Joins: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com)
[11:54:43] *** Joins: kris (kris@moz-A8BE9F4D.dk.customer.tdc.net)
[11:54:45] <mgax> hmm. i'll add it to libsync at first, sounds easier
[11:54:53] *** Joins: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net)
[11:55:44] <bvssvni> what does rustc --target TRIPLE ?
[11:56:18] <cmr> bvssvni: cross-compile for a different target.
[11:56:35] <bvssvni> cmr: does it generate one executable or 3?
[11:56:42] <cmr> one.
[11:56:48] <cmr> target triple is a way of describing a target
[11:57:05] <cmr> it's called  "triple" because it includes architecture, operating system, and platform.
[11:57:14] <bvssvni> ah
[11:57:14] <cmr> it's somewhat strange
[11:57:15] *** Quits: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:57:34] <cmr> http://www.gnu.org/savannah-checkouts/gnu/autoconf/manual/autoconf-2.69/html_node/Specifying-Target-Triplets.html#Specifying%20Names
[11:57:59] *** Joins: nekit1234007 (Nekit12340@1A3BF3D7.477D93D.4707F662.IP)
[11:58:00] <cmr> it's also poorly documented and sometimes inconsistent between compilers.
[11:58:06] <cmr> it's crappy gcc legacy
[11:58:08] *** Quits: oxum (anonymous@67DB2C38.BBE46712.520CDC98.IP) (Quit: Bye..)
[11:58:23] <bvssvni> is it possible to get a list of triples that rustc supports?
[11:58:28] <cmr> nope.
[11:58:30] *** Joins: oxum (anonymous@67DB2C38.BBE46712.520CDC98.IP)
[11:58:35] <cmr> it supports everything LLVM does.
[11:59:03] <cmr> http://llvm.org/docs/doxygen/html/classllvm_1_1Triple.html
[11:59:47] <cmr> so in theory you can get a #[no_std] binary for everything llvm supports
[12:00:06] *** Joins: workbean (tunnel@4854BD0.B14CD10C.9510F13D.IP)
[12:00:17] <cmr> rustc will only compile libraries when you pass multiple triples to `./configure --target=stuff`
[12:00:22] *** Joins: gwty (gwtypc@A283307D.72A15502.D66E6624.IP)
[12:00:53] *** Quits: kris (kris@moz-A8BE9F4D.dk.customer.tdc.net) (Ping timeout)
[12:01:04] <cmr> it seems to extract the supported targets from mk/platform.mk
[12:01:11] <bvssvni> is it possible to get the default target from rustc?
[12:01:14] <cmr> rustc --version
[12:01:19] <cmr> listed as "host"
[12:01:26] <bvssvni> cmr: thanks
[12:02:02] <bvssvni> cmr: I am trying make rust-empty converge towards the conventions of Cargo
[12:02:35] <cmr> ah, cool.
[12:02:39] <TeXitoi> I'd like to port rust to OpenBSD/amd64, but I'm a little bit lost, any pointer to study to begin that?
[12:03:13] <cmr> TeXitoi: porting Rust is a long process, you must first climb a 10km mountain and contemplate the universe.
[12:03:39] <Ms2ger> Well, it's BSD, that's what TeXitoi does every day, surely :)
[12:03:50] <cmr> TeXitoi: you'll need to add support for the uname strings to the configure script
[12:04:12] <cmr> TeXitoi: as well as a target_os setting for openbsd in librustc/driver/driver.rs
[12:04:25] <cmr> line 82, default_config
[12:04:40] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[12:04:40] <cmr> TeXitoi: you'll also need to add proper handling in librustc/back/link.rs
[12:05:01] *** Joins: tom (Mibbit@moz-D20746AD.dhcp.roch.mn.charter.com)
[12:05:21] <cmr> TeXitoi: beyond that, grep for freebsd (case-insensitive) in the source code and add handling for OpenBSD :)
[12:05:33] <cmr> TeXitoi: oh you'll also need to update all the constants in libstd/libc.rs for its libc.
[12:05:36] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[12:05:50] <cmr> that's going to be a blast.
[12:05:51] <Ms2ger> And then write everything down for when NetBSD and DragonFly come along
[12:06:17] <cmr> TeXitoi: hopefully that can at least get you started... it's a fair bit of work.
[12:06:30] <TeXitoi> Ms2ger: no, only OpenBSD is great :P
[12:06:37] <cmr> I don't think rust has been ported to a new platform in a very long time
[12:06:42] <TeXitoi> cmr: thanks, I'll look at that
[12:07:26] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[12:08:09] <tom> question, is there a roadmap for version 1anywhere?
[12:08:10] *** Quits: darkf (darkf@moz-F9058B8A.net) (Ping timeout)
[12:08:23] *** Joins: darkf (darkf@moz-F9058B8A.net)
[12:08:24] <cmr> tom: see the link in the topic
[12:08:57] <tom> which one?
[12:09:09] <Ms2ger> "1.0 issues: bit.ly/1dM8ii2"?
[12:09:34] <tom> ah, three it is. wasn't highlighted, thanks
[12:10:46] *** Quits: tom (Mibbit@moz-D20746AD.dhcp.roch.mn.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[12:12:29] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[12:12:58] *** Joins: paraze (paraze@moz-9E32EAAD.w90-27.abo.wanadoo.fr)
[12:16:07] *** Quits: leowoe (Leo@moz-9AE774CE.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:17:12] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[12:17:21] *** Joins: m4rw3r (Mibbit@moz-254BF79A.a212.priv.bahnhof.se)
[12:17:54] *** Joins: LU324 (asdf@moz-864C7465.dyn.embarqhsd.net)
[12:18:12] <TeXitoi> cmr: The goal should be to create a snapshot using cross compile with ./configure --host and --target?
[12:18:51] *** Quits: jadbaires (jadrian@moz-EA7AD167.dsl.telepac.pt) (Quit: Konversation terminated!)
[12:18:58] *** Joins: jadbaires (jadrian@789756EE.68CD5565.6119BA41.IP)
[12:19:00] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[12:19:03] <cmr> TeXitoi: yup.
[12:19:20] <pczarn> I can't solve this. Vec::with_alloc(&mut Heap) /// error: borrowed value does not live long enough
[12:19:26] <pczarn> here https://github.com/pczarn/rust-core/blob/borrowalloc-err/core/vec.rs#L45
[12:20:01] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Ping timeout)
[12:20:08] <cmr> pczarn: `pub fn new<'b>() -> Vec<'b, T> { ... }`
[12:20:19] <cmr> and then `&'static Heap`
[12:20:40] <cmr> pczarn: alternatively, store the allocator by value and not a reference to it
[12:21:11] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[12:21:12] <eddyb> arenas usually take &self and not &mut self for allocation
[12:21:50] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[12:21:50] <newbie> how does that work?
[12:21:54] *** Quits: lurk_ (chatzilla@moz-F088D030.hsd1.in.comcast.net) (Quit: ChatZilla 0.9.90.1-rdmsoft [XULRunner 22.0/20130619132145])
[12:22:59] <pczarn> so I can't take &'static mut Heap?
[12:23:19] *** newbie is now known as eibwen
[12:23:35] <cmr> eibwen: I just realized eibwen is newbie backwards
[12:23:40] <cmr> I feel slightly stupid now
[12:23:51] *** Quits: rootnode (rootnode@moz-F8C353DD.pools.arcor-ip.net) (Connection reset by peer)
[12:23:54] <ion> Whoa! I just realized cmr is rmc backwards.
[12:24:01] <cmr> noi!
[12:24:06] <eibwen> :)
[12:24:09] <cmr> rmc doesn't spell a word though :p
[12:24:15] <pczarn> note: reference must be valid for the lifetime &'b  as defined on the block at 44:35......but borrowed value is only valid for the block at 44:35
[12:24:24] *** Quits: darkf (darkf@moz-F9058B8A.net) (Ping timeout)
[12:24:27] <cmr> pczarn: is that with `&'static Heap`?
[12:24:29] *** Quits: luisbg (luisbg@moz-C54443AD.baconseed.org) (Ping timeout)
[12:24:59] <pczarn> cmr: yes, another error: cannot borrow immutable dereference of `&`-pointer as mutable
[12:25:36] *** Joins: rootnode (rootnode@moz-E8150453.pools.arcor-ip.net)
[12:26:22] <pczarn> I don't think I could store an allocator by value or immutable reference
[12:26:56] <cmr> sorry, I meant `&'static mut Heap`
[12:27:32] <pczarn> still 'borrowed value does not live long enough'
[12:27:37] <cmr> weir
[12:27:38] <cmr> d
[12:27:56] *** Joins: darkf (darkf@moz-F9058B8A.net)
[12:28:12] <pczarn> still 'borrowed value does not live long enough'
[12:29:38] *** Quits: Manishearth (manisheart@moz-F9058B8A.net) (Ping timeout)
[12:30:49] *** Joins: luisbg (luisbg@moz-C54443AD.baconseed.org)
[12:32:23] *** Joins: gamakichi (Mibbit@7CBD3C96.B309006C.11F528CC.IP)
[12:32:31] <pczarn> cmr: perhaps I need CovariantLifetime
[12:33:15] *** Joins: Manishearth (manisheart@moz-F9058B8A.net)
[12:33:36] *** Joins: alonlevy (alon@moz-62D88632.forward.012.net.il)
[12:34:48] *** Quits: gamakichi (Mibbit@7CBD3C96.B309006C.11F528CC.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:34:48] *** Quits: mgottschlag (quassel@moz-AEA0F6B0.hsi6.kabel-badenwuerttemberg.de) (Ping timeout)
[12:36:01] *** Quits: Manishearth (manisheart@moz-F9058B8A.net) (Ping timeout)
[12:37:39] *** Quits: rcxdude (rcxdude@moz-C1B0669A.range109-145.btcentralplus.com) (Ping timeout)
[12:39:31] *** Joins: rcxdude (rcxdude@moz-600BFD57.range86-179.btcentralplus.com)
[12:40:05] *** Quits: heftig (heftig@moz-D67BBF7.dip0.t-ipconnect.de) (Quit: Quitting)
[12:40:19] *** Joins: Manishearth (manisheart@moz-F9058B8A.net)
[12:41:34] *** Quits: darkf (darkf@moz-F9058B8A.net) (Ping timeout)
[12:42:22] *** Quits: Manishearth (manisheart@moz-F9058B8A.net) (Ping timeout)
[12:42:51] *** Quits: alonlevy (alon@moz-62D88632.forward.012.net.il) (Ping timeout)
[12:43:37] *** Joins: heftig (heftig@moz-D67BBF7.dip0.t-ipconnect.de)
[12:43:44] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[12:46:06] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[12:46:14] *** Quits: andor (andor@moz-708868D.neferty.me) (Ping timeout)
[12:48:46] *** Quits: kvanb (kvanb@moz-797C6BA.lnse5.lon.bigpond.net.au) (Quit: kvanb)
[12:48:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[12:50:20] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[12:50:55] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[12:52:22] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:54:04] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[12:56:02] *** Quits: gwty (gwtypc@A283307D.72A15502.D66E6624.IP) (Ping timeout)
[12:57:51] *** Joins: alonlevy (alon@moz-62D88632.forward.012.net.il)
[12:58:03] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[13:04:33] *** Quits: heftig (heftig@moz-D67BBF7.dip0.t-ipconnect.de) (Quit: Quitting)
[13:05:14] *** Joins: askalski (akuda@moz-7C9F1DC5.neoplus.adsl.tpnet.pl)
[13:06:24] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[13:07:09] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[13:08:10] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Ping timeout)
[13:08:10] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[13:08:53] <eibwen> cmr: thanks for this week's This Week in Rust. it's always very helpful for updating one's code. :)
[13:09:22] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[13:09:33] *** Quits: StarLight (StarLight@moz-CD42802C.dynamic.avangarddsl.ru) (Ping timeout)
[13:09:45] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[13:12:00] *** Quits: askalski (akuda@moz-7C9F1DC5.neoplus.adsl.tpnet.pl) (Quit: Wychodzi)
[13:13:13] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[13:13:45] *** Joins: StarLight (StarLight@moz-55D2F094.dynamic.avangarddsl.ru)
[13:15:40] *** Joins: aurynj (Eon@583ABBE5.60FA2E28.B9E25744.IP)
[13:18:52] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[13:20:22] *** Joins: bollu (bollu@31CCE710.7065DDB9.6D6A344F.IP)
[13:20:34] <bollu> is the a way to write a macro to "unroll" matrix multiplication?
[13:21:00] <bollu> using 3 nested for loops seems way too excessive but it's tedious to do by hand. 
[13:26:12] *** Joins: sw17ch (sw17ch@moz-4AF0345C.hfc.comcastbusiness.net)
[13:26:54] <kimundi> bollu: You can generate arbitrary code with macros
[13:28:04] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[13:30:02] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[13:30:54] <bollu> one more: how come Mul<A, B> and Mul<C, D> are considered conflicting implementations?
[13:31:03] <bollu> for the same class*
[13:31:07] <eddyb> bollu: they are both Mul
[13:31:12] <eddyb> our current coherence doesn't care
[13:31:20] <bollu> eddyb: ah. well that sucks :/ 
[13:31:37] <bollu> eddyb: this is going to change right?
[13:31:50] <eddyb> at some point
[13:31:59] *** Quits: alonlevy (alon@moz-62D88632.forward.012.net.il) (Ping timeout)
[13:34:33] <pczarn> can I borrow different members of self as mutable more than once at a time?
[13:34:54] <cmr> pczarn: you need to destructure self.
[13:35:09] <kimundi> pczarn: If the fileds you try to borrow do not overlap, and you create the borrows at the same time, yes
[13:35:19] <cmr> let SelfStructType { ref mut a, ref mut b, .. } = *self;
[13:36:03] <kimundi> rusti: let mut t = (0, 0); {let (ref a, ref b) = t; a += 10; b += 100; } t
[13:36:09] -rusti- pastebinned 14 lines of output: http://ix.io/blz
[13:36:29] <kimundi> rusti: let mut t = (0u, 0u); {let (ref a, ref b) = t; *a += 10; *b += 100; } t
[13:36:32] -rusti- pastebinned 8 lines of output: http://ix.io/blA
[13:36:35] <kimundi> rusti: let mut t = (0u, 0u); {let (ref a, ref b) = t; *a += 10; *b += 100; }; t
[13:36:38] -rusti- pastebinned 8 lines of output: http://ix.io/blB
[13:36:40] *** Quits: tmh (e@6F8495BB.FEF84806.AA32EE5B.IP) (Ping timeout)
[13:36:48] <kimundi> urg
[13:36:55] <kimundi> rusti: let mut t = (0u, 0u); {let (ref mut a, ref mut b) = t; *a += 10; *b += 100; }; t
[13:36:55] <bvssvni> ref mut
[13:36:56] -rusti- (10, 100)
[13:37:01] <pczarn> another method borrows *self
[13:37:46] <kimundi> pczarn: If self is already borrowed by something different, then you can't do anything with it.
[13:38:07] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[13:39:03] *** Quits: lpy (lpy@E44EE2C4.F09091A8.1348A864.IP) (Client exited)
[13:39:05] <pczarn> first borrow is here https://github.com/pczarn/rust-core/blob/borrowalloc/core/hash.rs#L408
[13:39:10] *** Joins: heftig (heftig@moz-D67BBF7.dip0.t-ipconnect.de)
[13:41:09] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[13:41:24] *** Joins: tmh (e@6F8495BB.FEF84806.AA32EE5B.IP)
[13:41:24] *** Joins: edwardw (edwardw@FE274C20.C036752E.F5B522C5.IP)
[13:43:56] <bollu> is there a way to get a T rather that an &T from a Vec? (doesn't look like there is)
[13:44:12] <cmr> bollu: dereference the &T?
[13:44:43] <bollu> cmr: :) 
[13:44:50] <bollu> cmr: *'s everywhere
[13:45:13] <kimundi> bollu: if its Copy, dereference the &T, if not you need to remove it from the Vec with pop() or remove()
[13:45:17] <cmr> yeah, well, that's the reality of a language with pointers :p
[13:45:38] <bollu> ah well, *
[13:45:40] <bollu> it is
[13:45:52] <bollu> ty guys
[13:47:24] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[13:52:52] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[13:53:44] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:53:50] *** Joins: Sorella (queen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[13:54:34] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[13:56:45] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[14:01:18] *** jorendorff_away is now known as jorendorff
[14:01:25] *** Quits: nekit1234007 (Nekit12340@1A3BF3D7.477D93D.4707F662.IP) (Ping timeout)
[14:02:28] *** Joins: fazal (fazal@481796DA.DD69F2BB.E8916D75.IP)
[14:03:28] *** Joins: tgkokk (user@moz-88CCC929.home.otenet.gr)
[14:04:36] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[14:04:43] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[14:06:37] *** Quits: m4rw3r (Mibbit@moz-254BF79A.a212.priv.bahnhof.se) (Quit: http://www.mibbit.com ajax IRC Client)
[14:06:44] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[14:07:29] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[14:08:16] <bvssvni> Rust-Empty now uses target compilation like Cargo https://github.com/bvssvni/rust-empty
[14:08:17] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[14:09:16] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[14:09:35] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[14:10:01] <bollu> doomlord_: ping
[14:10:16] <Tobba> I wonder
[14:10:25] *** Joins: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de)
[14:10:26] <Tobba> if I could get servo to run in a browser through emscripten...
[14:11:01] <cmr> not without some porting effort.
[14:11:42] <Tobba> of course
[14:11:52] <Tobba> I wonder if wxRust still works
[14:12:01] *** Quits: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[14:12:12] <cmr> it's very well maintained.
[14:12:28] <Tobba> well then I actually think this is going to be a good experience for once
[14:12:43] <Tobba> making my client work with emscripten is gonna be a certified nightmare but thats for later
[14:12:48] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[14:12:57] *** Joins: napoleon (Mibbit@moz-7AD9232F.rev.numericable.fr)
[14:14:03] *** Quits: tgkokk (user@moz-88CCC929.home.otenet.gr) (Client exited)
[14:14:45] <bollu> bvssvni: is it possible for a modelview matrix to become non-invertible?
[14:14:57] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[14:15:08] <bvssvni> bollu: hmm
[14:15:22] <bollu> bvssvni: other than the trivial case (null matrix)
[14:15:40] <bvssvni> bollu: if it is flat
[14:15:49] <Tobba> awwww
[14:15:54] <Tobba> you cant use | when pattern matching tuples
[14:16:02] <cmr> no, | is only in match arms.
[14:16:11] <cmr> it's not part of a pattern.
[14:16:17] <cmr> it separates patterns
[14:16:32] <Tobba> it would be pretty nice if it worked in patterns though
[14:16:41] <Tobba> oh well its not a big deal in this case
[14:16:56] *** bollu is now known as bollu|away
[14:18:00] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[14:18:39] *** Joins: alonlevy (alon@moz-B6210BD6.red.bezeqint.net)
[14:19:52] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[14:20:21] *** Joins: nekit1234007 (Nekit12340@1A3BF3D7.477D93D.4707F662.IP)
[14:21:34] <bvssvni> what are some common lldb commands?
[14:21:54] <cmr> http://lldb.llvm.org/lldb-gdb.html
[14:22:10] <bvssvni> cmr: thanks again
[14:25:08] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:25:38] <bvssvni> oh cool! http://www.reddit.com/r/rust/comments/21qogc/im_making_a_note_here_huge_embedded_success/
[14:26:02] <ion> nice
[14:28:43] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[14:28:59] *** Joins: ch (ch@moz-8B0DC243.hsd1.ca.comcast.net)
[14:29:13] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[14:32:09] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[14:32:31] *** Joins: ganitsu (ganitsu@moz-CB91E096.dialup.adsl.anteldata.net.uy)
[14:33:13] <doomlord_> bollu , hi
[14:35:00] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[14:36:25] *** Joins: gwty (gwtypc@A283307D.72A15502.D66E6624.IP)
[14:38:33] <Tobba> oh boy
[14:38:42] <Tobba> wxRust doesnt seem to have been intended to run on windows in any shape or form
[14:39:26] *** jorendorff is now known as jorendorff_away
[14:39:36] <Tobba> it also uses cmake which is a bad sign in itself
[14:39:42] <doomlord_> i guess a lot of people in the rust community are mostly linux. i haven't used windows much in a year
[14:40:19] <Tobba> I would be if it had decent graphics drivers
[14:40:47] *** jorendorff_away is now known as jorendorff
[14:40:52] <Tobba> I need this application to work on windows anyways so it doesnt really matter what platform I'm on
[14:42:04] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[14:43:48] <Tobba> AND its the only rust UI library
[14:43:54] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[14:43:57] <Tobba> that went downhill fast
[14:44:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:44:53] <TeXitoi> Tobba: why using cmake is a bad sign? cmake works well on windows
[14:45:07] <Tobba> it works like ass and is usually really painful to use
[14:45:13] <Tobba> but yeah at least it works on windows
[14:45:28] <Tobba> I have never had something that uses cmake build out of the box
[14:46:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[14:46:28] *** Joins: andor (andor@moz-708868D.neferty.me)
[14:46:30] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[14:46:41] *** Quits: gwty (gwtypc@A283307D.72A15502.D66E6624.IP) (Connection reset by peer)
[14:49:06] <Tobba> well, in theory it shouldent be too bad to port at least
[14:49:19] <Tobba> if I can get wxWidgets to build on a compiler a few years newer than it supports
[14:51:13] *** Joins: flabbergaster (Mibbit@moz-CE602945.skybroadband.com)
[14:51:23] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[14:52:49] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Client exited)
[14:53:32] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[14:54:45] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[14:54:45] *** ChanServ sets mode: +o jdm
[14:55:08] <Tobba> in this instance, I need to completely hacksaw their cmake file together to make it run at all
[14:55:19] <Tobba> due to its hilariously arbitary requirements, which arent even in the cmakelist and I cant locate them anywhere
[14:55:39] *** Quits: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp) (Client exited)
[14:55:45] *** Quits: ch (ch@moz-8B0DC243.hsd1.ca.comcast.net) (Quit: )
[14:56:13] <Soft> aijai
[14:56:17] <Soft> oh sorry
[14:56:19] <Soft> wrong channel
[14:56:36] *** Quits: flabbergaster (Mibbit@moz-CE602945.skybroadband.com) (Quit: http://www.mibbit.com ajax IRC Client)
[14:58:09] *** Joins: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp)
[14:58:30] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[14:58:41] *** Quits: nekit1234007 (Nekit12340@1A3BF3D7.477D93D.4707F662.IP) (Ping timeout)
[14:58:54] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[14:59:11] *** Quits: japaric_ (japaric@CFC3E8D5.E67A32BD.5C7588CA.IP) (Ping timeout)
[14:59:50] *** Quits: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp) (Ping timeout)
[15:00:18] *** Joins: japaric_ (japaric@F25E6A94.64CFB2BA.F29ED47E.IP)
[15:00:56] <SiegeLord> Do you need to implement drop for a struct that contains something that does?
[15:01:16] <SiegeLord> Does it get a default implementation of some sort?
[15:02:03] <Tobba> hmm
[15:02:04] <kimundi> SiegeLord: neither
[15:02:08] <Tobba> yeah wxRust is completely unusable on windows
[15:02:09] <Tobba> god bless cmake
[15:02:22] <Tobba> I'll have to bind the godawful controls windows provides
[15:02:25] <kimundi> SiegeLord: It just becomes a moving type
[15:02:49] <SiegeLord> So what happens at the end of the scope? The struct gets destructured first?
[15:02:49] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[15:02:53] *** Joins: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp)
[15:03:08] *** Joins: mno2 (mno2@C9C55379.F9BA5024.DA359910.IP)
[15:04:00] <kimundi> the struct gets dropped, which leads the its fields being dropped
[15:04:10] <kimundi> It does not need to implement drop for that to happen
[15:06:26] <Tobba> uhhhh
[15:06:33] <Tobba> does anyone know how the wizardry behind FIND_PACKAGE works
[15:06:57] <Tobba> iirc requires you to sacrifice your firstborn child to satan to work on windows at all
[15:07:02] *** Quits: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp) (Client exited)
[15:07:54] <SiegeLord> It uses a FindFoo module
[15:07:57] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[15:08:04] <SiegeLord> And what it does inside there, is up to the module
[15:08:14] <SiegeLord> Generally they just search a few set paths
[15:08:28] <Tobba> yeah its something like that
[15:08:32] <Tobba> remind me why they call this thing cross platform
[15:08:50] <Tobba> it has vc++ support but it barely actually works so ughhhh
[15:09:11] <Tobba> wxWidgets also supplies no FindWxWidgets module so this is gonna be fun
[15:09:44] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[15:10:59] <Tobba> apparently, comes with cmake, and its a 1000 line file
[15:11:46] <Tobba> I'm meant to be able to tell it exactly where to look but as expected that doesnt seem to actually work
[15:12:06] <SiegeLord> You can always set the paths manually
[15:12:31] <SiegeLord> Since you're unlikely to be sending patches to the FindFoo module back to CMake, right? :P
[15:12:33] <Tobba> apparently
[15:12:43] <Tobba> wxWidgets moved their includes from include/wx.h to include/wx/wx.h
[15:12:45] <Tobba> this breaks everything
[15:13:08] <SiegeLord> Although, you could patch it and give it to the wxRust person
[15:13:24] <SiegeLord> It's common for CMake projects to bundle their own, 'fixed', FindFoo modules
[15:13:26] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[15:13:29] <Tobba> every cmake project I patch up to actually work usually involves just getting the build to run by tearing things out
[15:13:32] <Tobba> and then fixing the fallout manually
[15:13:44] <Tobba> see: what you have to do for LLVM, although the cmake file at least works out of the box
[15:13:48] <Tobba> (the generated VC++ projects dont)
[15:14:26] <SiegeLord> I'm not sure generating IDE project files is a good idea... but meh...
[15:14:33] <SiegeLord> Does any build system do a good job at those?
[15:14:42] <Tobba> I think premake works decently
[15:14:50] <Tobba> the llvm cmake projects screw up a bunch of paths completely
[15:15:01] <Tobba> and you have to go through and fix them all manually
[15:16:16] <Tobba> .. actually.. hold on
[15:16:33] <Tobba> this cmake file for findwxWidgets.cmake SHOULD work, theres nothing wrong with the path, I read that wrong
[15:16:46] <Tobba> it should work but fails for no explicable reason woo
[15:16:49] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[15:17:25] *** Joins: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net)
[15:17:36] *** Joins: nekit1234007 (Nekit12340@1A3BF3D7.477D93D.4707F662.IP)
[15:19:31] <Tobba> I also enabled debug messages which seems to also not actually work
[15:20:15] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[15:22:39] <fazal> is it possible to convert ~str to &'static str
[15:22:47] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[15:23:11] <kimundi> fazal: no
[15:23:28] *** Joins: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com)
[15:23:49] <fazal> Is there a link to read up on rust's type system
[15:24:16] <kimundi> Apart from the official docs?
[15:24:55] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[15:25:17] <fazal> kimundi: I'm kind of lost, for some reason if find it hard to follow the docs.
[15:25:36] <fazal> kimundi: is it the master or 0.9, what's the difference?
[15:26:37] <kimundi> fazal: master is the current tip of development. The point releases are just there to have something to post to hacker news every 3 months, and should ideally not be used if possible.
[15:27:37] <kimundi> So, read the master docs, especially the tutorial and guides (Though the docs in general are not really coherent at this point, so feel free to just ask questions here.)
[15:28:37] <kimundi> Re actual question: A ~str is a heap allocated string. The heap inherently means created at runtime, while a &'static implies its a compiletime constant allocated string.
[15:29:22] <fazal> kimundi: By guides you mean this one right? http://static.rust-lang.org/doc/master/index.html
[15:29:26] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[15:29:49] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[15:30:06] <kimundi> Yeah, the Guides section.
[15:30:08] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:30:20] <kimundi> And the tutorial/manual above it
[15:30:34] <fazal> kimundi: Oh so I could allocate the &'static to heap with ~str? right?
[15:30:47] <Tobba> apparently the wxWidgets debug output has no effect on making DBG_MSG actually print anything
[15:30:49] <kimundi> If something is confusing, or seems incoherent, just ask, chances are the docs are just old. :)
[15:31:06] <kimundi> fazal: yep
[15:31:24] <fazal> kimundi: Thanks a lot :)
[15:31:33] <kimundi> rusti: let s: &'static str = "foo"; let s2: ~str = s.to_owned(); s2
[15:31:34] -rusti- foo
[15:32:30] <kimundi> And both &'static str and ~str can be borrowed to a &'a str if the lifetime 'a is small enough.
[15:32:45] <kimundi> But that part is explained in general in the references and lifetimes guide
[15:33:19] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[15:33:59] <fazal> kimundi: Alright! I'll have a go and ask more
[15:35:29] <Tobba> APPARENTLY
[15:35:41] <Tobba> it seems that it goes wxWidgets REQUIRED all
[15:35:52] <Tobba> and that literally makes the script look for a library named "all"
[15:36:08] <SiegeLord> Hah!
[15:36:23] <SiegeLord> How did that ever work
[15:36:25] <Tobba> whoever did this was an asshole
[15:37:12] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[15:38:38] <Tobba> maybe the newer versions of cmake support that
[15:40:01] *** jorendorff is now known as jorendorff_away
[15:41:44] <Tobba> I tried to use the cmake installer instead
[15:41:52] <pczarn> my Rust OS runs a 'hello world' application written in Rust, total 16KB
[15:42:03] <Tobba> it installed itself in a directory where not even I can modify it, fuck
[15:42:07] <Tobba> heh
[15:42:10] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[15:42:11] <Tobba> I should get back on mine
[15:42:35] *** Joins: j3rky (gmpreussne@moz-97180B8B.nc.res.rr.com)
[15:43:33] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[15:43:54] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[15:44:17] <whitequark> pczarn: so it can already load ELF?
[15:44:35] <pczarn> it can load statically linked ELF
[15:44:52] <pczarn> whitequark: now only ELF32
[15:44:57] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[15:45:26] <pczarn> weird. static linking with uClibc produces 3KB binary, with glibc 700KB
[15:45:37] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[15:45:50] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[15:45:58] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[15:47:40] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[15:48:12] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[15:48:48] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[15:49:11] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[15:49:31] *** Quits: untitaker (untitaker@moz-39172873.adsl.highway.telekom.at) (Ping timeout)
[15:49:52] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[15:50:19] *** Joins: papanikge (papanikge@moz-5DE35D0F.access.hol.gr)
[15:50:20] *** jorendorff_away is now known as jorendorff
[15:51:11] <Tobba> ELF relocation is one hell of a nightmare
[15:51:21] <Tobba> I think I've got that figured out now though
[15:51:30] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[15:51:34] <Tobba> although I do kinda want to switch to mach-o since thats significantly less horrible
[15:52:21] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[15:53:21] *** Quits: mno2 (mno2@C9C55379.F9BA5024.DA359910.IP) (Quit: mno2)
[15:54:34] <pczarn> I don't have anything to relocate, first I need to load a filesystem
[15:55:16] *** Quits: rmt (rmt@moz-4CB6ED0D.superkabel.de) (Quit: Leaving)
[15:55:26] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[15:55:42] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[15:56:26] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[15:57:34] *** Joins: jxv_ (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[15:57:36] *** Joins: untitaker (untitaker@moz-F313C13.adsl.highway.telekom.at)
[15:57:38] *** jorendorff is now known as jorendorff_away
[15:57:40] *** Quits: jxv_ (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Connection reset by peer)
[15:58:12] *** Joins: nano (nano@moz-ED77243C.superkabel.de)
[15:59:43] *** Quits: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de) (Quit: Leaving.)
[16:00:13] *** Joins: eddyb (eddy@F8B50789.F33C1089.FB866788.IP)
[16:00:36] *** Joins: sellout (greg@moz-F7BC9302.us-west-2.compute.amazonaws.com)
[16:04:14] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:04:35] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[16:04:58] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[16:06:03] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[16:07:42] *** Joins: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp)
[16:09:06] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[16:09:23] *** Quits: fyolnish (fyolnish@moz-4C1A70BA.uqwimax.jp) (Ping timeout)
[16:10:49] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[16:10:52] <Tobba> hm
[16:11:01] <Tobba> yeah I dont think this cmake file for wxwidgets was ever tested on windows at all
[16:11:12] <Tobba> the windows build files builds stuff with completely different file names than this expects
[16:13:48] *** Joins: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr)
[16:14:21] <SiegeLord> "Rust is ready to roll." ehehe
[16:14:31] <SiegeLord> Should be "Rust is read to oxidize."
[16:14:36] <SiegeLord> *ready
[16:15:05] <Tobba> I give up
[16:15:16] <Tobba> I couldent even get cmake to *detect* wxWidgets
[16:15:22] <Tobba> let alone will I be able to get past the wxRust part
[16:15:58] <Tobba> that was a huge waste of time
[16:16:59] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:17:04] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[16:17:06] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:17:20] <SiegeLord> Tobba: File an issue ;)
[16:18:00] <SiegeLord> I love when people file issues like that on my projects... I think to myself "Dammit. Need to boot up windows again"
[16:18:15] <SiegeLord> Or if it's OSX, I think "I don't even have OSX >_<"
[16:18:36] <SiegeLord> At least you can virtualize Windows
[16:18:46] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[16:18:52] <SiegeLord> OSX support pretty much requires shelling out cash for hardware
[16:19:34] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[16:20:15] <SiegeLord> Oh damn, 10000 "this inner attribute syntax is deprecated" warnings >_<
[16:20:26] <SiegeLord> Any way to disable them?
[16:20:31] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[16:23:28] <SiegeLord> And this is where a rustfix would actually have been useful :P
[16:24:04] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[16:25:07] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[16:26:21] <whitequark> SiegeLord: but Rust is already oxidized
[16:27:14] <SiegeLord> Yes, but 'ready to give you tetanus' isn't as pleasant ;)
[16:27:48] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[16:29:06] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[16:29:20] *** Joins: khodzha1 (khodzha@9BE26321.3E410295.CA6E2165.IP)
[16:29:43] *** Quits: khodzha (khodzha@8D462FD7.EF9FA30D.CA6E2165.IP) (Ping timeout)
[16:30:10] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[16:33:05] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:33:09] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:36:35] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[16:43:06] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[16:45:45] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[16:46:00] <whitequark> "ready to destroy your steel structures" hmm, probably not
[16:48:19] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[16:49:49] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Client exited)
[16:50:37] *** Joins: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de)
[16:52:01] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[16:52:16] *** Quits: papanikge (papanikge@moz-5DE35D0F.access.hol.gr) (Quit: WeeChat 0.4.3)
[16:53:30] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[16:53:55] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:54:21] *** Joins: mib_ot3mjh (Mibbit@moz-7AD9232F.rev.numericable.fr)
[16:55:13] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[16:55:20] *** Quits: heftig (heftig@moz-D67BBF7.dip0.t-ipconnect.de) (Quit: Quitting)
[16:55:26] *** jorendorff_away is now known as jorendorff
[16:55:38] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[16:55:44] *** Joins: ganitsu1 (ganitsu@moz-3B57CC01.dialup.adsl.anteldata.net.uy)
[16:56:13] *** Quits: ganitsu (ganitsu@moz-CB91E096.dialup.adsl.anteldata.net.uy) (Ping timeout)
[16:58:28] *** Joins: froglegstew (Mibbit@17C39DD.FA4CF353.CC1A2609.IP)
[17:01:07] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Input/output error)
[17:01:44] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[17:03:39] *** Quits: astroch (astroch@moz-46285397.dhcp.embarqhsd.net) (Ping timeout)
[17:03:58] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[17:04:14] *** Joins: astroch (astroch@moz-46285397.dhcp.embarqhsd.net)
[17:04:28] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[17:04:34] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[17:06:46] *** Joins: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net)
[17:07:07] *** Quits: froglegstew (Mibbit@17C39DD.FA4CF353.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:07:10] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[17:08:04] *** Quits: Kxepal (Miranda@moz-6DDBE711.pppoe.mtu-net.ru) (Ping timeout)
[17:08:28] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[17:10:04] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[17:11:43] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Ping timeout)
[17:11:44] *** Joins: Kxepal (Miranda@moz-BAA550EE.pppoe.mtu-net.ru)
[17:14:11] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[17:15:02] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[17:15:09] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[17:16:38] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[17:19:00] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[17:19:36] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[17:20:01] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[17:20:12] <mgax> rustc says to me "internal compiler error: unexpected failure"
[17:20:17] <mgax> and then "failure in fork: Cannot allocate memory"
[17:20:40] <mgax> seems like a reasonable failure, should i still file a bug report?
[17:20:53] *** Quits: astroch (astroch@moz-46285397.dhcp.embarqhsd.net) (Ping timeout)
[17:21:05] *** Joins: astroch (astroch@moz-46285397.dhcp.embarqhsd.net)
[17:22:03] <KokaKiwi> Hmm, rustc seems like to have problems with -g flag? https://gist.github.com/KokaKiwi/efb278c35ea17d3a2500
[17:22:20] <KokaKiwi> s/like//
[17:23:11] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[17:23:20] *** Quits: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de) (Quit: Leaving.)
[17:25:19] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:27:00] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[17:27:35] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[17:27:42] <TeXitoi> mgax: if you can reproduce the bug, and that's not because you do not have enough ram, then fill a bug report, else not
[17:28:07] *** Joins: dranov (dranov@27F5E0CF.48454B76.E16F0CF5.IP)
[17:28:27] <mgax> TeXitoi, it was most likely ram, thanks
[17:31:14] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[17:32:16] *** Quits: alonlevy (alon@moz-B6210BD6.red.bezeqint.net) (Ping timeout)
[17:35:36] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[17:37:20] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[17:37:20] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[17:40:15] *** Joins: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de)
[17:40:41] *** Quits: jviereck (Adium@moz-69AB5E7B.dip0.t-ipconnect.de) (Quit: Leaving.)
[17:40:46] *** Joins: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP)
[17:41:05] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[17:41:44] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[17:44:49] <khodzha1> Guys, how can I compare to ~str by value?
[17:45:05] <Ms2ger> Compare what and what?
[17:45:16] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[17:45:32] <khodzha1> two ~str 
[17:45:39] <Ms2ger> ==
[17:46:03] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Quit: csherratt)
[17:46:19] <edwardw> rusti: let x = ~"rust"; let y = ~"rust"; x == y
[17:46:32] <edwardw> o__O no rusti
[17:46:49] <cgaebel> acrichto: ping
[17:47:18] *** Quits: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com) (Quit: Leaving)
[17:47:24] *** Joins: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com)
[17:48:31] <acrichto> cgaebel: pong
[17:49:10] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[17:50:40] <cgaebel> acrichto: for hashmap alignment, the malloc alignment is 8-bytes on x86, 16-bytes on x86_64
[17:50:55] <acrichto> ok
[17:51:07] <cgaebel> so I'm thinking of using pref_align_of<T> if the preferred alignment is <= system alignment
[17:51:10] <cgaebel> and min_align_of if it isn't
[17:51:18] <cgaebel> does that sound reasonable? or should I just always use min_align_of?
[17:51:44] <acrichto> I don't understand why malloc alignment matters in this one specific case and we "don't worry about it" everywhere else
[17:51:54] <acrichto> I would expect the calculation of the size to pass to malloc() ot use min_align_of
[17:52:11] <cgaebel> is there a table somewhere of what the min and preferred alignments are of specific types?
[17:52:15] *** Joins: asmyers (quassel@moz-9C9C7CA5.hrbgpa.east.verizon.net)
[17:52:29] <cgaebel> because if things like uint64 have a min alignment of 1-byte, that'd be pretty suboptimal
[17:52:49] <acrichto> I doubt that is the case
[17:52:52] <acrichto> I believe that it comes from LLVM
[17:54:37] *** jorendorff is now known as jorendorff_away
[17:54:59] <cgaebel> it's 4-bytes for uint64
[17:55:08] <cgaebel> but it'd be perfectly reasonable to give it 8-byte alignment
[17:55:17] <cgaebel> oh wait
[17:55:19] <cgaebel> it's 4-bytes on x86
[17:55:29] <cgaebel> huh ok then.
[17:55:33] *** Quits: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com) (Ping timeout)
[17:55:35] <cgaebel> min_align_of it is..
[17:55:50] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[17:56:03] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: Textual IRC Client: www.textualapp.com)
[17:56:06] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[17:56:09] *** Quits: edwardw (edwardw@FE274C20.C036752E.F5B522C5.IP) (Ping timeout)
[17:56:56] *** Joins: edwardw (edwardw@68931FF2.B77F1D58.FAED9FFC.IP)
[17:57:24] <sw17ch> i‚Äôm having a bit of a struggle finding an example of how to use labeled break statements. any one know how to use these?
[17:58:17] <acrichto> sw17ch: 'label: loop { break 'loop; }
[17:58:18] *** Quits: reijoslav (antek@58F5EA4F.2E23C380.AFE2C49D.IP) (Ping timeout)
[17:58:28] <acrichto> or continue 'label;
[17:58:33] <acrichto> sorry, "break 'label;"
[17:58:39] <kimundi> works for for and loop, but not for while afaik
[17:58:54] <sw17ch> is that a lifetime?
[17:59:03] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[17:59:03] <kimundi> Its the same syntax
[17:59:20] <sw17ch> is that coincidental, or are the concepts tied together?
[17:59:24] <kimundi> And conceptually you can see it as a lifetime, as lifetimes are basically scopes
[17:59:30] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[17:59:31] <sw17ch> ah, got it
[17:59:38] <acrichto> one day it may be tied to the region system
[17:59:39] *** Joins: devbug (quassel@moz-8C40558B.bchsia.telus.net)
[17:59:41] <acrichto> it isn't currently though
[18:00:45] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[18:01:00] <sw17ch> lifetimes and regions. i think i need to read about both of these more.
[18:01:04] <sw17ch> still fuzzy concepts to me.
[18:02:49] *** Joins: reijoslav (antek@58F5EA4F.2E23C380.AFE2C49D.IP)
[18:04:43] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[18:05:31] *** Quits: matp (matp@moz-16FE1E05.matp.at) (Ping timeout)
[18:05:55] *** Quits: asmyers (quassel@moz-9C9C7CA5.hrbgpa.east.verizon.net) (Ping timeout)
[18:06:11] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[18:07:32] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[18:07:52] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[18:08:42] *** Joins: fyolnish (fyolnish@moz-1945D7B2.uqwimax.jp)
[18:09:56] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[18:10:24] *** Quits: fyolnish (fyolnish@moz-1945D7B2.uqwimax.jp) (Ping timeout)
[18:10:50] *** Joins: mib_tyoe1l (Mibbit@moz-137F4D53.pppoe.yaroslavl.ru)
[18:10:53] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[18:13:15] *** Joins: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[18:13:15] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Connection reset by peer)
[18:13:24] *** Quits: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr) (Ping timeout)
[18:14:21] <whitequark> sw17ch: o/
[18:14:26] <sw17ch> o/
[18:14:59] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Quit: Ï†Ñ Ïù¥Îßå Í∞ëÎãàÎã§.)
[18:15:34] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Input/output error)
[18:15:59] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[18:17:20] *** Joins: lkuper (lkuper@F23E847.654CD82F.51B6877.IP)
[18:17:51] *** Joins: p1start (rewi@moz-E7F3D014.org)
[18:18:51] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[18:19:34] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[18:21:17] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[18:21:23] <csherratt> is there a quick way to only recompile the tests?
[18:23:00] *** Quits: mib_tyoe1l (Mibbit@moz-137F4D53.pppoe.yaroslavl.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[18:23:55] *** Joins: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net)
[18:24:46] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[18:25:20] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[18:26:04] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:27:12] *** Quits: xtc (xtc@moz-40BAAD63.tampfl.fios.verizon.net) (Quit: leaving)
[18:27:44] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[18:28:19] *** Joins: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net)
[18:31:24] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[18:31:54] *** Joins: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr)
[18:33:23] <bjz_> csherratt: https://github.com/mozilla/rust/wiki/Note-testsuite
[18:33:39] <bjz_> make check-stage1-std NO_REBUILD=1
[18:34:06] <bjz_> sw17ch: regions and lifetimes are pretty close to the same thing
[18:34:35] *** Quits: Denommus (user@moz-D91EF312.user.veloxzone.com.br) (Client exited)
[18:34:38] *** Joins: Denommus (user@moz-D91EF312.user.veloxzone.com.br)
[18:34:52] <bjz_> sw17ch: 'region' is the term that is used in the literature
[18:34:54] *** Quits: csherratt (csherratt@moz-7685819.cpe.teksavvy.com) (Ping timeout)
[18:35:02] *** Joins: csherratt (csherratt@moz-7685819.cpe.teksavvy.com)
[18:35:07] <bjz_> 'lifetime' is more of a term from C++ land
[18:35:28] <bjz_> (as far as I understand it at least)
[18:39:12] *** Joins: rusty_banger (dev@moz-DCEC0170.hsd1.co.comcast.net)
[18:40:05] *** Quits: Doppp (Doppp@moz-6B405134.hsd1.ca.comcast.net) (Ping timeout)
[18:41:20] <rusty_banger> hi all. Trying to cross-compile for ARMhf again, and ran into a new problem I had never seen before.
[18:41:24] <rusty_banger> https://gist.github.com/morrowa/9877503
[18:41:56] <rusty_banger> I built my rustc last night from master. The program compiles and runs fine on my x86_64 host. Does anyone have any clues as to what I can do to work around this? Or should I file a bug report?
[18:42:00] *** Quits: detrino (chris@moz-EAECB432.lv.lv.cox.net) (Ping timeout)
[18:42:51] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[18:46:32] <rusty_banger> Luqman I hear you're the local authority on cross-compiling for ARM. Any clues? :D
[18:48:04] *** Quits: Saj (Saj@moz-840D0658.netvisao.pt) (Ping timeout)
[18:48:26] *** Joins: detrino (chris@moz-EAECB432.lv.lv.cox.net)
[18:49:15] *** Quits: cgaebel (clark@moz-F9D89110.nyc.res.rr.com) (Ping timeout)
[18:49:23] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[18:50:21] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[18:51:12] <rusty_banger> I decided to post a comment on this issue: https://github.com/mozilla/rust/issues/12919
[18:51:46] <rusty_banger> I attached my Gist with the backtrace and the version of rustc I'm running. If anybody have any ideas, ping me here or on GitHub. Thanks!
[18:52:50] *** Joins: rylev (rylev@moz-20AE2FB8.cust.telecolumbus.net)
[18:53:02] <khodzha1> Does rust have any delegation macro or something like that?
[18:53:40] <bvssvni> khodzha1: do you mean like selectors in objective-c or delegates in C#?
[18:54:28] <khodzha1> bvssvni: i mean passing method call from object to it's field, not familiar with objc or c#
[18:54:42] *** Joins: leowoe (Leo@moz-9AE774CE.dip0.t-ipconnect.de)
[18:55:31] <bvssvni> khodzha1: to generate get and set methods?
[18:56:42] *** Parts: rusty_banger (dev@moz-DCEC0170.hsd1.co.comcast.net) ()
[18:57:05] <khodzha1> bvssvni: for example if I wrap std::comm::Chan in struct and I want to call send() on this struct, which is internally invokes send() on Chan
[18:57:21] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[18:57:31] <bvssvni> khodzha1: ah
[18:57:31] <doomlord_> is there anything more to creating a C linkable function than :    #[no_mangle
[18:57:39] <doomlord_> ]   extern "C" fn .....
[18:57:40] <bvssvni> khodzha1: I don't know
[18:58:23] <sfackler> doomlord_: make sure it's reachable so it'll get exported by the linker
[18:58:32] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[18:58:55] <bvssvni> doomlord_: this is how jensnockert does it https://github.com/bvssvni/rust-cairo/blob/master/src/lib.rs
[18:58:59] <doomlord_> #[no_mangle]  \    pub extern "C" fn my_function(... ) ...   <<< Strangely, this *works* when i put it in 'main.rs' ... but when i move it elsewhere, it doesn't;   "nm" *is* showing the function still in the .lib i'm creating though.     
[18:59:22] *** Joins: dsyang (dsyang@DFF46992.598E1842.689607DE.IP)
[18:59:40] <sfackler> doomlord_: when you move it, are you moving it to a private module?
[19:00:09] <doomlord_> thanks. making the mod pub fixes it
[19:00:24] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[19:00:25] <eddyb> doomlord_: ermahgerd http://www.mail-archive.com/dev-servo@lists.mozilla.org/msg00662.html
[19:00:35] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[19:00:38] <doomlord_> What gets me though, is "nm" still shows it. i would have thought the linker wouldn't know about pub/priv stuff from c symbols
[19:01:12] <doomlord_> ah but something has changed r.e. NM.... a lowercase 't' to an uppercase 'T' ... 
[19:01:14] *** Joins: p1start1 (rewi@moz-E7F3D014.org)
[19:01:15] *** Quits: p1start (rewi@moz-E7F3D014.org) (Quit: Leaving.)
[19:01:21] *** Quits: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP) (Ping timeout)
[19:02:39] <o11c> If lowercase,
[19:02:40] <o11c>            the symbol is usually local; if uppercase, the symbol is global
[19:02:42] <o11c>            (external).
[19:02:54] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[19:02:55] *** Quits: p1start1 (rewi@moz-E7F3D014.org) (Ping timeout)
[19:03:41] <sfackler> doomlord_: btw, extern fn is now the same thing as extern "C" fn
[19:04:18] <doomlord_> i wondered if you could add 'extern "CPP" that does C++ mangling but.. there's no standard mangling is there.
[19:04:45] *** Joins: samx (sami@moz-D9DA5773.dyn.optonline.net)
[19:05:04] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[19:05:42] <doomlord_> it seems a shame you have to specify [no_mangle] as well but i'm told most of the time you're creating callbacks
[19:05:52] *** Quits: nano (nano@moz-ED77243C.superkabel.de) (Connection reset by peer)
[19:06:34] <tiffany> you'd have to implement each compiler's mangling, I think
[19:06:34] <doomlord_> thats why i thought "extern "CPP" might be a way to differntiate that case.. but then again, c++ might demand more differences 
[19:06:39] <tiffany> and also have a compiler switch for which to emit
[19:06:44] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[19:07:09] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[19:09:40] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[19:12:13] *** Joins: diverse (diverse@moz-ED94B8D.oc.oc.cox.net)
[19:12:43] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[19:13:07] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[19:13:31] *** Quits: nightpool (nightpool@moz-7CAAC068.wi.res.rr.com) (Ping timeout)
[19:14:47] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[19:14:57] *** Joins: Arcterus (Arcterus@BF1C635F.2A820825.9435AF77.IP)
[19:16:42] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[19:17:54] *** Joins: nightpool (nightpool@moz-7CAAC068.wi.res.rr.com)
[19:18:06] <eddyb> doomlord_: did anyone convince you priv fields are enough, btw?
[19:18:54] <doomlord_> i'm more convinced than when i started, i didn't know all the details of how priv worked.. 
[19:19:12] <eddyb> you just have to put the abstraction in its own module
[19:19:19] <doomlord_> so as far as i can tell what you have is a dangerous module, as opposed to a dangerous field
[19:19:36] *** Quits: samx (sami@moz-D9DA5773.dyn.optonline.net) (Quit: This computer has gone to sleep)
[19:19:51] <doomlord_> so you can't circumvent it with impl's bolted on in other modules, i guess
[19:20:35] <eddyb> doomlord_: aaaah you were confused by C++'s model
[19:20:45] <eddyb> I was wondering :P
[19:20:56] <doomlord_> i was about to say, i have preconceptions about private/public from C++ .. #define private public and so on
[19:21:19] <eddyb> yeah, no, it's different in Rust
[19:21:40] <Ms2ger> #define MOD MINIPEACE
[19:23:10] *** Joins: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net)
[19:23:19] *** Quits: cschneid (cschneid@moz-2EF64966.hlrn.qwest.net) (Client exited)
[19:26:31] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[19:26:50] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:26:54] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[19:28:32] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:29:22] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[19:29:48] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[19:30:37] *** Joins: jviereck (Adium@moz-FC622F48.ethz.ch)
[19:30:57] *** Quits: jviereck (Adium@moz-FC622F48.ethz.ch) (Max SendQ exceeded)
[19:31:03] *** Joins: jviereck (Adium@moz-FC622F48.ethz.ch)
[19:31:06] *** Joins: Rufflewind (rf@moz-4556AD29.lightspeed.lnngmi.sbcglobal.net)
[19:31:22] *** Quits: jviereck (Adium@moz-FC622F48.ethz.ch) (Max SendQ exceeded)
[19:31:28] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[19:31:29] *** Joins: jviereck (Adium@moz-FC622F48.ethz.ch)
[19:31:34] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[19:31:46] *** Joins: eholk (eholk@A56F8C21.203A7E5B.51B6877.IP)
[19:32:56] *** jorendorff_away is now known as jorendorff
[19:33:01] *** Joins: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca)
[19:33:12] *** Quits: jviereck (Adium@moz-FC622F48.ethz.ch) (Ping timeout)
[19:36:24] <diverse> so the `#![]` attributes mean global, and `#[]` attributes mean local?
[19:36:33] *** Quits: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr) (Ping timeout)
[19:36:55] <SiegeLord> No, it's inner vs outer
[19:37:28] <SiegeLord> struct A { #![blah] } is the same as #[blah] struct A {}
[19:37:44] <SiegeLord> For some things you can't use the #[] form, but the idea is the same
[19:38:02] <bvssvni> diverse: like //! and ///
[19:39:46] *** Quits: sigma (sigma@moz-15A267A9.range109-152.btcentralplus.com) (Ping timeout)
[19:40:43] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[19:40:51] *** Joins: aatch (James@moz-B437F499.pocketrent.com)
[19:41:20] <NiccosSystem`> Has bytes! been removed?
[19:41:26] *** NiccosSystem` is now known as NiccosSystem
[19:41:29] *** Quits: Arcterus (Arcterus@BF1C635F.2A820825.9435AF77.IP) (Ping timeout)
[19:41:45] *** Joins: Arcterus (Arcterus@BF1C635F.2A820825.9435AF77.IP)
[19:41:46] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:42:00] *** Quits: Ms2ger (Ms2ger@moz-4CB19774.adsl-dyn.isp.belgacom.be) (Quit: nn)
[19:42:28] *** Joins: andrezs (andrezs@moz-D75B94E4.carolina.res.rr.com)
[19:42:32] *** Joins: cgaebel (clark@moz-F9D89110.nyc.res.rr.com)
[19:43:42] <bvssvni> NiccosSystem`: no, it's still there
[19:43:47] <NiccosSystem> ok
[19:43:48] *** Joins: rusty_banger (rusty_bang@moz-DCEC0170.hsd1.co.comcast.net)
[19:45:09] <NiccosSystem> So I can do bytes!(some_string) instead of some_string.as_bytes() then, or is there some advantage to using as_bytes()
[19:45:39] <bvssvni> NiccosSystem: only on compile time, I think
[19:45:41] <sfackler> NiccosSystem: bytes! can be used with a static variable
[19:45:43] *** Quits: eholk (eholk@A56F8C21.203A7E5B.51B6877.IP) (Quit: eholk)
[19:45:55] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[19:46:09] <bvssvni> where is bytes! is the docs?
[19:46:11] <NiccosSystem> Oh, so it can only take the &str then
[19:46:27] <NiccosSystem> is &str the same as &'static str?
[19:46:47] <eddyb> &'static str is a subtype of &str
[19:46:49] <bvssvni> NIccosSystem: &'static str is "hello", but &str is a slice
[19:46:55] *** Joins: fredy (fredy@moz-E7647C0E.vm.okeanos.grnet.gr)
[19:47:00] <NiccosSystem> ok
[19:47:01] <eddyb> &'static str is &'a str with 'a = 'static
[19:47:08] <eddyb> bvssvni is probably confusing you :P
[19:47:15] <bvssvni> eddyb: again :P
[19:47:20] <NiccosSystem> Nah, I better read up on slices
[19:47:29] <eddyb> NiccosSystem: you can use &'static str as a &str, because it is a &str with an explicit lifetime
[19:47:33] <eddyb> NiccosSystem: does that make sense?
[19:47:41] <kimundi> bytes! doesn't care about the static part, it cares about it being a literal
[19:48:03] <bvssvni> is a literal the same as a constant expression?
[19:48:12] <aatch> bvssvni, not quite.
[19:48:23] <kimundi> bvssvni: A literal is a literal
[19:48:24] <NiccosSystem> rusti: let x = &'static"Test"; bytes!(x);
[19:48:32] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[19:48:34] <kimundi> "5" is a integer literal
[19:48:40] <aatch> bvssvni, a literal is '1', a constant expression is `1+1`
[19:48:46] <bvssvni> ok, so it is like a token
[19:48:52] <eddyb> it is a token
[19:48:55] <kimundi> yes, exactly
[19:49:11] <NiccosSystem> oh rusti's not her
[19:49:17] <aatch> LITSTR (I think)
[19:49:19] *** Quits: dsyang (dsyang@DFF46992.598E1842.689607DE.IP) (Client exited)
[19:49:24] <kimundi> so bytes! only works with string literals, char literals and integer literals.
[19:49:26] <eddyb> NiccosSystem: if you have any string, just do .as_bytes() to get a byte view
[19:49:54] <NiccosSystem> yeah, I was just wondering if I could use bytes! :p
[19:50:01] <aatch> as_bytes should be essentially a no-op
[19:50:02] <NiccosSystem> But I understand now
[19:50:03] <eddyb> bytes! is something else
[19:50:59] *** Joins: lawrence (lawrence@moz-D2AE8C65.chestnutresnet.utoronto.ca)
[19:51:17] *** Quits: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP) (Ping timeout)
[19:51:44] *** Joins: mawuli (mawuli@F7A4F2ED.68EE7C48.E520B65A.IP)
[19:51:50] <NiccosSystem> is rusti open source?
[19:52:01] <bvssvni> NiccosSystem: YES
[19:52:21] <bvssvni> it is as open source as it gets
[19:52:30] *** Joins: japaric (japaric@DC168457.F3E5B3F6.F4D5766F.IP)
[19:52:32] <eddyb> not rust, rusti
[19:52:37] <eddyb> (which is open-source as well)
[19:52:43] <bvssvni> oh
[19:52:45] <bvssvni> haha
[19:52:49] <NiccosSystem> lol
[19:52:59] *** Quits: japaric_ (japaric@F25E6A94.64CFB2BA.F29ED47E.IP) (Ping timeout)
[19:53:10] <tiffany> rusti-the-bot isn't completely open is it?
[19:53:26] *** Quits: mib_ot3mjh (Mibbit@moz-7AD9232F.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[19:53:37] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[19:54:14] <bvssvni> if you need a simple rusti, you can download the makefile from https://github.com/bvssvni/rust-empty/ and type 'make rusti'
[19:54:32] <eddyb> *sigh*
[19:54:36] <eddyb> it's not the same thing
[19:54:44] <bvssvni> yeah, I know
[19:54:49] <eddyb> NiccosSystem: the author is strcat - thestinger on github
[19:54:53] *** Joins: dsyang (dsyang@DFF46992.598E1842.689607DE.IP)
[19:55:35] <bvssvni> is it this? https://github.com/thestinger/rust-playpen
[19:55:51] <eddyb> mmaybe
[19:55:56] *** Quits: murph (murph@moz-F07B75BF.oracle.com) (Client exited)
[19:56:06] *** Joins: murph (murph@moz-F07B75BF.oracle.com)
[19:56:15] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[19:56:21] <SiegeLord> What happened to &[].map?
[19:56:27] <eddyb> hahaha
[19:56:29] <eddyb> kimundi: ^^^
[19:56:39] *** Joins: sigma (sigma@C91C7F36.70518F41.9D18269F.IP)
[19:56:57] <kimundi> SiegeLord: It DIED! >;)
[19:57:07] <SiegeLord> Why?
[19:57:18] <SiegeLord> Do I do iter().map or something now?
[19:57:22] <eddyb> yupp
[19:57:27] <SiegeLord> Oh well
[19:57:32] <kimundi> iter().map().collect() expresses the same, while not being hardcoded to a specific data structure
[19:57:47] <SiegeLord> You broke rust-bindgen, now I can't bind stuff :P
[19:59:05] <SiegeLord> rust-ci documentation is still broken :/
[19:59:15] <SiegeLord> Maybe I'll email Hans...
[20:00:34] *** Quits: enix_ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Connection reset by peer)
[20:00:37] *** Joins: enix__ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[20:00:55] *** Joins: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org)
[20:01:01] <SiegeLord> I feel like I'm the only one using that feature, XD
[20:01:23] *** Quits: sigma (sigma@C91C7F36.70518F41.9D18269F.IP) (Client exited)
[20:01:41] *** Joins: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net)
[20:01:56] *** Quits: dsyang (dsyang@DFF46992.598E1842.689607DE.IP) (Quit: )
[20:02:05] *** Quits: eddyb (eddy@F8B50789.F33C1089.FB866788.IP) (Ping timeout)
[20:04:44] *** Quits: Arcterus (Arcterus@BF1C635F.2A820825.9435AF77.IP) (Input/output error)
[20:05:14] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[20:05:28] <SiegeLord> Heh, the upload script even has a syntax error
[20:05:44] <bvssvni> SiegeLord: could you post something about it on reddit?
[20:05:55] <SiegeLord> ?
[20:06:07] <bvssvni> SiegeLord: about rust-ci
[20:06:29] <bvssvni> or was you referring to rust-bindgen?
[20:06:32] <SiegeLord> Oh, I guess... but why be passive agressive when you can email him ;)
[20:06:44] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[20:06:56] <bvssvni> SiegeLord: no no, I meant like a tutorial
[20:06:58] <SiegeLord> The only benefit would be that somebody might say they already did, so I don't have to
[20:07:03] *** Joins: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com)
[20:07:17] <SiegeLord> Oh...
[20:10:20] *** Joins: arcterus (arcterus@BF1C635F.2A820825.9435AF77.IP)
[20:10:36] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[20:11:50] <SiegeLord> I dunno, the help page seems pretty self-explanatory >.>
[20:12:37] * bvssvni wonders if he is the only one that thinks setting up new projects in Rust is a *bit* complicated
[20:13:03] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[20:13:14] <SiegeLord> Oh that is in principle tricky, but once you do so, enabling rust-ci is the easy step, hah
[20:13:50] <bvssvni> the trick is to get all the pieces fit together
[20:14:36] *** Quits: edwardw (edwardw@68931FF2.B77F1D58.FAED9FFC.IP) (Quit: Leaving...)
[20:15:23] *** Joins: Florob (Florob@moz-39532932.de)
[20:15:37] *** Joins: jxv (jxv@moz-D1F0EBC3.socal.res.rr.com)
[20:16:03] *** Quits: huon (Thunderbir@moz-7CC720CF.lns20.syd7.internode.on.net) (Ping timeout)
[20:16:26] <SiegeLord> The main issue is the build system, really
[20:16:59] <SiegeLord> https://github.com/SiegeLord/RustAllegro/blob/master/.travis.yml#L14:L21
[20:17:23] <SiegeLord> Once you get that hurdle (and it is a big hurdle), you just list the golden path the users are meant to follow
[20:18:51] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[20:19:38] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[20:20:21] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[20:20:32] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Ping timeout)
[20:20:38] <aatch> Setting up a build system is hard no matter what language you're using.
[20:21:00] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[20:21:08] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[20:21:13] <SiegeLord> It's tricker in Rust due to the hashes in names
[20:21:18] <SiegeLord> But not too much tricker
[20:21:48] *** Quits: jackneill (jackneill@moz-9DF68D6A.pool.digikabel.hu) (Quit: WeeChat 0.4.3)
[20:22:08] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[20:23:21] <aatch> SiegeLord, yeah, it's gotten a bit easier due to rustc adding options that tell you the filename it would output.
[20:27:35] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:27:56] *** Quits: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca) (Ping timeout)
[20:29:15] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:30:06] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[20:30:08] *** Quits: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[20:31:39] *** Joins: alex-abreu (alex@moz-7421D6C9.mc.videotron.ca)
[20:32:01] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[20:34:12] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[20:37:35] *** Joins: Nekit1234007_ (Nekit12340@6DDA7830.B6412B36.4707F662.IP)
[20:37:39] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Connection reset by peer)
[20:37:54] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[20:38:08] *** Quits: nekit1234007 (Nekit12340@1A3BF3D7.477D93D.4707F662.IP) (Ping timeout)
[20:38:21] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[20:38:48] *** Joins: Earnestly (earnest@moz-6CD1AB70.dyn.plus.net)
[20:39:35] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Ping timeout)
[20:41:32] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[20:42:20] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[20:42:25] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[20:44:01] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:44:05] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[20:44:26] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[20:45:05] *** Quits: napoleon (Mibbit@moz-7AD9232F.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[20:47:05] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[20:47:11] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[20:49:06] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[20:51:06] *** jorendorff is now known as jorendorff_away
[20:52:21] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[20:53:09] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[20:53:09] *** ChanServ sets mode: +o tjc
[20:53:16] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Textual IRC Client: www.textualapp.com)
[20:55:45] *** Quits: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[20:57:27] *** Quits: jxv (jxv@moz-D1F0EBC3.socal.res.rr.com) (Quit: QUIT)
[20:58:06] <cyndis> so is there at the moment any way to disconnect a TcpStream if you are reading from it in another task at the same time?
[20:58:29] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[20:59:13] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[20:59:42] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[21:00:09] *** Quits: rusty_banger (rusty_bang@moz-DCEC0170.hsd1.co.comcast.net) (Quit: rusty_banger)
[21:01:09] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[21:05:07] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[21:05:31] *** Quits: alonlevy (alon@moz-EB7C9CF3.telavivmakers.org) (Ping timeout)
[21:06:12] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[21:07:11] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[21:08:33] *** Quits: doomlord_ (servitor@moz-88D9A890.range86-184.btcentralplus.com) (Ping timeout)
[21:09:57] *** Joins: fyolnish (fyolnish@moz-CC3DEFB0.uqwimax.jp)
[21:11:35] *** Quits: alkino_ (alkino@moz-B4A66306.w92-151.abo.wanadoo.fr) (Ping timeout)
[21:11:38] *** Quits: fyolnish (fyolnish@moz-CC3DEFB0.uqwimax.jp) (Ping timeout)
[21:12:33] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[21:13:50] *** Joins: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net)
[21:14:23] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[21:14:45] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[21:16:26] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Ping timeout)
[21:18:20] *** Joins: doomlord_ (servitor@moz-88D9A890.range86-184.btcentralplus.com)
[21:18:35] *** Quits: Ferreus (ferreus@moz-C3128393.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[21:18:37] *** Joins: Ferreus (ferreus@moz-C3128393.lsn.wtnet.de)
[21:19:21] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[21:22:18] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[21:22:56] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[21:23:03] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[21:24:37] *** Quits: Ferreus (ferreus@moz-C3128393.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[21:26:44] *** Joins: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net)
[21:29:09] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[21:29:40] *** Joins: justin (justin@1982A77D.D41652FF.DDE5D3F6.IP)
[21:30:50] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[21:30:57] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[21:31:21] <justin> If I'm working with rust-core and I need to store a list of things, what is the best way to do that since I don't have vectors available? Right now I'm trying to just get some memory and store them in an array like thing, but how would I get the actuall pointer address to store in there?
[21:31:37] <justin> The list of things I need to store is a list of structs
[21:32:16] *** Joins: heftig (heftig@moz-81A104E1.dip0.t-ipconnect.de)
[21:32:48] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[21:34:34] <sfackler> justin: rust-core should contain Vec
[21:35:17] <justin> sfackler: I'm working with kernel code and compiling it without libc so it does not in the version I'm using.
[21:36:12] <justin> Its being cross compiled to arm
[21:36:26] <sfackler> justin: this should work fine regardless of the target I'd think https://github.com/thestinger/rust-core/blob/master/core/vec.rs
[21:36:51] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[21:37:10] <aatch> justin, strcat isn't really maintaining rust-core much anymore. He'd prefer being able to run libstd in freestanding mode.
[21:37:48] <aatch> justin, he'll take PRs etc. More just a word of warning that things being broken in rust-core is likely.
[21:38:40] <justin> I'm working on this code for an assignment for a class. The current setup has us compiling against rust-core without libc. See lib.rs the config flag is there so that vec won't work without libc
[21:39:25] <aatch> justin, Ah, ok. Do you have an allocator?
[21:40:25] <justin> Its also using rust 0.9. Yes they have made an allocator that I can use. Supposedly I can use it as a black box that I can trust but right now we are hitting problems with making new strings, but yes I have an allocator
[21:40:39] <justin> the string issue may be a separate issue. Its a custom implementation of strings
[21:40:43] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[21:40:45] *** Quits: lkuper (lkuper@F23E847.654CD82F.51B6877.IP) (Quit: lkuper)
[21:41:28] <justin> Right now I'm trying to create a basic filesystem strcuter by making a tree structure with nodes that have some allocated memory that I can use to store data or pointers to other directory/file nodes
[21:42:05] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[21:42:26] <aatch> justin, well there's serveral options you can use. Raw pointers is one of them, using them like C arrays.
[21:42:30] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[21:42:42] *** Joins: derek_c (derek@moz-A9790B2A.hsd1.fl.comcast.net)
[21:42:45] <justin> aatch: Yes that is what I'm currently pursuing
[21:42:54] <aatch> Or you can write your own Vec-like implementation on top of the allocator you've been provided.
[21:44:08] <justin> I thought writing my own vec might be overkill for the assignment, but I might consider it. How can I get raw pointers to variables though?
[21:44:11] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Ping timeout)
[21:44:36] <kimundi> justin: get a & and cast
[21:44:42] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[21:44:51] <aatch> In fact, it might even coerce.
[21:45:00] <kimundi> let raw = &foo as *T
[21:45:00] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[21:45:05] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[21:45:16] <aatch> rusti's not here, so I can't test, casting will work either way though.
[21:45:24] *** Joins: alonlevy (alon@moz-B6210BD6.red.bezeqint.net)
[21:45:25] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[21:46:18] <justin> Ok thanks. I was trying to just use the & and it wouldn't let me cast to uint or u8 because its a non-scalar cast
[21:46:46] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[21:47:00] *** Quits: doomlord_ (servitor@moz-88D9A890.range86-184.btcentralplus.com) (Client exited)
[21:48:48] <justin> Thanks everyone I have something compiling now!
[21:50:39] <justin> Of course when you are writing kernel code... that's not as reassuring as it is normally!
[21:50:49] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[21:50:57] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[21:51:18] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[21:52:22] *** Joins: tyna (liadon@moz-BB1BAD9A.dynamic.chello.pl)
[21:53:06] *** Quits: q66 (q66@moz-FDC9B85A.range109-150.btcentralplus.com) (Ping timeout)
[21:53:31] *** Quits: philix (felipe@moz-AAB39811.user.veloxzone.com.br) (Ping timeout)
[21:55:00] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[21:55:21] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[21:55:40] *** Joins: philix (felipe@moz-AAB39811.user.veloxzone.com.br)
[21:55:56] *** Quits: enix__ (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[21:56:35] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[21:57:01] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:58:18] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[21:58:43] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[21:58:45] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[22:00:29] *** Quits: NiccosSystem (NiccosSyst@moz-ED196BB4.customer.lyse.net) (Ping timeout)
[22:00:38] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Ping timeout)
[22:01:29] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[22:02:22] *** Joins: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net)
[22:03:10] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[22:03:13] *** Quits: justin (justin@1982A77D.D41652FF.DDE5D3F6.IP) (Quit: Konversation terminated!)
[22:05:02] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Quit: TheHydroImpulse)
[22:05:10] *** Joins: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net)
[22:07:43] <masonl> Can you match on a string prefix in rust?
[22:08:30] <Havvy> Not at this time.
[22:08:36] <masonl> Ok
[22:08:38] <masonl> Thanks
[22:09:09] <masonl> How about using a vector pattern match and treating the string as bytes?
[22:09:51] *** Joins: q66 (q66@moz-46D931B3.range86-152.btcentralplus.com)
[22:10:19] <Havvy> If you cast, maybe.
[22:15:24] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[22:16:50] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[22:18:30] *** Joins: M2Ys4U (ehm@moz-46ED3256.in-addr.arpa)
[22:21:12] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[22:21:20] *** Quits: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp) (Client exited)
[22:21:38] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[22:22:56] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[22:24:51] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[22:27:36] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:28:38] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Ping timeout)
[22:28:57] *** Joins: Saj (Saj@moz-840D0658.netvisao.pt)
[22:29:00] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[22:29:15] *** Joins: lucian_ (lucian@moz-8408FDFA.cable.virginm.net)
[22:29:16] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[22:30:57] *** Quits: lucian_ (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:32:58] *** Joins: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch)
[22:33:59] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[22:35:33] *** Joins: Valloric (Valloric@moz-288722BA.hsd1.ca.comcast.net)
[22:36:33] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:36:37] <Valloric> in a macro, how do I convert something captured with $name:ident to a string? let foo = ‚Äú$name‚Äù doesn‚Äôt work
[22:36:55] <cmr> stringify!($name)
[22:37:02] <Valloric> cmr: ty
[22:37:24] *** flaper87 is now known as flaper87|afk
[22:37:25] <Valloric> yup, works
[22:37:37] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: ...take irc away, what are you? genius, billionaire, playboy, philanthropist)
[22:38:11] <Valloric> sigh, Yet Another Useful and Undocumented Macro 
[22:38:13] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:38:47] <Havvy> There's a lot of useful and undocumented stuff.
[22:38:48] <cmr> are any of them documented? :)
[22:39:01] <Havvy> Document them and send a PR?
[22:39:09] *** Quits: eibwen (kvirc@moz-E7BC7E0A.dip0.t-ipconnect.de) (Ping timeout)
[22:39:28] *** Joins: Doppp (Doppp@moz-CE720357.hfc.comcastbusiness.net)
[22:40:03] *** Joins: ssira (ssira@moz-F6206352.kanagawa.ocn.ne.jp)
[22:41:46] *** Quits: paraze (paraze@moz-9E32EAAD.w90-27.abo.wanadoo.fr) (Quit: gn8)
[22:43:12] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Ping timeout)
[22:43:29] *** Quits: jviereck (Adium@moz-7859BAFE.dclient.hispeed.ch) (Quit: Leaving.)
[22:43:46] <SiegeLord> Damn, iter().map().collect() doesn't infer types as well as the old map() did :P
[22:44:14] <kimundi> Thats because the old map was hardcoded to a type ;)
[22:44:23] <kimundi> try collect::<Vec<_>>()
[22:44:38] <kimundi> (or whatever type its supposed to be)
[22:44:46] <SiegeLord> That's the problem, I don't know
[22:44:54] <SiegeLord> Let's try working backwards
[22:45:01] <kimundi> ah, yeah. It gets tricky then
[22:45:02] <SiegeLord> (trying to get bindgen working)
[22:46:23] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[22:46:23] <kimundi> Did this break bindgen itself, or code generated by it?
[22:46:54] <cmr> iter().map().collect() shouldn't have changed.
[22:46:55] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[22:47:05] <cmr> and the old map didn't return an iterator :p
[22:47:15] <cmr> OH I see what you mean
[22:47:17] <cmr> derp
[22:47:30] *** Joins: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP)
[22:47:55] <SiegeLord> kimundi: The former, I'm sure the developer would have noticed the latter
[22:47:58] <SiegeLord> I hope ._.
[22:48:05] *** Joins: ChrisMorgan (chris@moz-8DCBEA52.vic.adsl.internode.on.net)
[22:48:08] <dpc> One problem that I have is composition of multiple source codes of rust projects.
[22:48:11] <SiegeLord> Although the reason I'm even doing this instead of waiting is because I think I found a bug in the generated code
[22:48:22] <dpc> Eg. my binary using one library of mine and other libraries...
[22:48:39] <dpc> And then I'd like to have them in separate git repos and use git submodule.
[22:49:35] *** Quits: alan_andrade (alan_andra@moz-8862F69E.hsd1.ca.comcast.net) (Input/output error)
[22:49:37] <cmr> now you have two problems.
[22:49:42] <SiegeLord> Hehe... :~[_] works
[22:49:46] <SiegeLord> That's just funny looking
[22:50:09] <Havvy> : || -> ? {
[22:50:21] <SiegeLord> Oh damn, I broke it >_<
[22:50:36] <cmr> :| |->!{
[22:50:41] <kimundi> .collect::<~[|| -> _]>()
[22:50:47] <cmr> moderately displeased cyborg
[22:51:40] <Havvy> Oh right, ! not ?
[22:51:42] <dpc> I can't tell emoticons from rust syntax.
[22:52:03] <dpc> What are you doing?
[22:52:23] * cmr is just making funny faces
[22:52:54] <cmr> kimundi's example is calling collect, which should return a vector of closures which return an infered type
[22:53:02] <Havvy> let x:| |->!{ loop {} }
[22:55:07] *** Joins: wendorf (Mibbit@moz-1FA962D7.hsd1.ca.comcast.net)
[22:55:13] * kimundi wants to maximize the meaningful symbol per-line ratio.
[22:56:14] <kimundi> .collect::<~[||_| -> |_||]>() // Don't write such a iterator, please
[22:56:46] <sfackler> kimundi: don't define such a closure either :P
[22:57:42] <SiegeLord> That looks fun
[22:58:00] <SiegeLord> It's not kimundi's fault that the closure syntax is what it is ;P
[22:58:03] <Florob> Does that parse? *headscratch*
[22:58:13] <SiegeLord> Exactly, lol
[22:58:20] <kimundi> Florob: It should, I think ;)
[22:58:54] <kimundi> iterator over closures that take closures that return closures
[22:59:15] <fazal> hey all 
[22:59:19] <Florob> kimundi, looks like that would require potentitally infinite lookahead though, wouldn't it?
[22:59:24] <SiegeLord> It doesn't
[22:59:36] <kimundi> SiegeLord: Darn
[22:59:39] <fazal> can any point me to documentation of Rust's network library
[22:59:42] <SiegeLord> The first || parses as a closure, and it stops there
[22:59:55] <cmr> fazal: http://static.rust-lang.org/doc/master/std/io/net/index.html
[23:00:00] <kimundi> But I thought ||T|| parses?
[23:00:22] <cmr> it does not
[23:00:45] <kimundi> Oh, well. Then I build my silliness on the wrong axiom :P
[23:00:50] <cmr> needs more parens.
[23:00:55] <cmr> |(|T|)|
[23:00:55] <fazal> cmr: Thanks
[23:01:16] <SiegeLord> Maybe we shouldn't have ditched fn() ;)
[23:01:27] <kimundi> .collect::<~[|(|_| -> |_|)|]>() // It got better!
[23:01:39] *** Joins: rusty_banger (rusty_bang@moz-DCEC0170.hsd1.co.comcast.net)
[23:01:40] <kimundi> (Does that parse at least?)
[23:01:53] <ChrisMorgan> Sure.
[23:02:03] <wendorf> Hi everyone. I'm attempting to write a function wrapper that will allow me to make assertions on the ways and times any given function is called. I've been banging my head against it for a little and don't yet fully understand the required syntax. 
[23:02:08] <wendorf> I've got a gist that attempts to just print "I'm in my stub wrapper", but is currently failing because I'm trying to use lambda syntax for a multiline function. Is there something I should be looking at to help me accomplish this? Is it just a bad idea to try in Rust? My gist is at https://gist.github.com/wendorf/9881360
[23:02:25] <SiegeLord> I find code with nested closures immediately unreadable
[23:02:36] *** Quits: Doppp (Doppp@moz-CE720357.hfc.comcastbusiness.net) (Ping timeout)
[23:02:38] <SiegeLord> I had to use 3 nested closures, and I just gave up looking at the type
[23:02:52] <SiegeLord> And then it ended up ICE'ing anyway
[23:03:04] <cmr> hah
[23:03:16] *** Joins: Kazimuth (james@moz-F82198F6.hsd1.ma.comcast.net)
[23:03:39] <kimundi> wendorf: I'm unsure from your gist and description what you want to do exactly.
[23:03:53] <cmr> wendorf: fn(&[&str]) is a are function pointer, but `|arg: &[&str]|` creates a closure whose type is `|&[&str]|`
[23:04:01] <cmr> wendorf: you can't use a closure where a function pointer is expected.
[23:04:18] *** Joins: cschneid (cschneid@moz-59349A8E.hlrn.qwest.net)
[23:04:23] <rusty_banger> Luqman: any clues on getting your latest armhf rustc binary to run? It can‚Äôt find its shared libraries on my Raspberry Pi when I just extract the files and try to run it. Do I need to edit an ld variable? Or install the libraries in my path somewhere?
[23:04:29] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[23:04:29] <wendorf> cmr: I figured as much, but am unable to figure out how to create a custom function on the fly.
[23:04:29] *** ChanServ sets mode: +ao brson brson
[23:04:32] <cmr> wendorf: you can do `let function = ...` the second time to rebind it, using a separate type.
[23:04:36] <cmr> (than the argument)
[23:04:52] *** Quits: Kazimuth (james@moz-F82198F6.hsd1.ma.comcast.net) (Client exited)
[23:04:53] <kimundi> wendorf: I can tell you that a) A function pointer is not he same as a closure b) the assignment needs to end with a semicolon c) the variable function needs to be mutable for assignment to work.
[23:04:54] <wendorf> kimundi: I'm trying to write a simple expectation library for testing.
[23:05:12] <ChrisMorgan> wendorf: hang on, -> &str?
[23:05:27] <wendorf> ChrisMorgan: That's just cruft
[23:05:33] <kimundi> d) -> &str will not work without lifetimes or &'static str
[23:06:55] <kimundi> wendorf: So, do you want to pass in a function, and return a wrapper that calls that function internally?
[23:07:16] <wendorf> kimundi: Exactly
[23:07:21] <wendorf> cmr: Is there an example of using `let function` in a way that assigns a newly declared function, rather than an existing one? I was hoping to use lambdas as my method of declaring a new function.
[23:07:44] *** Joins: Doppp (Doppp@moz-CE720357.hfc.comcastbusiness.net)
[23:08:02] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[23:08:06] <kimundi> wendorf: Hm, the problem is this will only work nicely with unboxed closures. As is you can currently not probably write this
[23:08:12] <dpc> "use sdl2" says it is unresolved import, while it use to work in different file ...
[23:08:19] <dpc> Any help with this? :/
[23:08:29] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[23:09:35] <kimundi> wendorf: At the moment, you can either a) try to work with a stack closure, which you can not return if created locally b) return a proc(), which is only callable once c) return a custom wrapper type with a call() function
[23:10:24] <cmr> dpc: going to need a lot more information than that.
[23:10:26] <kimundi> dpc: Do you have a "extern crate sdl2" in your crate root?
[23:10:31] <cmr> dpc: preferably in the form of source code.
[23:10:32] <dpc> Correct.
[23:10:50] <dpc> https://github.com/AngryLawyer/rust-sdl2/tree/master/src/demo
[23:11:15] <dpc> What I did is I took everything from video.rs and moved it to main.rs, removing "video" namespace, obviously.
[23:11:27] <wendorf> kimundi: Thanks. I'll look more into those options to see if they'll work for my use case. I could also get away with using partially applied functions, but I haven't been able to find a way to do that in Rust. Is it fair to say that's also not possible?
[23:11:30] <dpc> I had to delete "mod sdl2" and I now it works.
[23:11:38] <dpc> Which makes me think, I don't understand something here.
[23:11:41] *** Joins: Nekit1234007 (Nekit12340@4D86C49F.ABE6C08B.4707F662.IP)
[23:12:10] <kimundi> wendorf: Also not possible. partially applies functions are really just closures, and thus already included in my list of things that might work. ;)
[23:12:14] *** Quits: Nekit1234007_ (Nekit12340@6DDA7830.B6412B36.4707F662.IP) (Ping timeout)
[23:13:00] <kimundi> dpc: mod sdl2? where is that?
[23:13:29] <dpc> https://github.com/AngryLawyer/rust-sdl2/blob/master/src/demo/main.rs#L4
[23:13:33] <kimundi> (Do I have to look somewhere else than that demo directory?)
[23:13:38] <dpc> "mod video" I mean.
[23:13:59] <dpc> And I had to remove https://github.com/AngryLawyer/rust-sdl2/blob/master/src/demo/video.rs#L1
[23:14:24] <dpc> Which makes me wonder, why I don't have to use "mod sdl2" now, and I had to use it when it was in video.rs
[23:14:38] <wendorf> kimundi: Sounds fair. Looks like I might have to rethink my testing approach, then.
[23:14:40] <kimundi> mod sdl2?
[23:14:43] * kimundi is confused
[23:15:01] <dpc> "use sdl2", sorry
[23:15:03] <dpc> Damn it. :D
[23:15:19] <dpc> I did: I took stuff from video.rs and moved it to main.rs
[23:15:29] <dpc> "mod video" is unnecessary anymore, obviously.
[23:15:37] <dpc> But why "use sdl2" is unneccesary too.
[23:16:30] <kimundi> extern crate sdl2; already does the same as a use sdl2 if you are in the same module
[23:17:04] <dpc> Hmmm ...
[23:17:58] <dpc> But why it didn't work inside "mod video { ... }" too? :/
[23:18:05] <kimundi> wendorf: If you want to get fancy, you can use the new custom procedural macros to write a custom attribute that modifies a function inplace by adding code before/after its body ;)
[23:18:48] <kimundi> dpc: Sorry, I can't follow whats going wrong without seeing the actual code thats going wrong @_@
[23:19:18] <dpc> I've already fixed the code and I'm doing something else so oh well...
[23:19:38] <wendorf> kimundi: Feels dirty, but could work! Are you referencing https://github.com/mozilla/rust/pull/11151 ?
[23:19:42] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[23:19:48] *** Quits: rylev (rylev@moz-20AE2FB8.cust.telecolumbus.net) (Client exited)
[23:20:09] *** Joins: rylev (rylev@moz-20AE2FB8.cust.telecolumbus.net)
[23:20:46] <kimundi> if you moved the content of video.rs into a new mod video {} in main.rs, then nothing should have changed with "use" and "extern crate" lines. if you removed the video module wrapper, then the "use sdl2;" should become uneccessary, but code should still work I think.
[23:21:01] <kimundi> wendorf: yup
[23:21:49] *** Quits: rylev (rylev@moz-20AE2FB8.cust.telecolumbus.net) (Ping timeout)
[23:21:49] <kimundi> wendorf: You could od fancy things like generate logging instructions for every function in a crate at the same time ;)
[23:23:32] <wendorf> That sort of thing (scaled back) is pretty much exactly what I'm looking for.
[23:24:04] <wendorf> But opt-in instead of global.
[23:24:22] *** Joins: darkf (darkf@moz-F9058B8A.net)
[23:26:26] <wendorf> Has there been work on testing frameworks other than the built-in assertions? I've done some searching and haven't found anything.
[23:26:26] *** nrc is now known as nrc|afk
[23:26:46] *** Quits: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net) (Client exited)
[23:26:58] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[23:27:04] <cmr> no.
[23:27:12] <cmr> at least not in recent history.
[23:27:22] <cmr> although, there is a quickcheck library.
[23:27:30] <cmr> I suppose that counts as a testing framework
[23:27:42] *** Quits: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net) (Client exited)
[23:28:17] *** Joins: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net)
[23:29:18] <wendorf> I'm hoping to do something similar to: `spy_on(my_function); my_function(1, 2); expect_to_have_been_called_with_args(my_function, 1, 2);`, with the exact syntax dependent on the solution I can come up with.
[23:29:58] *** Quits: jvoorhis (jvoorhis@moz-384E18AD.ptld.qwest.net) (Ping timeout)
[23:30:05] <cmr> Oh, I see what you're doing, you want to essentially *replace* my_function with your wrapper? that's not possible at all.
[23:30:39] <wendorf> Not even with the custom procedural macros?
[23:30:48] <cmr> certainly not, macros are just syntactic transformations.
[23:30:56] <kimundi> Not with that syntax and semantic at least
[23:31:21] <cmr> What you're doing requires much more dynamicism than rust has.
[23:31:26] <cmr> (or, trying to do)
[23:31:42] <wendorf> I sorta figured as much, but was hoping I could get around it by changing function pointers.
[23:32:33] <kimundi> No changing static memory here ;)
[23:32:44] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[23:32:49] <wendorf> At this point, I think maybe the best approach is to have explicit Spy classes that get passed in as dependencies.
[23:33:11] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz‚Ä¶)
[23:33:53] *** Quits: canhtak (canhtak@moz-4FB0FBC1.wl.t.ulaval.ca) (Quit: canhtak)
[23:34:00] <dpc> module wasn't actually a module!
[23:34:29] <dpc> What's this about?
[23:34:45] <wendorf> Assuming I can find a way to generate spy classes before compilation: `let person_spy = PersonSpy::new; doctor.fix(person_spy); expect_to_have_been_called(person_spy.examine);`
[23:35:03] <cmr> dpc: report a bug, but you're probably trying to use a struct as a namespace for a function but it doesn't define any.
[23:35:49] <cmr> wendorf: I'm not sure that anything like this is going to be workable, I've never seen it outside a dynamic language.
[23:36:09] <dpc> cmr: You're brilliant.
[23:36:34] <cmr> dpc: (cc me)
[23:36:50] <dpc> One question ...
[23:36:55] <dpc> Can traits contain static methods?
[23:37:01] <cmr> yes.
[23:37:11] <cmr> though I prefer to call them "associated functions"
[23:37:13] <dpc> So I had struct that only had trait methods.
[23:37:19] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:37:27] <dpc> and no "impl xyz {  }" on it's own.
[23:37:47] <cmr> associated functions are scoped by the trait they come from, not the type that implements them.
[23:37:54] <wendorf> cmr: I'm imagining a step before compilation that finds the all method signatures for Person and creates a PersonSpy file with methods that record getting called and delegate to an internal Person instance. During tests, actually compile and include the PersonSpy class's file.
[23:37:57] <cmr> http://static.rust-lang.org/doc/master/std/default/trait.Default.html as an example.
[23:38:06] <dpc> And I was trying to call one of the "associated functions"
[23:39:00] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:40:19] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Client exited)
[23:40:22] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[23:40:33] *** Quits: rusty_banger (rusty_bang@moz-DCEC0170.hsd1.co.comcast.net) (Quit: rusty_banger)
[23:40:57] <SimonSapin> bjz_: will you write a RFC about enums?
[23:41:10] <bjz_> SimonSapin: yep
[23:41:18] <SimonSapin> cool
[23:41:22] <bjz_> SimonSapin: do you think it would be worth it?
[23:41:29] <SimonSapin> (so I don‚Äôt have to :))
[23:41:32] <bjz_> :D
[23:41:45] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[23:41:50] <cmr> Separating C-like enums from the rest of them is useful.
[23:42:09] <SimonSapin> I‚Äôm skeptical people will want to rename stuff this late in the life of the language, but I think it‚Äôs worth proposing at least
[23:42:37] <dpc> cmr: What do you mean "associated functions are scoped by the trait they come from, not the type that implements them."? 
[23:43:04] <cmr> dpc: the Default trait has a single associated function, and it is called like `Default::default()`, not `SomeTypeThatImplementsDefault::default()`
[23:43:27] <bjz_> SimonSapin: we need to do this stuff before 1.0 so we don't regret things later
[23:43:47] <SimonSapin> bjz_, cmr: do we still need an enum keyword if we have union (or something else)?
[23:44:06] <SimonSapin> ie. are C-like enums really worth a separate keyword, rather than just be a special case of unions?
[23:44:07] <bjz_> SimonSapin: I think `enum` is still useful for C APIs
[23:44:15] <dpc> cmr: So can SomeTypeImplementingDefault override default() ?
[23:44:23] <bjz_> SimonSapin: dunno
[23:45:00] <cmr> dpc: it wouldn't be an override, it'd be an unrelated function.
[23:45:10] <bjz_> SimonSapin: I think they have different enough semantics to warrent it
[23:45:20] <dpc> cmr: I was trying to make a constructur like trait function ...
[23:45:23] <bjz_> SimonSapin: like being able to be cast
[23:45:35] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[23:45:42] <bjz_> SimonSapin: btw, we should really be discussing this stuff on #rust-internals
[23:45:46] <bjz_> SimonSapin: :P
[23:45:48] <dpc> That I can call on a trait class to give me an instance of that struct implementing this trait.
[23:46:04] <dpc> I guess that's stupid ...
[23:46:12] <dpc> I don't need them to be in trait for this ...
[23:46:15] <dpc> OK, my bad.
[23:48:24] *** Joins: jim (Mibbit@moz-6968471.bstnma.fios.verizon.net)
[23:49:12] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[23:51:11] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[23:51:27] *** Quits: arcterus (arcterus@BF1C635F.2A820825.9435AF77.IP) (Ping timeout)
[23:52:05] *** Quits: jim (Mibbit@moz-6968471.bstnma.fios.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:55:45] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[23:55:49] *** Joins: lkuper (lkuper@moz-7BF67E71.tmodns.net)
[23:57:02] *** Quits: derek_c (derek@moz-A9790B2A.hsd1.fl.comcast.net) (Ping timeout)
[23:57:19] *** Joins: derek_c (derek@moz-A9790B2A.hsd1.fl.comcast.net)
