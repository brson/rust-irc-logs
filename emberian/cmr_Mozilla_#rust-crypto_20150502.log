[00:07:05] *** Quits: erickt (erickt@moz-4hh.6p3.217.74.IP) (Ping timeout: 121 seconds)
[00:35:19] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[00:36:14] *** Quits: mcpherrin (uid11663@moz-cgplg8.brockwell.irccloud.com) (Quit: Connection closed for inactivity)
[01:09:42] *** Joins: atomic (atomic@moz-32rrpe.snydernet.net)
[03:14:23] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[03:20:01] *** Quits: Tobba (Tobba@moz-o13d22.bredband.telia.com) (Ping timeout: 121 seconds)
[04:02:59] *** mcpherri2 is now known as mcpherrin
[04:14:50] *** Joins: brson (brson@moz-sni.tdl.56.172.IP)
[05:22:46] <Ilari> Okay, upgraded to latest nightly (there was off-schedule one), and my test program still ICEs... :-/
[05:27:53] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[05:38:52] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[05:47:12] *** Quits: brson (brson@moz-sni.tdl.56.172.IP) (Quit: leaving)
[08:54:44] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[10:36:13] <Ilari> Heh, apparently CBOR is pretty much a superset of JSON. JSON is not canonicalizable (due to numbers) but CBOR apparently is canonicalizable.
[10:51:51] *** Quits: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua) (Ping timeout: 121 seconds)
[11:17:58] *** Joins: Tobba (Tobba@moz-o13d22.bredband.telia.com)
[12:39:04] *** Quits: LinuxBunny (Retep998@moz-prmara.east.verizon.net) (Ping timeout: 121 seconds)
[13:17:44] <Yurume> Ilari: and contrary to the claims, its data model is (albeit slightly) different from JSON.
[13:18:27] <Yurume> I feel that is an important issue for any "binary JSON" candidates
[13:24:11] <Tiffany> do  binary JSON formats actually save much space?
[13:24:32] <Tiffany> it seems like you need to have rather large numbers for it to pay off
[13:29:10] <Tiffany> you can't really intern/elide any strings like you do in schema-based binary formats..
[13:29:27] <Tiffany> the difference between json and capn proto is probably pretty significant
[13:29:38] <Tiffany> you don't need all of those string keys
[13:30:51] <cmr> I don't really understand the motivation for cbor either.
[13:31:25] <Tiffany> I understand their focus on embedded systems ("internet of things" ugh)
[13:31:43] <Tiffany> I mean, they said they implemented decoding in 880 bytes of ARM
[13:31:47] <Tiffany> that is pretty interesting
[13:32:50] <Tiffany> it's an explicit goal to have very small implementations
[13:35:05] <Tiffany> that is interesting and somewhat horrifying
[13:35:14] <Tiffany> it has a dedicated negative number type
[13:36:48] <Tiffany> they do fiddly multi-length length field encodings
[13:36:51] <Tiffany> which is strange
[13:36:57] <Tiffany> it seems like that would bloat implementations quite a bit
[13:37:44] <Tiffany> I was almost wondering if it would be able to do zero-copy parsing, but it can't
[13:37:50] <Tiffany> er
[13:38:00] <Tiffany> rather, skipping the parsing stage, as in capn proto
[13:38:17] <Tiffany> I suppose they care more about shaving off bytes in data than shaving off bytes in implementation size and memory usage
[13:49:04] <Ilari> Yurume: Yeah, numeric types are a bit different.
[13:49:25] <Tiffany> this format sure does a lot of ways of saying you don't have something explicitly
[13:49:33] <Tiffany> null, undefined, and just not including a value
[13:49:45] <Tiffany> you could also include false at a stretch
[13:49:59] <Yurume> Tiffany, you'll be very surely interested in ubjson: https://github.com/thebuzzmedia/universal-binary-json/
[13:50:21] <Tiffany> does it also have multiple ways of representing nullary objects?
[13:50:55] <Yurume> its data model is same to JSON, so `null` is probably the only way to do so.
[13:51:02] <Yurume> and `false`*
[13:51:22] <Yurume> it does have a no-op signal designed for streaming however
[13:51:27] <Tiffany> oh, you mentioned it because it's more straightforward
[13:52:30] <Tiffany> yeah, it has null and false but not undefined
[13:52:38] <Tiffany> presumably undefined is the result of looking up a key that doesn't exist
[13:53:03] <Yurume> JSON data model is not without a caveat (+/-Infinity and NaN is probably the single problematic case), but it is relatively well defined and well understood at this moment
[13:53:22] <Tiffany> why are those problematic?
[13:53:56] <Yurume> language interoperability. if you are unintentionally putting NaN into the JSON data, what happens?
[13:54:23] <Tiffany> the other side eventually crashes from a signalling nan because they didn't bother to validate input data?
[13:54:42] <Tiffany> that's something I've noticed about json
[13:54:45] <Yurume> (some implementations have an explicit provision to encode +/-Inf and NaN into null; some others print them as is; another print them as strings; and so on0
[13:56:11] <Yurume> Tiffany, I've also written something like this: https://gist.github.com/lifthrasiir/323bb7e33f7f650a8937
[13:56:13] <Tiffany> since javascript doesn't have native structs, you don't need to translate from json's data model, and that is traditionally where validation is done
[13:56:37] <Yurume> very incomplete, but better than nothing IMO
[13:57:24] <Yurume> Tiffany, yeah. to be exact, there are two classes of serialization formats (schematic vs. schemaless) and there are lots of people using schemaless format for scheamtic data or vice versa
[13:58:08] <Yurume> if you need a strict validation, the odds are that schemaless format is not a good fit
[13:58:52] <Yurume> (hmm, I forgot this is #rust-crypto ;)
[13:59:20] <Tiffany> I am pretty strongly attached to capn proto
[14:00:35] <Tiffany> huh
[14:00:42] <Yurume> I agree that capnp is a decent schematic serialization format
[14:00:45] <Tiffany> UBJ encodes infinity as null
[14:03:56] <Tiffany> I like the tag system in CBOR
[14:04:11] <Tiffany> if the decoder doesn't implement the tags, it can just ignore them and pass along the underlying value type
[14:04:22] <Tiffany> it ties into type systems well
[14:05:20] <Ilari> Hah... When presented with need to use AEAD (instead of _unauthenticated_ encrytpion) in one (draft) protocol, the author rigged AEAD construction out of AES-CBC and HMAC-SHA1...
[14:09:24] <Ilari> Has oddities like having no explicit nonce for the MAC, but then running the MAC over parts of packets that include encryption IV...
[14:10:46] <Ilari> (Which would blow up with some MAC functions)
[14:10:50] <Tiffany> sounds more like a daft protocol
[14:11:15] <Tiffany> that was a bad pun
[14:13:16] <Tiffany> "If NaN is an allowed value, it must always be represented as 0xf97e00."
[14:13:34] <Tiffany> is that supposed to be a fully encoded data item?
[14:14:36] <Tiffany> ah, yeah
[14:16:57] <Tiffany> it looks like they don't want you to be encoding data in NaNs then
[14:19:17] <Ilari> Well, in general FP tends to be in all sorts problematic.
[14:20:05] <Tiffany> that's only the canonical format though
[14:30:38] <Ilari> In fact, FP is the reason why canonicalizing JSON doesn't work.
[14:33:02] <Ilari> In fact, if numbers are restricted to integers without exponents, the everything should be canonicalizable.
[14:35:41] <Tiffany> in the sense that if you create a document with all the same values and keys, it should always produce a bit-for-bit identical output?
[14:41:19] <Tiffany> I wonder why 754 is the way it is
[14:48:05] <Ilari> Oh, then some systems have both QNAN and SNAN.
[14:49:57] *** Joins: Riastradh (riastradh@moz-ums8mr.tor-exit.network)
[14:50:17] <Tiffany> it seems like they were heavily biased towards hardware, because of the insistence on (for example) global state registers
[14:50:35] <Tiffany> but.. surely implementing quiet NaN is not easier to do in hardware than trapping?
[14:51:33] <Tiffany> well
[14:51:37] <Tiffany> I phrased that wrong
[14:51:54] <Tiffany> surely it is easier to trap than to have a special NaN case pervade every FP op
[14:52:03] <Tiffany> almost every, anyway
[14:52:21] <Tiffany> I can't really name any programs which can usefully continue once they start NaNing all over
[14:52:58] <Ilari> Also, FP has +0 and -0 (actually useful in some computational work).
[14:53:14] <Tiffany> wouldn't it be harder to get rid of than to keep?
[14:55:37] <Tiffany> also, doesn't the spec mandate that they both compare as equal?
[14:55:57] <Tiffany> having +0 and -0 is a lot less offensive to me for floating point
[14:56:01] <Tiffany> with integers it's silly
[15:12:34] <Ilari> Also, as said, +0/-0 is useful, since some calculations that come up in practice involve discontinuties at 0.
[15:13:09] <Tiffany> oh
[15:18:28] <Tiffany> "Because of negative zero (and only because of it), the statements z = −(x − y) and z = (−x) − (−y), for floating-point variables x, y, and z, cannot be optimized to z = y − x." that's kind of awkward
[15:18:46] <Tiffany> although math reordering optimisations are kind of a lost cause with floating point in any case
[15:27:37] *** Joins: blank_na1e (blank_name@moz-204.u7h.36.50.IP)
[15:28:02] *** Quits: blank_name (blank_name@moz-trd.8u3.36.50.IP) (Ping timeout: 121 seconds)
[16:28:59] <eternaleye> cmr: Well, *any* binary JSON will save loads of space over base64'd binary data in JSON
[16:29:00] <eternaleye> cmr: And that's sadly not uncommon
[16:29:01] <eternaleye> cmr: See also: Mozilla Weave/Sync, WebCrypto, etc.
[16:40:48] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[16:45:00] <Tobba> it's also probably slightly less awful to parse
[17:17:24] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[18:01:50] *** Joins: gleb (gleb@moz-3u1drv.rusanovka-net.kiev.ua)
[18:03:10] <Ilari> What's "DSE" and "DIT"?
[18:57:23] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[19:15:43] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[19:46:01] <bascule> Ilari: DSE is DSA Specific Entry, lol!
[19:46:37] <bascule> what's a DSA? Just a Directory System Agent, which might sound like a client, but is in fact a server!
[19:46:53] <bascule> and DIT is Directory Information Tree iirc
[19:47:24] <bascule> the root DSE is the root of a DIT (there can be more than one per DSA)
[19:47:41] <bascule> or as ActiveDirectory would call it, a forest :O
[19:47:55] *** Joins: erickt (erickt@moz-njt.vqi.14.76.IP)
[19:56:34] *** Quits: atomic (atomic@moz-32rrpe.snydernet.net) (Ping timeout: 121 seconds)
[20:22:47] *** Quits: erickt (erickt@moz-njt.vqi.14.76.IP) (Ping timeout: 121 seconds)
[20:23:44] *** Joins: atomic (atomic@moz-29eeuu.puckey.org)
[21:15:41] *** Joins: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net)
[21:58:41] *** Quits: gsingh93 (gulshan@moz-qnbukr.mi.comcast.net) (Ping timeout: 121 seconds)
[22:18:14] *** Quits: blank_na1e (blank_name@moz-204.u7h.36.50.IP) (Ping timeout: 121 seconds)
[22:19:15] *** Joins: blank_name (blank_name@moz-204.u7h.36.50.IP)
[22:20:26] *** Quits: blank_name (blank_name@moz-204.u7h.36.50.IP) (Quit: leaving)
[22:28:55] *** Joins: erickt (erickt@moz-g7qhvc.vlljca.sbcglobal.net)
[23:09:15] *** Joins: blank_name (blank_name@moz-204.u7h.36.50.IP)
