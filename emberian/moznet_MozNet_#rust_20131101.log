[00:00:43] *** Quits: cdidd (cdidd@moz-6595103B.broadband.corbina.ru) (Ping timeout)
[00:00:53] <pcwalton> what did as_c_str change to?
[00:01:18] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[00:01:21] <strcat> pcwalton: with_c_str?
[00:01:27] <strcat> to_c_str
[00:01:27] <pcwalton> yeah, guessed it
[00:01:27] <pcwalton> thanks
[00:01:38] <strcat> since it has to allocate now
[00:01:51] <strcat> (or you can push \0 and use to_ptr)
[00:02:05] <pcwalton> I just transmute(&"foo\0"[0])
[00:02:11] <pcwalton> but there's probably a much better way
[00:02:30] <strcat> pcwalton: I think it will just coerce to a ptr
[00:02:51] <strcat> at least, &T will coerce to *T
[00:03:28] *** Joins: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu)
[00:03:41] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:04:11] *** Joins: jvshahid_ (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[00:04:19] <mark_edward> in extra::json, is there anyway to deal with null values ?
[00:04:23] *** Quits: jvshahid_ (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Quit: leaving)
[00:04:44] <dbaupp> pcwalton, strcat: using .with_c_str doesn't necessarily allocate, if the string is short enough it uses an internal ~100byte stack buffer
[00:04:58] <pcwalton> clever
[00:05:10] *** Quits: eatkinson (eatkinson@moz-E57448EF.airbears2.berkeley.edu) (Quit: eatkinson)
[00:05:47] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:07:45] <adarq> learning rust while handing out candy, euuuuhg
[00:08:53] *** Quits: echristo (echristo@2C6BFF53.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[00:09:20] *** Joins: Jesin (Jessin_@moz-9BB5F6CF.cc.lehigh.edu)
[00:09:31] <Sorella> adarq, not eating them?
[00:10:05] *** Joins: sluggo (Mibbit@moz-2395F683.nc.res.rr.com)
[00:10:10] <mark_edward> dbaupp: do you know anyway to deal with null values when using extra::json?
[00:10:13] <adarq> nope :f
[00:11:02] *** Joins: dcrewi (david@moz-AB8667CE.gyrae.net)
[00:12:51] *** Joins: adu (ajr@moz-60B25736.washdc.fios.verizon.net)
[00:15:27] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[00:16:08] *** Quits: aeqwa1 (aeqwa@moz-5CC431ED.dsl.tropolys.de) (Quit: WeeChat 0.4.3-dev)
[00:16:21] <dbaupp> mark_edward: in what sense... aren't they represented in the JSON data type?
[00:17:10] <mark_edward> well if the JSON data type is Null, then decoding it to a struct fails, even if that field is an Option type
[00:18:28] *** Quits: gem (nandaja@4763F90C.40D2FDEE.301675BC.IP) (Ping timeout)
[00:19:52] <dbaupp> it has worked for me in the past
[00:20:12] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[00:20:34] <dbaupp> `#[deriving(Encodable,Decodable)] struct Foo { x: Option<int> }` gives null <=> None and 123 <=> Some(123) iirc
[00:20:43] *** Joins: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com)
[00:20:46] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[00:20:50] *** Quits: sluggo (Mibbit@moz-2395F683.nc.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:21:49] *** Joins: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com)
[00:21:53] <kvark> engine/engine.rs:1:0: 1:0 error: can't find crate for `std`
[00:22:24] <kvark> compiled and installed Rust master
[00:22:28] <kvark> any ideas?
[00:29:15] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[00:29:56] *** Joins: DaRabman (Mibbit@moz-E592B60D.plus.com)
[00:31:27] *** Joins: lkuper (lkuper@moz-BC815DFC.lightspeed.sntcca.sbcglobal.net)
[00:32:25] <DaRabman> Hi. I'm just trying to use int::from_str() but I keep on getting an 'unresolved name' error for int. I've tried use-ing std::int and std::from string, but to no avail.
[00:32:39] <DaRabman> *from_str
[00:33:24] <dbaupp> DaRabman: int::from_str was removed in favour of a generic from_str (which is in the prelude, so you should be able to call `from_str("123")` like that with no extra impots)
[00:33:27] <dbaupp> *imports
[00:33:55] <telotortium> I'm writing a fix for issue #10202, and I'd like to know whether I should put the test for this bug as a unit test in the std::rand module, or create a separate test in the test/run-pass directory. (It doesn't require access to module internals.)
[00:34:20] *** Quits: telotortium (Mibbit@moz-90BFA359.dhcp.mdsn.wi.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:34:37] *** Joins: telotortium (Mibbit@moz-90BFA359.dhcp.mdsn.wi.charter.com)
[00:34:51] <dbaupp> telotortium: a unit test in std::rand::reseeding
[00:34:56] <DaRabman> @dbaupp I've tried the generic form as   from_str<int>("foo") but with the same error
[00:35:12] <dbaupp> DaRabman: what version of rust?
[00:35:15] <DaRabman> 0.8
[00:35:22] <dbaupp> (also, it needs to be `from_str::<int>("foo")`
[00:35:24] <dbaupp> )
[00:35:54] <dbaupp> the extra :: are to avoid disambiguate the grammar so we don't have C++'s problem of <> being a either type hints or a comparison
[00:36:09] <telotortium> @dbaupp: Okay, that's where I've put it.
[00:37:11] <dbaupp> telotortium: awesome (thanks for noticing/fixing my problems :) (i'm huonw))
[00:38:32] <mark_edward> dbaupp: why is this coming up as an unreachable pattern?
[00:38:38] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Quit: Leaving...)
[00:38:56] <telotortium> dbaupp: No problem -- it's just serendipity that led me to try to run that example in the first place
[00:39:39] <dbaupp> mark_edward: because the code itself is unreachable? (as in, i'll need to see it to help... ?)
[00:39:41] <dbaupp> telotortium: :)
[00:41:28] <mark_edward> dbaupp: ok hold on a sec
[00:42:38] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[00:43:21] *** Joins: mattm (Mibbit@9A42B64C.3930FB94.28EACA3.IP)
[00:43:48] <mark_edward> dbaupp: so here is the relevent trait definition/impl stuff https://github.com/MarkJr94/reddit/blob/master/util/json.rs#L210-L224
[00:44:43] <mark_edward> dbaupp: relevant macro: https://github.com/MarkJr94/reddit/blob/master/macros.rs#L4-L17
[00:45:01] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:45:16] <mark_edward> dbaupp:  end ysere : https://github.com/MarkJr94/reddit/blob/master/redditor.rs
[00:45:28] <mark_edward> s/ysere/use/g
[00:46:35] *** Quits: lkuper (lkuper@moz-BC815DFC.lightspeed.sntcca.sbcglobal.net) (Quit: lkuper)
[00:47:59] <dbaupp> mark_edward: what's the complaint?
[00:48:36] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[00:49:02] *** Quits: cdelo (cdelo@31073680.31C0B4EF.D345515E.IP) (Client exited)
[00:51:02] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[00:51:12] <mattm> Could someone explain to me why a function pointer declared &fn() has twice the size of one declared extern fn() ?
[00:51:21] <dbaupp> mattm: the environment pointer.
[00:51:33] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[00:51:37] <dbaupp> &fn is a closure, and is essentially (*Environment, extern "Rust" fn)
[00:51:46] *** Joins: mib_g5a6tx (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[00:51:53] *** Parts: mib_g5a6tx (Mibbit@9B9315E1.A6025CA.1C37C358.IP) ()
[00:52:12] <dbaupp> (where `extern "Rust" fn` is the type of plain function pointer like C, using the Rust ABI.)
[00:52:18] *** Joins: mib_g5a6tx (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[00:52:26] <mattm> Okay, thanks. I was trying to use tansmute on a closure, and I was confused as to why it had a different pointer size than the machine size.
[00:52:27] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Client exited)
[00:52:35] *** jdm|f00ding is now known as jdm
[00:52:57] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[00:53:16] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[00:54:30] *** Quits: mattm (Mibbit@9A42B64C.3930FB94.28EACA3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:54:39] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[00:57:28] *** Quits: mib_g5a6tx (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:58:41] <tikue_> match arms short-circuit right?
[00:59:18] <tikue_> match (0, 1) { (0, x) | (x, 1) => x, _ => -1 } evaluates to 0 right
[00:59:25] <tikue_> i mean 1
[00:59:41] <kimundi> good question
[00:59:46] <kmc> rusti: match (0, 1) { (0, x) | (x, 1) => x, _ => -1 }
[00:59:52] <tikue_> rusti isn't here right now is he
[00:59:54] <pcmattman> rusti is no more :(
[00:59:54] <kmc> :(
[00:59:57] <tikue_> no more?!?!
[00:59:58] <kmc> rip
[01:00:00] <tikue_> y
[01:00:02] <pcmattman> RIP rusty
[01:00:09] <tikue_> alas poor rusti
[01:00:14] <strcat> it doesn't work anymore
[01:00:16] <pcmattman> because stdio changes apparently, strcat knows more
[01:00:16] <tikue_> was he determined to be a nuisance or what
[01:00:20] <tikue_> oh
[01:00:23] <tikue_> wat
[01:00:26] <strcat> I gave up at fixing it
[01:00:28] <tikue_> ah
[01:01:08] <strcat> it will happily serve python, C++, or whatever but not rust ;p
[01:02:10] <pcmattman> could try running it under `unbuffer` or something (man 1 unbuffer)
[01:02:46] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[01:02:46] *** ChanServ sets mode: +o tjc
[01:02:52] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Client exited)
[01:03:15] *** Joins: jmmaranan (jmmaranan@moz-E01D5C49.hsd1.ga.comcast.net)
[01:04:21] *** Quits: brendan (brendaneic@moz-BBE3ABD.mv.mozilla.com) (Quit: brendan)
[01:04:56] *** Joins: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net)
[01:05:20] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[01:07:17] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[01:08:35] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[01:08:49] *** Quits: jmmaranan (jmmaranan@moz-E01D5C49.hsd1.ga.comcast.net) (Quit: Leaving)
[01:11:47] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:13:58] *** Quits: Jesse (jruderman@moz-BBE3ABD.mv.mozilla.com) (Quit: Jesse)
[01:14:48] *** Quits: moostik (Icedove@moz-5988E8E9.w92-135.abo.wanadoo.fr) (Ping timeout)
[01:15:10] <kvark> any ideas on error: can't find crate for `std`?
[01:16:40] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[01:17:15] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[01:17:31] *** Joins: Yeri (jasonjasmi@BA0CD88C.B2E00889.31F69D78.IP)
[01:19:14] *** Joins: tjc (tjc@moz-BBE3ABD.mv.mozilla.com)
[01:19:14] *** ChanServ sets mode: +o tjc
[01:19:49] *** Joins: lurker33 (Mibbit@moz-71F7E457.cable.teksavvy.com)
[01:20:45] *** Quits: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net) (Quit: alan)
[01:21:10] *** Quits: tikue_ (tikue_star@30C9EC33.F3E8A984.689607DE.IP) (Ping timeout)
[01:23:09] *** Quits: alex-abreu (alex@EA3B4035.84482E50.488A906A.IP) (Ping timeout)
[01:27:05] *** nrc is now known as nrc|afk
[01:28:26] *** Quits: nkoep (nik@moz-1C14C49F.pool.mediaways.net) (Client exited)
[01:28:39] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[01:29:08] *** Joins: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net)
[01:30:03] *** Joins: voxpopuli (fanservice@17356A8.3591AA85.689607DE.IP)
[01:30:29] *** Quits: tjc (tjc@moz-BBE3ABD.mv.mozilla.com) (Quit: zzzzzzzzzz)
[01:30:36] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[01:30:37] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[01:30:53] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[01:31:05] *** Quits: eatkinson (eatkinson@moz-261EDE03.hsd1.ca.comcast.net) (Quit: eatkinson)
[01:31:40] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[01:32:13] *** Quits: lurker33 (Mibbit@moz-71F7E457.cable.teksavvy.com) (Quit: http://www.mibbit.com ajax IRC Client)
[01:33:23] *** Joins: expr (user@moz-E4836198.dyn.optonline.net)
[01:34:02] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[01:35:47] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[01:35:55] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Quit: Leaving)
[01:36:12] *** Quits: telotortium (Mibbit@moz-90BFA359.dhcp.mdsn.wi.charter.com) (Quit: http://www.mibbit.com ajax IRC Client)
[01:38:12] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[01:38:27] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Ping timeout)
[01:38:53] *** Joins: nomadic_ (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[01:38:56] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Quit: Leaving)
[01:39:59] *** Quits: nomadic_ (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Quit: Leaving)
[01:41:16] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[01:44:46] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[01:46:19] *** Joins: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[01:46:45] *** Quits: kvark (Mibbit@moz-F30E0473.cpe.net.cable.rogers.com) (Quit: http://www.mibbit.com ajax IRC Client)
[01:49:41] *** Quits: TeXitoi (texitoi@moz-EA958D66.texitoi.eu) (Ping timeout)
[01:49:57] *** Joins: TeXitoi (texitoi@moz-EA958D66.texitoi.eu)
[01:50:06] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[01:52:21] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[01:52:45] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[01:54:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[01:58:17] *** jorendorff_away is now known as jorendorff
[01:59:51] *** Quits: Kxepal (Miranda@moz-D17F72BD.pppoe.mtu-net.ru) (Ping timeout)
[02:01:02] *** Quits: adu (ajr@moz-60B25736.washdc.fios.verizon.net) (Quit: adu)
[02:01:31] *** Quits: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:01:45] *** Joins: adu (ajr@moz-60B25736.washdc.fios.verizon.net)
[02:02:49] *** Joins: Kxepal (Miranda@moz-B0668C07.pppoe.mtu-net.ru)
[02:03:31] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Quit: Leaving...)
[02:05:48] *** Quits: pcwalton (pcwalton@moz-7B0110AD.mv.mozilla.com) (Quit: pcwalton)
[02:05:58] *** Quits: azakai (alon@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:08:31] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[02:11:26] *** Quits: boredomist (boredomist@8186917.CC8FA3EE.E3401B6E.IP) (Ping timeout)
[02:13:06] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzz…)
[02:13:14] *** Quits: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP) (Ping timeout)
[02:14:34] <ChrisMorgan> bstrie: the Rust runtime is not ready for winning the TechEmpower benchmarks yet. The most completely optimised code possible at present still won't be enough to win.
[02:17:10] *** Quits: heftig (heftig@moz-4F99FF26.dip0.t-ipconnect.de) (Ping timeout)
[02:18:23] <brson> let's start by beating node.js
[02:18:27] *** Joins: heftig (heftig@moz-858AE1B9.dip0.t-ipconnect.de)
[02:19:31] *** Quits: voxpopuli (fanservice@17356A8.3591AA85.689607DE.IP) (Ping timeout)
[02:19:32] <strcat> just make sure to write code that's bottlenecked by vectors so it can be sped up by an order of magnitude ;p
[02:19:36] <benh> we could sabotage libuv!
[02:23:52] <ChrisMorgan> brson: we're pretty close to that now, within 10% on my machine a couple of days ago.
[02:24:28] <cmr> I'm quite amused that we don't even beat node
[02:25:26] <ChrisMorgan> cmr: why? Node is highly optimised, rust and rust-http haven't been so thoroughly optimised yet.
[02:26:42] <strcat> Go is faster than node.js, and libuv from C with a thread pool is twice as fast as Go ;P
[02:29:25] *** Joins: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net)
[02:31:59] *** Joins: mr_boo (Mibbit@moz-6E63CE42.protectedgroup.com)
[02:32:07] *** Quits: mr_boo (Mibbit@moz-6E63CE42.protectedgroup.com) (User has been banned from Mozilla (no spamming here))
[02:34:06] *** Quits: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP) (Quit: Ex-Chat)
[02:36:30] *** Joins: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP)
[02:36:41] *** Quits: FreeFull (freefull@53823EC.48D46712.5872C891.IP) (Ping timeout)
[02:37:36] *** Quits: DaRabman (Mibbit@moz-E592B60D.plus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[02:38:30] *** Joins: Jesse_ (jruderman@moz-537BCF9.hsd1.ca.comcast.net)
[02:39:16] *** Quits: Jesse (jruderman@moz-537BCF9.hsd1.ca.comcast.net) (Ping timeout)
[02:41:34] *** Joins: FreeFull (freefull@D89A5B80.2CE4D4F4.159B5998.IP)
[02:42:51] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Quit: Leaving)
[02:42:58] *** Joins: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net)
[02:43:01] *** Quits: nomadic (nomadic@moz-E01D5C49.hsd1.ga.comcast.net) (Quit: nomadic)
[02:46:16] *** Quits: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP) (Quit: buildmaster reconfigured: bot disconnecting)
[02:47:51] *** Joins: rust-buildbot (rust-build@505BFA3.C3CCCE8C.D25A875A.IP)
[02:49:05] *** Joins: tjc (tjc@moz-6E64A536.tmodns.net)
[02:49:05] *** ChanServ sets mode: +o tjc
[02:50:00] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[02:54:01] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[02:55:50] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[02:55:50] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[02:56:09] *** Quits: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP) (Input/output error)
[02:57:27] *** Quits: brson (brson@moz-BBE3ABD.mv.mozilla.com) (Ping timeout)
[02:57:47] *** Quits: jdm (jdm@moz-AFF897B8.dsl.teksavvy.com) (Ping timeout)
[02:58:54] <mcarberry> Hey, attemping to update rust-irc-client and found a + before parameter name in a function definition. I can't find any documentation reference to that, what is it?
[02:59:00] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[03:00:05] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[03:00:05] *** ChanServ sets mode: +ao dherman dherman
[03:00:16] *** Quits: tjc (tjc@moz-6E64A536.tmodns.net) (Quit: Places to go, people to annoy)
[03:01:01] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[03:01:19] <cmr> mcarberry: that's from pre-0.6. It was called a mode.
[03:01:31] *** Joins: ilyoan (ilyoan@B4104EBB.3CC170B1.1E14B209.IP)
[03:01:44] <cmr> really you're better off rewriting it at this point.
[03:01:48] <mcarberry> Ahh, found it now. Thanks! That made it much easier to search for.
[03:01:52] *** Joins: brson (brson@981AA104.E81F12CD.76F66111.IP)
[03:01:52] *** ChanServ sets mode: +ao brson brson
[03:03:02] *** Joins: tjc (tjc@moz-6E64A536.tmodns.net)
[03:03:02] *** ChanServ sets mode: +o tjc
[03:03:15] *** Quits: tjc (tjc@moz-6E64A536.tmodns.net) (Quit: Places to go, people to annoy)
[03:05:25] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[03:09:54] * ChrisMorgan was just continuing to work on and compile rust-http as his rust build got to installing... an interesting result indeed
[03:16:57] <ChrisMorgan> OK... so `macro_rules! foo { ... }` works fine in the module scope, but if you do it inside a function it needs to be `macro_rules! foo ( ... )`?
[03:17:12] <dbaupp> yeah
[03:17:17] *** Joins: Scriptor (user@moz-5817C4DC.nyc.res.rr.com)
[03:17:26] <ChrisMorgan> Why is that?
[03:17:35] <Scriptor> hi guys, question regarding installing rust on windows
[03:17:59] <Scriptor> on step 9 in 'quick steps for windows env setup' in https://github.com/mozilla/rust/wiki/Note-getting-started-developing-Rust
[03:18:04] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[03:18:10] <klutzy> Scriptor: 0.8 or master?
[03:18:14] <Scriptor> it says to copy some files to %build%\i686-pc-mingw32\stage0\bin
[03:18:17] <Scriptor> klutzy: 0.8
[03:18:27] <Scriptor> what's %build% supposed to refer to?
[03:18:41] <klutzy> ah, yes. you need some dlls
[03:19:03] <klutzy> but I think it says when you want to build 0.8, not binary installation
[03:20:11] <dbaupp> ChrisMorgan: because a consistent compiler would be boring? (I don't know)
[03:20:19] <Scriptor> hmm, indeed it does, that'll teach me to not just follow random directions after googling
[03:21:46] <Scriptor> klutzy: I get a missing libpthread-2.dll error when I try to run 'rust', any idea how I can get that dll to the right place
[03:21:55] *** Quits: brson (brson@981AA104.E81F12CD.76F66111.IP) (Quit: leaving)
[03:22:13] <klutzy> Scriptor: yes, it is one of what rust.exe wants
[03:22:24] <klutzy> Scriptor: it is from mingw
[03:23:09] <klutzy> Scriptor: unfortunaly mingw had been updated recently and we got dll hell. it's why the wiki page looks complicated
[03:23:34] <Scriptor> yep, I ran `mingw-get upgrade "libpthread=2.8.0-3"`, and I think that means I have the right libpthread in C:\MinGW\lib
[03:23:48] <McPherrin> What does #[deny(cstack)] do?
[03:26:10] <klutzy> Scriptor: libpthread-2.dll is at C:\mingw\bin
[03:26:30] <Scriptor> right, sorry, that's what I meant
[03:27:05] <klutzy> maybe rust.exe just don't know where the dll is. in the case you may set PATH environment so it includes C:\mingw\bin
[03:27:35] *** Quits: adu (ajr@moz-60B25736.washdc.fios.verizon.net) (Quit: adu)
[03:28:06] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Ping timeout)
[03:30:41] *** Quits: expr (user@moz-E4836198.dyn.optonline.net) (Ping timeout)
[03:31:40] <steven_is_false> Hi.
[03:31:49] <cmr> McPherrin: It forbids you from calling an extern "C" fn without having #[fixed_stack_segment], as otherwise the stack segment might not be large enough for what the C function expects.
[03:32:46] <Scriptor> klutzy: that fixed it, just got hello world to compile, thanks for the help!
[03:35:16] <McPherrin> 168         let packet: *ICMP = cast::transmute::<*u8, *ICMP>(buf);
[03:35:16] <McPherrin> 169         println!("{}", *packet);
[03:35:27] <McPherrin> Shouldn't this be unsafe? I'm dereferencing a raw pointer
[03:35:32] *** Joins: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net)
[03:35:38] <cmr> McPherrin: Yes, and transmute is also unsafe.
[03:36:01] *** Joins: adu (ajr@moz-60B25736.washdc.fios.verizon.net)
[03:36:15] <McPherrin> cmr: oh, I just realized why rustc was warning me about unneeded unsafes
[03:36:26] <McPherrin> I had unsafe { a; b; unsafe { that } }
[03:36:36] <pcmattman> 'that' is extra unsafe!
[03:36:51] <aatch> McPherrin, also, having both a type parameter for the `let` and the `transmute` is redundant
[03:36:58] <dbaupp> two unsafes make a safe!
[03:38:01] <McPherrin> aatch: Yes but I couldn't remember which way transmute's arguments work and that was easier than looking it up :)
[03:38:38] <aatch> McPherrin, or you could leave the type params on transmute out and it wouldn't matter :D
[03:39:29] <gavinb> Trying to use filter_map() on an enumerated type. One of the type ctors takes an owned string, the other two take slices. In the match, the compiler complains: "error: cannot move out of dereference of & pointer". Actually, I don't want to move it, but rather return it unmodified to the filter_map(). Is there a way to do something like "foo as Type(..)" and return foo unmodified and unmoved?
[03:40:10] <aatch> McPherrin, and finally, you can use 'as' to cast between raw pointer types.
[03:40:24] <aatch> so 'buf as *ICMP' should work.
[03:41:15] <dbaupp> (that's possibly being removed...)
[03:44:53] *** Quits: cowboyd (cowboyd@moz-DD0FF83.lightspeed.austtx.sbcglobal.net) (Client exited)
[03:47:53] <cmr> dbaupp: I didn't think casts between raw pointer types was being considered for removal.
[03:48:27] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[03:48:34] <aatch> I know that trait-object casts was up for removal
[03:48:47] <dbaupp> https://github.com/mozilla/rust/pull/9788#issuecomment-27136388
[03:49:01] <dbaupp> But I would not support:    uint => raw pointer, raw pointer => uint,    raw pointer => raw pointer
[03:49:10] <dbaupp> (end quote)
[03:49:58] <cmr> Aha
[03:49:59] <gavinb> Code showing the filter_map() question: http://pastebin.com/deeJLheb
[03:50:04] <dbaupp> aatch: I think/hope that was being made optional, rather than removed
[03:51:00] <cmr> gavinb: it's because you're saying &chunk
[03:51:08] <cmr> gavinb: &chunk dereferences and moves.
[03:51:16] <gavinb> The error is line 14, but only when Replacement clause is present.
[03:51:46] <cmr> really? seems odd
[03:51:49] <dbaupp> gavinb: change it to `|chunk| .. match *chunk { ... }`
[03:52:24] <dbaupp> (StrChunk only moves when it has the Replacement variant.) 
[03:53:46] <gavinb> dbaupp: cool, that works. Still not entirely sure how why though... I would have thought those equivalent, but obviously not.
[03:54:12] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[03:54:58] <gavinb> Is there a way to refer to the lhs of the match (like "foo as Enum" in Haskell IIRC) ? Would be nice to return the Some(foo) rather than reconstruct the instance.
[03:55:08] *** Joins: kimundi_ (kimundi@moz-F8D99315.dip0.t-ipconnect.de)
[03:55:22] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[03:55:30] <aatch> gavinb, yes. you can do `a @ pattern` in the match arm
[03:55:58] <gavinb> aatch: aha! thank you! I couldn't find that in any of the docs.
[03:56:04] *** Quits: kimundi (kimundi@moz-3999E347.dip0.t-ipconnect.de) (Ping timeout)
[03:56:04] *** kimundi_ is now known as kimundi
[03:57:06] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[03:57:11] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[03:59:41] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[04:04:20] *** kimundi is now known as zz_kimundi
[04:08:54] *** Quits: Jesin (Jessin_@moz-9BB5F6CF.cc.lehigh.edu) (Ping timeout)
[04:09:24] *** Quits: Yeri (jasonjasmi@BA0CD88C.B2E00889.31F69D78.IP) (Quit: Yeri)
[04:10:12] *** Joins: btipling (btipling@moz-D51E0AEB.xen.prgmr.com)
[04:11:13] *** jorendorff is now known as jorendorff_away
[04:11:27] *** zz_kimundi is now known as kimundi
[04:14:45] *** Quits: lmandel (lmandel@moz-76CE9D51.cable.teksavvy.com) (Quit: lmandel)
[04:19:42] *** Quits: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com) (Input/output error)
[04:26:09] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[04:26:09] *** Joins: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP)
[04:26:16] <Heather> Give me a candy !
[04:27:01] <ChrisMorgan> Heather: impoliteness is not rewarded here
[04:27:21] <dbaupp> ChrisMorgan: give me a candy, please!
[04:27:27] <ChrisMorgan> dbaupp: http://candybox2.net/
[04:28:32] <Heather> ChrisMorgan why impoliteness :(
[04:28:58] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzz…)
[04:29:13] <ChrisMorgan> Heather: you just needed the magic word :P
[04:29:23] <mark_edward> dbaupp: sorry, i had to disappear! the complaint is that this match arm: https://github.com/MarkJr94/reddit/blob/master/util/json.rs#L214-L221 is declared unrachable
[04:29:29] *** Joins: lex (lex@moz-CB4EF17D.bootp.virginia.edu)
[04:30:56] *** Joins: cdidd (cdidd@moz-74BFE97B.broadband.corbina.ru)
[04:30:57] <Heather> ChrisMorgan ah... and that's already impoliteness :S
[04:31:13] *** Quits: cdidd (cdidd@moz-74BFE97B.broadband.corbina.ru) (Quit: Leaving)
[04:31:16] *** Joins: cdidd (cdidd@moz-74BFE97B.broadband.corbina.ru)
[04:31:16] <lex> hi, i have a quick question about arcs. I'm getting 'error: cannot move out of captured outer variable' when i try `let t = port.recv(); arc.write(|vec| { (*vec).push(t) });`
[04:31:18] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[04:31:27] <lex> is there a way around this?
[04:31:40] <ChrisMorgan> Heather: I was joking around.
[04:31:41] <dbaupp> mark_edward: oh, it's probably because Null isn't in scope, so that arm is actually just defining a variable called 'Null' (and as such, it matches everything)
[04:31:58] <Heather> ChrisMorgan I see
[04:32:03] <mark_edward> dbaupp: oh thank you so much!!
[04:33:33] <ChrisMorgan> lex: can you post the full code? I'm finding it hard to think about it conceptually from just that code
[04:34:56] <dbaupp> lex: the problem is t gets moved into the arc closure
[04:35:02] <dbaupp> lex: https://github.com/mozilla/rust/wiki/Doc-under-construction-FAQ#once-functions
[04:35:07] <dbaupp> lex: *moved out of
[04:35:18] <lex> ChrisMorgan: http://pastebin.com/WxakkfFi
[04:35:32] <lex> dbaupp: okay, hmm...
[04:35:59] *** Quits: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) (Quit: ~ Trillian - www.trillian.im ~)
[04:36:17] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[04:37:39] <lex> dbaupp: alright, cool. i tried using a Cell and that seems to make the compiler happy
[04:37:45] <lex> ChrisMorgan, dbaupp: Thanks!
[04:37:53] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[04:38:52] <ChrisMorgan> We *really* need that error page to link to docs explaining the problem and the interim solution.
[04:39:51] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Client exited)
[04:40:44] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:42:33] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Ping timeout)
[04:45:18] <sfackler> are private impls of a trait a thing?
[04:45:29] *** Joins: pnathan (Adium@moz-EF4F82C8.tukw.qwest.net)
[04:45:44] <dbaupp> sfackler: no, only private traits and private types
[04:46:43] *** Quits: JanC (janc@moz-7B192D41.dsl.scarlet.be) (Ping timeout)
[04:49:12] *** Quits: carllerche (carllerche@6B070D22.7E6A0813.1428D117.IP) (Quit: carllerche)
[04:49:25] <cmr> ChrisMorgan: A strange amount of text-based browser games are popping up, and they're all open source...
[04:49:38] <cmr> that one where you start in the hut in the woods, and now candybox?
[04:49:59] *** Quits: adu (ajr@moz-60B25736.washdc.fios.verizon.net) (Quit: adu)
[04:50:27] *** nrc|afk is now known as nrc
[04:50:53] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[04:51:22] <ChrisMorgan> cmr: "A Dark Room" is the first you're referring to there.
[04:51:27] <cmr> ah yes
[04:52:03] <ChrisMorgan> Candy Box came first, I believe; A Dark Room was inspired by it, and now Candy Box 2 as promised shortly after Candy Box became a rapid success.
[04:52:56] <sp3d> Cookie Clicker
[04:53:00] * Sharp isn't sure what you would gain by making impls private anyway.
[04:53:07] <cmr> eh, cookie clicker isn't an adventure game, or text based.
[04:53:16] <sp3d> oh
[04:53:30] <Sharp> Cookie Clicker is a terrible terrible thing that wasted two days of my life.
[04:53:39] <cmr> cookie clicker is a great optimization problem
[04:53:43] <Sharp> Or, more accurately, that caused me to waste two days of my life.
[04:53:54] <ChrisMorgan> Yeah: how quickly can you figure out how to cheat?
[04:54:08] <cmr> pft, it's more fun to do the maths to win.
[04:54:14] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzz…)
[04:54:21] *** Joins: canhtak (canhtak@moz-66A0054D.wl.t.ulaval.ca)
[04:54:34] <ChrisMorgan> cmr: nah, just set the appropriate variable to Infinity and then it's easy.
[04:54:58] <sfackler> is this legal due to the null pointer optimization? struct Foo; impl Foo { fn foo<'a>(&'a self) -> &'a Option<Foo> { &None } }
[04:55:08] *** Joins: mattm (Mibbit@9A42B64C.3930FB94.28EACA3.IP)
[04:55:10] <ChrisMorgan> It looks like rust-http is now outperforming both Node and Go in my apache_fake test with a request concurrency of 1.
[04:55:25] <acrichto> ChrisMorgan: nice!
[04:55:29] <Sharp> Awesome!
[04:55:32] <Sharp> What did you do?
[04:55:36] <acrichto> sfackler: I think that may work, but you may not want to rely on that
[04:55:39] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[04:55:43] <acrichto> sfackler: you should be able to mamke an inner static
[04:55:50] <sfackler> It does work now
[04:55:54] <sfackler> ooh, nice idea
[04:56:03] <acrichto> sfackler: I dunno if that's intended or a bug though
[04:56:05] <ChrisMorgan> Sharp: waited for acrichto and others to improve runtime performance on various things
[04:56:07] <acrichto> it may well be intended
[04:56:08] <sfackler> static utility_none: Option<Foo> = None; :D
[04:56:18] <Sharp> Good strategy!
[04:56:21] <acrichto> ChrisMorgan: are you making profiles or just using ab and whatnot?
[04:56:27] <ChrisMorgan> acrichto: yep
[04:56:32] <ChrisMorgan> ab, that is
[04:56:38] <acrichto> ChrisMorgan: if you get a profile, I would be very interested in what the bottleneck is
[04:56:51] <acrichto> we're still allocating a callback once per read/write
[04:56:55] <acrichto> which is probably not cool
[04:56:56] <cmr> ChrisMorgan: Hah! My save game from A Dark Room a few months ago still works \o/
[04:57:02] <Sharp> cmr, just to bring you up to date: the reason the generation of tuple structs sucks is that they are translated as function calls.  Unfortunately this leads to some kind of dumb behavior (you can use arbitrary functions in pattern match arms at the moment as long as they sort of match the signature Rust is looking for).
[04:57:11] <Sharp> Or wait, you knew that.
[04:57:12] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[04:57:19] <cmr> I did know the first, the second was a surprise to me.
[04:57:22] <ChrisMorgan> acrichto: I was checking perf on a slightly more complex server and memory allocations directly accounted for over 20% of time spent
[04:57:28] <Sharp> You were part of that conversation.  Never mind :P
[04:57:33] <cmr> :D
[04:57:41] <acrichto> ChrisMorgan: I think I'm going to go look into that right now
[04:57:52] <ChrisMorgan> :-)
[04:59:34] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[05:00:41] <ChrisMorgan> On my dual core machine, Go scales well, with a request concurrency of 8 yielding a 2.6× throughput increase over a concurrency of 1, while Node and Rust are only at 1.4× and 1.3× respectively.
[05:00:46] <mattm> Does Rust 0.8 let you define C ABI functions and pass them back to C for callbacks?
[05:01:09] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[05:01:14] <sfackler> mattm: extern "C" fn foo() { ... }
[05:01:31] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[05:02:15] *** Joins: JanC (janc@moz-9B741F51.dsl.scarlet.be)
[05:02:16] <mattm> sfackler: I declared a function with that signature, but rustc is telling me it has a really strange type
[05:02:59] <mattm> Specifically, it's telling me it has type "extern "C" extern fn(...) -> ..."
[05:03:12] <sfackler> that's what the type is supposed to be
[05:03:21] *** Joins: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP)
[05:03:24] <Sharp> Oh right, cmr, I forgot the other other part--fixing the pattern matching thing requires fixing how the functions are exported cross crate so that we can tell they are constructors, not just external functions.
[05:03:25] <cmr> the two externs is weird
[05:03:31] <sfackler> oh
[05:03:33] <ChrisMorgan> acrichto: your "fire fewer homing missiles", or something else in that two-or-three-day span, improved rust-http performance 20-30%, and it looks to have improved another 30-40% since then
[05:03:36] <sfackler> extern "C" extern?
[05:03:36] <sfackler> weird
[05:03:43] <mattm> I can't change the signature of the parameter, because that's not a valid type
[05:04:02] <cmr> Sharp: That should just be adding something to metadata, right?
[05:04:09] <acrichto> ChrisMorgan: that's awesome, I had no idea it would have that drastic of an effect!
[05:04:14] <Sharp> I imagine so.  Or we could just make them not functions :P
[05:04:27] <acrichto> ChrisMorgan: although the extra 30-40 boost after that I'm not sure where it came from
[05:04:49] <ChrisMorgan> Actually that should have been 10-20%, I think. The 30-40% is cumulative.
[05:04:59] <sfackler> mattm: Here's an example of a C callback that compiles: https://github.com/sfackler/rust-ssl/blob/master/ffi.rs#L53 https://github.com/sfackler/rust-ssl/blob/master/lib.rs#L66
[05:05:08] <Sharp> If we do use the metadata solution we should actually make tuple struct definitions function + metadata definitions, for consistency
[05:05:15] <Sharp> And stop treating them like half struct half function hybrids
[05:05:58] <ChrisMorgan> acrichto: a month or two ago, single-request-concurrency was at around 60% of Go, now it's at around 110%.
[05:06:11] <acrichto> ChrisMorgan: hm the only other optimizations I did were to buffer stdin/stdout, but man those are some really promising numbers
[05:06:37] <ChrisMorgan> Yep, keep going, I'm rooting for you :-)
[05:08:33] *** Quits: aatch (James@moz-B437F499.pocketrent.com) (Client exited)
[05:09:33] <mattm> sfackler: Turns out my function signature was wrong, but the second extern was throwing me off
[05:09:33] <mark_edward> what could be causing this area?
[05:09:40] <mark_edward> what could be causing this *error https://gist.github.com/MarkJr94/7261181
[05:10:09] <ChrisMorgan> dbaupp: how about making "Is Rust I/O fast yet?" That would show really rewarding charts.
[05:10:28] <sfackler> mark_edward: "use std::rt::io::Reader
[05:10:29] <cmr> ChrisMorgan: Write some benchmarks I can run.
[05:10:36] <dbaupp> ChrisMorgan: what cmr said
[05:11:04] <pcmattman> ChrisMorgan: to be fair, buffering I/O isn't necessarily fair, though it could look rewarding :)
[05:11:05] <mark_edward> sfackler: thanks. shouldn't that all be in prelude soon?
[05:11:05] <cmr> ChrisMorgan: And it'd be ideal if they were in the repo so they didn't rot :)
[05:11:09] <pcmattman> (compare apples to apples and all)
[05:11:20] <acrichto> mark_edward: #10179 puts them in the prelude
[05:11:53] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Connection reset by peer)
[05:12:16] <ChrisMorgan> pcmattman: sure it's fair.
[05:12:29] * ChrisMorgan munches bacon
[05:12:41] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[05:12:51] *** Joins: pseudoku (quassel@87DF6901.FE7DDF00.520CDC98.IP)
[05:12:51] <pcmattman> well, it's fair if the thing being compared against also buffers I/O
[05:12:52] * acrichto is jealous of ChrisMorgan 
[05:12:57] <pcmattman> mmm bacon
[05:13:25] <cmr> the flood of mailing list subscribership notifications is beginning! brace yourselves!
[05:13:34] <McPherrin> cmr: Happy mailman day!
[05:13:38] <cmr> \o/
[05:13:41] <dbaupp> ChrisMorgan: also, get brson and/or acrichto to fix https://github.com/mozilla/rust/issues/9436
[05:13:43] <pcmattman> oh yeah, first of november
[05:13:46] <McPherrin> ChrisMorgan: Can I reuse a tcp connection with rust-http client?
[05:14:09] <acrichto> dbaupp: I would love to have that! *promptly runs away*
[05:14:48] <pseudoku> hi!, could someone please explain me why this is required 'impl Reader for ~Reader' ? shouldn't auto dereferencing eliminate the need for such forwardings?
[05:15:07] <dbaupp> ChrisMorgan: and https://github.com/mozilla/rust/issues/9532 and https://github.com/mozilla/rust/issues/6166 (simple! :P )
[05:15:11] <ChrisMorgan> Aww, bacon is finished :-(
[05:15:29] <cmr> And, for good measure, https://github.com/mozilla/rust/issues/\d+
[05:15:31] <ChrisMorgan> pseudoku: ~Reader can't be dereferenced; it's a "trait object"
[05:15:40] <ChrisMorgan> cmr: whoa, dude!
[05:15:55] <cmr> ChrisMorgan: Hey, someone has to do the issue work while I'm rewriting the compiler.
[05:16:02] <cmr> (who started that joke anyway)
[05:16:12] <ChrisMorgan> cmr: whatever happened to your hiatus?
[05:16:14] <cmr> bstrie: it was you!
[05:16:30] <cmr> ChrisMorgan: it ebbs and flows as I get caught up/fall behind with schoolwork
[05:16:51] * ChrisMorgan would perhaps have been wise to take such a hiatus
[05:16:58] <ChrisMorgan> McPherrin: not really, at present
[05:17:49] * dbaupp should probably take a hiatus with his (final) exams starting in a week...
[05:17:49] <pseudoku> ChrisMorgan: if only ~Reader can exist, shouldn't the compiler treat ~Reader as the impl. why should i have to explicitly say that ~Reader is also a Reader ??
[05:18:23] <cmr> Judging by the drastically reduced PR rate, a lot of us have school to deal with.
[05:18:24] *** Joins: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net)
[05:18:30] <pcmattman> dbaupp: and then all finished?
[05:18:51] * pcmattman has a day job, but I don't think I can maintain the PR rate with evenings alone :)
[05:18:59] <ChrisMorgan> pseudoku: it's one of the murkier regions of the language; there are reasons why it's not possible in all circumstances to implement T for ~T, but I've forgotten them at present
[05:19:04] * McPherrin has a day job with a release coming up :(
[05:19:13] <cmr> ChrisMorgan: method signatures involving Self
[05:19:20] <ChrisMorgan> Ah yes, that was it.
[05:19:30] <pseudoku> ChrisMorgan, cmr: thanks
[05:20:04] <dbaupp> pcmattman: just plain undergrad, doing honours and so on.
[05:20:06] * ChrisMorgan would prefer T to be automatically implemented for ~T, &T, etc. if possible with an explanation of why it can't be done if the trait includes such a thing
[05:20:17] <pcmattman> dbaupp: nice :) grats
[05:20:22] <cmr> ChrisMorgan: I agree, it'd make trait objects less jarring
[05:20:43] <ChrisMorgan> cmr: so you're including that on your list of things to do in the new compiler?
[05:21:03] *** Quits: mattm (Mibbit@9A42B64C.3930FB94.28EACA3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[05:21:05] <dbaupp> pcmattman: thanks :)
[05:21:07] <cmr> ChrisMorgan: I don't know if I'll be able to fit it in with instant-compile time
[05:21:16] <dbaupp> ChrisMorgan: also, generics
[05:21:23] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[05:21:30] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:21:37] <ChrisMorgan> cmr: just keep it under 1ms so that the benchmarker can cope with it.
[05:21:50] <cmr> ChrisMorgan: more like 1us!
[05:21:57] <pcmattman> clearly 1ns is where it's at
[05:22:01] <dbaupp> cmr: once compile time is instant fixing the compiler will be super fast, `make check` will be at most 10s
[05:22:17] <ChrisMorgan> cmr: I said 1ms rather than 1µs as a joke, right?
[05:22:19] <sfackler> why would rustc be looking for an Eq impl on T here? https://gist.github.com/sfackler/c0c52f96f17c0fd9afff
[05:22:34] <ChrisMorgan> sfackler: ==
[05:22:35] <pcmattman> dbaupp: don't say things like that, still my beating heart
[05:23:02] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[05:23:17] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[05:23:19] <sfackler> ChrisMorgan: BoundSided::side doesn't return a T though
[05:23:37] <ChrisMorgan> What are Lower and Upper?
[05:23:38] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:24:01] <sfackler> #[deriving(Eq)] pub enum BoundSide { Lower, Upper }
[05:25:11] <sfackler> my only idea is that the compiler's being overly conservative about what it needs to compile the match patterns
[05:25:13] <ChrisMorgan> Does RangeBound<S, T> require T to be Eq?
[05:25:21] <sfackler> Nope, just Ord
[05:25:34] <ChrisMorgan> (Hang on, that wouldn't make sense anyway.)
[05:25:53] <ChrisMorgan> Full code?
[05:25:56] <sfackler> the rest of the code's here: https://github.com/sfackler/rust-postgres/blob/master/types/range.rs
[05:27:19] *** Quits: Scriptor (user@moz-5817C4DC.nyc.res.rr.com) (Client exited)
[05:27:46] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[05:28:13] *** Quits: steven_is_false (user@C5B76363.1FF1EBF8.1ECA502.IP) (Ping timeout)
[05:29:06] *** Quits: adarq (x@moz-87A29603.hsd1.fl.comcast.net) (Quit: Lost terminal)
[05:30:27] <ChrisMorgan> sfackler: I presume you've also put a #[deriving(Eq, Clone)] on BoundSide?
[05:31:03] <sfackler> just Eq
[05:32:41] <ChrisMorgan> I note that if you replace the entire lt method body with `true` you still get the compile failure
[05:33:40] <sfackler> weird
[05:34:23] <sfackler> that's gotta be a compiler bug
[05:35:18] * ChrisMorgan thinks it's tied in with `impl<T: Eq + Ord> Ord for Option<T>`
[05:35:29] <sfackler> yeah, I just saw that
[05:35:36] *** Joins: lkuper (lkuper@9CD1AD84.3778D849.1D6E592A.IP)
[05:37:02] <sfackler> oh well, I probably shouldn't have been doing that anyways
[05:37:41] <ChrisMorgan> Still a little confusing, but I think it's trying to figure out if it clashes or not and getting tangled.
[05:37:51] <sfackler> yeah
[05:38:13] <ChrisMorgan> I don't think negative constraints can be expressed, which means that you can't actually define what you're trying to define.
[05:40:06] *** mjrosenb is now known as dsharp
[05:40:10] <ChrisMorgan> sfackler: you should reduce it to a minimal test case and file a bug about it
[05:40:22] <sfackler> will do
[05:40:28] <sfackler> newtypes to the rescue here though
[05:40:51] <ChrisMorgan> That's one way to tackle it.
[05:41:14] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[05:42:09] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[05:43:05] *** dsharp is now known as mjrosenb
[05:43:46] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:44:03] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[05:44:04] *** Joins: DAddYE_ (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[05:44:35] *** Joins: m_kato (m_kato@moz-C286AD9A.bitcat.net)
[05:46:02] <pseudoku> is it currently possible to use gdb to debug rustc? what flags are needed to compile rustc with debuginfo?
[05:46:12] <cmr> pseudoku: -Z extra-debug-info
[05:46:25] <cmr> I think --enable-debug to configure does that now
[05:46:34] <cmr> but you might need to set the rustflags yourself
[05:48:00] *** Joins: eddyb (eddy@FE23D96E.F33C1089.FB866788.IP)
[05:48:07] <pseudoku> cmr: thanks, is there a simpler way to generate stack trace of rustc when there is compiler error?
[05:48:23] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[05:48:24] <cmr> pseudoku: you don't need debuginfo just to get a stack trace.
[05:48:27] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:48:38] <cmr> but no, there isn't.
[05:49:18] <pseudoku> cmr: thanks.
[05:50:16] <ktt3ja> is this doable by an undergrad in one month? https://github.com/mozilla/rust/issues/3591
[05:50:49] <McPherrin> ktt3ja: I would think so, yes.
[05:51:11] <Yurume> ktt3ja, if you have designed a regex engine before then it would, otherwise I'm not sure.
[05:51:23] <ktt3ja> I haven't :x
[05:51:32] <cmr> ktt3ja: someone recently had written some sort of regex thingy.
[05:51:42] <McPherrin> ktt3ja: There are some pretty good guides to implementing regular expression libraries, so you could just follow along with one.
[05:51:42] *** Quits: canhtak (canhtak@moz-66A0054D.wl.t.ulaval.ca) (Quit: canhtak)
[05:51:44] <cmr> ktt3ja: how much time is a month? a few hours a week?
[05:52:06] <McPherrin> Basic regexes using the thompson NFA construction shouldn't be too hard
[05:52:08] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[05:52:23] <ChrisMorgan> acrichto: is this perf report of any value? https://pastebin.mozilla.org/3394415
[05:52:46] <Yurume> McPherrin, the road to the good regex pattern is littered with many tradeoffs (and there are surely people not happy with Thompson NFA alone)
[05:52:56] <ktt3ja> cmr: assuming no burnout, I should be able to devote 10 hours a week
[05:53:02] <cmr> ChrisMorgan: Can you find out what function that mapps to in the vdso?
[05:53:04] <McPherrin> Yurume: Indeed.
[05:53:24] <cmr> ktt3ja: Should be doable in a month, certainly.
[05:53:33] <McPherrin> The gap between re2 and pcre is large.
[05:53:36] <Yurume> there are some practical optimizations only possible with backtracking implementations, etc.
[05:53:36] <ChrisMorgan> acrichto: that's for https://github.com/chris-morgan/rust-http/blob/master/src/examples/server/apache_fake.rs, 10000 requests with ab then another 100000 requests with ab, -c 1 each time.
[05:53:37] <cmr> ktt3ja: even if it's basic, something > nothing
[05:53:45] <ChrisMorgan> cmr: how?
[05:53:50] <ktt3ja> cmr: writing a regex engine, or writing a binding of some other library?
[05:53:53] <cmr> ChrisMorgan: I have no idea.
[05:53:57] <cmr> ktt3ja: writing a regex engine.
[05:54:00] <acrichto> ChrisMorgan: interesting, I wouldn't expect BlockedTask::try_block being up there
[05:54:02] <McPherrin> Fwiw, I wrote a basic regex engine in rust on a flight one (but it was crap)
[05:54:08] <acrichto> ChrisMorgan: but otherwise yeah it looks like we should reduce our allocations
[05:54:09] <cmr> ktt3ja: a binding would probably take 10-30 minutes :p
[05:54:28] <cmr> acrichto: it looks like we're reading the clock too often again too.
[05:54:35] <Yurume> rust-bindgen can do much of dirty jobs :)
[05:54:36] <ktt3ja> hmm, my professor would probably give me low grade if I were to do a binding then...
[05:54:57] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[05:55:08] <Yurume> ktt3ja, is it a sort of undergrad/bachelor's or master's thesis?
[05:55:11] <cmr> ChrisMorgan: Also, you should make http://dtrace.org/blogs/brendan/2012/03/17/linux-kernel-performance-flame-graphs/
[05:55:25] *** nrc is now known as nrc|mfbt
[05:55:26] <ktt3ja> Yurume: just a final project for OS class
[05:55:37] <cmr> ktt3ja: the UVA one?
[05:55:47] <ktt3ja> Yurume: we can do anything under 4 criteria (fun, useful, technically interesting, relevant)
[05:55:52] <ktt3ja> cmr: yea
[05:55:54] <Yurume> aha
[05:56:14] <Yurume> yeah, I think you need to actually write a regex engine in Rust in that case.
[05:56:50] <ChrisMorgan> cmr: looks interesting, I'll see if I can figure it
[05:57:26] <cmr> ktt3ja: something to look into beyond your drop-dead simple regex is lua patterns and PEG
[05:57:34] <acrichto> cmr: where's the clock function?
[05:57:38] <cmr> something interesting, that is.
[05:57:44] <cmr> acrichto: read_hpet
[05:58:01] <acrichto> oh huh, I dunno where that's even from
[05:58:08] <cmr> acrichto: the clock has shown up high in rt profiles before.
[05:58:12] <cmr> a flamegraph will show us why.
[05:58:33] <ChrisMorgan> BTW, that was just from copying the first screenful of contents of `perf report`; I don't actually know what I'm doing with it all.
[05:58:38] <ktt3ja> cmr: I will come ask about this later. My brain is too dead right now to process anything.
[05:58:54] <ktt3ja> need to go to sleep @_@
[05:58:58] <cmr> ktt3ja: sleep well :)
[05:59:08] <ktt3ja> thank you :)
[05:59:19] <cmr> ktt3ja: ssbr and some others have looked into this problem before. their research is on the ML and wiki, should be useful
[05:59:35] <ktt3ja> what's ML?
[05:59:37] <cmr> acrichto: and depending on what's doing that memset, we might have an easy optimiatoin there too
[05:59:39] <cmr> mailing list
[05:59:54] <ktt3ja> ah k, thank you
[05:59:56] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[05:59:58] *** Quits: ktt3ja (Mibbit@moz-6B6EE8C0.hsd1.va.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:01:12] *** Joins: adarq (x@moz-87A29603.hsd1.fl.comcast.net)
[06:02:19] <Sharp> We just throw out parameter names in trait methods, right?  Like, we can call the parameters whatever we want in the impl?
[06:02:45] <sfackler> yes
[06:02:54] <Sharp> Okay, thanks.
[06:03:00] <cmr> Sharp: unless it has c hanged, they aren't even needed.
[06:03:06] <Sharp> No, they aren't
[06:03:29] * Sharp is trying to figure out whether he could reuse trait method signatures for tuple structs.
[06:05:03] <ChrisMorgan> cmr, acrichto: 1MB SVG of uncertain value: http://chrismorgan.info/temp/perf-apache_fake.svg
[06:05:53] <cmr> ChrisMorgan: lots of unknown symbols in there :(
[06:06:18] <ChrisMorgan> cmr: in the perf script step, I did get "Failed to open /tmp/perf-14743.map, continuing without symbols".
[06:06:24] <ChrisMorgan> Not sure what it means, though.
[06:06:28] <cmr> neither do I
[06:06:34] <cmr> I don't know what I'm doing either!
[06:06:43] <acrichto> step 1, download the svg, step 2, attempt to understand the svg
[06:06:48] <acrichto> I have completed step 1
[06:06:56] <cmr> acrichto: have you seen flame graphs before?
[06:07:10] <acrichto> I've seen the ones you've posted
[06:07:18] <eddyb> they are graphs using flames instead of bars, right?
[06:07:24] <eddyb> *sopro*
[06:07:49] <eddyb> hey, that's cool, you can see inside the kernel
[06:07:52] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:07:54] <cmr> acrichto: so every bar is a function call. width is proportional to the amount of time spent in it.
[06:08:01] <cmr> acrichto: bars stacked on top are called functions.
[06:08:03] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:08:13] <acrichto> does this include the kernel as well?
[06:08:17] <cmr> yes
[06:08:19] <cmr> everything.
[06:08:39] <ChrisMorgan> Including ab, firefox-trunk, etc.
[06:08:52] <cmr> Well, no, only what was recorded.
[06:09:07] <cmr> You *can* do systemwide traces, but if you did `perf record apache_fake`, that's just what we're looking at.
[06:09:08] <acrichto> hm, I'm not really reading much from this
[06:09:14] <acrichto> I can barely find the parts where we're executing
[06:09:19] <acrichto> which I suppose is good
[06:10:01] <ChrisMorgan> cmr: it had -a and a simple perf report is showing things from ab, a couple from swapper and even one from firefox-trunk
[06:10:15] <ChrisMorgan> I can give you the 62MB `perf script` output if it'll help.
[06:10:25] <acrichto> ChrisMorgan: could this get generated without kernel backtraces?
[06:10:45] <ChrisMorgan> What precisely do you mean by that?'
[06:10:50] <Sharp> I think the only difference even in principle between tuple structs and trait methods during parsing is that we don't allow optional names for tuple struct arguments, and we don't allow self for tuple struct arguments.  Since we throw the first of those away anyway and the latter is not in all functions, I think they can probably share the same structure
[06:11:07] <acrichto> ChrisMorgan: oh I was just hoping to reduce the noise in that
[06:11:13] <acrichto> ChrisMorgan: although perhaps I just don't know how to read these
[06:11:17] <Sharp> Then we don't have to worry about the body since we know there isn't one, and I expect we already export trait signatures properly?
[06:11:29] <cmr> acrichto: btw, you can hover over a bar to see the full symbol.
[06:12:34] <Sharp> Neat, it's a New Relic style graph
[06:13:08] <ChrisMorgan> cmr: uv_run is what is calling clock_gettime
[06:13:52] *** Quits: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[06:14:08] *** Quits: wolfwood (wolfwood@moz-A19F104D.pitbpa.fios.verizon.net) (Ping timeout)
[06:14:45] <ChrisMorgan> And that clock_gettime call seems to be very expensive.
[06:15:02] <pcmattman> time syscalls are expensive
[06:15:37] * Sharp has always wondered how you accurately profile things given that syscalls are expensive.
[06:15:54] *** Quits: eevee (eevee@moz-DD9FF470.evrt.wa.frontiernet.net) (Ping timeout)
[06:16:00] <cmr> Sharp: you don't really need to make syscalls to profile.
[06:16:17] <Sharp> What do you do for time measurement?
[06:16:20] <cmr> Sharp: perf uses the event counters that the CPU maintains, and only infrequently waits up.
[06:16:29] <pcmattman> if the system has a constant TSC you can use rdtsc, if it's available
[06:16:29] <Sharp> Ah, okay.  Cool.
[06:16:34] <pcmattman> or yeah, event counters
[06:17:04] <Sharp> I suppose all you really need are relative sizes as long as you know roughly how long the whole thing took.
[06:17:47] <ChrisMorgan> I presume rust_start_thread is called for each task, and thus each task started spends a *long* time in clock_gettime.
[06:18:22] <acrichto> ChrisMorgan: rust_start_thread is run on startup, not for each task, I saw clock_gettime called by uv_run a lot
[06:18:51] <ChrisMorgan> acrichto: then why did it get 11353 samples of it?
[06:19:04] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:19:06] <ChrisMorgan> Oh, sorry, that just means that it spent that much *time* in it.
[06:19:07] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:19:25] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[06:19:26] <acrichto> ChrisMorgan: looks like each turn of the loop calls uv__update_time
[06:19:54] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[06:20:26] <acrichto> ChrisMorgan: yep, that calls uv__hrtime which calls clock_gettime
[06:20:58] *** Quits: DAddYE_ (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[06:20:59] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[06:20:59] <strcat> clock_gettime doesn't have to do a syscall, depends on the parameters
[06:21:01] * ChrisMorgan wishes that SVG-generating script would always include and never truncate labels, so that the browser's search functionality could be comparatively useful
[06:21:28] <ChrisMorgan> acrichto: "each turn of the loop"—what loop be that?
[06:21:36] <strcat> it's one of the functions with a fast vdso implementation
[06:21:40] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[06:22:08] <cmr> strcat: a vdso thing was showing up at 10% of the profile; do you know how to figure out what corresponds to the vdso address?
[06:22:13] <acrichto> ChrisMorgan: the event loop for uv
[06:22:33] <acrichto> ChrisMorgan: it's basically while (work_available()) do_work()
[06:22:56] * ChrisMorgan wonders why it would need a clock
[06:22:58] <strcat> cmr: if a vdso clock_gettime/gettimeofday is showing up in the profile, you're just using a too high res timer or it's not going to get faster
[06:23:04] <strcat> not sure how to resolve it
[06:23:10] <strcat> isn't it part of the symbol shown in perf?
[06:23:24] <cmr> no
[06:23:27] <acrichto> ChrisMorgan: from libuv's point of view apparently it has "one time" per turn of the event loop
[06:23:41] <acrichto> ChrisMorgan: they have a helper function like uv_get_time and it doesn't hit the syscall every time it's called
[06:23:52] <acrichto> in theory one turn of the event loop is "quick"
[06:24:10] <strcat> getting the time definitely doesn't require a syscall on linux
[06:25:47] <strcat> https://github.com/torvalds/linux/blob/master/arch/x86/vdso/vclock_gettime.c#L236
[06:26:26] <strcat> so, as long as you use CLOCK_REALTIME, CLOCK_MONOTONIC, CLOCK_REALTIME_COARSE or CLOCK_MONOTONIC_COARSE it doesn't need a syscall
[06:26:56] <strcat> (assuming a modern CPU)
[06:27:14] <strcat> hm
[06:27:20] <ChrisMorgan> strcat: what is "modern"? Is six years old?
[06:27:59] <ChrisMorgan> acrichto: wouldn't that just require `tick++`?
[06:28:51] <acrichto> ChrisMorgan: I think this is tracking clock time, not loop turns, so you'd want to update it. Loop turns can take forever if they wait for I/O
[06:29:07] <sfackler> strcat: is this supposed to compile? struct Foo; impl Foo { fn foo<'a>(&'a self) -> &'a Option<Foo> { &None } }
[06:29:21] <strcat> no
[06:29:35] * sfackler goes to file a bug
[06:29:41] <ChrisMorgan> Why not?
[06:29:43] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[06:29:43] <strcat> it's not supposed to compile
[06:29:48] <strcat> because None isn't special
[06:30:06] <sfackler> it does right now
[06:30:07] * ChrisMorgan was thinking the &None can be &'static None, and so '
[06:30:12] <ChrisMorgan> 'a < 'static
[06:30:15] <strcat> ah maybe it gets special-cased then
[06:30:28] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:30:39] <ChrisMorgan> That wouldn't be a special case, that'd could be any literal. But I'm not sure if I'm right or not.
[06:30:46] <cmr> any constexpr
[06:30:52] <ChrisMorgan> Yeah
[06:30:59] <acrichto> sfackler: fn foo() -> &int is also interpreted as "fn foo() -> &'static int" I believe right now
[06:31:06] <acrichto> which I would view as a bug
[06:31:27] <sfackler> I would think it should either do that or refuse to compile
[06:31:53] <strcat> sfackler: ah sorry, it's not generic
[06:31:59] * strcat missed that
[06:32:24] <cmr> Closure reform has landed!
[06:32:32] <cmr> Brace yourselfs, the wrath of rust-ci approaches.
[06:32:33] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:32:36] *** Quits: wting (wting@4F978BD6.5564A9BA.9510F13D.IP) (Ping timeout)
[06:32:41] <ChrisMorgan> \o/
[06:32:43] *** Quits: gavinb (gavinb@moz-CA19A0CF.vic.adsl.internode.on.net) (Ping timeout)
[06:32:43] *** Quits: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP) (Ping timeout)
[06:32:52] * ChrisMorgan quickly rushes out to rebuild
[06:33:11] <pnathan> cmr: what's the delta?
[06:33:12] <sfackler> strcat: not generic?
[06:33:20] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[06:33:20] *** Quits: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP) (Ping timeout)
[06:33:24] <strcat> I thought you had Option<T>
[06:33:31] <cmr> pnathan: lines changed?
[06:33:32] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[06:33:33] <cmr> 451 additions and 238 deletions
[06:33:35] * strcat should try reading next time
[06:33:37] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:33:42] <pnathan> (i.e., what was the effect of the changes to closures, I didn't follow the mailing list implications too well on this one)
[06:33:48] <cmr> oh
[06:34:04] <cmr> And actually I think rustc just *accepts* the new form, not actually removing the old ones
[06:34:48] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[06:34:53] *** Quits: nfroidure (nfroidure@moz-8A81D933.w90-34.abo.wanadoo.fr) (Ping timeout)
[06:35:14] *** Joins: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP)
[06:35:28] <ChrisMorgan> Yeah, with such a small delta it can't be removing the old style...
[06:36:21] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[06:36:28] <ChrisMorgan> Tut tut, someone landed such a thing without adding the keywords to syntax highlighters.
[06:36:46] * cmr pretends he didn't r+ it
[06:37:20] <ChrisMorgan> Please, reviewers: if changes will impact syntax highlighters (keywords, syntax changes, even prelude changes for at least Vim), ask for syntax files to be updated too
[06:37:21] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:37:33] * acrichto will actually look into removing uv alocations now
[06:37:56] *** Joins: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP)
[06:37:59] <cmr> ChrisMorgan: it has never crossed my mind, I appreciate the notice.
[06:38:07] <ChrisMorgan> acrichto: yay!
[06:38:23] <ChrisMorgan> cmr: I should post that request to the mailing list.
[06:38:56] * sfackler wishes you could destructure struct fields by ref
[06:38:57] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[06:39:01] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[06:39:05] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:39:34] <ChrisMorgan> sfackler: can't you?
[06:39:47] <sfackler> I can't figure out how to
[06:40:01] <sfackler> match x { SomeStruct { ref a } => ... }
[06:40:02] <sfackler> doesn't work
[06:40:05] <cmr> let Struct { ref foo: bar } = S;
[06:40:07] *** Quits: lkuper (lkuper@9CD1AD84.3778D849.1D6E592A.IP) (Quit: lkuper)
[06:40:46] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:40:47] *** Joins: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP)
[06:40:55] <Sharp> Do traits / trait signatures cross-crate?
[06:40:59] <Sharp> *work cross-crate.
[06:41:06] <sfackler> cmr: error: found `ref` in ident position
[06:41:11] <cmr> sfackler: hm :\
[06:41:50] <sfackler> Sharp: as in implementing a trait in a crate that it wasn't defined in? yeah
[06:41:54] * ChrisMorgan also wants to post to the mailing list asking if we can get rid of the copyright headers on all the files, which have no legal value
[06:41:57] <acrichto> ChrisMorgan: speaking of I/O perf improvements, https://github.com/mozilla/rust/blob/master/src/librustuv/uvll.rs#L662 is interesting...
[06:42:00] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:42:13] <Sharp> sfackler: Do you know where they're encoded?
[06:42:28] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[06:42:29] <sfackler> nope
[06:42:29] *** Joins: ross (ross@moz-5EA04060.br.br.cox.net)
[06:43:03] <Sharp> Hrm.
[06:43:16] <ChrisMorgan> acrichto: I don't know when that gets called, so it doesn't mean much to me
[06:43:25] <sfackler> cmr: ah, it's SomeStruct { a: ref a }
[06:43:29] <sfackler> there's no shorthand for it
[06:43:30] <cmr> sfackler: oh!
[06:43:34] <cmr> yeah that makes sense
[06:43:36] <acrichto> ChrisMorgan: oh it's basically initializing a buffer maybe 3 times through 3 extra layers of functions
[06:44:21] <ChrisMorgan> acrichto: but is that initialisation that happens regularly or just at the start?
[06:44:45] <acrichto> ChrisMorgan: nah this is every read/write, it pales in comparison to a memory allocation though so doesn't really mean much
[06:45:25] *** Quits: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP) (Ping timeout)
[06:45:25] *** Quits: wting (wting@4F978BD6.5564A9BA.9510F13D.IP) (Ping timeout)
[06:45:25] *** Quits: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP) (Ping timeout)
[06:45:34] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[06:45:57] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:46:26] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:47:24] *** Joins: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP)
[06:47:30] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[06:47:45] <ChrisMorgan> cmr: I'm failing to find a PR for the closure reform. Where is it all?
[06:48:02] <cmr> ChrisMorgan: https://github.com/mozilla/rust/pull/10187
[06:48:42] <ChrisMorgan> Ah, hidden in "Remove mocks" :-/
[06:48:44] <cmr> ChrisMorgan: it's only the first part
[06:48:52] <cmr> yeah, pcwalton is awful about that :p
[06:48:59] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[06:49:40] *** Joins: nfroidure (nfroidure@moz-186EBCA3.w90-18.abo.wanadoo.fr)
[06:49:55] *** Joins: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP)
[06:50:00] <ChrisMorgan> The Rust contribution guide threatened dire punishments for that sort of thing.
[06:50:03] <sfackler> there was at some point a separate pr for closure reform
[06:51:17] * ChrisMorgan wonders whether pcwalton has his employer's permission to mark things CC0
[06:52:21] * ChrisMorgan also doesn't like the fact that this closure reform isn't documented yet
[06:52:46] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[06:52:48] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[06:55:19] *** Quits: ofeldt (ofeldt@moz-7BB72199.dip0.t-ipconnect.de) (Ping timeout)
[06:56:01] *** Joins: fabiand (fabiand@moz-53A2498F.adsl.alicedsl.de)
[06:56:20] *** Quits: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP) (Ping timeout)
[06:56:31] *** Quits: eddyb9 (eddy@FE23D96E.F33C1089.FB866788.IP) (Ping timeout)
[06:56:40] *** Quits: km (quassel@moz-777F24DE.kevinmehall.com) (Ping timeout)
[06:56:55] *** Quits: wting (wting@4F978BD6.5564A9BA.9510F13D.IP) (Ping timeout)
[06:57:06] *** Quits: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP) (Ping timeout)
[06:58:56] *** Joins: ofeldt (ofeldt@moz-7BB72199.dip0.t-ipconnect.de)
[07:00:45] *** Joins: wting (wting@4F978BD6.5564A9BA.9510F13D.IP)
[07:00:55] *** Joins: stvc (quassel@DDF9BE86.571456BD.9510F13D.IP)
[07:01:49] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[07:01:51] *** Joins: km (quassel@moz-777F24DE.kevinmehall.com)
[07:02:23] *** Quits: ofeldt (ofeldt@moz-7BB72199.dip0.t-ipconnect.de) (Ping timeout)
[07:02:35] *** Joins: Jackneill (Jackneill@moz-224A92F.pool.digikabel.hu)
[07:03:01] *** Quits: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:03:27] *** Joins: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP)
[07:03:59] <bjz> where is std::io? are we moving to std::rt::io now?
[07:04:15] <ChrisMorgan> bjz: std::io is gone, std::rt::io hasn't been moved hither or yon yet.
[07:05:21] <adarq> what's the 'rt' mean in that path ?
[07:05:23] <bjz> ChrisMorgan: what do we use for io::file_reader now?
[07:05:29] <bjz> adarq: runtime
[07:05:31] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[07:05:32] <adarq> oooo
[07:05:33] <adarq> thanks
[07:05:54] <bjz> adarq: it's a transitionary module
[07:05:56] *** Joins: ofeldt (ofeldt@moz-7BB72199.dip0.t-ipconnect.de)
[07:06:35] <ChrisMorgan> bjz: Path.open_writer
[07:06:46] <bjz> ChrisMorgan: coolies
[07:06:58] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[07:07:19] <ChrisMorgan> http://static.rust-lang.org/doc/master/std/rt/io/file/trait.FileInfo.html#method.open_writer
[07:08:38] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[07:08:54] <ChrisMorgan> Eridius: the use of #[cfg(windows)] means that one can't access the docs for std::path::windows::Path on static.rust-lang.org :-(
[07:09:00] *** Joins: Ferreus (ferreus@moz-682715CF.dip0.t-ipconnect.de)
[07:09:22] <bjz> ChrisMorgan: what is .read_c_str now?
[07:09:27] <cmr> ChrisMorgan: nothing to do about that really.
[07:09:31] <ChrisMorgan> No idea.
[07:09:36] <bjz> ChrisMorgan: I want a FileReader -> ~str
[07:10:22] *** Quits: ofeldt (ofeldt@moz-7BB72199.dip0.t-ipconnect.de) (Ping timeout)
[07:10:23] <ChrisMorgan> Eridius: is there a reason std::path::windows is Windows-only? I can easily come up with cases where I want at least parts of it on other operating systems.
[07:10:43] <cmr> Hm, that's a good point.
[07:10:58] <SiegeLord> bjz: There is a read_line in the BufferedReader trait
[07:11:12] <bjz> SiegeLord: I want the whole thing
[07:11:18] <SiegeLord> Otherwise... there's nothing except read
[07:11:26] <Sharp> It seems like you can define trait methods that don't reference self or the self class at all
[07:11:29] <Sharp> But I can't figure out how to use them
[07:11:35] <cmr> ReaderUtil has read_until_end or something like that.
[07:11:41] <cmr> Sharp: TraitName::method_name()
[07:11:43] <ChrisMorgan> bjz: you mean read_to_end?
[07:11:44] <dbaupp> Sharp: you can't (for the moment)
[07:11:49] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.2)
[07:11:53] <Sharp> dbaupp: Ah.
[07:12:00] <SiegeLord> Oh actually, there've been some new methods since last I checked
[07:12:04] <Sharp> cmr: Doesn't work :(
[07:12:15] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[07:12:15] *** ChanServ sets mode: +o tjc
[07:12:20] <Sharp> Or maybe it does.
[07:12:22] <bjz> ChrisMorgan: so you'd convert that to a ~str?
[07:12:31] <Sharp> I miiight be an idiot, hold on
[07:12:35] <dbaupp> Sharp: the "standard" hack is to take an ignored Option<Self> that you pass like Trait::method(None::<type>) to specify the Self type
[07:12:41] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: Places to go, people to annoy)
[07:12:52] <dbaupp> (assuming I understand the problem...)
[07:12:56] <cmr> dbaupp: ohh that's a new one to me. nice workaround!
[07:13:00] <ChrisMorgan> bjz: that will read the rest of the reader and turn it into a string
[07:13:16] * ChrisMorgan has seen that hack far too frequently
[07:13:20] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[07:13:56] *** Joins: ofeldt (ofeldt@moz-7BB72199.dip0.t-ipconnect.de)
[07:14:01] <SiegeLord> Although not sure I'm exactly a fan of the tons of read_be_* and read_le_* methods...
[07:14:02] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[07:14:23] <SiegeLord> You'd think one'd use a trait... better than nothing I guess
[07:15:24] <dbaupp> SiegeLord: that's a good idea, trait ReadBe {}, trait ReadLe {} impl'd for the various types...
[07:15:31] <SiegeLord> Yeah, basically
[07:15:32] <Sharp> Oh bah, no, you're right, dbaupp.
[07:15:41] <Sharp> I was being an idiot though :P
[07:15:41] *** Quits: ofeldt (ofeldt@moz-7BB72199.dip0.t-ipconnect.de) (Ping timeout)
[07:15:59] *** Joins: eddyb9 (eddy@971C3AAF.8D069E5A.4A6B528C.IP)
[07:16:24] <Sharp> That's kind of annoying
[07:16:36] <Sharp> Seeing as it means I can't test whether non-self trait methods are exported :P
[07:17:02] *** Quits: heftig (heftig@moz-858AE1B9.dip0.t-ipconnect.de) (Quit: Quitting)
[07:19:27] *** Joins: ofeldt (ofeldt@moz-7BB72199.dip0.t-ipconnect.de)
[07:20:25] *** Joins: heftig (heftig@moz-858AE1B9.dip0.t-ipconnect.de)
[07:24:40] <Sharp> Yayyyy
[07:24:56] <Sharp> Cross crate generic trait impl and use => segfault
[07:25:08] <cmr> Really?
[07:25:12] <Sharp> Yep.
[07:25:15] <cmr> Huh
[07:25:26] <Sharp> Well, I deliberately went for a relatively complex example
[07:25:34] <Sharp> So it might be one or more of the features I was using (named lifetimes etc.).
[07:25:44] <cmr> I figured all of those bugs were ironed out by now :]
[07:25:46] <cmr> "\
[07:25:48] <cmr> Geh
[07:25:50] <cmr> :\
[07:25:55] <Sharp> Let me find a reduced testcase.
[07:26:09] * Sharp doesn't know if he's good at finding crashbugs, or Rust is just unstable :D
[07:26:14] <Sharp> Probably the latter.
[07:29:39] <eddyb9> nah, you're just good at breaking shit :P
[07:30:11] <eddyb9> what magic are you playing with now?
[07:30:32] <Sharp> Let me post it
[07:30:37] *** Quits: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP) (Ping timeout)
[07:30:41] <Sharp> It gives me all sorts of lifetime errors if I don't include named lifetimes BTW
[07:30:57] *** Joins: cade (cade@66A6305B.C2D6DAC0.9510F13D.IP)
[07:31:30] <eddyb9> I remember I broke traceur's lambda cover grammar by using three differemt features at once
[07:31:43] *** Quits: alisdair (textual@28441AAB.AC6E1995.F0AE27BD.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:31:56] <eddyb9> s/lambda/arrow functions
[07:32:31] * eddyb9 wonders if we're lacking in combinatorial feature mixing tests
[07:32:42] *** Joins: sk (sk@61A494B3.BA40E8A.AAC02D62.IP)
[07:32:52] <cmr> eddyb9: rustc is a fairly decent testcase.
[07:33:00] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[07:33:36] <Sharp> https://gist.github.com/pythonesque/7262009
[07:34:50] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[07:35:14] <Sharp> Oh, wait, ,it's working now
[07:35:19] <Sharp> I think
[07:35:23] * Sharp isn't sure what segfaulted
[07:35:38] <Sharp> Oh lol, I think I ran the library instead
[07:35:40] <Sharp> Never mind me :)
[07:36:36] * Sharp needs to stop assuming Rust is screwing up and look for user error like he does in every other language :D
[07:37:45] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[07:38:51] <SiegeLord> One day Rust will be stable... its users will never be though!
[07:38:51] *** Joins: canhtak (canhtak@moz-66A0054D.wl.t.ulaval.ca)
[07:39:26] *** Quits: canhtak (canhtak@moz-66A0054D.wl.t.ulaval.ca) (Quit: canhtak)
[07:42:54] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[07:47:22] *** Joins: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net)
[07:49:04] *** Quits: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net) (Ping timeout)
[07:53:28] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[08:00:16] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[08:01:01] *** Joins: nsf (nsf@moz-EEF3238A.convex.ru)
[08:08:30] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[08:13:55] *** Joins: engla (engla@moz-14524F0F.selucle.dyn.perspektivbredband.net)
[08:18:45] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[08:19:20] *** Quits: KindOne (KindOne@moz-4B1CCA0B.dynamic.ip.windstream.net) (Ping timeout)
[08:20:03] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[08:21:11] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:21:52] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[08:23:04] *** Joins: KindOne (KindOne@moz-866CDBD2.dynamic.ip.windstream.net)
[08:31:28] *** Joins: Ms2ger (Ms2ger@moz-6EEC6E4D.adsl-dyn.isp.belgacom.be)
[08:31:58] *** Joins: squiddy (squiddy@moz-A873F9EA.adsl.alicedsl.de)
[08:32:49] *** Quits: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net) (Ping timeout)
[08:32:51] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[08:38:05] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[08:39:42] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[08:39:49] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Quit: Leaving...)
[08:41:22] *** Joins: bholley (anonymous@moz-ECA833F6.dip0.t-ipconnect.de)
[08:42:33] *** Joins: nkoep (nik@moz-17B4884B.pool.mediaways.net)
[08:48:58] *** Quits: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net) (Ping timeout)
[08:49:08] *** Quits: engla (engla@moz-14524F0F.selucle.dyn.perspektivbredband.net) (Ping timeout)
[08:49:17] *** Joins: engla (engla@moz-14524F0F.selucle.dyn.perspektivbredband.net)
[08:51:09] *** Quits: engla (engla@moz-14524F0F.selucle.dyn.perspektivbredband.net) (Ping timeout)
[08:53:20] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[08:54:15] *** Joins: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net)
[08:54:49] <Sharp> Oh bah
[08:55:04] <Sharp> Structs need to be special cased because they need an occurs check, I don't think functions do
[08:58:45] * Ms2ger wants restricted enums already
[08:59:39] *** Quits: nrc|mfbt (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:02:43] <Sharp> As in intersections?
[09:03:09] *** Joins: nrc|mfbt (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[09:03:26] *** nrc|mfbt is now known as nrc
[09:04:34] *** Quits: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net) (Quit: leaving)
[09:08:16] *** Quits: boredomist (ruqs@B16F530C.DC641F2C.BCAEBB33.IP) (Ping timeout)
[09:08:22] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[09:10:10] *** Joins: eevee (eevee@moz-7B6C48E3.evrt.wa.frontiernet.net)
[09:16:00] *** Joins: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr)
[09:16:23] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: ZZZzzz…)
[09:16:44] *** Quits: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au) (Quit: gavinb)
[09:22:12] *** Quits: Liothen (liothen@moz-266BCA86.spkn.qwest.net) (Quit: Textual IRC Client: www.textualapp.com)
[09:25:39] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[09:26:27] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Client exited)
[09:26:48] *** Joins: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net)
[09:28:18] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[09:28:39] *** Quits: DAddYE (DAddYE@moz-98D3933F.hsd1.ca.comcast.net) (Ping timeout)
[09:30:38] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:31:10] *** Joins: CarpNet (ac@moz-FD24B77.sohonet.co.uk)
[09:33:23] *** Joins: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP)
[09:33:49] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[09:35:23] <kimundi> ChrisMorgan: The copyright headers on every file where explicitly addesd because the legal team said they need to exist. I remember a time where they didn't exist, and a mailing list announcement that explained why they needed to get added
[09:35:38] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Ping timeout)
[09:35:58] *** Quits: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr) (Quit: pyrac)
[09:36:03] *** Quits: pseudoku (quassel@87DF6901.FE7DDF00.520CDC98.IP) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[09:36:21] *** Joins: pseudoku (quassel@87DF6901.FE7DDF00.520CDC98.IP)
[09:36:29] *** pseudoku is now known as mukilan
[09:36:58] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Ping timeout)
[09:41:30] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[09:42:16] *** Quits: bholley (anonymous@moz-ECA833F6.dip0.t-ipconnect.de) (Ping timeout)
[09:42:44] *** Joins: bholley (anonymous@moz-76489EBF.dip0.t-ipconnect.de)
[09:48:44] *** Joins: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr)
[09:50:15] *** Joins: robertknight (robertknig@moz-54528EE0.wby.mendeley.com)
[09:53:02] *** Joins: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au)
[09:53:46] *** Quits: ofeldt (ofeldt@moz-7BB72199.dip0.t-ipconnect.de) (Ping timeout)
[09:54:13] *** Quits: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr) (Quit: pyrac)
[09:54:13] *** Quits: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP) (Ping timeout)
[09:57:11] *** Joins: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de)
[10:01:36] *** Quits: m_kato (m_kato@moz-C286AD9A.bitcat.net) (Quit: Leaving...)
[10:03:59] *** Joins: sweet_kid (Upasana@93CB8004.98D8CFFD.1228A288.IP)
[10:06:39] *** Quits: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de) (Ping timeout)
[10:06:39] *** Quits: KindOne (KindOne@moz-866CDBD2.dynamic.ip.windstream.net) (Ping timeout)
[10:07:52] *** Joins: mib_2xmk3e (Mibbit@moz-54ECA4E0.retail.telecomitalia.it)
[10:08:33] *** Quits: mib_2xmk3e (Mibbit@moz-54ECA4E0.retail.telecomitalia.it) (Quit: http://www.mibbit.com ajax IRC Client)
[10:09:57] *** Quits: sweet_kid (Upasana@93CB8004.98D8CFFD.1228A288.IP) (Quit: Leaving)
[10:10:07] *** Joins: KindOne (KindOne@moz-8384E922.dynamic.ip.windstream.net)
[10:10:12] *** Joins: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de)
[10:13:54] *** Quits: bholley (anonymous@moz-76489EBF.dip0.t-ipconnect.de) (Quit: bholley)
[10:15:05] *** Joins: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP)
[10:19:06] *** Quits: ross (ross@moz-5EA04060.br.br.cox.net) (Quit: )
[10:21:35] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[10:21:52] <Heather> by the point of interest how to make circular bit shift?
[10:24:41] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[10:25:46] <tiffany> (N<<(size-1)) & (N>>1) for a right circular shift, I would imagine
[10:25:52] <dbaupp> Heather: http://en.wikipedia.org/wiki/Circular_shift
[10:25:58] <dbaupp> tiffany: s/&/|/
[10:26:04] <tiffany> er, right
[10:26:30] <Heather> tiffany dbaupp ahm pretty same as C
[10:27:36] <tiffany> there might be an intrinsic for it that you could call directly
[10:32:47] <Heather> tiffany asm ?
[10:33:01] <Heather> tiffany can I use inline asm in rust?
[10:33:22] <Sharp> Heather: Yeah.
[10:33:35] <Heather> Sharp __asm? or another syntax?
[10:33:46] <Sharp> I can check, but I think it's just asm (might be asm!)
[10:34:01] <Heather> I will try, thanks )
[10:34:12] <Sharp> asm!
[10:34:14] <dbaupp> Heather: compilers are reasonable at recognising the pattern tiffany gave and optimise it to a ror/rol (you can check with `rustc -S --opt-level=2 ...`
[10:34:15] <dbaupp> )
[10:34:31] <Sharp> e.g. asm!("mov $0, %gs:0x08" :: "r"(stack_lo) :: "volatile");
[10:35:04] <Sharp> And yes, I would generally trust the compiler rather than go straight to ASM :)  But it's there for a reason.
[10:35:05] <Ms2ger> Also unsafe {}
[10:35:16] <dbaupp> and #[feature(asm)]; on the crate
[10:35:49] <Heather> ... to be honest always wanted to learn asm )
[10:36:07] *** Joins: donri (donri@moz-9BB61102.tbcn.telia.com)
[10:36:24] <Sharp> Writing assembly isn't actually fun.
[10:36:37] <Sharp> You have your nose in an opcode book the entire time.
[10:36:43] <Heather> can someone point some asm getting started by examples reading? :)
[10:37:39] * Sharp can't.
[10:37:47] <Sharp> LLVM source code? :D
[10:37:52] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[10:38:24] <Heather> Sharp by the way is it possible to inline llvm bytecode? :D
[10:38:30] <dbaupp> no
[10:38:39] <Heather> dbaupp why
[10:38:44] <dbaupp> because it's not implemented
[10:38:46] *** Joins: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP)
[10:39:00] <Heather> dbaupp but it's possible in theory?
[10:39:06] <Sharp> I think the general feeling is that asm is there because it needs to be
[10:39:09] <dbaupp> jensnockert had something working like that
[10:39:12] <Heather> dbaupp is it possible to write an program in plain llvm?
[10:39:14] <Sharp> Not because it's a good idea
[10:39:22] <dbaupp> almost-inline LLVM in Rust
[10:39:59] <tiffany> if you really need it you can probably write separate files in llvm IR and then link it in manually
[10:40:53] <Sharp> You'd probably have to add Rust metadata
[10:41:00] <Sharp> Which is rather difficult considering the ABI isn't stable :)
[10:42:03] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[10:43:45] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[10:44:52] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:45:17] *** Joins: robertknight_ (robertknig@moz-DF72422D.members.linode.com)
[10:46:20] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[10:47:30] *** Joins: Sorella (quildreen@9D963F5D.DF5D8AE7.54BCAB54.IP)
[10:48:11] <Sharp> Hrrm… wasn't someone(s) saying that they wanted data constructors to live in struct scope?
[10:48:51] <Sharp> Or enum scope, rather
[10:49:21] <Sharp> Because that would conveniently fall out of implementing them as trait methods :P
[10:50:30] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[10:50:38] <tiffany> I got bit by file-scope enum constructors while implementing my programming language
[10:50:51] <tiffany> because I have different enums for different stages of the AST (there's only two now, but it still applies)
[10:50:56] *** Quits: robertknight (robertknig@moz-54528EE0.wby.mendeley.com) (Quit: ["Textual IRC Client: www.textualapp.com"])
[10:52:06] *** Joins: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net)
[10:52:15] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[10:52:31] *** Joins: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP)
[10:55:06] *** Joins: jdm (jdm@moz-AFF897B8.dsl.teksavvy.com)
[10:55:07] *** ChanServ sets mode: +o jdm
[10:55:51] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[10:57:36] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[11:03:35] *** Joins: Heather (Heather@19663F6.F53BAACC.9C17E900.IP)
[11:03:35] <Sharp> What would be the problems with parameterized modules?
[11:03:38] *** Quits: Kxepal (Miranda@moz-B0668C07.pppoe.mtu-net.ru) (Connection reset by peer)
[11:03:46] <Heather> Mirana is broken again !
[11:04:09] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[11:04:11] *** Joins: Kxepal (Miranda@moz-B0668C07.pppoe.mtu-net.ru)
[11:04:28] * Sharp can think of some uses.
[11:04:52] <Sharp> Actually, I find it hard to believe there are any problems, because there's nothing a parameterized module can do that can't be replicated with generics.
[11:05:01] *** Joins: bholley (anonymous@moz-76489EBF.dip0.t-ipconnect.de)
[11:05:11] <Heather> Need to repair mirana !
[11:05:41] <Heather> Sharp https://gist.github.com/Heather/7263942
[11:06:14] * Sharp has never used mirana.
[11:06:22] <Heather> xd
[11:06:48] <Sharp> What is it?  Version control control?
[11:06:58] <Heather> Sharp yes
[11:07:01] <Heather> Sharp check how ti saved json after removing repository
[11:07:04] <Heather> *it
[11:07:22] <Sharp> Heh.
[11:07:23] <Heather> Sharp "repositories": [] -> it's right
[11:07:35] <Heather> Sharp but why not remove mess after ?
[11:07:40] <Sharp> That isn't valid JSON either :)
[11:08:02] <Heather> Sharp I just removed repository and say it to save it
[11:08:11] <Heather> Sharp and it do it wrong now :(
[11:08:14] <Sharp> I'm not sure, like I said I ahven't used Mirana.
[11:08:16] <Sharp> 
[11:08:18] <Sharp> *haven't
[11:08:46] <Heather> Sharp to be honest it's not much Mirana related, it's json...
[11:09:19] <Sharp> Yes… and it appended some other string in a way that's clearly invalid JSON
[11:09:21] <Heather> Sharp there: https://github.com/Heather/Mirana/blob/master/src/Config.rs#L30
[11:09:31] <Sharp> Oh, I didn't realize you had the source code :)
[11:10:01] <Heather> Sharp maybe it's only Pretty encoder bug?
[11:10:26] <Sharp> Could be, I always look for user error first but I assume you've already done that
[11:10:42] *** Joins: aeqwa (aeqwa@moz-A0BDC372.dsl.tropolys.de)
[11:10:49] * Sharp has never used any of these extensions and just started using Rust a week and a half ago, so he may not be the most helpful person :P
[11:11:40] <Sharp> Hm
[11:11:53] <Sharp> Is Encode defined by you?  Or core Rust?
[11:12:09] <Sharp> Ah, just Rust.
[11:12:12] <Heather> Sharp it's use extra::serialize::{Decodable, Encodable};
[11:12:17] <Sharp> Yeah.
[11:13:04] <Sharp> Let me check something...
[11:14:49] <Sharp> What is shade?
[11:14:55] <Sharp> In Main.rs
[11:15:01] <Heather> Sharp part of Night
[11:15:17] <Sharp> Yeah, I meant specifically what is that variable supposed to represent?
[11:15:29] <Heather> Sharp https://github.com/Heather/Mirana/blob/master/src/Moon.rs
[11:15:54] <Heather> Sharp you mean shade: uint?
[11:15:59] <Sharp> Yeah
[11:16:02] <Sharp> It's an index into something
[11:16:14] <Heather> Sharp element number in array
[11:16:28] <Heather> Sharp actually Night number
[11:16:40] <Heather> so it's Night[shade]
[11:17:49] <Sharp> Hm
[11:18:03] <Sharp> repositories: ~[Repository] is not mutable, is it?
[11:18:19] <Sharp> (in Night)
[11:18:23] *** Joins: bletch (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[11:18:23] <Heather> Sharp it's mutable
[11:18:36] *** Quits: bletch (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:18:39] <Sharp> It isn't defined as mutable in Moon.rs that I can see.
[11:18:52] <Sharp> Does it not have to be?  I thought Rust was picky about that.
[11:18:53] *** Joins: krebbit (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[11:19:00] *** Quits: krebbit (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:19:28] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[11:19:33] <Heather> Sharp well each repository is not mutable
[11:19:40] <Heather> Sharp but collection is mutable
[11:19:53] <Sharp> Is ~[T] always mutable?
[11:20:03] *** Joins: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP)
[11:20:10] <Heather> Sharp I think so
[11:20:17] <Sharp> Let me check
[11:20:33] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[11:22:24] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[11:23:05] <Sharp> Rust isn't letting me push to it
[11:23:12] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[11:23:17] <Sharp>  error: cannot borrow immutable field as mutable
[11:23:34] <Sharp> For a ~[T] field defined in a struct field, just like your code
[11:24:04] <Sharp> Which makes me wonder whether it's implicitly cloning it :|
[11:24:16] <Heather> Sharp eh...
[11:25:12] <Heather> Sharp https://github.com/Heather/Mirana/blob/master/src/Main.rs#L157
[11:25:14] *** Joins: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[11:25:22] <Sharp> Yeah, I know :P
[11:25:58] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:26:14] <Heather> Sharp same fail without Pretty
[11:26:26] <Sharp> I'm currently not thinking the problem is Pretty.
[11:27:04] <Sharp> One possibility is that file creation is borked somehow and you're not overwriting the file…
[11:27:14] <Sharp> But I don't think that's likely it.
[11:28:17] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[11:28:19] *** Joins: mib_yc2bvl (Mibbit@50BD61F5.6B803AD6.32F33811.IP)
[11:28:27] <Heather> ...
[11:28:47] <Heather> Sharp as you see in log file is changed, it was fine and deleting repo break it
[11:29:01] *** Quits: mib_yc2bvl (Mibbit@50BD61F5.6B803AD6.32F33811.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[11:29:16] <Sharp> Well, it could be prepending rather than overwriting :P
[11:29:27] <Sharp> Like I said, that is not what I immediately think but it is a possibility
[11:29:38] <Sharp> (Maybe)
[11:30:03] <Heather> 01 prepending 01 ? :S
[11:30:08] <Sharp> Haha
[11:30:13] <Sharp> Not a core file system operation, I would agree :)
[11:30:41] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Ping timeout)
[11:30:53] <Sharp> Ah, huh
[11:30:57] <Heather> Mirana suffer of rust changes !
[11:30:59] <Sharp> It works because if you mut the outermost struct
[11:31:01] <Sharp> Everything becomes mut
[11:31:04] <Sharp> Booooo at that design decision
[11:31:14] <Heather> Sharp yes :S
[11:31:26] <Heather> Sharp why not?
[11:31:33] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[11:31:37] <Sharp> Because I like to be able to control const at each level
[11:31:40] <Sharp> I like how C does it
[11:32:04] <Heather> Sharp for example show me how can I change design of it
[11:32:20] <Sharp> Easy, make Night's repositories mut :)
[11:32:25] <Sharp> Since they are.
[11:32:43] <Sharp> I don't think that will fix your problem though
[11:32:45] <tiffany> sharp, how would you fix this? at the moment, struct definitions don't have to worry about whether a field will be mutable or constant
[11:32:51] <Heather> Sharp you mean in moon?
[11:32:59] <Sharp> Yeah, Heather.
[11:33:08] <Heather> Sharp how :S
[11:33:17] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[11:33:21] <tiffany> if you look at it functionally, mutable variables are really just immutable variables that are replaced in-place
[11:33:28] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:33:38] <tiffany> and there's no operations prevented by functional struct updates
[11:33:41] <dbaupp> Sharp: you can control mutability at each level using @.
[11:33:57] <Sharp> Not ~ though.
[11:33:57] <Heather> tiffany any ideas why mirana can't save config properly now ?
[11:34:19] <tiffany> no?
[11:34:25] <Heather> tiffany sad
[11:34:39] <Sharp> tiffany: Well, except that they're not, when they're pointers :P  The pointers are immutable, the values not.
[11:34:45] <Heather> dbaupp I think something was broken in recent changes
[11:35:00] <dbaupp> Heather: what is the difference between the outputs in https://github.com/mozilla/rust/issues/10224 ?
[11:35:14] <Heather> dbaupp Pretty
[11:35:15] <dbaupp> both have "task '<unnamed>' failed at 'Repo list is broken'"
[11:35:21] <tiffany> sharp: I feel as though if you need individually mutable fields, then your structs are of too large a scope
[11:35:29] <Heather> dbaupp I used Pretty in first
[11:35:50] <tiffany> all of my rust code ends up with structs with 5 members at most
[11:36:05] <dbaupp> Heather: yes? ... it's not clear what you are meant to be highlighting in that issue. what is broken?
[11:36:08] <Sharp> What if I just want some sane invariants when I hand you my struct? :P
[11:36:19] <dbaupp> Sharp: `priv` fields
[11:36:34] <Sharp> True.
[11:36:44] <tiffany> you are aware that it's bad practice to return const values from functions in C/C++ right?
[11:36:45] <Heather> dbaupp saving to json is broken
[11:36:48] <dbaupp> Heather: and why have you printed pretty and non-pretty? is there a difference between them?
[11:36:48] <tiffany> I don't see how this is any different
[11:36:48] <Sharp> I guess private fields accomplish the same thing
[11:37:07] <Sharp> Erlang doesn't have private fields but it makes all fields read only IIRC
[11:37:23] <Heather> dbaupp they both saves json wrong , I was thinking it's pretty encoder problem
[11:37:59] <Sharp> tiffany: Having a type const * in a struct is not considered bad practice, or if it is then a whole lot of people are guilty of it :)
[11:38:10] <dbaupp> Heather: could you edit the issue to describe exactly what is wrong? (i.e. even just saying "the json is invalid" somewhere would be better)
[11:38:31] <tiffany> it's not bad practice but it's a bad idea
[11:38:40] <Heather> dbaupp but log descripts it better than everything
[11:38:43] <Heather> dbaupp isn't it
[11:38:45] <tiffany> just because you think the value shouldn't be changed doesn't mean that someone might have to change it
[11:39:07] <Sharp> If someone wants to change the value, they can change it anyway.  Const is a sanity check.
[11:39:08] <tiffany> er, that someone won't have to
[11:39:18] <Sharp> Like unsafe.
[11:39:18] <tiffany> they can do it if they violate type safety
[11:39:27] <Sharp> Correct.
[11:39:39] <dbaupp> Heather: I have no idea what the log is saying; most people haven't been using your "mirana" as much as you, so we don't know what the expected output is.
[11:39:46] <tiffany> using unsafe code to violate immutable values in rust is almost certainly bad practice
[11:39:58] <dbaupp> Heather: specifically, is "task '<unnamed>' failed at 'Repo list is broken', D:\Heather\Contrib\P\rust\src\libstd\" relevant?
[11:40:15] *** Joins: skade (skade@3E753816.E7BADBF1.B0C2132F.IP)
[11:40:19] <Sharp> Practically speaking, if I made a value const, I probably didn't want it to change :P  In general, I like the idea that values should be const unless otherwise specified.
[11:40:30] <Sharp> That's one of the things I really like about Rust, actually.
[11:40:50] <dbaupp> tiffany: and will likely lead to undefined behaviour, when we use LLVM to its fullest extent
[11:41:20] <Sharp> I certainly think giving people read only values is a "nicer" solution than telling them they can't even read (which is what private does) but private accomplishes the same thing so I'm okay with using it in these situations.
[11:41:29] <Heather> dbaupp https://github.com/mozilla/rust/issues/10224 updated
[11:41:45] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:42:09] <dbaupp> Sharp: you can define a Freeze<T> { priv x: T } struct that only allows handing out &T references (i.e. immutable), which will achieve most of what you're saying, I think.
[11:42:18] <Sharp> Oh, neat!
[11:42:51] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[11:42:56] *** Joins: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP)
[11:43:07] *** Joins: Boz (Boz@29ED63B2.4F4F2AAA.7167351E.IP)
[11:43:19] <Sharp> Freeze is respected even when the frozen type is a field in a mutable struct?
[11:43:22] *** Quits: Boz (Boz@29ED63B2.4F4F2AAA.7167351E.IP) (Quit:  HydraIRC -> http://www.hydrairc.com <- The alternative IRC client)
[11:43:39] <Sharp> (Not that you can't change the reference in the mutable struct, but that the mutability doesn't apply to the field).
[11:43:54] <Heather> dbaupp error comes from json::from_reader(reader).expect("Repo list is broken"); but real error was before, json saved wrong
[11:43:54] <Sharp> (Er, the field's value.  You know what I mean).
[11:43:54] *** Quits: eddyb9 (eddy@971C3AAF.8D069E5A.4A6B528C.IP) (Ping timeout)
[11:44:08] <Sharp> I think that is actually what you are saying as I reread your sentence.
[11:44:11] <Sharp> So sweet.
[11:44:21] <dbaupp> https://gist.github.com/huonw/6001d8c4b322c5c4f37a
[11:44:49] <dbaupp> can never mutate T directly (but can mutate what it points to, if it's a value like @mut int)
[11:45:25] <Sharp> Right, of course.
[11:45:31] <Heather> dbaupp I will test add new inner struct before removing another
[11:46:24] <Heather> dbaupp at least adding don't break things
[11:46:51] <Heather> dbaupp but removing result is horrible
[11:50:38] *** Quits: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de) (Ping timeout)
[11:52:10] <Heather> dbaupp check: https://gist.github.com/Heather/7264371
[11:52:45] <Sharp> Heh, Heather
[11:52:46] <Heather> dbaupp weird logics, eh :S
[11:52:48] <Sharp> Just checked...
[11:52:54] <Sharp> The way the file looks
[11:53:01] <Sharp> It is *exactly* as though only the new bytes were overwritten
[11:53:06] <Sharp> All the old bytes are still in the same place
[11:53:17] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Ping timeout)
[11:53:24] <Heather> Sharp hmm....
[11:53:40] <Heather> Sharp so the problem is that writer don't overwrite the file?
[11:53:48] <Sharp> Could be
[11:53:54] <Sharp> I think it was recently rewritten so it's actually possible
[11:54:22] *** Joins: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de)
[11:54:27] <Heather> Sharp but there are at least to -
[11:54:27] <Sharp> Hm
[11:54:32] <Sharp> Are you using tabs?
[11:54:57] <Heather> Sharp no
[11:55:16] <Sharp> Okay
[11:55:20] <Sharp> Actually heh, that would make sense
[11:57:36] *** Joins: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net)
[11:58:20] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:58:20] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: andre)
[11:58:21] *** Joins: andre (andre@CA528A4A.45A4338E.8EE27E6.IP)
[11:59:00] <Heather> Sharp maybe I should just use two json files instead of one with nested structures :(
[11:59:51] <Sharp> Heather: I just counted bytes
[12:00:00] <Sharp> To make sure
[12:00:19] <Sharp> There are *exactly* the number of bytes taken up by the new stuff written
[12:00:27] <Sharp> When you count spaces/newlines
[12:00:29] <Heather> :S
[12:01:06] <Heather> Sharp maybe I need to use something instead of io::Create there https://github.com/Heather/Mirana/blob/master/src/Config.rs#L31
[12:01:15] <Sharp> Might be a problem in the JSON module or the serializer, or the FS itself… but since it's at the bye level I think it's I/O related
[12:03:31] <Heather> dbaupp what io::Create makes? :S
[12:04:06] <dbaupp> Heather: http://static.rust-lang.org/doc/master/std/rt/io/enum.FileMode.html#variant.Create
[12:04:23] <Sharp> Ah
[12:04:30] <Sharp> I think you want CreateOrTruncate :)
[12:04:38] <Sharp>     /// Opens an existing file or creates a new one, truncating it to 0 bytes.
[12:04:41] <Sharp>     CreateOrTruncate,
[12:05:14] <Sharp> What's weird is that Create is actually working on a file that already exists
[12:05:14] *** Joins: Yeri (jasonjasmi@BA0CD88C.B2E00889.31F69D78.IP)
[12:05:24] <Sharp> It should be dying according to the comment
[12:05:36] <Sharp> My guess is that that is what is broken, it's letting you access the file without the usual safeguards :)
[12:05:41] *** Joins: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com)
[12:07:24] *** Quits: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de) (Ping timeout)
[12:07:34] <Sharp> Heh
[12:08:19] <Heather> Sharp let test
[12:08:31] * Sharp thinks the current code may be ignoring errors :D
[12:08:44] <Heather> Sharp you're right, my fault
[12:08:54] <Heather> dbaupp ^
[12:08:59] <Sharp> Both your and Rust's fault!
[12:09:06] <Sharp> (Since Rust shouldn't have let you do that :D)
[12:09:10] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[12:10:18] *** Joins: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[12:10:25] <Heather> Sharp =)
[12:10:53] *** Joins: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de)
[12:11:59] <Heather> Sharp dbaupp thanks for fixing it )
[12:12:43] <Sharp> NP, any excuse I have to go rummaging through Rust's internals is a good one right now!
[12:12:45] <Heather> Sharp I also will be glad to know how to waitforkeypress with new IO
[12:13:02] <Sharp> I have no idea how it worked with the old I/O, or whether it works with the new I/O...
[12:13:15] <Sharp> (Bring back getch()! said no one ever)
[12:13:41] <Heather> Sharp I can say how it was with old IO
[12:14:24] <Heather> Sharp https://github.com/Heather/Mirana/commit/9505f368e548d97090f85c857ce76ccfe358a6a9#diff-ef3f968279da7158a1cc6516c8ee7112L280
[12:14:32] <Heather> Sharp io::stdin().read_line();
[12:14:42] <Sharp> I know for a fact that that's gone :)
[12:14:49] <Sharp> Enough people have asked about it.
[12:15:10] <Heather> Sharp but replace?
[12:15:35] <Sharp> It looks like you might be able to declare a Reader from TTY
[12:16:13] <Heather> Sharp in windows it's not called TTY I think... or is it
[12:16:34] <Sharp> / tl;dr; TTY works on everything but when windows stdout is redirected, in that
[12:16:37] <Sharp> /        case pipe also doesn't work, but magically file does!
[12:16:50] <Sharp> So I think the answer is "yes" (for input anyway)
[12:17:01] <Heather> ok...
[12:18:16] <Sharp> Haha
[12:18:20] <Sharp> The comment at the top of that file is awesome
[12:18:32] <Heather> Sharp which
[12:19:28] <Sharp> https://github.com/mozilla/rust/blob/master/src/libstd/rt/io/stdio.rs#L38-L65
[12:21:08] *** Quits: jdm (jdm@moz-AFF897B8.dsl.teksavvy.com) (Quit: Lost terminal)
[12:22:39] *** Joins: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net)
[12:23:10] <Heather> Sharp )
[12:23:25] <ChrisMorgan> kimundi: as I understand it the prevailing opinion among lawyers is that there is no value whatsoever in the top-of-file boilerplate where it is the same as the project license. As for when it was added, that seems to have been December 3, 2012 (00c856c0), but I can't find any mailing list post on the topic at any time.
[12:24:04] <bstrie> ChrisMorgan: rust puts the license boilerplate at the top of each file specifically because mozilla's lawyers told us that we had to :)
[12:24:59] <kimundi> RIght, it wasn't just a random decision, the devs didn'T want to add them either :)
[12:25:00] <ChrisMorgan> bstrie: I want to know *why* they would be saying that seeing as the lawyers I've heard talking about it have disagreed—that that is one of the mumbo-jumbo things with no value whatsoever that just get put there to complicate matters.
[12:26:05] <Sharp> ChrisMorgan: A Pascal's wager with the legal system, perhaps? :)
[12:26:49] <pnkfelix> ChrisMorgan: there's other examples of places that recommend you put the boilerplate on each file.  E.g. here: http://oss-watch.ac.uk/resources/opensourceyourcode
[12:29:06] <pnkfelix> ChrisMorgan: in any case you could ask on mozilla.legal : https://www.mozilla.org/about/forums/#legal
[12:30:12] <bstrie> ChrisMorgan: I doubt that putting the license at the top of each file actually complicates matters *legally*, it merely complicates them technically
[12:30:16] <ChrisMorgan> pnkfelix: if I get round to it at some point (ha! ha!), I'll collate the pros and cons and talk to them about it
[12:30:16] *** Joins: cdelo (cdelo@31073680.31C0B4EF.D345515E.IP)
[12:30:33] <ChrisMorgan> bstrie: and we don't want that technical complication
[12:30:56] <bstrie> ChrisMorgan: lawyers don't give a shit about technical complications, they exist to tell you to be better safe than sorry :P
[12:31:01] <kimundi> ChrisMorgan: https://mail.mozilla.org/pipermail/rust-dev/2012-November/002664.html
[12:32:42] <ChrisMorgan> kimundi: ah! Thanks. Not sure why I didn't spot that one, I thought my searches had covered the keyword "license" used in the subject there
[12:33:02] <pnkfelix> I wonder if this topic has been previously discussed on http://projects.opensource.org/pipermail/license-discuss/  ; one would imagine so.
[12:33:32] <ChrisMorgan> In practice, most courts care more about obvious intent than precise technicalities, anyway...
[12:33:47] * ChrisMorgan waits for complaints about that statement
[12:34:08] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[12:34:10] <Sharp> You can't just preempt complaints by inviting them :D
[12:34:20] * pcmattman notes lawyers don't live in a practical world
[12:34:52] <bstrie> law is a leaky abstraction
[12:34:53] <pcmattman> (also "most" does not mean "all")
[12:35:19] <eddyb> bstrie: needs more Rust
[12:35:30] <eddyb> rustc would complain about non-exhaustive matches :P
[12:35:41] <ChrisMorgan> pcmattman: courts willing to ignore such things are likely to be willing to ignore other things; as soon as one part is broken, it's all broken.
[12:36:11] *** Joins: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr)
[12:36:33] <ChrisMorgan> Anyway, I've probably provoked people sufficiently about that topic. Let's talk more Rust!
[12:36:45] <pcmattman> ChrisMorgan: I'd like to be protected in the case that some part is broken somehow, rather than hope for the best
[12:37:47] <Heather> this world rusts ...
[12:38:22] <Heather> anyone know why it was called rust?
[12:38:52] <bstrie> Heather: because 1) graydon is a biology nerd and 2) https://en.wikipedia.org/wiki/Rust_%28fungus%29
[12:39:16] <eddyb> I like to think aluminum will come alone at some point :>
[12:39:28] <Heather> bstrie who is graydon
[12:39:32] <ChrisMorgan> And it's got nothing new in its fundamental design. Everything in the language is at least ten years old, by design.
[12:39:37] <bstrie> Heather: though our more satisfying explanation is that we try not to incorporate any language concepts younger than 10 years old, so everything is rusty :P
[12:39:53] *** Quits: ianj (ianjneu@moz-7BA002E.hsd1.ma.comcast.net) (Quit: leaving)
[12:39:57] <ChrisMorgan> Graydon Hoare, inventor of the language, who relinquished control to Brian Anderson (brson) a couple of months ago.
[12:40:15] <Sharp> Which somehow still puts Rust lightyears ahead of most mainstream languages :P
[12:40:29] <ChrisMorgan> Hmm... https://en.wikipedia.org/wiki/Rust_%28programming_language%29 has no mention of brson.
[12:40:31] * eddyb will try to not confuse bstrie with brson
[12:40:31] <bstrie> Sharp: well, at least 20 years or so :P
[12:40:48] <bstrie> eddyb: no, please, it's quite edifying
[12:40:56] <mletterle> I've been doing more work than playing with rust the past few days.. I has a sad.
[12:41:05] * Sharp wants to do his work in Rust.
[12:41:11] <mletterle> Indeedy!
[12:41:21] <ChrisMorgan> There haven't been a whole lot of valuable things discovered in CS in the last ten years. All you need was already invented.
[12:41:28] * eddyb wants to do Rust instead of school
[12:41:37] <Sharp> ChrisMorgan: Ehhhhhh.
[12:41:38] <Heather> .... so
[12:41:51] <Heather> as I understood it's called rust because it's not rust ?
[12:41:57] <eddyb> ChrisMorgan: some (most?) of the new things are bad decisions in a way or another :P
[12:42:23] <ChrisMorgan> Not having pursued the "latest and greatest" techniques, but instead going for tried and tested techniques, is part of what has made Rust such a sound language.
[12:42:32] <Sharp> Yes, I absolutely agree with you there
[12:42:53] <Sharp> I just wouldn't say that little of value has been discovered in the last 10 years… more that there hasn't been enough time to separate the wheat from the chaffe
[12:43:08] <Sharp> chaff*
[12:43:26] <bstrie> eddyb: what's stopping you from dropping out of school and working on rust full-time while living homeless in the street?
[12:43:36] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[12:43:39] * bstrie questions eddyb's dedication
[12:44:07] * eddyb goes back to his corner ;(
[12:44:21] <bstrie> Heather: at the end of the day, it's called Rust because it's just an awesome name for a programming language :P
[12:44:32] <Heather> bstrie okay )
[12:44:39] <eddyb> and it doesn't conflict with anything else AFAIK :D
[12:45:07] <Heather> let's write visual studio support ...
[12:45:09] <mletterle> Rust is a cool name
[12:45:11] <Sharp> That's what Mozilla thought about Firebird at one point :P  And Phoenix for that matter.
[12:45:11] <kimundi> ... I dare you to google "Rust conditions"
[12:45:19] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[12:45:39] <mletterle> VS support isn't a terrible idea.. I really want to get working on some win32 stuff.. but damn, linux is just so much more damn fun.
[12:46:14] <eddyb> if we can help windows die, I approve
[12:46:30] <mletterle> windows won't die, so we might as well get on with it. :)
[12:46:32] <Heather> mletterle eddyb this channel is pretty holy-wary
[12:46:33] * ChrisMorgan was glad to be able to just clone the Rust repository and type "./configure --prefix=~/opt/rust && make && make install" and have it work first time
[12:46:36] <kimundi> eddyb: Nah, that's the wrong angle
[12:46:44] * sam113101 looks up "rust conditions" on google
[12:46:56] <kimundi> eddyb: Us not supporting windows just means we won't get accepted by mainstream
[12:47:04] <eddyb> ah, not that way
[12:47:05] <sam113101> well, google knows me too well, I get lots of results about the programming language
[12:47:31] <eddyb> the bubble works
[12:47:39] <bstrie> Heather: people better not be holy-warring in here! I forbid it
[12:47:40] <eddyb> I so sad that DDG was unusable for me :(
[12:47:46] <eddyb> *I was
[12:47:58] <sam113101> "Total Google searches: 20939"
[12:48:01] <Heather> bstrie I know
[12:48:05] <eddyb> I am so weird I need a bubble for good search results
[12:48:40] <Heather> bstrie but everytime I say something alike windows, or .exe or .sln people go rush on this battle )
[12:48:50] <bstrie> eddyb: nah, over the years you've just adapted your searches to those that google can parse intelligently and return relevant results, so DDG never had a chance :P
[12:49:20] <sp3d> bstrie: ddg's index is really noticeably smaller, unfortunately
[12:49:29] <sp3d> but it does fine for anything that isn't too obscure
[12:49:42] <bstrie> When you search into the abyss, the abyss searches back into you"
[12:49:50] <eddyb> "
[12:50:03] <bstrie> eddyb: thanks]
[12:50:07] <tiffany> I default to duckduckgo and use google if I can't find it
[12:50:10] *** Joins: sweet_kid (Upasana@A7BC77F4.D06DD960.4A5F0685.IP)
[12:50:16] <sp3d> same
[12:50:19] <eddyb> bstrie: nope, no google-fu, just ambiguous terms
[12:50:41] *** Joins: sweet_kid_ (Upasana@93CB8004.98D8CFFD.1228A288.IP)
[12:50:43] <bstrie> I default to google, but only because mozilla gets money when I search from firefox
[12:50:47] <tiffany> I've noticed that duckduckgo has a lot of content farms and malware sites in the search resutls
[12:50:51] <tiffany> where as google only has them in the ads
[12:50:54] *** Quits: skade (skade@3E753816.E7BADBF1.B0C2132F.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[12:51:11] <tiffany> I'm surprised google doesn't find it morally wrong to advertise malware
[12:51:15] <eddyb> I don't remember getting anything from DDG other than obvious wikipedia pages, and for that I can just type "wiki " in chrome to search :/
[12:51:20] <ChrisMorgan> The styles being used on http://static.rust-lang.org/doc/master/tutorial-conditions.html (changed since 0.8) reduce font-size to 14px :-(
[12:51:32] <bstrie> tiffany: "don't be evil" doesn't mean "be good"
[12:51:48] <tiffany> I think it could qualify as being evil to advertise malware
[12:52:02] *** Quits: sweet_kid (Upasana@A7BC77F4.D06DD960.4A5F0685.IP) (Ping timeout)
[12:52:15] <tiffany> it's not really doing bad through inaction: google directly makes money off of people being infected by malware
[12:52:15] <eddyb> tiffany: it's automatic, not intentional evil :P
[12:52:22] <Sharp> Nah, the iframes are neutral territory.
[12:52:50] <eddyb> tiffany: oh nvm
[12:52:52] <bstrie> The only thing necessary for the triumph of evil is that good algorithms do nothing."
[12:53:05] <tiffany> making money off of crime isn't very neutral
[12:53:39] * Sharp can't think of a way to respond to that that isn't overtly political.
[12:54:44] <tiffany> I used to think that if people fell for those then it was their own fault, but I eventually realized how easy it is to accidentally click the first link on google for something like "flash player" assuming it's the official result, and end up at malware
[12:55:00] <tiffany> if you're running windows with java applet enabled, you could very likely get infected from that within a matter of seconds
[12:55:19] <Sharp> Very true, which is why you shouldn't be running Windows with Java applet enabled :P
[12:55:33] <tiffany> it's not always a choice
[12:55:41] <tiffany> work computers are the most prominent example
[12:56:15] <eddyb> blame Java
[12:56:41] <tiffany> at this point the majority of windows XP and IE < 8 users are out of date office computers afaik
[12:56:48] *** Parts: Heather (Heather@19663F6.F53BAACC.9C17E900.IP) ()
[12:56:52] <Sharp> I can't really blame Java considering that every attempt at anything comparable has failed similarly
[12:57:00] <Sharp> I blame Java for lots of other things, but not that :P
[12:57:03] <tiffany> C# isn't that bad
[12:57:09] <Sharp> C# doesn't run on browsers.
[12:57:13] <Sharp> AFAIK.
[12:57:15] <tiffany> silverlight
[12:57:24] <eddyb> XAML? gtfo
[12:57:24] <tiffany> which microsoft is phasing out but still
[12:57:36] * Sharp is thoroughly unconvinced that Silverlight has no security vulnerabilities.
[12:57:41] <Sharp> It never had the traction Java (or Flash) had.
[12:57:45] <tiffany> netflix is still silverlight unless you run IE 11
[12:58:03] <Sharp> That's one site.  At one point I think Flash was installed by > 90% of users.
[12:58:15] <tiffany> a very big site though
[12:58:42] *** Joins: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net)
[12:58:43] <Sharp> Yeah, but still much smaller than the proportion of people who had Flash.  It's also had rather less time to matriculate.
[12:58:52] *** bhearsum|afk is now known as bhearsum
[12:58:56] <Sharp> And lest you forget, Microsoft's other attempts have not been spectacularly successful.
[12:59:24] *** Quits: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr) (Ping timeout)
[13:00:06] <tiffany> I have java applets disabled, flash with firefox's plugin blocker thing (which is enable-by-default now :( ), and use silverlight via pipelight
[13:00:45] <Sharp> Well then, click away?
[13:00:58] *** Quits: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp) (Quit: Tiarra 0.1+svn-39209: SIGINT received; exit)
[13:01:07] <eddyb> I only need to get AOT buffering behavior in HTML5 and I can live without plugins :D
[13:01:08] *** Joins: yusukesuzuki (yusukesuzu@moz-FEE44B6.net220148245.t-com.ne.jp)
[13:01:30] <eddyb> (and maybe some chrome extension to turn all well-known flash players into HTML5 players)
[13:01:36] <Sharp> Video buffering doesn't belong in HTML anyway :|
[13:01:42] <Sharp> Nor in HTTP.
[13:01:43] <tiffany> there's one for youtube I think
[13:01:50] <tiffany> html5 video is pretty miserable as it stands
[13:02:02] <tiffany> no browser in existence has pluggable video codecs, which is stupid
[13:02:09] <Sharp> Very.
[13:02:13] <tiffany> if firefox doesn't have H.264, why can't I add it myself through a plugin to defer to ffmpeg
[13:02:33] <tiffany> plus there's that whole thing about firefox's built-in video player being crap
[13:03:04] <eddyb> chromium has it optional (you need an .so), and chrome comes with the library by default
[13:03:11] *** Joins: canhtak (canhtak@moz-14E3CE16.wl.t.ulaval.ca)
[13:03:19] *** Quits: DeTeam (DeTeam@3F8887A3.6883A39.F5F3AF2.IP) (Ping timeout)
[13:03:40] <tiffany> if I could, I would instantaneously replace firefox's video player with an embedded vlc or mplayer
[13:04:34] <eddyb> there's a VLC plugin, IIRC, but I'm not sure
[13:04:37] *** Joins: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP)
[13:04:55] <eddyb> and there's an userscript that can use built-in or a plugin, but I find that silly
[13:05:13] <bstrie> tiffany: eh, firefox will have h264 next year :P
[13:05:37] <eddyb> why have a million possible formats? that's just fucking with standardization
[13:05:52] <bstrie> [obligatory xkcd]
[13:06:07] <eddyb> cba to get the link
[13:06:24] <eddyb> I take that back, http://xkcd.com/927/
[13:06:42] <Sharp> For video codecs?
[13:07:15] <tiffany> is there really that many video formats in common use today?
[13:07:20] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[13:07:40] <Sharp> Quite a few, I'd imagine, probably mostly used by film editors.
[13:07:55] <tiffany> there's avi+xvid, clinging to life by people who don't understand why it's bad, the long line of MPEG standards each of which improves significantly over the last, VP8/VP9, webm, ogg theora
[13:07:56] * Sharp suspects that formats optimized for streaming are not optimized for editing.
[13:08:08] <tiffany> well yeah there's those
[13:09:19] *** Joins: maxli (maxli@moz-4D28BA20.student.cs.uwaterloo.ca)
[13:09:31] <bstrie> daaalaaaaa
[13:10:12] <bstrie> daala will be the only video codec that servo supports, because jack is both a servo dev and a daala dev :P
[13:10:16] <tiffany> video formats for editing are usually not standardized, and are often closed source, proprietary, and only supported by a handful or even a single application
[13:10:29] <Sharp> And yet, they do exist :)
[13:10:45] <tiffany> they exist, but I don't think they count as commonplace
[13:10:48] <tiffany> especially not on the internet
[13:11:17] <Sharp> The problem with the Internet is that it's very difficult to drop support for something fundamental like a video codec.  Or anything, really.
[13:11:25] <Sharp> I can still view web pages created in 1997.
[13:11:49] <Sharp> Or earlier, but before that people tended to keep it simple :P
[13:11:59] *** Joins: umbridge (Mibbit@34B89D1F.D1AE8978.36AE428F.IP)
[13:12:04] <bstrie> pah, 1997?
[13:12:05] <bstrie> http://www2.warnerbros.com/spacejam/movie/jam.htm
[13:12:07] <bstrie> 1996, yo
[13:12:13] <Sharp> Still renders perfectly.
[13:12:14] <eddyb> bstrie: daala does sound interesting :D
[13:12:46] <bstrie> see also http://dolekemp96.org/
[13:12:54] <bstrie> which is a bit less interesting than space jam
[13:13:16] <eddyb> I see text-shadows :P
[13:13:16] <tiffany> will servo have pluggable codecs or replacable <video> impls?
[13:13:38] <bstrie> tiffany: it will have whatever the standards say it needs to have
[13:13:55] <bstrie> not sure what you mean by pluggable or replaceable there
[13:14:06] <bstrie> like, a codec is a codec, you either have it or you don't
[13:14:20] <tiffany> I mean that if I want to I can use vlc to play videos
[13:14:24] <bstrie> and very often the server doesn't keep their video in mroe than a handful of formats
[13:14:36] <bstrie> so it's not like you can just say "always use this format for all video"
[13:14:45] <bstrie> tiffany: you can do that now with firefox, pretty much
[13:15:18] <sp3d> tiffany: any browser with gstreamer support (gecko, webkitgtk) has pluggable codec support
[13:15:41] <tiffany> then why is there an issue with firefox and H.264?
[13:15:49] <tiffany> I have the H.264 codec for gstreamer installed
[13:16:09] <sp3d> I don't think FF enables gstreamer by default; I don't know the details
[13:16:10] <bstrie> tiffany: the issue with firefox is that all H.264 decoders must be licensed in order to be legal
[13:16:30] <tiffany> I'm aware of the licensing problems
[13:16:48] <tiffany> mozilla isn't the one distributing the gstreamer H.264 codec though
[13:17:09] *** Joins: diegoyam (quassel@FF9B1514.A4EC3D18.3A1EC144.IP)
[13:17:15] <sp3d> https://bugzilla.mozilla.org/show_bug.cgi?id=794282 seems to discuss this
[13:17:45] <sp3d> meanwhile I think this is getting a little off-topic
[13:18:15] <eddyb> "a little"
[13:18:31] <sp3d> :P
[13:18:44] <bstrie> this is the perfect time to be off-topic
[13:18:57] <bstrie> ain't nobody around trying to be ontopic anyway :P
[13:19:13] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[13:20:10] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[13:20:10] *** ChanServ sets mode: +o jdm
[13:20:52] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:22:26] *** Quits: Ms2ger (Ms2ger@moz-6EEC6E4D.adsl-dyn.isp.belgacom.be) (Quit: bbl)
[13:22:40] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[13:22:52] <eddyb> bstrie: how do I read lines from a file?
[13:23:44] <bstrie> aaaagh
[13:23:50] <bstrie> whyyyy does everybody ask me that
[13:24:04] * eddyb *trollface*
[13:24:18] <bstrie> FFFFFFFFFUUUUUUUUUUUUUUUUUUU
[13:24:28] <eddyb> bstrie: the best way to be ontopic is to ask the most frequently asked question :P
[13:24:30] <jdm> haha
[13:24:37] <ChrisMorgan> Well, what's the answer?
[13:25:08] <bstrie> ChrisMorgan: "descend into despair and ennui"
[13:25:13] <tiffany> howcome the new IO doesn't have line reading anyway?
[13:25:15] <kimundi> You start at the first line, and keep going ;P
[13:25:32] <bstrie> tiffany: because nobody's gotten around to making the API nice yet, I think
[13:25:40] <bstrie> who even knows what's going on with newio
[13:25:44] <bstrie> it's a mystery
[13:25:58] <kimundi> but apparently thats planned for the next weeks
[13:27:11] *** Parts: lex (lex@moz-CB4EF17D.bootp.virginia.edu) ()
[13:28:04] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:33:15] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[13:33:36] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:33:56] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[13:34:54] *** Joins: willingc_ (willingc@moz-B4760708.san.res.rr.com)
[13:34:55] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[13:38:29] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[13:42:29] *** Quits: umbridge (Mibbit@34B89D1F.D1AE8978.36AE428F.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[13:45:13] *** Quits: willingc_ (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[13:45:34] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[13:46:07] *** Joins: willingc_ (willingc@moz-B4760708.san.res.rr.com)
[13:46:07] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Connection reset by peer)
[13:47:44] *** Joins: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com)
[13:48:47] *** Joins: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP)
[13:53:31] *** Quits: mukilan (quassel@87DF6901.FE7DDF00.520CDC98.IP) (Ping timeout)
[13:54:22] *** Joins: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr)
[13:56:03] *** Quits: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr) (Ping timeout)
[13:56:08] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Client exited)
[13:57:41] *** Joins: lex (lex@moz-CB4EF17D.bootp.virginia.edu)
[13:58:22] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Broken pipe)
[13:58:26] *** Joins: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP)
[13:58:26] *** ChanServ sets mode: +o jdm
[13:58:56] <bstrie> oh good, google+ is letting me claim a custom url for my profile
[13:59:10] <bstrie> it's almost like google is realizing that having non-obfuscated urls is actually important!
[13:59:16] *** jorendorff_away is now known as jorendorff
[13:59:55] <bstrie> oops, wait, hidden clause in the TOS: "Custom URLs are free for now, but we may start charging a fee for them. However, we will tell you before we start charging and give you the choice to stop participating first."
[14:00:41] <bstrie> hope you enjoy broken links
[14:03:27] <lex> hi, i'm a little bit puzzled by an error i've been getting. I made an RWArc with a priority queue inside, and it keeps failing when I try to push something onto the queue. I get this error: 'task '<unnamed>' failed at 'index out of bounds: the len is 5 but the index is 15', zhtta.rs:1task '<unnamed>' failed at 'killed by linked failure', /home/alex/aur/rust-git/src/rust/src/libstd/rt/kill.rs:627'. Here's the pastebin: http://pastebin.com/wD7kK1rS
[14:04:47] *** Quits: willingc_ (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[14:05:49] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[14:06:11] *** Joins: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP)
[14:06:24] <kimundi> lex that's strange
[14:07:42] <lex> kimundi: I've commented out all my other code. that problem goes away when I comment out `(*queue).push(msg);`
[14:08:11] <kimundi> maybe a bug in the prio queue?
[14:08:45] <lex> kimundi: :( maybe?
[14:09:29] <dbaupp> lex: can you run it under gdb, and `catch throw` to get a backtrace from the place that fail!() was called?
[14:09:31] <lex> kimundi: which would be extremely unfortate, since i'm supposed to have this working in 1 hour for a demo
[14:09:43] <lex> dbaupp: sure, give me a second
[14:11:44] <lex> dbaupp: is this what you meant? 'Catchpoint 1 (exception thrown), 0x00007ffff5de2e40 in __cxa_throw () from /usr/lib/libstdc++.so.6'
[14:13:25] <dbaupp> lex: yes, but you'll need to paste the backtrace somewhere (i.e. the output of `bt`)
[14:15:50] <lex> dbaupp: here it is: http://pastebin.com/14r9xmsC
[14:16:16] *** Joins: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP)
[14:16:21] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[14:17:41] <dbaupp> lex: do you have any multi-byte unicode inputs?
[14:17:51] <dbaupp> lex: also, output of `rustc -v`?
[14:18:54] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[14:19:22] *** Joins: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com)
[14:19:31] <lex> dbaupp: rustc 0.9-pre (9883a62 2013-09-28 16:21:04 -0700)
[14:19:33] <lex> host: x86_64-unknown-linux-gnu
[14:21:17] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[14:22:29] <lex> dbaupp: multi-byte unicodes? not that i know of. here's the code of sched_msg: http://pastebin.com/aJTdmScz
[14:23:00] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Quit: azita)
[14:27:07] *** Joins: freezerburnv (freezerbur@moz-F0DFB280.hfc.comcastbusiness.net)
[14:27:41] <eddyb> "since approximately forever" hehe (reading the daala introduction)
[14:29:12] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[14:31:01] *** Joins: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net)
[14:31:11] <dbaupp> lex: I have no idea :(
[14:31:45] <lex> dbaupp: :(
[14:31:59] <kimundi> something changed with the lenght representation in a vector, could that maybe somehow cause a miscount here?
[14:32:21] *** Joins: ianj (ianjneu@moz-7140CF01.ccs.neu.edu)
[14:32:21] *** Quits: freezerburnv (freezerbur@moz-F0DFB280.hfc.comcastbusiness.net) (Quit: freezerburnv)
[14:32:26] <lex> dbaupp: thanks for taking a look at it
[14:32:27] *** Joins: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net)
[14:32:29] <lex> KindOne: what do you mean?
[14:33:00] <kimundi> vectors changed from storing length in bytes to length in elements. No idea if that could be relevant here though
[14:33:14] *** Joins: freezerburnv (freezerbur@moz-F0DFB280.hfc.comcastbusiness.net)
[14:33:42] *** Quits: bholley (anonymous@moz-76489EBF.dip0.t-ipconnect.de) (Quit: bholley)
[14:34:51] *** Quits: Ferreus (ferreus@moz-682715CF.dip0.t-ipconnect.de) (No route to host)
[14:36:32] <lex> kimundi: i don't know enough to tell :(
[14:41:30] <lex> (╯°□°）╯︵ ┻━┻
[14:42:18] *** Quits: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net) (Ping timeout)
[14:44:43] <kimundi> :(
[14:44:49] *** Joins: tedh (tedh@moz-F0B37C08.hsd1.il.comcast.net)
[14:44:55] <nif> is there, like, an alternative to .clone()?  I would like to use a value without moving it, but I don't want to require it to implement the clone trait.
[14:45:06] <nif> ah, apparently I am back.
[14:45:57] <kimundi> nif: Well, you can just define your own trait/function that does the same as Clone
[14:46:08] <kimundi> nif: But you might as well just use Clone at that point
[14:46:36] <kimundi> nif: Also, "using" a value without moving is perfectly possible with references
[14:46:51] <kimundi> nif: YOu just can't , you know, _move_ it :)
[14:47:32] <nif> kimundi: uh huh. okay, references!  right.  I think that's what I'm looking for.
[14:47:42] <kimundi> Aka borrowed pointers
[14:47:57] <nif> right, okay.
[14:48:54] <nif> yeah. I think what I actually need to do is read the borrowed pointers tutorial top to bottom.
[14:49:02] <nif> for once.
[14:49:18] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[14:49:52] <kimundi> haha
[14:50:29] <nif> I've really only been doing this for 2 weeks, intermingled with schoolwork. so, ya know. my progress w/r/t rust comprehension is mad slow.
[14:51:57] <Sharp> I still don't think I've read it, I'm completely winging it
[14:52:04] * Sharp probably shouldn't be allowed anywhere near the Rust source code :P
[14:52:19] <dbaupp> crappy callgraph of libstd: http://www.ug.it.usyd.edu.au/~hwil7821/rust/std.svg (warning: 7MB svg :P )
[14:52:35] <kimundi> pff, winging it is fine as long as it works
[14:52:55] <nif> Sharp: how long have you been working with Rust?
[14:53:09] <Sharp> Around the same amount of time as you, about to weeks.
[14:53:13] <nif> haha
[14:53:18] <Sharp> …I think Firefox gave up on rendering that.
[14:53:18] <nif> cool. :)
[14:53:21] <Sharp> *two
[14:53:38] <Sharp> No, wait
[14:53:40] <Sharp> It's rendered
[14:53:42] <Sharp> Just… huge.
[14:53:55] <kimundi> nif Nayway, using a reference mostly involves taking &T instead of T, and then making sure that any code that works with that also just works with references into the &T, instead of attempting to move out of it
[14:54:00] <kimundi> Anyway*
[14:55:21] <nif> kimundi: righto. I figured that out. trying to work through the logistics of the 2nd half of that statement w/r/t my goals. :)
[14:55:23] <dbaupp> Sharp: yep... really really wide.
[14:55:34] *** Quits: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net) (Ping timeout)
[14:55:58] <Sharp> Well, I was half right, now Firefox is hanging :)
[14:56:01] <kimundi> Somehow I think a Graph in which line intersections start to make solid black blocks is not that useful
[14:56:39] <kimundi> It was probably unwise of me to have the tesuite running in the background while openeing that picture
[14:56:59] <dbaupp> kimundi: hahaha :P
[14:57:00] <kimundi> Well, at least it closes without a fuss
[14:57:11] <Sharp> I guess this demonstrates that Firefox does not have a timeout feature for SVG like it does for JS :)
[14:57:12] * dbaupp can't drive graphviz very well
[14:57:20] * kimundi bets that on windows his system would be unresponsive for the next half hour now
[14:58:46] <zokier`> maybe that svg should be used as a test for servo :)
[14:59:01] *** Joins: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr)
[14:59:40] <Sharp> Yes, it's a great benchmark because it illustrates such a typical use case :|
[15:01:33] <kimundi> dbaupp: How did you arrive at the call graph data to begin with?
[15:01:55] <Sharp> kimundi: Isn't it generated during compilation?
[15:02:04] *** Joins: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net)
[15:02:11] <kimundi> No idea?
[15:02:21] <Sharp> I thought that was what cfg was for
[15:02:40] <kimundi> Just because the compiler generates that data, doesn't mean that the user has access to it :P
[15:02:56] <kimundi> which cfg?
[15:03:08] <dbaupp> kimundi: wrote a thing using libsyntax/librustc
[15:03:10] <Sharp> The one in middle/
[15:03:20] <kimundi> dbaupp: Nice
[15:03:30] <dbaupp> I'll put it on github tomorrow/the day after/sometime
[15:03:34] *** Quits: jdm (jdm@CAB30FBD.8F96AEA7.2D179A7D.IP) (Ping timeout)
[15:04:01] *** Quits: azita (Azita@moz-C1FB2A8.hsd1.ca.comcast.net) (Ping timeout)
[15:04:07] <eddyb> dbaupp: smaller font, rectangular nodes pls
[15:05:00] *** Joins: Amaranth (travis@moz-F81BB56A.cpe.cableone.net)
[15:05:25] <dbaupp> eddyb: http://www.ug.it.usyd.edu.au/~hwil7821/rust/callgraph-std.dot
[15:05:37] * dbaupp -> bed
[15:06:07] <ChrisMorgan> dbaupp: good idea, me too
[15:06:15] *** Joins: eddyb9 (eddy@FE23D96E.F33C1089.FB866788.IP)
[15:06:23] <Sharp> match dbaupp () { bed => sleep(), _ => sleep() }
[15:06:36] <Sharp> s/bed/Bed/
[15:07:37] <eddyb9> s/e/a/
[15:07:52] *** Quits: eddyb (eddy@FE23D96E.F33C1089.FB866788.IP) (Ping timeout)
[15:10:16] *** Quits: ged (deveiant@moz-610E9711.org) (Quit: WeeChat 0.4.1)
[15:11:16] *** Quits: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr) (Quit: pyrac)
[15:12:08] *** Quits: canhtak (canhtak@moz-14E3CE16.wl.t.ulaval.ca) (Quit: canhtak)
[15:12:57] *** Joins: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com)
[15:13:14] *** Quits: steveklabnik (steveklabn@moz-5EF6C37C.socal.res.rr.com) (Ping timeout)
[15:13:51] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[15:13:51] *** ChanServ sets mode: +ao dherman dherman
[15:16:52] *** Quits: z0w0 (zack@moz-238C2341.lnse3.cha.bigpond.net.au) (Client exited)
[15:20:51] *** Joins: canhtak (canhtak@moz-14E3CE16.wl.t.ulaval.ca)
[15:24:47] *** Quits: doomlord_ (servitor@moz-B44A6624.range86-160.btcentralplus.com) (Ping timeout)
[15:25:36] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[15:25:37] *** Joins: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr)
[15:25:39] *** Quits: jix (jix@moz-D969BFFC.de) (Ping timeout)
[15:25:41] *** Joins: jix (jix@moz-D969BFFC.de)
[15:25:55] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[15:25:55] *** Quits: kaeso (kaeso@moz-F21FF626.unstable.it) (Ping timeout)
[15:26:04] *** Quits: k4nar (quassel@moz-F5EFF779.kimsufi.com) (Ping timeout)
[15:26:08] *** Joins: k4nar (quassel@moz-F5EFF779.kimsufi.com)
[15:26:11] *** Joins: kaeso (kaeso@moz-F21FF626.unstable.it)
[15:29:25] *** Joins: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[15:31:31] *** Joins: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com)
[15:32:12] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:32:24] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[15:33:11] *** Joins: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP)
[15:33:11] *** ChanServ sets mode: +o jdm
[15:33:33] *** Joins: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net)
[15:34:37] *** Joins: jdm_ (jdm@13F2CEC5.7672369.D8E68FF6.IP)
[15:35:04] *** Quits: jdm (jdm@FCCEA34F.7672369.D8E68FF6.IP) (Ping timeout)
[15:36:36] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Quit: leaving)
[15:36:41] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[15:37:50] *** Quits: hjr3 (hradtke@moz-E87BDF1F.socal.res.rr.com) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[15:39:49] <nmatsakis> pnkfelix: related to our discussions about guardians in rust, http://wiki.ecmascript.org/doku.php?id=strawman:weak_references
[15:40:09] *** Quits: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net) (Quit: alan)
[15:41:23] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[15:41:32] *** Quits: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP) (Ping timeout)
[15:42:11] *** Joins: CyBeRKeL (cyber@E6A1FD6F.BE88DC8C.9C1C15C3.IP)
[15:43:34] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: )
[15:44:35] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[15:47:10] *** Quits: DeTeam (DeTeam@92C799C.31715274.F5F3AF2.IP) (Quit: DeTeam)
[15:48:04] *** Joins: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net)
[15:48:12] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[15:49:26] *** Joins: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net)
[15:49:27] *** Quits: nejucomo1 (Adium@moz-434492BB.dsl.static.sonic.net) (Connection reset by peer)
[15:52:45] *** Quits: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr) (Quit: pyrac)
[15:53:37] *** Quits: avsej (avsej@DF1824D5.EFF97412.48F984E6.IP) (Client exited)
[15:55:35] *** Joins: jeaye (Jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[15:58:42] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[15:58:49] *** Joins: alan (alan@moz-FE02DD30.sat6.rackspace.com)
[16:03:03] *** Joins: moostik (Icedove@moz-A9D666E7.w92-151.abo.wanadoo.fr)
[16:03:44] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:04:05] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:04:48] *** jdm_ is now known as jdm
[16:05:52] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:08:31] *** Joins: engla (engla@moz-BFD53D48.selucle.dyn.perspektivbredband.net)
[16:13:37] *** Quits: jxs (joaoxsouls@moz-A7EE0DAF.compute-1.amazonaws.com) (Quit: bye)
[16:15:50] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Ping timeout)
[16:15:51] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[16:15:56] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[16:21:40] *** Joins: mib_az8l1z (Mibbit@518524D1.140D115A.81F87162.IP)
[16:22:58] *** Quits: quasisphere (btw@DC685DC2.94302614.1D0D91FF.IP) (Ping timeout)
[16:23:17] *** Joins: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net)
[16:24:00] *** Joins: hjr3 (hradtke@1A0AE795.28A5F6C3.A2D40ED2.IP)
[16:24:31] <Leo`> what's the current status of cross-crates macros in Rust ? will they eventually be implemented ?
[16:25:00] <bstrie> Leo`: "eventually"
[16:25:08] <bstrie> Leo`: I don't think it's going to happen for 1.0, sadly
[16:25:25] <Leo`> merf.
[16:25:27] <Leo`> ok
[16:25:32] <Sharp> That's okay, you can just implement it in a macro!  Oh wait :(
[16:26:21] <Leo`> it's sad. a good hygienic macro system is so powerful :|
[16:26:24] <andor> has anyone tried debugging with gdb on windows?
[16:26:47] <bstrie> Leo`: ok, please work full-time on it so that we have it by 1.0 :)
[16:26:52] <benh> Is there a particular difficulty with cross-crate macros?
[16:27:02] <Leo`> bstrie: eheh
[16:27:09] <Sharp> I think there probably is, since macros are expanded during syntax parsing.
[16:27:09] <benh> Or just "no one got around to figuring out a serialization format/scoping story/..."
[16:27:16] <benh> mhm
[16:27:21] <bstrie> Leo`: if we *don't* get it in by 1.0, I'll blame you
[16:27:26] <bstrie> for shirking your duties
[16:27:55] <Leo`> :|
[16:28:01] <Sharp> Also: getting everything else working cross crate (which it isn't currently) is probably higher priority
[16:28:18] <Sharp> So probably the people who would be doing it are working on that.
[16:28:29] <Leo`> yeah probably
[16:28:38] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[16:29:03] <Leo`> how does cross-crate other things work by the way ?
[16:29:11] <Leo`> cross-crate traits, for example
[16:29:22] <Sharp> We encode metadata into the LLVM output.
[16:29:32] <Leo`> okay
[16:29:45] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[16:29:55] <Sharp> Then we decode it when we compile against a built a library crate.
[16:30:07] <Sharp> But not for everything, and not perfectly, so there are bugs.  Also the ABI isn't fixed at all :)
[16:30:16] <Leo`> is there a tool to view metadata in a compiled crate ?
[16:32:04] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[16:32:05] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:32:32] <Sharp> I'm not sure.  There are functions in src/librustc/metadata/decoder.rs that you could probably use, but I don't know if there's a specialized tool.
[16:32:36] <kimundi> The problem with macros is that they stop existing for the compiler to soon, so it has nothing to encode in metadata/import/export etc
[16:33:09] <Sharp> kimundi: They *could* be remembered though, in principle :)
[16:33:35] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[16:34:25] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[16:35:50] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[16:36:06] <kimundi> There is also a cyclic problem with macros: Currently it works in two seperate phases: 1. expand expands all macros, and later 2. resolve handles imports/exports. If you could import/export macros, then the compiler would need to go back and forth between those phases and everything inbetween, because he might need to resolve a macro that expands to an macro import that needs to get resolved that expands to somethin else ... Certainly solv
[16:36:06] <kimundi> able, but non-trivial
[16:36:12] *** Joins: bobS (chatzilla@moz-17268C48.sys.virginia.edu)
[16:36:28] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[16:37:00] <Sharp> I think C's solution for that is just "complain when the recursion level gets too deep" :P
[16:37:11] <Leo`> hehe
[16:37:15] <benh> C's solution is copy+pasting all macros into each compilation unit
[16:37:32] <Sharp> C macros can totally include other macros though
[16:37:34] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Ping timeout)
[16:37:35] <benh> which incidentally is how we implement 'standard' macros
[16:37:49] <Sharp> The imports are quite frequently are done in macros :D
[16:37:56] <Sharp> So it has the same problem.
[16:38:12] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[16:38:20] *** Quits: pnkfelix (pnkfelix@87C1F78E.1DE10CA8.D8E68FF6.IP) (Quit: Leaving.)
[16:38:37] <Sharp> Or, well, hm, I suppose that's not really true.  Preprocessor directives != macros.  I take it back.
[16:39:09] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Ping timeout)
[16:39:25] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[16:39:37] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Client exited)
[16:40:04] *** Joins: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com)
[16:40:42] <bobS> Does anyone know if the priority queue implementation in rust is a max queue or min queue?
[16:41:44] *** Quits: infynyxx (infynyxx@moz-E95B370B.nyc.res.rr.com) (Ping timeout)
[16:41:52] <Leo`> the doc says "Returns the greatest item in the queue" so I think it's rather a max queue
[16:41:57] <Leo`> (for the top fn)
[16:42:11] *** Joins: avsej (avsej@D9A610B8.4841F515.FB33447D.IP)
[16:42:49] <bobS> That's what I though, so is there a reason for there being no min priority queue?
[16:43:19] <bobS> I know you can make a min queue if you redefine the lt function in Ord but that seems silly
[16:43:23] *** Quits: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP) (Ping timeout)
[16:43:51] <Sharp> Sillier than duplicating the interface set?
[16:43:55] <Leo`> that is silly if you work with built-in types 
[16:43:55] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Ping timeout)
[16:45:14] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[16:46:07] *** Quits: cdidd (cdidd@moz-74BFE97B.broadband.corbina.ru) (Input/output error)
[16:46:25] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[16:46:57] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[16:47:03] <bobS> I had a struct i was working with and wanted to use a min priority queue with it so I did what I described above. Is there a better way to do it?
[16:47:27] <Leo`> for the moment, I don't think so
[16:48:02] <bobS> Ok thanks
[16:48:07] *** Quits: bobS (chatzilla@moz-17268C48.sys.virginia.edu) (Quit: ChatZilla 0.9.90.1 [Firefox 25.0/20131025151332])
[16:49:07] <Leo`> https://github.com/mozilla/rust/wiki/The-Rusticon this page refers to "procedural macros"... are these like println!() and others ?
[16:50:14] <pauls> Leo`: depending on terminology.
[16:51:00] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[16:51:00] *** ChanServ sets mode: +o tjc
[16:51:14] <Leo`> the page states "Code generation at compiletime, broken into three groups: declarative macros, which are described above as macros; procedural macros, which are written as Rust code that processes a token tree and produce an AST (currently requires editing the compiler), and attributes."
[16:51:15] <pauls> Leo`: in my preferred terminology, a macro is something that can be user-defined, so `line!`, `format!`, etc. are syntax extensions.
[16:51:21] <SiegeLord> I don't think procedural macros would be that useful if you can't implement the current syntax extensions with them...
[16:51:49] <pauls> Once we have procedural macros, things like that will be implementable.
[16:51:53] <Leo`> (for "syntax extensions")
[16:52:07] <Leo`> so what do you call "procedural macros" pauls ?
[16:52:25] <pauls> (I don't know what `println!` does; it might be an ordinary, declarative macro that happens to be built-in)
[16:52:51] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Ping timeout)
[16:53:10] <pauls> Leo`: They aren't yet implemented, but they'd have roughly the same power as syntax extensions do, but they could be user-defined.
[16:53:11] <bstrie> can't be an ordinary macro if it has to look inside strings :P
[16:53:27] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Ping timeout)
[16:53:36] <pauls> bstrie: currently. It would be possible to make a declarative macro that does look inside strings.
[16:53:45] <Sharp> bstsrie: Pull a LISP, strings are lists of characters :)
[16:53:48] <bstrie> oh ho, didn't know that
[16:53:56] * bstrie defenestrates Sharp
[16:54:15] * Sharp deserved that.
[16:54:20] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[16:54:21] *** ChanServ sets mode: +o tjc
[16:54:52] <FreeFull> Actually, in Common Lisp strings aren't lists of characters
[16:54:57] <bstrie> next you'll tell me that natural numbers should be represented by recursively nesting empty lists
[16:54:59] <pauls> Sharp: representation isn't the problem; the problem is just coming up for a notation for destructuring strings that doesn't set people's hair on fire.
[16:55:03] <Sharp> Yeah, I know :(
[16:55:20] <bstrie> pauls: regexes :)
[16:55:30] <FreeFull> Neither are they in Scheme
[16:55:42] <Sharp> Correct, I meant in principle :P
[16:55:44] <FreeFull> They are in Haskell
[16:56:16] <Sharp> Common Lisp also has imperative hash tables and so on, but I probably wouldn't want that to be the representation when I was writing a macro either.
[16:56:18] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[16:57:49] *** Joins: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net)
[16:58:49] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[16:59:05] *** Quits: canhtak (canhtak@moz-14E3CE16.wl.t.ulaval.ca) (Quit: canhtak)
[16:59:44] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Ping timeout)
[17:01:15] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[17:02:11] *** Joins: azakai (alon@moz-BBE3ABD.mv.mozilla.com)
[17:02:13] *** Joins: bholley (anonymous@moz-76489EBF.dip0.t-ipconnect.de)
[17:05:37] *** Joins: jstevans (Instantbir@29CD416B.6D4462A.DDE5D3F6.IP)
[17:05:39] *** Joins: mcweda (Mibbit@moz-5B5D01D9.hfc.comcastbusiness.net)
[17:05:56] *** Joins: canhtak (canhtak@moz-14E3CE16.wl.t.ulaval.ca)
[17:09:12] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[17:09:29] <jmgrosen> what's the recommended way of creating a new ~str with changed characters?
[17:09:32] *** Joins: Ferreus (ferreus@moz-682715CF.dip0.t-ipconnect.de)
[17:09:35] <jmgrosen> since they can't be mutable
[17:09:36] *** Quits: dbaupp (Thunderbir@moz-B3C9E9E8.lns20.syd6.internode.on.net) (Ping timeout)
[17:09:40] *** Joins: mib_s3mgm2 (Mibbit@moz-8129D230.nycmny.east.verizon.net)
[17:09:47] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[17:10:07] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Ping timeout)
[17:10:44] *** Quits: mib_s3mgm2 (Mibbit@moz-8129D230.nycmny.east.verizon.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:10:45] <tjc> jmgrosen: well, if you're working with ASCII strings, you can use a ~[u8] and make it mutable (then convert to a string when you're done mutating)
[17:10:51] <tjc> perhaps there is a better way that I don't know about
[17:10:56] <jmgrosen> alright :/
[17:11:08] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[17:11:09] <tjc> obviously just changing characters (as in bytes) isn't safe, since ~str in Rust is a general Unicode string
[17:11:26] <tjc> but if you know it's ASCII, then you can use ~[u8]
[17:11:50] *** Quits: Ralith (ralith@moz-132F2FD4.sea.wa.customer.broadstripe.net) (Ping timeout)
[17:12:02] *** Joins: devbug_ (quassel@2D4E172D.4C8B6099.9B57EA59.IP)
[17:12:14] *** Quits: Ferreus (ferreus@moz-682715CF.dip0.t-ipconnect.de) (Ping timeout)
[17:12:53] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[17:13:26] *** Quits: mcweda (Mibbit@moz-5B5D01D9.hfc.comcastbusiness.net) (Quit: http://www.mibbit.com ajax IRC Client)
[17:14:52] *** Quits: noam_ (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[17:15:07] *** Joins: noam_ (noam@F6B530A7.720527A7.416762B.IP)
[17:15:38] *** Quits: wilsonk-laptop (kvirc@moz-8E86F35A.cg.shawcable.net) (Ping timeout)
[17:17:33] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Ping timeout)
[17:17:53] *** Quits: jstevans (Instantbir@29CD416B.6D4462A.DDE5D3F6.IP) (Ping timeout)
[17:18:47] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[17:21:23] *** Joins: barosl (barosl@3DE683B6.E551553C.7544CABF.IP)
[17:21:43] <andor> debugging in eclipse on windows works too, yay http://i.imgur.com/LxOUIKR.png
[17:21:58] *** Joins: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl)
[17:22:01] <andor> a bit clunky, but hey, it works at least
[17:24:03] *** Joins: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net)
[17:26:01] *** Joins: sp3d (s@6361F3B1.19CD1E54.8354FB35.IP)
[17:26:04] <jdm> rad
[17:27:40] <Sharp> No syntax highlighting though :)
[17:27:47] <Sharp> Or, well, a little.
[17:28:09] <andor> it tries to highlight it as C code, since i made a C project
[17:28:30] <andor> it's supposed to work without being in a project, but for some reason it doesn't want to work that way
[17:28:34] <bstrie> andor: awesome
[17:28:41] <bstrie> is there an eclipse plugin somewhere?
[17:28:52] <bstrie> or otherwise a manual on how to get this working?
[17:28:55] * Sharp should start the 10th Rust IDE in Rust.
[17:29:01] * Sharp figures there have already been 9 others :)
[17:29:08] <andor> http://michaelwoerister.github.io/2013/09/27/what-you-call-the-present.html i just had to change a couple things in this
[17:29:27] <Sharp> In general IDEs would benefit greatly from a cleaned up AST
[17:29:29] <Sharp> A lot of the spans are dumb
[17:29:34] <Sharp> Or just not present.
[17:30:28] <andor> generally it works pretty well in linux, but the windows version wants to be a bit too clever and makes some assumptions about building projects that aren't C/C++
[17:30:42] <andor> windows version of eclipse, i mean
[17:30:54] <Sharp> Why on earth would that logic be different?
[17:31:14] <andor> beats me
[17:31:44] <andor> well i guess because linux has sane(er) defaults in regards to the location of compilers and stuff?
[17:32:12] <Sharp> Oh god… don't even get me started on that story in Windows.
[17:32:31] <Sharp> "Let's update the .NET CLR but keep the same version and directory structure!  And let's do this *inconsistently*"
[17:32:49] <Sharp> "Let's also have two different versions of the compiler that are ostensibly the same but generate different code and have different caveats"
[17:33:09] <Sharp> "Let's particularly make sure DLL name resolution is different between the two in an incompatible way"
[17:33:29] <andor> heh
[17:33:53] <Sharp> And that's really just the tip of the iceberg.
[17:34:25] <andor> well, my solution isn't very healthy for actually editing code because eclipse underlines the code in all the places, thinking it's C code
[17:35:04] <Sharp> How does it know every word isn't just a macro?
[17:35:10] <Sharp> The whole thing could be fully C++ compatible! :D
[17:35:34] <bstrie> I think that doomlord might actually macro-ify `auto` to `let` in his C++ code
[17:35:41] <bstrie> so there's precedent for this
[17:36:47] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: zzzzzzzzzz)
[17:37:12] *** Quits: nif (Mibbit@moz-B6DFA19D.wireless.oberlin.edu) (Quit: http://www.mibbit.com ajax IRC Client)
[17:38:30] *** Joins: tjc (tjc@moz-6EB4E533.dsl.tsoft.com)
[17:38:30] *** ChanServ sets mode: +o tjc
[17:39:36] <andor> what do people use to edit Rust code?
[17:39:43] *** Quits: tjc (tjc@moz-6EB4E533.dsl.tsoft.com) (Quit: zzzzzzzzzzz)
[17:39:48] <tiffany> I use vim
[17:39:53] <sfackler> Sublime and vim
[17:39:56] * Sharp uses SublimeText and vim.
[17:40:01] <tiffany> the arch linux package for rust comes with rust highlighters
[17:40:14] <bstrie> vim
[17:40:33] <bstrie> I mean, lotus123
[17:40:35] <pauls> andor: a number of people use emacs
[17:40:42] <Sharp> I know vim is a bad habit and I'm trying to break it :(
[17:40:46] <tiffany> I shouldn't be surprised by all the people using vim/emacs, given that there's no rust IDEs
[17:40:49] <Sharp> It's the Hg to emacs's Git
[17:41:10] <sfackler> uh
[17:41:11] <tiffany> nothing wrong with vim, sharp
[17:41:22] <bstrie> haha
[17:41:23] <tiffany> I prefer vim because it's command-based rather than hotkey-based
[17:41:27] <Sharp> Nothing wrong with Mercurial either :)
[17:41:28] <andor> i'm asking because i am a poor lad who's stuck with windows for time being
[17:41:29] <tiffany> and also modal
[17:41:30] <bstrie> emacs is the bzr to vim's git :P
[17:41:54] <benh> I also use vim <strike>and emacs</strike> for C/C++, IDEs are just too complicated for me :(
[17:42:02] <tiffany> I use vim for C/C++ too
[17:42:08] <tiffany> well, I use vim for everything
[17:42:21] * Sharp only uses IDEs for Java, because Java has so much boilerplate that it's actually necessary.
[17:42:44] <tiffany> and that is why I hope no IDEs for rust pop up
[17:42:48] <kimundi> I use Kate on arch, seems to work so far :)
[17:43:01] <Sharp> I would use an IDE if I'd written it, so I expect lots of IDEs for Rust to pop up :)
[17:43:07] <tiffany> it rewards boilerplate code
[17:43:31] <Sharp> I don't really need an IDE, I just need error highlighting
[17:43:39] <tiffany> syntastic will do that, sharp
[17:43:43] <SiegeLord> I use geany... it's not too bad after I added a lexer/parser to it... heh
[17:43:46] <Sharp> For Rust?
[17:43:46] <bstrie> tiffany: having an idea only rewards boilerplate if the primary devs use that IDE. and the primary rust devs all use vim and emacs :)
[17:43:48] <tiffany> yeah
[17:43:51] <Sharp> Ooh, neat.
[17:43:53] <benh> I'd use a program that helped me keep track of all my different vim windows, though...
[17:43:55] *** Joins: Liothen (liothen@moz-266BCA86.spkn.qwest.net)
[17:43:57] *** Joins: Ms2ger (Ms2ger@moz-6EEC6E4D.adsl-dyn.isp.belgacom.be)
[17:44:02] <tiffany> it shows syntax errors for rust and lua, but I don't think it works for C on my system
[17:44:08] <bstrie> benh: tmux!
[17:44:17] <benh> I mean real windows!
[17:44:25] <bstrie> benh: or just be lazy like I am, and use ^Z + jobs + fg
[17:44:28] <andor> SiegeLord: i would be highly interested in that
[17:44:32] <andor> care to share it
[17:44:32] <tiffany> I usually use gvim's tab system
[17:44:48] <tiffany> in C I keep two windows though, one for header and one for source
[17:44:51] *** Quits: aeqwa (aeqwa@moz-A0BDC372.dsl.tropolys.de) (Quit: WeeChat 0.4.3-dev)
[17:44:54] <SiegeLord> andor: have to build it from source, unfortunately... I don't know how easy Windows makes it
[17:44:57] <benh> bstrie: I mean I typically use a wrapper script that opens vim in a new urxvt window, and I appreciate having the windows side by side for reference
[17:45:05] <tiffany> andor: vim is available on windows
[17:45:11] <benh> but sometimes one of them gets lost under the firefox window and I try to open another one for the same file and oh no
[17:45:14] <andor> SiegeLord: i have a working mingw installation
[17:45:18] <bstrie> benh: keeping windows side by side is what tmux excels at :P
[17:45:25] <andor> tiffany: i'm aware but not a fan of modal editors
[17:45:31] <tiffany> why not?
[17:45:57] <bstrie> too modal, probably
[17:45:57] <SiegeLord> andor: Well, if you want to try... here's my branch: https://github.com/SiegeLord/geany/tree/rust
[17:45:59] <andor> don't know, don't like them, i seem to spend more time trying to figure out how to do something the "effective" way
[17:46:07] *** Joins: nielsle (nielsle@moz-C46DA772.boa.fiberby.dk)
[17:46:13] <bstrie> andor: that's the fun! it's like playing music :)
[17:46:38] <andor> i can see why so many folks like it but i'm too used to my workflow to learn all the tricks to it
[17:46:43] * Sharp just uses git grep whenever he has to find things
[17:46:55] <andor> i tried, i seroiusly tried a lot of times, but it seems to inefficient to me
[17:47:03] <tiffany> I don't know all that many vim commands I must admit
[17:47:03] <bstrie> git grep is so useful
[17:47:14] <andor> and i really couldn't grasp the whole "spend more time in normal mode" thing
[17:47:31] <Sharp> git grep took the multi gigabyte repository we had at my last company and pounded it into submission
[17:47:36] <Sharp> Any other form of search took literally minutes on a VM
[17:47:36] <andor> i know i'm supposed to be more in normal mode, but i was in insert mode 85% of the time
[17:47:46] <Sharp> git grep took about 2 seconds
[17:47:54] <tiffany> I'm usually in insert mode
[17:48:06] <andor> doesn't that kind of defeat the purpose though?
[17:48:15] <tiffany> how would it?
[17:48:41] <tiffany> if you're writing the file, most of your time will be spent writing the file, unless there's an awful lot of boilerplate
[17:48:46] <tiffany> like making an html table out of an ascii one
[17:48:47] <andor> i mean the point is that you're supposed to have control and do magic over the text being edited with normal mode
[17:49:05] <Sharp> I actually spend most of my time in a file reading it, not writing
[17:49:09] <andor> at least that was my impression of my vim-wizard friend
[17:49:11] <Sharp> I spend comparatively little of my time writing code.
[17:49:18] <bstrie> I actually spend most of my time in a file reading reddit
[17:49:22] <tiffany> and what magic can you do if you have no text to do the magic on?
[17:49:24] <Sharp> Heh.
[17:49:29] <andor> touchéű
[17:49:33] <tiffany> the code won't write itself no matter how good you are at vim
[17:49:35] <bstrie> gesundheit
[17:49:35] <andor> -ű
[17:50:06] <Sharp> tiffany: That's why the experienced vimmer starts with a character map and works from there.
[17:50:09] <tiffany> a significant amount of my time is spent opening header files when I write C, sharp
[17:50:15] *** Quits: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com) (Quit: johnmurray)
[17:50:18] <andor> well yes, but my point is that in vim you're supposed to delete things with actual delete commands, eg. dw, dd, etc
[17:50:21] <Sharp> Rust supports Unicode so this is more complicated of course :)
[17:50:24] <Sharp> Oh, yeah, I do that
[17:50:29] <Sharp> But I mean
[17:50:31] <Sharp> Otherwise it takes forever
[17:50:32] <tiffany> so naturally I keep vim open for a long time and eventually end up with 20, 40 tabs open
[17:50:41] <Sharp> Yep
[17:50:46] <Sharp> Until it runs out of memory(TM)
[17:51:08] <Sharp> (Which vim basically never does, but other text editors do).
[17:51:27] <tiffany> my gvim is using 0.2% of my system memory right now
[17:51:59] *** Joins: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com)
[17:52:07] * Sharp knows a lot of people who read in vim and write elsewhere
[17:52:17] <tiffany> I suppose it uses memory mapped files, there's about 1.5mb of virtual memory mapped with 8k resident
[17:52:24] *** Parts: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Leaving...)
[17:52:33] <Sharp> Yeah, vim is pretty good at dealing with extremely large files.
[17:52:44] <Sharp> Like, I wouldn't *recommend* opening multi-GB log files with it, but it *works*
[17:52:45] <andor> well i'll be damned if i'm not gonna try getting accustomed to vim again
[17:53:09] <tiffany> I always get mad when a text editor I'm using can't handle a 3 megabyte xml file
[17:53:44] <Scriptor> the current 0.8 tutorial's 'Enums' section starts off with an enum with structs as its variants
[17:53:54] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[17:53:55] <tiffany> notepad will just die, gedit will be laggy, but vim will handle it just fine
[17:53:57] *** Joins: brson (brson@moz-BBE3ABD.mv.mozilla.com)
[17:53:57] *** ChanServ sets mode: +ao brson brson
[17:54:01] <Scriptor> but at the end it finishes off with 'Enum variants may also be structs. For example:...'
[17:54:17] <Scriptor> am I missing something or is this a bit redundant? http://static.rust-lang.org/doc/0.8/tutorial.html
[17:55:13] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:55:23] <tiffany> I don't see where it says that in the beginning
[17:55:42] <tiffany> it uses tuple variants which contain struct values, which is different
[17:56:00] <bjz> Scriptor: 0.8 tutorial is old
[17:56:06] <Scriptor> ah, I see the difference now
[17:56:16] <bjz> http://static.rust-lang.org/doc/master/tutorial.html
[17:56:46] <Scriptor> the last bit has the actual struct definitions inside the Enum
[17:56:49] *** Joins: pcwalton (pcwalton@moz-C07D5168.p2p.sfo1.mozilla.com)
[17:56:49] *** ChanServ sets mode: +ao pcwalton pcwalton
[17:57:02] <Sharp> bstrie: You use git grep, but do you use git grep -w?
[17:57:11] <Ms2ger> What's -w?
[17:57:15] <bjz> enum Foo { UnitStyle, TupleStyle(T, U), StructStyle { t: T, u: U } }
[17:57:21] <Sharp> Word match.
[17:57:24] <Sharp> Only matches whole words.
[17:57:40] <Sharp> It's essential for finding identifiers, which is what I use git grep for 90% of the time.
[17:57:45] <benh> heh
[17:58:05] <benh> I grep for 'fn blah(' most of the time ;)
[17:58:35] <Sharp> -w works for that too, actually, it just ensures a word boundary at the beginning and end of the phrase (I guess more accurately it would work for 'fn blah')
[17:58:42] <Sharp> -w is also faster, or so it seems to me
[17:58:55] <Sharp> But that might not be relevant except on extremely large repositories.
[17:59:36] <Sharp> I also by habit include -I, which removes binaries from consideration, but well-maintained repositories shouldn't have binaries for the most part.
[17:59:41] <bstrie> Sharp: looks interesting
[17:59:55] * Sharp also uses --cached which increases its speed still further
[18:00:20] <bstrie> I've honestly never thought to myself "oh I wish git grep were any faster"
[18:00:27] <bstrie> so -w and --cached all seem like premature optimization :P
[18:00:28] *** Joins: boredomist (ruqs@8186917.CC8FA3EE.E3401B6E.IP)
[18:00:30] <Sharp> Heh
[18:00:34] <nielsle> rusti trait A{}; let b : ~[@A];
[18:00:42] <Sharp> I type them automatically because of my previous experience
[18:00:45] <bstrie> rusti isn't here!
[18:00:47] <Sharp> That repo was rather resistant to search otherwise :P
[18:00:55] <nielsle> Ah, thanks
[18:01:10] <nielsle> He didn't respond to my private messages
[18:01:36] <bstrie> rusti is shy
[18:02:37] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[18:02:47] <Sharp> Yeah I just checked… the rust repo is so tiny that the difference isn't even noticeable
[18:02:51] *** Quits: canhtak (canhtak@moz-14E3CE16.wl.t.ulaval.ca) (Quit: canhtak)
[18:03:04] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[18:03:38] <Sharp> On a SSD at least.
[18:03:43] *** Joins: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP)
[18:03:54] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[18:08:54] *** Joins: canhtak (canhtak@moz-14E3CE16.wl.t.ulaval.ca)
[18:09:08] <SimonSapin> Yurume: great work :)
[18:09:28] <Yurume> SimonSapin, ha, that was demanding ;)
[18:09:34] *** Quits: CarpNet (ac@moz-FD24B77.sohonet.co.uk) (Quit: Leaving)
[18:09:48] *** Joins: mikezaby (mikezaby@moz-B26868E.home.otenet.gr)
[18:10:06] <nielsle> Is there a modern way to do something like "trait A{}; let b : ~[@A];" I want to create a list of objects that implement the trait A.  
[18:10:34] <Yurume> regarding your comment on #17: I think it's another issue, and BOM-aware encoding is useful for itself. for the former I'm creating another issue.
[18:10:51] *** Quits: echristo (echristo@moz-1892C634.hsd1.ca.comcast.net) (Quit: echristo)
[18:10:52] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[18:11:01] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[18:11:08] <kimundi> nielsle: That still works, you can also replace the @ with a ~ or &
[18:11:27] <nielsle> Thanks
[18:11:31] *** Joins: expr (user@moz-53696A94.dyn.optonline.net)
[18:11:37] *** Joins: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se)
[18:11:40] <kimundi> nielsle: Also, depening on context a Iterator over those objects might be more general than a vector
[18:11:42] <bstrie> nielsle: yeah, prefer to use &A when possible
[18:12:04] <dcrewi> nielsle: I think you have to explicitly cast them though: "b.push(implementor as @A)"
[18:12:05] <bstrie> well, I guess you're already using ~[], so I guess ~A is fine
[18:12:29] <nielsle> Thanks
[18:13:21] *** Joins: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu)
[18:15:36] *** Joins: Pac (textual@moz-EFDA98AF.pool.e-mobile.ne.jp)
[18:22:50] <Yurume> SimonSapin, by the way, what do you think about stream integration?
[18:23:40] <SimonSapin> Yurume: It was in a branch last I looked, so I haven’t looked in details yet
[18:23:52] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[18:24:15] <SimonSapin> Yurume: when are BOM-aware decoders with a fixed encoding useful?
[18:24:18] <Yurume> I looked in std::rt::io::flate and... it seems to be unimplemented at all.
[18:24:33] <SimonSapin> what is it?
[18:24:51] <Yurume> a stream which compresses/decompresses on the fly
[18:25:37] <acrichto> Yurume: there are still portions of the runtime which still have yet to get filled out
[18:25:40] <Yurume> I'm pretty sure that major use cases of rust-encoding would be reading files...
[18:25:47] <acrichto> most of it started as placeholders for implementations that were yet-to-come
[18:26:28] *** Joins: matthewbot (user@moz-C6814817.ga.at.cox.net)
[18:27:00] <Yurume> SimonSapin, BOM-aware UTF-8 decoder with... UTF-8? :)
[18:27:37] <Yurume> i.e. BOM-aware UTF-8 decoder is same as a UTF-8 decoder which can detect BOM and falls back to UTF-8
[18:28:36] <Yurume> but this analogy breaks down with UTF-16, you have two separate encodings expecting different BOMs.
[18:28:50] *** Quits: Pac (textual@moz-EFDA98AF.pool.e-mobile.ne.jp) (Ping timeout)
[18:29:00] *** Quits: squiddy (squiddy@moz-A873F9EA.adsl.alicedsl.de) (Ping timeout)
[18:29:40] *** Quits: moostik (Icedove@moz-A9D666E7.w92-151.abo.wanadoo.fr) (Ping timeout)
[18:30:57] *** Joins: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com)
[18:32:56] *** Joins: themgt (themgt@moz-83F07CDA.cm.vtr.net)
[18:32:58] *** Quits: themgt (themgt@moz-83F07CDA.cm.vtr.net) (Client exited)
[18:33:02] *** Joins: jgilbert (jgilbert@moz-BBE3ABD.mv.mozilla.com)
[18:34:49] *** Joins: Pac (textual@moz-7E76649.emobile.ad.jp)
[18:39:03] *** Quits: johnmurray (jmurray@moz-299FF8FF.fw.nyc2.appnexus.com) (Quit: johnmurray)
[18:43:27] *** Quits: StarLight (StarLight@moz-20877D28.dynamic.avangarddsl.ru) (Ping timeout)
[18:43:52] *** Quits: eternaleye (eternaleye@moz-76321711.hsd1.wa.comcast.net) (Ping timeout)
[18:46:11] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[18:47:26] *** Joins: StarLight (StarLight@moz-501842FE.dynamic.avangarddsl.ru)
[18:47:58] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[18:49:43] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[18:51:09] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[18:51:35] *** Joins: echristo (echristo@2C6BFF53.D6CCE4AE.77834EAA.IP)
[18:51:38] *** Joins: DeTeam (DeTeam@moz-A3D3E625.dyn.broadband.iskratelecom.ru)
[18:51:46] *** Quits: maxiepoo (Max@moz-FFD7044A.nuwlan.northwestern.edu) (Quit: maxiepoo)
[18:54:12] <SimonSapin> UTF-16-BE and UTF-16-LE are different encodings
[18:54:20] *** Quits: DeTeam (DeTeam@moz-A3D3E625.dyn.broadband.iskratelecom.ru) (Quit: DeTeam)
[18:55:01] <Yurume> but some use cases require selecting from them, which is not quite different from UTF-8 plus a fallback encoding problem.
[18:55:53] <SimonSapin> I don’t see what you’re getting at
[18:57:58] <Yurume> uh, I can't understand what do you mean.
[18:58:21] <Yurume> (what I'm getting at: use cases, or UTF-16 itself?)
[18:59:17] <tiffany> what are you trying to do? open a file without knowing which UTF encoding it uses?
[19:00:08] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[19:00:47] <Yurume> trying to design a sane API for a decoder supporting multiple encodings, primarily, a set of Unicode encodings with BOM and fallback encoding, for rust-encoding.
[19:01:59] <tiffany> have a list of (BOM, decoder) and fallback to utf-8 if none of them match?
[19:02:53] <Yurume> fallback to other encoding (e.g. extracted from metadata) to be exact.
[19:03:33] *** Joins: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net)
[19:03:42] <Yurume> actually, sometimes we might not have a fallback encoding at all, and we might have to require BOM.
[19:04:27] *** Quits: FrozenCow (FrozenCow@moz-B2DF4929.chello.nl) (Client exited)
[19:04:44] <Yurume> a major use case in this regard is BOM-expecting UTF-16 decoder, which selects UTF-16-LE or UTF-16-BE depending on the BOM, but if the BOM is not found it should fail
[19:05:45] <Yurume> some character encoding implementations regard this kind of decoder simply as a separate encoding: utf-16le, utf-16be, and plain utf-16, for example.
[19:06:30] *** Joins: nrc (nrc@7BE24E90.A5032A01.3CFC199D.IP)
[19:06:31] <tiffany> there's no such thing as "plain utf-16" though
[19:06:45] <Ms2ger> There's only the-devil's-work utf-16
[19:07:34] <Yurume> tiffany, labelled as so, of course
[19:11:30] *** Joins: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com)
[19:12:45] *** Quits: Pac (textual@moz-7E76649.emobile.ad.jp) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[19:15:24] *** Quits: mikezaby (mikezaby@moz-B26868E.home.otenet.gr) (Input/output error)
[19:18:20] *** Quits: andre (andre@CA528A4A.45A4338E.8EE27E6.IP) (Quit: leaving)
[19:18:42] *** Joins: CarpNet (Alasdair@moz-25C796BC.cable.virginm.net)
[19:18:55] <FreeFull> Of course, there is also the confusion between UTF-16 and UCS-2
[19:19:31] *** Quits: nejucomo (Adium@moz-434492BB.dsl.static.sonic.net) (Quit: Leaving.)
[19:19:49] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:19:57] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Ping timeout)
[19:19:58] <tiffany> UCS-2 doesn't fit all of unicode does it?
[19:20:10] <Ms2ger> It fits more
[19:20:26] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[19:20:33] <Ms2ger> UCS-2 has unpaired surrogates
[19:20:46] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:20:49] <Ms2ger> And that's why we can't have nice things
[19:21:26] *** Quits: amro (quassel@D9E34ACF.8AAAF769.FAAB0799.IP) (Ping timeout)
[19:21:30] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[19:21:56] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[19:22:29] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:23:40] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:23:46] *** Quits: expr (user@moz-53696A94.dyn.optonline.net) (Ping timeout)
[19:25:20] *** Joins: Khmar (user@2E1C7DC9.DB3E3FE1.657EB0E6.IP)
[19:25:28] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Connection reset by peer)
[19:25:34] *** Joins: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:27:15] *** Quits: dew1 (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[19:27:19] *** Joins: mturkson23 (Mibbit@92FBD83B.4A7206FF.E520B65A.IP)
[19:27:38] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[19:27:38] *** ChanServ sets mode: +ao dherman dherman
[19:27:53] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:28:02] <clonejo> Will BufferedStream implement read_line in the future?
[19:28:30] <acrichto> clonejo: we're thinknig of moving read_line to Reader, so yes
[19:28:49] <eddyb9> hey look, it's faq#1
[19:29:00] <cmr> I still think that's a bad idea.
[19:29:38] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[19:29:57] *** Parts: lex (lex@moz-CB4EF17D.bootp.virginia.edu) ()
[19:30:21] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:31:27] *** Joins: alex-abreu (alex@EA3B4035.84482E50.488A906A.IP)
[19:35:03] *** Quits: mturkson23 (Mibbit@92FBD83B.4A7206FF.E520B65A.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[19:35:05] *** Joins: kud1ing (Mibbit@moz-3358C513.pools.arcor-ip.net)
[19:37:32] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[19:40:39] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Quit: Leaving.)
[19:40:41] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[19:43:35] *** Joins: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr)
[19:45:01] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[19:45:35] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:46:01] *** Joins: mukilan (quassel@4076801E.85934B53.520CDC98.IP)
[19:46:04] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[19:47:14] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[19:47:23] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[19:48:48] *** Joins: maik (maik@moz-BDF2085A.dip0.t-ipconnect.de)
[19:49:49] *** Quits: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net) (Quit: dherman)
[19:50:38] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[19:55:55] *** Joins: tikue_ (tikue_star@B5E62AAE.8F253A2B.689607DE.IP)
[19:56:25] *** jorendorff is now known as jorendorff_away
[19:56:27] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Input/output error)
[19:56:31] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[19:56:37] *** Quits: mukilan (quassel@4076801E.85934B53.520CDC98.IP) (Client exited)
[19:57:32] *** jorendorff_away is now known as jorendorff
[19:58:25] *** Quits: maik (maik@moz-BDF2085A.dip0.t-ipconnect.de) (Ping timeout)
[20:00:06] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Input/output error)
[20:00:10] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[20:02:33] *** sam113101 is now known as sam113101_afk
[20:04:07] *** Quits: kud1ing (Mibbit@moz-3358C513.pools.arcor-ip.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:06:02] *** Quits: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com) (Ping timeout)
[20:06:04] *** Joins: dew (Instantbir@moz-E4452B8F.static.stls.mo.charter.com)
[20:07:38] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Ping timeout)
[20:07:55] *** jorendorff is now known as jorendorff_away
[20:11:02] *** Joins: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com)
[20:14:42] *** Joins: sigma-pc (sigma@moz-AAED89D5.range86-160.btcentralplus.com)
[20:16:50] *** Quits: bholley (anonymous@moz-76489EBF.dip0.t-ipconnect.de) (Quit: bholley)
[20:28:06] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[20:28:22] *** Joins: valenting (Thunderbir@F12D0376.5025026B.FB866788.IP)
[20:30:56] *** Joins: maik (maik@moz-BDF2085A.dip0.t-ipconnect.de)
[20:31:23] *** Quits: mjrosenb (mjrosenb@moz-B3592BDA.club.cc.cmu.edu) (Ping timeout)
[20:31:53] *** Joins: robertknight (robertknig@moz-BD709226.range109-153.btcentralplus.com)
[20:32:08] *** Quits: robertknight (robertknig@moz-BD709226.range109-153.btcentralplus.com) (Client exited)
[20:32:41] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[20:32:54] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Quit: leaving)
[20:32:57] *** Joins: g3orge (g3orge@moz-CE3A1669.access.hol.gr)
[20:33:26] *** Joins: etw (john@moz-D871A25B.nyc.res.rr.com)
[20:33:39] *** Quits: sigma-pc (sigma@moz-AAED89D5.range86-160.btcentralplus.com) (Connection reset by peer)
[20:34:54] <jdm> is there some form of run::process_output that would give us streaming output?
[20:35:08] *** jorendorff_away is now known as jorendorff
[20:35:11] <jdm> I want to write it to stdout at the same time as I get to store it away for processing later
[20:35:25] *** Quits: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de) (Ping timeout)
[20:35:36] <acrichto> jdm: you'd have to use Process::new with out_fd set to None and then call take_output() to go read it in another task
[20:35:56] <jdm> I can do that
[20:36:06] * jdm has found his friday afternoon project
[20:36:32] *** Quits: BizarreCake (BizarreCak@moz-361FE9B2.dynamic.barak-online.net) (Ping timeout)
[20:37:47] *** Joins: robertknight (robertknig@moz-BD709226.range109-153.btcentralplus.com)
[20:37:47] *** Quits: ianj (ianjneu@moz-7140CF01.ccs.neu.edu) (Input/output error)
[20:38:25] *** Quits: robertknight (robertknig@moz-BD709226.range109-153.btcentralplus.com) (Client exited)
[20:39:03] *** Joins: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de)
[20:40:22] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[20:42:02] <AlexMax> If I want to introduce rust into a project that is primarily C
[20:42:10] <AlexMax> what is the best approach for doing this?
[20:42:55] <acrichto> AlexMax: right now, you'll probably want to compile with #[no_std] (to omit the standard library), and the best approach is to compile to llvm bytecode (--emit-llvm) and then use that to create an object files
[20:43:28] <acrichto> AlexMax: rust functions (when compiled with rustc) will all have a prologue attempting to enforce the stack limit for the current task, but if you're using this in a C library you can't really do that
[20:45:01] *** Quits: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de) (Ping timeout)
[20:45:08] <kmc> AlexMax: http://brson.github.io/2013/03/10/embedding-rust-in-ruby/ may be useful, though out of date
[20:45:20] <Sharp> Is this for your job, or just for fun?
[20:45:28] <kmc> also https://github.com/thestinger/rust-core has stuff for programming with #[no_std]
[20:45:29] <AlexMax> I kind of want to try 'converting' a toy c project to rust for fun
[20:45:29] *** Quits: valenting (Thunderbir@F12D0376.5025026B.FB866788.IP) (Ping timeout)
[20:45:36] <Sharp> Ah, okay.
[20:45:54] *** Quits: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net) (Quit: ozten)
[20:46:09] <AlexMax> I don't want to start from scratch on the rust end
[20:48:34] *** Joins: ofeldt (ofeldt@moz-4D678086.dip0.t-ipconnect.de)
[20:48:52] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[20:49:24] *** Joins: ozten (ozten@moz-DD3B00B4.hsd1.wa.comcast.net)
[20:49:36] *** Joins: ksf (ksf@moz-EDD270DC.adsl.hansenet.de)
[20:50:18] *** Joins: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP)
[20:52:14] *** Joins: dherman (dherman@moz-6CA476B1.hsd1.ca.comcast.net)
[20:52:14] *** ChanServ sets mode: +ao dherman dherman
[20:52:56] *** Joins: Engineer (Mibbit@946A1967.A3B62A92.3ABBA12E.IP)
[20:53:12] *** Joins: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net)
[20:53:25] *** Quits: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net) (Ping timeout)
[20:54:09] *** Joins: mib_o50iud (Mibbit@moz-C02462D9.sb.sd.cox.net)
[20:54:34] *** Quits: mib_o50iud (Mibbit@moz-C02462D9.sb.sd.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:58:08] *** Quits: Jackneill (Jackneill@moz-224A92F.pool.digikabel.hu) (Input/output error)
[20:58:13] *** Quits: Kruppe (user@moz-E150F49F.cpe.net.cable.rogers.com) (Ping timeout)
[20:58:34] *** Joins: tautologico (linf@A856634.A046D081.AB599759.IP)
[20:59:41] *** Quits: jvshahid (jvshahid@moz-C1BC0CE4.nyc.res.rr.com) (Ping timeout)
[21:01:33] *** Quits: Engineer (Mibbit@946A1967.A3B62A92.3ABBA12E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:02:20] *** Joins: nejucomo (Adium@moz-A94CACD5.dsl.pltn13.sbcglobal.net)
[21:03:31] *** Quits: lmandel (lmandel@13F2CEC5.7672369.D8E68FF6.IP) (Quit: lmandel)
[21:04:17] *** Joins: Engineer (engineer@946A1967.A3B62A92.3ABBA12E.IP)
[21:04:27] *** Quits: freezerburnv (freezerbur@moz-F0DFB280.hfc.comcastbusiness.net) (Quit: freezerburnv)
[21:05:02] *** Joins: valenting (Thunderbir@F12D0376.5025026B.FB866788.IP)
[21:05:27] <jdm> acrichto: there's no take_output on Process
[21:05:39] <jdm> there's an output method with documentation that references it, 
[21:05:41] <jdm> but that's all
[21:06:05] *** Quits: sankha93 (Instantbir@7061CD01.D6BD0D91.22D41759.IP) (Quit: Gone to save the world!)
[21:06:17] *** Quits: tikue_ (tikue_star@B5E62AAE.8F253A2B.689607DE.IP) (Ping timeout)
[21:06:23] <acrichto> jdm: oh sorry, you'll have to use rt::io::process::Process in the meantime
[21:06:32] <jdm> ah, thanks
[21:06:47] <acrichto> jdm: there's still an open issue about rewriting std::run, I think that it can still use some improvement
[21:07:11] <Ms2ger> Eh, I'd use python instead ;)
[21:07:28] *** Quits: victorporof (victorporo@75D4E0BA.E3B14EAA.D111398B.IP) (Quit: victorporof)
[21:08:06] <jdm> acrichto: um, are you sure this is what I need? http://static.rust-lang.org/doc/master/std/rt/io/process/struct.Process.html
[21:08:13] <jdm> it doesn't seem to give me access to any form of output
[21:08:22] <acrichto> jdm: the `io` field is what you want
[21:08:22] <jdm> unless it's just the io field
[21:08:24] <jdm> ok
[21:11:01] *** Quits: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP) (Input/output error)
[21:11:06] *** Joins: Earnestly (earnest@38FE72A5.82423D8F.BFD1ABFD.IP)
[21:12:10] *** Quits: hurderella (Heo@13864F63.2DD6919B.56C9C5CA.IP) (Ping timeout)
[21:12:50] *** Joins: voxpopuli (fanservice@moz-FE161659.wv.cc.cmu.edu)
[21:15:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[21:16:30] *** Joins: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP)
[21:17:19] *** Joins: tjc (tjc@B9E77A82.2D024FDB.284344F5.IP)
[21:17:19] *** ChanServ sets mode: +o tjc
[21:17:49] *** Quits: Khmar (user@2E1C7DC9.DB3E3FE1.657EB0E6.IP) (Ping timeout)
[21:18:56] <jdm> is there a println that doesn't include the n?
[21:18:59] <jdm> er, ln
[21:19:39] <acrichto> print?
[21:20:00] *** Joins: SilverKey (SilverKey@moz-B589DA51.sw.biz.rr.com)
[21:20:45] * jdm checks if print! exists
[21:21:47] *** Quits: james4k (james@moz-E7990244.consolidated.net) (Ping timeout)
[21:23:13] *** Joins: tikue_ (tikue_star@6A4FE76F.2ACBBF24.689607DE.IP)
[21:24:41] *** Joins: james4k (james@moz-E7990244.consolidated.net)
[21:27:20] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[21:28:11] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[21:28:14] <jmgrosen> can I turn a ~[u8] into a ~str without an allocation?
[21:28:27] <Ms2ger> Yes
[21:28:30] <jmgrosen> oh, from_utf8_owned, never mind
[21:28:45] <Ms2ger> Note: it'd better be valid utf-8
[21:29:01] <jmgrosen> yup
[21:29:29] <jdm> calling Process::new triggers an ICE D:
[21:29:53] <jdm> no, that can't be right
[21:30:22] <jdm> the enum constructors are icecing :(
[21:30:48] *** Quits: maik (maik@moz-BDF2085A.dip0.t-ipconnect.de) (Ping timeout)
[21:31:04] <SiegeLord> Can't from_utf8_owned return Either<~str, ~[u8]> ?
[21:32:25] <Ms2ger> It probably could
[21:33:12] *** Joins: wilkie (wilkie@moz-A19F104D.pitbpa.fios.verizon.net)
[21:36:40] <tikue_> is it possible to define an impl for some Option<Foo>
[21:37:12] <eddyb9> tikue_: you need a trait to add more methods
[21:37:25] <tikue_> that's what i thought, thanks eddyb9 
[21:38:21] <eddyb9> I'd like to see some kind of anon trait impls for this reason, but defining an interface keeps things in check :D
[21:38:37] *** Joins: freezerburnv (freezerbur@moz-C5EF929C.washdc.fios.verizon.net)
[21:39:04] <Sharp> Aren't regular impls anon trait impls?
[21:39:30] <eddyb9> you can't impl more than once, can you?
[21:39:38] <Sharp> I don't know.  I hope not :P
[21:39:42] <SiegeLord> You can
[21:39:52] <Sharp> Bah, really?
[21:39:55] <eddyb9> but there's another limitation, right?
[21:39:55] <SiegeLord> And also methods in a bare impl can have their own privacy
[21:40:00] <SiegeLord> So it's not quite the same
[21:40:08] <eddyb9> Sharp: for generics and stuff, I think
[21:40:29] <SiegeLord> You could split public and private methods into two traits, and then it'd basically be the same
[21:40:45] <Luqman> eddyb9: you can afaik: struct X; impl X { /* some methods */ } .... impl X { /* more methods */ } 
[21:41:05] <Sharp> eddyb9: I don't think there's anything you can do in one but not the other, with some creativity
[21:41:44] <Sharp> I can't say for sure, though, the impl code is crazy
[21:41:45] *** Quits: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net) (Ping timeout)
[21:41:50] <Luqman> anyways the reason you need to do it via a trait for Option<Foo> is because you can only directly impl on things in the same crate
[21:42:01] *** Joins: tiffany (kawaii@moz-28A8742A.dhcp.embarqhsd.net)
[21:42:02] *** Quits: lfox (lfox@moz-343B6F0C.nyc.biz.rr.com) (Quit: ZZZzzz…)
[21:42:02] <eddyb9> there we go, that was the reason
[21:42:24] <eddyb9> I thought it had to be the same module, not sure why...
[21:42:39] <SiegeLord> It's buggy if you do it in several modules
[21:42:54] <SiegeLord> But it's not disallowed... those are just bugs
[21:44:20] <jdm> acrichto: any idea how I can use CreatePipe in StdioContainer? it takes an io::UnboundPipe, which I've traced to uvio::UvUnboundPipe
[21:44:25] <jdm> but it seems super complicated
[21:45:03] <acrichto> jdm: you may be using an older version
[21:45:06] <acrichto> jdm: https://github.com/mozilla/rust/blob/master/src/test/run-pass/rtio-processes.rs has examples
[21:45:55] <jdm> oh, you're right
[21:45:56] <jdm> thanks
[21:46:05] * jdm was thinking his system rustc was newer than servo
[21:46:29] <acrichto> jdm: yeah this shouldn't be this painful :(
[21:48:44] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:48:48] *** Joins: brendan (brendaneic@9284AA42.60650FE8.9D7331A6.IP)
[21:49:14] *** Joins: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr)
[21:49:21] <pcwalton> nmatsakis: do you still want pnkfelix to r? https://github.com/mozilla/rust/pull/10153 ?
[21:49:29] <pcwalton> or what's the status on it in general
[21:51:28] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[21:51:44] *** Quits: Yeri (jasonjasmi@BA0CD88C.B2E00889.31F69D78.IP) (Quit: Yeri)
[21:52:04] *** Quits: Azdle (Azdle@moz-B334B496.hfc.comcastbusiness.net) (Ping timeout)
[21:52:22] *** Joins: qwertie (Mibbit@moz-C23FC2A2.ptr.terago.net)
[21:52:50] *** Quits: freezerburnv (freezerbur@moz-C5EF929C.washdc.fios.verizon.net) (Quit: freezerburnv)
[21:53:58] *** Quits: etw (john@moz-D871A25B.nyc.res.rr.com) (Quit: etw)
[21:54:39] <qwertie> Dumb newb question. Tutorial 9.2 says "mutable handle to an immutable box cannot be assigned a reference to a mutable box" but it does not say why not. Why not?
[21:56:27] *** Quits: tjc (tjc@B9E77A82.2D024FDB.284344F5.IP) (Quit: Places to go, people to annoy)
[21:57:17] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[22:01:18] *** Quits: tautologico (linf@A856634.A046D081.AB599759.IP) (Quit: tautologico)
[22:01:43] *** Quits: devbug_ (quassel@2D4E172D.4C8B6099.9B57EA59.IP) (Ping timeout)
[22:02:03] *** Quits: GeorgeH (George@moz-FB5F2302.hsd1.nj.comcast.net) (Ping timeout)
[22:02:27] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Client exited)
[22:02:31] *** Quits: cubic (cubic@moz-80241A3A.mc.videotron.ca) (Ping timeout)
[22:02:48] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[22:04:17] *** Quits: pyrac (pyrac@moz-84C91992.w90-60.abo.wanadoo.fr) (Quit: pyrac)
[22:04:24] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:04:35] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[22:05:17] *** Quits: g3orge (g3orge@moz-CE3A1669.access.hol.gr) (Quit: leaving)
[22:05:24] <Sharp> Anyone familiar enough with C history to know whether anonymous structs with typedefs were supposed to be the preferred solution, with tags only used in recursion?  Or was the expectation tags at all times and anonymous structs added for convenience due to namespace clashes?
[22:05:53] *** Quits: fabiand (fabiand@moz-53A2498F.adsl.alicedsl.de) (Quit: Verlassend)
[22:06:20] *** Quits: alex-abreu (alex@EA3B4035.84482E50.488A906A.IP) (Ping timeout)
[22:06:36] <kmc> qwertie: because @T and @mut T are different types
[22:07:02] <kmc> when you mutate a local variable you can't change its type
[22:07:39] <McPherrin> Sharp: I'm not sure typedef existed pre-ANSI C
[22:07:54] <FreeFull> Can you cast from mutable to immutable?
[22:07:55] <McPherrin> Sharp: And structs did, so.
[22:08:18] <FreeFull> Or possibly clone mutable into immutable
[22:08:20] <qwertie> that's not a reason though. In C, a const int* can point to the same memory region as an int*... the question is, why is this a problem in Rust?
[22:08:21] <tiffany> structs didn't exist in 1972
[22:08:21] <kmc> FreeFull: for @-boxes? no, an @T and an @mut T can have different shapes in memory
[22:08:39] <Sharp> tiffany: Do you happen to know which came first?
[22:08:44] <McPherrin> Sharp: I've heard people be on both sides of the style debate, so I'm not sure what the "expectation" was
[22:08:48] <tiffany> I'm pretty sure structs came first
[22:09:18] <tiffany> besides, if they intended for structs to share the same namespace as everything else, why hide it behind typedef?
[22:09:19] <FreeFull> kmc: What about ~T and ~mut T?
[22:09:25] <kmc> FreeFull: there's no such thing as ~mut
[22:09:30] <sfackler> ~mut isn't a thing
[22:09:35] <kmc> the mutability of an object is determined by its ownership root
[22:09:43] <McPherrin> http://cm.bell-labs.com/who/dmr/primevalC.html has some info on 1972 era compilers
[22:09:49] <kmc> a tree of ~-things is ultimately owned by a local variable or an @/@mut-box
[22:09:57] <tiffany> yeah, I looked at the source of that
[22:09:57] <McPherrin> via dennis ritchie
[22:09:58] <tiffany> it was interesting
[22:10:07] *** Joins: azita (Azita@moz-BBE3ABD.mv.mozilla.com)
[22:10:09] <Sharp> Makes sense to me.  I can just see an argument from the perspective that structs are just records and the only reason to tag them is for recursive declarations
[22:10:40] <McPherrin> I usually avoid using typedefs for structs.
[22:10:49] <tiffany> I usually do typedef struct X {...} X;
[22:11:01] <kmc> qwertie: @mut T isn't a subtype of @T.  in fact Rust has almost no subtyping
[22:11:12] <sfackler> qwertie: in Rust, you can't alias a mutable pointer
[22:11:18] <kmc> @T and @mut T can have different layout in memory
[22:11:20] <qwertie> Sharp: I wasn't coding C before 1990 but I just think people started to prefer "typedef struct {} Foo" so that they could type "Foo x;" instead of "struct Foo x";
[22:11:22] <kmc> @mut needs to keep track of dynamic freezes
[22:11:23] <tiffany> the stdlib doesn't use typedefs for built-in structs
[22:11:29] <kmc> so you can't just cast between the two box types
[22:11:32] <tiffany> or at least, POSIX doesn't
[22:11:42] <kmc> you can however do an immutable borrow of the contents of an @mut
[22:11:43] <tiffany> I'm not sure the stdlib actually has structs
[22:11:53] *** Quits: cowboyd (cowboyd@moz-1BD02A1E.sw.biz.rr.com) (Client exited)
[22:12:02] <McPherrin> FILE comes to mind
[22:12:10] <kmc> but as sfackler said, you can't do two &mut borrows, or an & and an &mut at the same time
[22:12:12] <tiffany> well FILE doesn't have an exposed definition does it?
[22:12:15] <Sharp> Stdlib has quite a few structs.
[22:12:27] <kmc> and for @mut this can only be checked at runtime (that's the dynamic freeze)
[22:12:27] *** Quits: saml (sam@moz-14C16814.cst.lightpath.net) (Quit: Leaving)
[22:12:50] <Sharp> None of which you are supposed to look into, really (maybe some of the functions returning complex numbers?)
[22:13:01] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[22:13:09] <tiffany> aren't complex numbers their own type?
[22:13:10] <McPherrin> bsd sockets stuff.  Is that in POSIX? Lots of horrible structs there
[22:13:19] <tiffany> sockets are POSIX
[22:13:21] <Sharp> I am fairly confident that they weren't in 1990.
[22:13:26] <McPherrin> I hate the BSD sockets api.
[22:13:30] <tiffany> well they were in C99 at least
[22:13:42] * McPherrin works in networking
[22:13:55] <tiffany> mcpherrin: beej's guide + a library like libevent lessens the pain significantly
[22:14:13] <Sharp> Yeah, I was thinking sockets too… actually pretty much all the nontrivial system functions use structs at some point
[22:14:25] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:14:26] <qwertie> kmc: do you know of a written rationale for Rust's approach, rather than a C-like approach? Also, is immutability fully recursive like in D?
[22:14:28] <tiffany> but most of those such system functions are POSIX, not std
[22:14:29] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[22:14:36] <Sharp> Yeah, true.
[22:14:37] <kmc> btw if you're looking for C history, http://cm.bell-labs.com/who/dmr/chist.html is also a good read
[22:14:45] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:14:52] <McPherrin> tiffany: the amount of bugs I've run because I forgot a * somewhere when casting structs.. eugh
[22:14:59] <kmc> qwertie: no but I can talk about the rationale aiui
[22:15:08] <tiffany> I haven't really had that problem
[22:15:09] <tikue_> if i have some &'a Foo, and I want to use it to construct &'a Bar(Foo), how would I do that?
[22:15:26] <tiffany> at least it's nothing compared to the bugs I've gotten from null pointers or garbage data
[22:15:41] <kmc> qwertie: so there are a few issues here
[22:15:48] <jdm> I wonder if there's a way to redirect a pipestream to another
[22:15:50] <kmc> one is that @T and @mut T are actually different data types at runtime
[22:16:07] <McPherrin> Like fuck this expression: &(((struct sockaddr_in *)&sa)->sin_addr)
[22:16:16] <Sharp> Heh.
[22:16:18] <kmc> the other is a desire to avoid bugs by limiting aliasing
[22:16:28] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:16:33] <tikue_> or rather, is a function like this possible `fn foo<'a>(foo: &'a Foo) -> &'a Bar`
[22:16:41] <qwertie> kmc: they are different how, other than "by fiat"?
[22:17:09] <tikue_> i want to propogate up a lifetime from a struct to a new struct containing a borrowed pointer to that initial struct
[22:17:36] <sfackler> qwertie: @mut needs to keep track if it's frozen or not and @ doesn't
[22:17:40] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:17:45] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[22:17:47] <kmc> the boxes have different fields
[22:18:22] <kmc> I mean you could just use @mut everywhere and sometimes never mutate it... but it would waste space and runtime
[22:18:37] <kmc> the flag has three states: not borrowed, borrowed immutably, borrowed mutably
[22:18:54] <kmc> so using an @mut box only immutably is still going to touch that flag all the time
[22:19:21] <kmc> it's a basic design principle of Rust to let you control which things can and can't be mutated
[22:19:34] <kmc> and that's done at ownership roots, and a managed box is the ownership root for its contents
[22:19:59] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[22:20:20] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[22:20:27] <kmc> qwertie: as for the aliasing rules, they're meant to avoid problems like iterator invalidation
[22:20:35] <kmc> where you hold a pointer into some data structure and it changes out from under you
[22:20:57] <kmc> this is a source of memory corruption bugs in C++ even when it's coded to a "high level" style which avoids explicit pointer casts etc
[22:21:26] <qwertie> hmm, all right. Well, let's say I want to write a function that wants read-only access to a shared box. It will never modify the contents of the box, and it doesn't care if the box is mutable or not, but I don't want this function to prevent third parties from mutating the box. Is it possible to write such a function in Rust?
[22:21:44] <kmc> don't think so
[22:21:48] <qwertie> drat.
[22:21:53] <kmc> that would open the door to problems like iterator invalidation
[22:22:01] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[22:22:02] *** Quits: mib_az8l1z (Mibbit@518524D1.140D115A.81F87162.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[22:22:05] * Sharp is *loving* reading this historic C
[22:22:09] <kmc> if your function calls (through some circuitous path) back into something which mutates the box
[22:22:34] *** Quits: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[22:22:48] <qwertie> I don't follow. Since the shared box is garbage collected, how could an iterator that points into the box be invalidated?
[22:22:52] <kmc> match mybox { Some(x) => { f(&x); g(&x); }; ... }  // what happens when f() also mutates the box to be None?
[22:23:05] <Sharp> Particularly comparing it to historic PHP, it's night and day :P
[22:23:11] <kmc> then g() could crash / read garbage / pwn your machine
[22:23:46] <qwertie> kmc: what is the type of x in this example?
[22:23:57] <kmc> (I think that should be Some(ref x) actually but you get the idea maybe)
[22:24:14] <kmc> qwertie: doesn't matter.  it's T where we're dealing with an Option<T>
[22:25:12] <qwertie> I mean if you write this match statement, you are effectively declaring a variable called x right? Is it maybe a & type?
[22:25:20] <kmc> right
[22:25:33] <kmc> with Some(ref x) it would be an &-pointer, yes
[22:25:42] <qwertie> except.... or is it a reference type, but with semantics of a & pointer?
[22:25:42] *** Joins: gandalf (zbraniecki@moz-DFAA4E15.p2p.sfo1.mozilla.com)
[22:25:54] <kmc> &-pointers are Rust's reference type
[22:26:04] <kmc> in fact i'm with pcwalton that we should call them "references" rather than "borrowed pointers" :)
[22:26:29] *** Quits: brendan (brendaneic@9284AA42.60650FE8.9D7331A6.IP) (Quit: brendan)
[22:26:55] <bjz> kmc++ pcwalton++
[22:27:12] <bjz> --num_pointer_types
[22:27:29] <Sharp> All Rust pointers (except raw pointers) kinda act like references though, at least coming from a C perspective.  They can't be NULL and you use . to access them.
[22:27:36] <qwertie> well if I were designing Rust I'd actually make them references.... by which I mean, instead of writing *x = 5 and x = &foo, you'd write x = 5 and &x = &foo.
[22:27:39] <kmc> Sharp: but you can also use *
[22:27:44] <Sharp> True :)
[22:27:52] <Sharp> Sometimes.  When Rust is feeling generous.
[22:28:14] <Sharp> I find it tends to work much better with ref :P
[22:28:25] <kmc> qwertie: then "reference" isn't a type constructor, it's a weird kind of modifier that applies to a variable or a struct field
[22:28:30] <kmc> which imo is one of the big warts in C++
[22:28:34] <tiffany> * pointers are automatically dereferenced though aren't they?
[22:28:45] <qwertie> hmm "ref " is not mentioned in the tutorial
[22:29:05] <kmc> in C++ you can't define an «int &x» and later change it to point to something else
[22:29:06] <bjz> why do methods try really hard to dereference, where as function parameters don't?
[22:29:11] <Sharp> Can I take a moment to express my love for C's syntax, by the way?  C has beautiful syntax.  The end.
[22:29:37] <bjz> it seems a little asymmetric
[22:29:39] <kmc> which isn't reasonable if & is just another type constructor
[22:29:39] <qwertie> kmc: I know that, but if you could write &x = &foo in C, then there would be no need for pointers -- you could use references for everything
[22:30:00] <tiffany> sharp: C's syntax becomes a bit of a burden when you make the language more concise: I find my rust code is awfully symbolly
[22:30:06] <qwertie> *c++
[22:30:35] <SiegeLord> I think that's Rust's fault, not C's
[22:30:50] <strcat> tiffany: no raw pointers are never automatically dereferenced
[22:30:55] <tiffany> ah
[22:31:11] <bjz> tiffany: dereference of a raw ptr require unsafe
[22:31:17] <bjz> *requires
[22:31:22] <tiffany> siegelord: my point is that C's syntax is rather verbose, but the languge itself is also verbose, so it averages out
[22:31:35] <tiffany> it doesn't work as well in more concise languages
[22:31:56] <SiegeLord> C's syntax is many places is less verbose than Rust's
[22:32:16] <Sharp> C code has the virtue of clarity.  To an extent that isn't really approached by any other language I can think of.
[22:32:26] <Sharp> There are many problems with the language, but the syntax is not one.
[22:32:42] <kmc> I disagree but I'm not sure this convo can be productive in such generality
[22:33:06] <SiegeLord> Sharp: Even this: http://c-faq.com/decl/spiral.anderson.html ? :P
[22:33:12] <tiffany> I used to like C-style syntax religiously but these days I prefer haskell-like syntax more
[22:33:20] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[22:33:29] *** Quits: azita (Azita@moz-BBE3ABD.mv.mozilla.com) (Quit: azita)
[22:33:33] *** Joins: gareth0 (gareth0@7B67FAFD.7B34A6AE.2653C6EC.IP)
[22:33:36] <bjz> any thoughts on the possible asymmetry between 'self' auto-derefing on method invocation versus explicit derefing on function parameters?
[22:33:44] <Sharp> Cherrypicked examples from obfuscated C aside :P
[22:33:55] <kmc> qwertie: so here's a full working example of iterator-invalidation-like problems with Option<T>: https://pastebin.mozilla.org/3399697
[22:33:56] <tiffany> siegelord: where would C be less verbose than rust?
[22:34:02] *** Quits: valenting (Thunderbir@F12D0376.5025026B.FB866788.IP) (Ping timeout)
[22:34:03] <tiffany> I'm at a loss to where that would happen
[22:34:06] <SiegeLord> tiffany: Function arguments, if statements
[22:34:20] <tiffany> function arguments.. by one character?
[22:34:20] <Sharp> It's rather easy to make any language you wish hard to follow (at least, any language with any sort of macros).  But by default C is pretty straightforward.
[22:34:28] <tiffany> if statements are shorter in rust, there's no required ()
[22:34:45] <kmc> qwertie: this code deterministically fails at runtime ('borrowed at foo.rs:10') thanks to the dynamic borrow flag in the @mut box
[22:34:47] <SiegeLord> Sharp: I don't think function pointers are particularly obfuscated :P
[22:34:58] <kmc> qwertie: if it did not, g() would be reading uninitialized memory
[22:35:02] <Sharp> They aren't.
[22:35:13] <Sharp> Do you find them hard to follow?
[22:35:19] <SiegeLord> tiffany: Not if you have a one line if statement... in C it's if (<expr>) <statement>, in Rust you need to add semicolons
[22:35:25] <SiegeLord> *braces
[22:35:30] <Sharp> Oh, I thought you'd linked me to something quite different.
[22:35:42] <tiffany> if (<expr>) <statement> is exactly the same length as if <expr> {<statement>}
[22:35:42] <kmc> qwertie: of course in this case the compiler could notice statically what f() is doing, but in general your @mut boxes can get passed all over the place and so you can't tell statically which ones might get mutated by which function calls
[22:35:53] <tiffany> besides, I don't use {}-less if statements
[22:35:53] <SiegeLord> Which, due to the indentation rules makes if statements in Rust 2x, 1.5x as long
[22:36:02] * Sharp finds many generic signatures rather more confusing than that, but lives with it because they provide useful type information :)
[22:36:23] <kmc> qwertie: by contrast, ~-boxes don't need dynamic borrow flags because each has a unique owner, so the aliasing rules can be checked statically
[22:36:39] <kmc> ditto for local variables
[22:37:55] *** Joins: brendan (brendaneic@9284AA42.60650FE8.9D7331A6.IP)
[22:38:03] <strcat> inherited mutability just doesn't work for shared ownership
[22:38:15] <strcat> anyway @/@mut will be gone
[22:38:20] <brson> what's the wildcard syntax for matching all remaining items in a vector?
[22:38:34] <strcat> in a library it's more clear that the rules are being bent
[22:38:38] *** Quits: willingc (willingc@moz-B4760708.san.res.rr.com) (Ping timeout)
[22:38:44] <strcat> since it has to be more explicit (RAII handles or closures)
[22:38:55] <strcat> brson: [x, ..rest] ?
[22:38:56] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[22:38:56] <kmc> brson: I think [a, b, ..x]
[22:39:24] <brson> oh, 'rest' has to be named?
[22:39:29] *** Quits: Scriptor (anonymous@moz-E06F46F0.corp.bitshelter.com) (Quit: Scriptor)
[22:39:32] <kmc> try .._ I guess
[22:39:42] <Sharp> Anyway, I think there is a distinction between concise and readable.  Perl, for example, is very concise.  As is encrypted text :)
[22:39:57] <brson> oh, man `,.._` is it
[22:40:02] <brson> that's beautifyl
[22:40:05] <brson> *ul
[22:40:08] <kmc> indeed
[22:40:28] <brson> probably the best sequence of punctuation rust has on offer
[22:40:52] <Sharp> Oh, come on, you haven't even added any pointers yet.
[22:40:55] <kmc> ^,.._^
[22:41:58] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[22:42:10] <Sharp> &'t~@[_,..] (I'm not actually sure that this compiles under any circumstances :P
[22:42:50] <Sharp> It would be even better if I could do &'_ but we can't ask for miracles.
[22:43:23] <brson> one of nmatsakis's new proposals allows '_ in some places
[22:43:54] <Sharp> …but even when we don't ask, nmatsakis delivers!
[22:43:58] <qwertie> kmc: hmmm. I am puzzled about the generalization of this. It seems like this 'invalidation' problem is a property of enums like Option, rather than something related to shared boxes.
[22:45:08] <qwertie> a normal struct or vector wouldn't have this problem right? (unless nested in an enum)
[22:45:23] <sfackler> qwertie: you can take a referenc to a field in a struct
[22:45:28] <sfackler> *reference
[22:46:21] *** Quits: Ms2ger (Ms2ger@moz-6EEC6E4D.adsl-dyn.isp.belgacom.be) (Quit: nn)
[22:47:36] <strcat> brson: https://github.com/mozilla/rust/issues/9508 you can blame me ;p
[22:48:43] <eddyb9> wait, how come we(? - maybe just me) didn't consider caret as a pointer sigil?
[22:49:04] <strcat> it's used for XOR
[22:49:12] *** Quits: brendan (brendaneic@9284AA42.60650FE8.9D7331A6.IP) (Quit: brendan)
[22:49:15] <qwertie> sfackler: and?
[22:49:15] *** Quits: Blub\w (wry@7E3BB9D.71150E1A.237AE2BA.IP) (Quit: night)
[22:49:25] <eddyb9> strcat: * is used for MUL
[22:49:31] <brson> strcat: .NET already poisoned ^ as a pointer in managed C++
[22:49:42] <brson> er, eddyb9
[22:49:50] <sfackler> so if you take a reference to a field within a field in the struct and then some function replaces that field, you have a dangling pointer
[22:50:25] *** Quits: steffenomak (steffenoma@moz-FB0A4BEB.student.uu.se) (Ping timeout)
[22:50:45] <eddyb9> brson: well.... $ looks worse...
[22:50:47] <qwertie> sfackler: I don't see how. The memory still exists, the pointer is still valid and still points to something of the same type
[22:51:02] <strcat> qwertie: not with a container or enum
[22:51:05] <kmc> qwertie: right, the problem is not exclusive to managed boxes, it's just that the solution for managed boxes involves runtime checks, whereas the solution for all other storage is a compile time check
[22:51:05] <strcat> or slice
[22:51:08] <sfackler> struct Foo { x: ~int }
[22:51:20] <kmc> qwertie: if I'm within the Some(ref x) => ... branch of an Option<T> and that Option mutates to be None, that's bad
[22:51:20] <sfackler> if I take a reference to the int x and someone replaces the box
[22:51:48] <bjz> brson: you can also do [..xs, x] I think
[22:51:49] <kmc> qwertie: the pointer to the Option<T> is still valid but the pointer to the T is invalidated
[22:51:58] <brson> bjz: no!
[22:52:03] <kmc> (i meant "branch of a match on an Option<T>")
[22:52:14] <brson> i'm trying to fix https://github.com/mozilla/rust/issues/5830
[22:52:16] <qwertie> but what I'm saying is, as far as I know the problem is limited to enums. Option<T> is an enum. If you look at non-enums, there seems to be no problem
[22:52:16] <bjz> brson: or [head, ..middle, end]
[22:52:22] <bjz> brson: no?
[22:52:30] <strcat> qwertie: and slices/containers
[22:52:36] <brson> bjz: *expression of shock*
[22:52:41] <brson> it's true
[22:52:59] <strcat> let mut xs = ~[1]; let y = &xs[0]; xs.clear()
[22:53:09] <qwertie> where is the issue with containers? Assuming the container is not implemented with enums...
[22:53:18] <bjz> brson: I can't remember who did it, but it was a big angel patch from out of the blue I think
[22:53:19] <strcat> qwertie: containers can be resized
[22:53:27] <brson> bjz: I intend to replace them with `*`
[22:53:27] <strcat> or they might do internal rebalancing
[22:53:30] <strcat> like a B-tree
[22:53:34] *** Joins: brendan (brendaneic@9284AA42.60650FE8.9D7331A6.IP)
[22:53:47] <bjz> brson: why's that?
[22:53:57] <sfackler> qwertie: struct Foo { x: ~int } let f = Foo { a: ~10 }; let a = &*f.a; f.a = ~15;
[22:53:58] <bjz> brson: not ..?
[22:54:09] <strcat> tree.insert(5, 5); let x = tree.find(5); tree.remove(5)
[22:54:12] <strcat> dangling ptr
[22:54:15] <qwertie> again, I'm focusing on shared boxes here
[22:54:30] <strcat> qwertie: ok, so lets say you have
[22:54:31] <kmc> qwertie: it's true that allowing two simultaneous «&mut int»s to exist is probably safe, for example
[22:54:41] <strcat> fn foo(x: &'a T) -> &'a U
[22:54:55] <strcat> in general, the compiler needs to freeze the place you get the reference from
[22:54:56] <kmc> mutable boxes aren't shared between threads so you don't need to worry about true concurrent writes, just reentrant ones
[22:54:59] <kmc> but why special case the language for this rather limited use case
[22:55:15] <kmc> when most interesting containers are going to have some kind of invalidation scenario
[22:55:37] <strcat> kmc: in general it can't be allowed though
[22:55:42] <bjz> brson: let (..thing, end) = (1, "hi", 3.0); assert_eq!(thing, (1, "hi")); assert_eq!(end, 3.0)
[22:55:56] <strcat> to type-check functions and especially generic code, rust needs the general rules
[22:55:59] <kmc> right
[22:56:06] <strcat> when it sees a signature like
[22:56:24] <strcat> fn foo<'a>(x: &'a Foo) -> &'a Bar {}
[22:56:33] <strcat> externally, that's all it has to go with
[22:56:42] *** Joins: cubic (cubic@moz-80241A3A.mc.videotron.ca)
[22:56:42] *** Quits: Skif (emschwar@moz-CA025D57.ip.mcleodusa.net) (Client exited)
[22:57:08] <bjz> brson: we already use `_` for throwaway values, why do we need *? you could just have MultiTup(.._)
[22:57:17] <kmc> qwertie: we used to (?) have this reference type &const which meant "you can't mutate but someone else might have an &mut"
[22:57:30] <qwertie> kmc: I often design containers. If it were possible to have mutable and immutable references to a shared box, and mutable and immutable borrows that don't involve enums, then I, as the container designer, could design the container to avoid enums in strategic places in order to avoid restrictions on borrowing. If the language allowed it.
[22:57:43] <bjz> brson: it fits neatly in
[22:57:47] <brson> bjz: we use `*` and `_` inconsistently for matching multiple values
[22:57:59] <kmc> terrible name, and not something that was used or should be used, aside from some very specific cases
[22:58:00] <brson> the issue is about making `*` always mean 'match everything else'
[22:58:02] <kmc> and I think it's gone now
[22:58:12] <strcat> kmc: yes it wasn't very useful
[22:58:22] <strcat> because you can't take references deeper into an &const
[22:58:22] <bjz> brson: MultiTup(x, y, .._)?
[22:58:23] *** Joins: devbug_ (quassel@23AC5F12.9D950176.3655BBF5.IP)
[22:58:29] <strcat> for hopefully obvious reasons
[22:58:46] <bjz> brson: sorry, should stop bikeshedding -_-
[22:59:18] *** Joins: aeqwa (aeqwa@moz-A0BDC372.dsl.tropolys.de)
[22:59:29] <strcat> for example lets say you have a 'len' method taking &const self
[22:59:30] <bjz> brson: I just feel like we already overload * alot
[22:59:37] <strcat> and you have a container wrapping another container
[22:59:44] <strcat> it *cannot* call the nested length method...
[22:59:58] <bjz> brson: and we already have a nice 'rest' syntax in the vector pattern matching
[23:00:02] *** Quits: MrFahrenheit (RageOfThou@3FEF494C.29C984D5.783DEDCA.IP) (Ping timeout)
[23:00:08] <kmc> qwertie: but it's not just avoiding enums, you need to avoid borrowing through slices and borrowing through ~-pointers and lots of other things
[23:00:11] <qwertie> aside, I don't know how vectors work yet so it's hard to comment on that aspect.
[23:00:15] <kmc> qwertie: as sfackler mentioned for example
[23:00:28] <strcat> qwertie: idiomatic rust code uses ownership where mutability is inherited
[23:00:36] <kmc> qwertie: the set of things which could safely be multi-mut-borrowed seems pretty small to me, and not useful for implementing containers
[23:00:38] <kmc> but I could be wrong
[23:00:47] <strcat> shared boxes are there for cases when ownership is too painful, but they're not really first-class
[23:00:48] <SiegeLord> bjz: So you're proposing using .. everywhere instead of *?
[23:01:16] <bjz> brson: plus (x, ..xs) would actually 'mean' something, ie. return a tuple of the end values - (x, *xs) or (x, xs*) would be confusing
[23:01:28] <bjz> brson: yes, standardise vector rest notation
[23:01:43] <qwertie> kmc: I'm more concerned with being able to write non-mutating code that is freely compatible with mutable and immutable input
[23:01:51] <kmc> qwertie: you are always free to implement your container in the unsafe dialect of Rust, in which case the burden is on you to prove that it exposes an interface consistent with safe Rust semantics, *and* to avoid any of these behaviors internally: http://static.rust-lang.org/doc/master/rust.html#behavior-considered-unsafe
[23:02:30] <kmc> that says "Breaking the pointer aliasing rules" is forbidden in unsafe code, but I believe that refers just to the LLVM rules
[23:02:45] *** Quits: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP) (Connection reset by peer)
[23:02:58] <strcat> kmc: the rust aliasing rules are stricter and you're not allowed to break them
[23:03:01] <kmc> qwertie: you'd generally do that by taking an immutable reference
[23:03:28] *** Quits: Engineer (engineer@946A1967.A3B62A92.3ABBA12E.IP) (Quit: "bye bye cruel world")
[23:03:37] <bjz> brson: one issue I've run into is also rest for strings: match s { "foo", ..tail => (), _ => () } doesn't work. but that might be tricky to parse
[23:03:52] *** Joins: Engineer (engineer@946A1967.A3B62A92.3ABBA12E.IP)
[23:04:07] *** Engineer is now known as rustic
[23:04:17] <strcat> brson: ah you're fixing our weird pattern matching quirks :)
[23:04:29] *** Joins: mr_boo (Mibbit@946A1967.A3B62A92.3ABBA12E.IP)
[23:04:46] <strcat> I've reported so many bugs that I forget they exist...
[23:05:02] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:05:02] <qwertie> kmc: well, thanks for your time. Looks like I might just have to implement a data structure or two, to find how how much Rust fights with me
[23:05:10] <kmc> yeah, I would be interested to know how it goes
[23:05:17] * strcat has 115 open bugs ;0
[23:05:31] *** Joins: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net)
[23:05:37] <kmc> ime the main issue is not freezing but needing to spell out lifetimes
[23:05:48] *** Quits: tikue_ (tikue_star@6A4FE76F.2ACBBF24.689607DE.IP) (Ping timeout)
[23:05:53] <bjz> brson: anyway, it's up to you, but I do think that .. offers nice advantages, in actually having nice binding semantics easy to fit in, despite having the disadvantage of being more verbose for the simple case. ie. (*) vs. (.._)
[23:05:57] *** Quits: mr_boo (Mibbit@946A1967.A3B62A92.3ABBA12E.IP) (Quit: )
[23:05:57] <strcat> writing owned data structures is very pleasant ;p
[23:06:33] <kmc> yeah; unfortunately many useful datastructures are cyclic
[23:06:58] <strcat> general purpose ones? like what?
[23:07:12] <qwertie> yeah, I hear lots of people on rust-dev scratching their heads over lifetime errors....
[23:07:25] <brson> bjz: noted
[23:07:26] <kmc> doubly linked lists
[23:07:33] <strcat> kmc: those aren't cyclic ownership
[23:07:34] <kmc> trees where you can navigate to parent or child
[23:07:39] <kmc> strcat: I didn't say cyclic ownership
[23:07:55] <kmc> but how do you do cyclic pointers at all?
[23:08:04] <strcat> StrongRc/WeakRc
[23:08:06] <strcat> like C++
[23:08:13] <kmc> managed boxes, or references with explicit lifetimes, or unsafe
[23:08:16] <kmc> yeah or Rc
[23:08:27] <kmc> do we actually have strong/weak Rc now?
[23:08:30] <strcat> no
[23:08:32] <bjz> brson: btw, the one thing that would be tricky would be rest for structs - since we don't have records
[23:08:51] <strcat> kmc: easy to write though ;p
[23:08:56] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:09:09] <kmc> lol
[23:09:16] <brson> the parser for pattern matching is kind of unpleasant
[23:09:21] *** Quits: reedlepee (Mibbit@9B9315E1.A6025CA.1C37C358.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[23:09:21] <bjz> brson: in my proposed syntax. might just have to do Foo { x: foo, .. }
[23:09:34] <kmc> now you're reminding me of #haskell
[23:10:07] <strcat> kmc: I haven't submitted my implementation as a PR because I don't think it would be accepted
[23:10:22] <strcat> they're not very useful
[23:10:55] *** Joins: Boreeas (Boreeas@moz-F35C832D.boreeas.net)
[23:11:18] <kimundi> Seems to me like enough people keep wanting them
[23:11:38] <kmc> didn't you just say they were the solution to my problem
[23:11:43] <kimundi> Or at least, like you tell enough people why exactly every other option is not possible or unwanted ;)
[23:11:52] <strcat> kmc: yep, but I don't think that problem is common :)
[23:12:01] <kmc> you don't think cyclic data structures are common?
[23:12:24] <strcat> kmc: I don't think data structures that are cyclic but don't have cyclic ownership are commonly useful
[23:12:49] <kmc> what do you mean by "cyclic ownership"
[23:13:05] <kmc> it seems that in a tree, each node should own its children, and yet it's useful sometimes to get from child to parent
[23:13:16] <strcat> kmc: as in A points at B and B points at A and neither should be freed until there are no references to either
[23:13:20] <qwertie> kmc: just what I was thinking
[23:13:29] <strcat> i.e. a graph where you aren't flattening it into a map
[23:13:30] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[23:13:47] <strcat> kmc: when? :)
[23:13:55] <strcat> traversing to the child gets you a reference to the parent
[23:14:01] <kmc> we had several of these in Servo
[23:14:15] <kmc> maybe not anymore, because they are a pain in Rust
[23:14:28] <strcat> but isn't servo using @ for those trees? it seems pretty hard to get a reference to a child without traversing through the parent directly otherwise
[23:14:35] <kmc> you need to be able to traverse from a DOM object to its parent or child, and you get a DOM object pointer from the JavaScript engine without having traversed to there
[23:14:54] <kmc> right, we're still using @ for the DOM for this reason
[23:14:57] <kmc> but @ sucks...
[23:15:20] <strcat> kmc: so if the parent has no references to it, the child should be freed?
[23:15:41] <kmc> not necessarily
[23:15:42] * kmc thinks
[23:16:00] * Earnestly watches the cogwheels turn
[23:16:32] <kmc> I think the current situation is, we're using @ boxes and therefore refcounting, and some of the refcounts are held by JS objects (and manually dropped in the finalizers for those objects, which are registered with SpiderMonkey)
[23:17:13] <kmc> in the long term we want SpiderMonkey's GC to manage the Rust objects themselves, and we would hold only weak references to them
[23:17:41] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[23:18:06] <kmc> anyway this frankenstein scenario is probably not illustrative of anything except that web browsers are terrifying
[23:18:49] <kmc> but I do think that trees with weak parent pointers are generally useful
[23:19:08] <kmc> and so the twin response of "you won't need that" and "use WeakRc but it doesn't exist yet" isn't that satisfying to me
[23:20:26] <tikue> is WeakRc coming (tm) ?
[23:20:35] *** Joins: freezerburnv (freezerbur@moz-C5EF929C.washdc.fios.verizon.net)
[23:21:35] *** Quits: echristo (echristo@2C6BFF53.D6CCE4AE.77834EAA.IP) (Quit: echristo)
[23:22:06] *** Quits: alan (alan@moz-FE02DD30.sat6.rackspace.com) (Quit: alan)
[23:22:17] *** Quits: nsf (nsf@moz-EEF3238A.convex.ru) (Quit: WeeChat 0.4.2)
[23:22:18] *** Quits: sebcrozet (sebcrozet@moz-2517AE39.w80-13.abo.wanadoo.fr) (Quit: Gone)
[23:22:22] <bjz> brson: https://github.com/mozilla/rust/issues/5830#issuecomment-27608447
[23:22:25] *** Quits: brendan (brendaneic@9284AA42.60650FE8.9D7331A6.IP) (Ping timeout)
[23:23:28] *** Joins: dbaupp (Thunderbir@moz-B3C9E9E8.lns20.syd6.internode.on.net)
[23:25:16] <brson> bjz: left some comments
[23:25:48] <bjz> brson: added a last case for structs
[23:26:17] *** Quits: notmatt (notmatt@moz-9FB2565E.vc.shawcable.net) (Quit: Leaving...)
[23:26:32] *** Quits: jmgrosen (jmgrosen@moz-A3814C08.sd.sd.cox.net) (Quit: jmgrosen)
[23:27:24] *** Joins: willingc (willingc@moz-B4760708.san.res.rr.com)
[23:28:53] *** Joins: devbug (quassel@23AC5F12.9D950176.3655BBF5.IP)
[23:30:04] <bjz> brson: ah, beat me to it: https://github.com/mozilla/rust/issues/5830#issuecomment-27608778
[23:32:55] <dbaupp> could we have "tuple slices"? where something like (int, uint, float) can be sliced to get a `&(uint, float)`? or would (e.g.) alignment make that unworkable?
[23:33:06] <brson> alignment would not work right
[23:34:02] <bjz> (u8, u8, uint)
[23:36:19] <McPherrin> What's the memory layout of a tuple?
[23:36:31] <McPherrin> Same as a struct with the same members?
[23:37:01] <bjz> McPherrin: I BELIEVE SO
[23:37:04] <bjz> woops
[23:37:09] <bjz> caps :P
[23:37:12] <McPherrin> bjz: OKAY GOOD TO KNOW
[23:37:16] <bjz> COOLIES
[23:37:57] * bjz just got a new laptop, hasn't disabled the pointless caps lock key yet
[23:39:32] <bjz> done!
[23:41:13] *** Joins: jeffdb (jeff@moz-ED35AD97.hsd1.ca.comcast.net)
[23:41:14] <mletterle> what did you map it to?
[23:41:38] <bjz> nothing
[23:41:44] *** Quits: skeet70 (skeet70@moz-697F48F2.bzm-mt.client.bresnan.net) (Ping timeout)
[23:42:00] <mletterle> Well now you have a useless key hanging out... your pinky is weak and lazy, put it to work!
[23:42:04] <McPherrin> The best is to map it to both control and escape
[23:42:24] <McPherrin> if hit in combination with another key, it is control.  Otherwise escape.
[23:42:47] <bjz> I should really use caps
[23:43:04] <bjz> caps is hard to reach on a mac laptop keyboard
[23:43:28] <bjz> makes emacs a pain
[23:43:35] <qwertie> I have a very strong pinky, thanks Control key!
[23:43:38] <bjz> (when I use it, that is)
[23:43:58] * bjz has a pinky with rsi
[23:44:17] <McPherrin> I find alt the key that makes emacs a pain to use
[23:44:18] * bjz doesn't actually, he is just joking
[23:44:45] <qwertie> my right pinky is weak and lazy tho
[23:44:48] <bjz> McPherrin: you're probably right
[23:45:13] <mletterle> I don't find it so annoying, but I /have/ considered getting dual foot pedals.. one for ctrl and one for escape.. I'm thinking a usb gas/brake game pedal shoudl work...
[23:45:54] * bjz just saw a bit of fluff floating down next to him - thought it was his cat who is far away interstate, and now he is sad
[23:46:20] <bjz> :"[
[23:48:54] *** Quits: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP) (Ping timeout)
[23:49:48] *** Joins: alan (alan@moz-F8EE186F.lightspeed.snantx.sbcglobal.net)
[23:50:02] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Ping timeout)
[23:50:32] <qwertie> random unicode question, anyone know how to get a list of Unicode code points with properties like "is a letter" or "is an operator character"?
[23:50:41] <dbaupp> Is rust-ci broken? (maybe the configure changes borken hansjorg's nightly builds?)
[23:50:49] *** Joins: exobit (foo@moz-90D1B547.nycmny.fios.verizon.net)
[23:51:10] <dbaupp> qwertie: libstd/unicode.rs has them (it's autogenerated, but private)
[23:51:24] <Luqman> dbaupp: er, that might've been me :P i removed the old triple flags
[23:51:33] <qwertie> thanks
[23:53:20] *** jorendorff is now known as jorendorff_away
[23:54:08] *** Joins: samnardoni (Mibbit@FC9A45BE.3393236F.BFD1ABFD.IP)
[23:55:35] *** Joins: lenstr (lenstr@AF8EB999.6049B16A.85938D85.IP)
[23:56:37] *** Quits: aeqwa (aeqwa@moz-A0BDC372.dsl.tropolys.de) (Quit: WeeChat 0.4.3-dev)
[23:57:33] *** Joins: maxiepoo (Max@moz-6F50ADE.hsd1.il.comcast.net)
[23:57:37] *** Quits: freezerburnv (freezerbur@moz-C5EF929C.washdc.fios.verizon.net) (Quit: freezerburnv)
[23:58:10] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:58:17] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
