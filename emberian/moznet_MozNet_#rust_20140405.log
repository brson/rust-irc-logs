[00:00:18] *** Joins: espindol_ (espindola@moz-9F530B29.com)
[00:01:01] *** Quits: eibwen (kvirc@moz-6F69D9D5.dip0.t-ipconnect.de) (Ping timeout)
[00:01:35] *** Quits: espindola (espindola@moz-35429B8.dsl.teksavvy.com) (Ping timeout)
[00:01:54] *** Quits: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com) (Ping timeout)
[00:02:10] *** Quits: synackse (jordyd@2D608993.77F880E0.D9401097.IP) (Input/output error)
[00:03:06] *** Joins: gp5st1 (jim@moz-14388241.hsd1.pa.comcast.net)
[00:03:45] <gp5st1> http://static.rust-lang.org/doc/0.10/std/str/index.html  thought strings were utf-32 code points
[00:03:51] *** Quits: alan_and_ (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[00:03:55] <gp5st1> or is that out of date?
[00:04:17] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:04:19] <kmc> strings are UTF-8 and have been a long time
[00:04:25] <kmc> chars are UTF-32
[00:04:34] <mcpherrin> 'char' are codepoints
[00:04:55] <mcpherrin> so iterating over all the chars in a string will give you a series of 32 bit codepoints.
[00:05:26] <huon> (&[char] is a UTF-32/UCS-32 encoded "string") 
[00:05:33] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (No route to host)
[00:05:47] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:06:05] <kmc> mcpherrin: such a waste, you only need 20.09 bits for a Unicode codepoint
[00:06:06] <kmc> ;)
[00:06:19] <kmc> despite this, UTF-24 is not very popular
[00:07:10] * kmc is having quite a time fighting with rust's inline assembly
[00:07:15] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Input/output error)
[00:07:17] *** Joins: Sorella (queen@BD3C138B.B46B7936.54BCAB54.IP)
[00:07:20] <kmc> if any experts are around, assistance would be greatly appreciated
[00:07:31] <huon> kmc: have you seen http://static.rust-lang.org/doc/master/guide-unsafe.html#inline-assembly ?
[00:07:41] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[00:07:49] <kmc> useful
[00:07:58] <huon> that's not completely up-to-date, I don't think anything is wrong, but it's missing some features
[00:08:15] <huon> there's also a pile of tests `src/test/run-pass/asm-*` with examples
[00:08:18] <jdm> kmc: ...are you adding inline assembly to the html parser?
[00:08:38] <kmc> i'm not NOT adding inline assembly to the HTML parser
[00:08:54] *** Quits: rylev (rylev@FDA7C5E.8B1408EE.2DB0BBA1.IP) (Client exited)
[00:08:59] <huon> jdm: it has doesn't have enough security vulnerabilities
[00:09:08] <huon> what's a webbrowser without holes?
[00:09:09] <kmc> just an experiment to see how much SSE 4.2 string instructions can help
[00:09:24] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[00:10:04] <jdm> ah, got it
[00:10:07] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Client exited)
[00:10:22] <kmc> I'm trying to do something like  unsafe fn f(x: &[u8]) { asm!("mov $0, %xmm1" :: "m"(*x.as_ptr())); }
[00:10:28] *** Joins: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net)
[00:10:29] *** Quits: espindol_ (espindola@moz-9F530B29.com) (Ping timeout)
[00:10:31] <kmc> (I mean there are more instructions, but that's the problematic one)
[00:10:42] <kmc> and rustc hoists the "load" *x.as_ptr(), which isn't really meant to be a load, out of the asm
[00:10:51] <kmc> and it goes all wrong
[00:11:15] <kmc> when I omit the deref operator, it loads the pointer itself rather than the thing it points to
[00:11:15] *** Quits: evanm (evanm@636AC086.5999CED5.71743E61.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:11:42] <huon> maybe `asm!("mov ($0), %xmm1" :: "r"(x.as_ptr()))`?
[00:11:51] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Quit: Leaving.)
[00:12:08] *** Quits: jvoorhis (jvoorhis@moz-C34F9C32.hfc.comcastbusiness.net) (Ping timeout)
[00:12:29] *** Quits: thewonderidiot (mstewart@moz-E41129BA.ipnetworksinc.net) (Quit: Leaving.)
[00:12:49] <kmc> yeah
[00:12:50] <kmc> might work
[00:12:59] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:13:20] <kmc> it seems less proper to use $0 in a place where it isn't a full operand, but whatever, this is inline asm, there are no rules
[00:13:23] <kmc> >:D
[00:13:24] *** Quits: dpc (Mibbit@moz-88B014CD.nvidia.com) (Quit: http://www.mibbit.com ajax IRC Client)
[00:13:27] <mbrubeck> Has the keyword "do" been removed?  It's mentioned briefly in the reference manual and release notes, but I can't find it actually used anywhere.
[00:13:38] <jdm> mbrubeck: yep, a while ago
[00:13:43] <huon> it's not used for anything
[00:13:47] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:13:49] <huon> (it's still a reserved word though)
[00:13:52] <mbrubeck> I notice it's in the "reserved" list in token.rs
[00:13:54] <mbrubeck> yeah
[00:14:03] <mbrubeck> I'll submit updates to the docs, then.
[00:14:03] *** Quits: jdm (jdm@13F2CEC5.7672369.D8E68FF6.IP) (Quit: Lost terminal)
[00:14:18] *** Quits: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net) (Ping timeout)
[00:14:29] <huon> <3
[00:14:55] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: ...take irc away, what are you? genius, billionaire, playboy, philanthropist)
[00:15:36] *** Joins: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net)
[00:16:30] *** Quits: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net) (Connection reset by peer)
[00:18:01] *** Quits: TimAbraldes (quassel@125EF623.B2666F0E.66399531.IP) (Input/output error)
[00:18:04] *** Quits: twi (Adium@moz-429185BE.cust.vodafonedsl.it) (Quit: Leaving.)
[00:18:10] *** Joins: yichoi (yichoi@5AB4884B.FCC4549.14D5B978.IP)
[00:18:32] *** Joins: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net)
[00:19:07] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[00:20:32] *** Joins: twi (Adium@moz-429185BE.cust.vodafonedsl.it)
[00:20:57] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[00:21:16] *** Quits: twi (Adium@moz-429185BE.cust.vodafonedsl.it) (Quit: Leaving.)
[00:22:37] *** Joins: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net)
[00:23:08] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[00:23:27] *** Quits: generalelectrix (Mibbit@6B286517.2650BBD6.8EE8B8D8.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[00:26:15] *** Quits: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP) (Client exited)
[00:26:19] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[00:27:25] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[00:28:08] *** Quits: kbwt_ (Mibbit@moz-D8C495C6.w109-221.abo.wanadoo.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[00:28:39] *** Quits: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net) (Ping timeout)
[00:28:54] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[00:29:03] *** kimundi is now known as zz_kimundi
[00:30:13] *** Joins: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net)
[00:30:22] *** Quits: Earnestly (earnest@moz-2C691159.dyn.plus.net) (Quit: WeeChat 0.4.4-dev)
[00:31:47] *** Joins: Deewiant (deewiant@moz-C015B7F8.iki.fi)
[00:32:32] *** Quits: bpicolo (Adium@moz-B475EB64.static-ip.telepacific.net) (Quit: Leaving.)
[00:35:02] *** Joins: apollow (mike@moz-24EF179C.wireless.calpoly.edu)
[00:35:49] *** Quits: tjc (tjc@5358A633.3778D849.1D6E592A.IP) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:36:40] <mbrubeck> Submitted https://github.com/mozilla/rust/pull/13332
[00:38:03] *** Joins: Earnestly (earnest@moz-2C691159.dyn.plus.net)
[00:38:28] *** Joins: derek_c (derek@moz-1578B046.cit.cornell.edu)
[00:39:17] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[00:40:08] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[00:40:57] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Ping timeout)
[00:41:08] *** Joins: geomyidae (quassel@DD6F7E3A.21468E9A.30200F38.IP)
[00:41:26] *** Joins: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net)
[00:41:27] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[00:43:06] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[00:45:09] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[00:45:44] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[00:47:23] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[00:48:02] *** Joins: jadbaires (jadrian@20CA3ECB.D023563B.70C1DD3E.IP)
[00:48:54] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[00:49:06] *** Quits: saml_ (saml@BE83DFD.50866E69.CA2DF2C0.IP) (Quit: Leaving)
[00:49:42] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:49:49] *** Quits: celm_ (celm@28EA790F.C8D2EDAC.4E808C72.IP) (Input/output error)
[00:50:55] *** Joins: celm (celm@28EA790F.C8D2EDAC.4E808C72.IP)
[00:51:39] *** Quits: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net) (Ping timeout)
[00:52:05] *** Joins: p1start1 (rewi@moz-E7F3D014.org)
[00:52:12] <ChrisMorgan> hansjorg: rust-ci is down again ☹
[00:52:14] *** Quits: p1start (rewi@moz-E7F3D014.org) (Connection reset by peer)
[00:52:56] <ChrisMorgan> hansjorg: need any help with it? (Technical, financial or anything else you can think of!)
[00:53:17] *** Joins: p1start (rewi@moz-E7F3D014.org)
[00:53:23] *** Quits: p1start1 (rewi@moz-E7F3D014.org) (Connection reset by peer)
[00:53:49] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[00:55:09] *** Joins: Sgeo (quassel@moz-4E71E7BB.dyn.optonline.net)
[00:56:43] <SiegeLord> rust-ci seems so useful, hopefully we can get it working again
[00:57:22] <pongad> rusti: -2.3/2
[00:57:28] -rusti- pastebinned 5 lines of output: http://ix.io/buR
[00:57:43] <ChrisMorgan> rusti: -2.3/2.
[00:57:45] -rusti- -1.15
[00:58:06] <pongad> rusti: -23/2
[00:58:07] -rusti- -11
[00:58:20] <SiegeLord> -23//2
[00:58:24] <SiegeLord> rusti: -23//2
[00:58:25] -rusti- -23
[00:59:15] <Rym> is there any syntax available for subtracting bounds from a generic impl? e.g. impl<T: fmt::Show - ops::Mul<..,..>> .. for T {}
[00:59:36] <cmr> Rym: no, there are no inverse bounds.
[01:00:19] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:00:20] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Client exited)
[01:00:21] <Rym> cmr: and no plans for it I guess? Any neat suggestion for doing something similar?
[01:01:16] <jadbaires> this still confuses me a bit... so why is there a problem with ownership here? https://gist.github.com/anonymous/9986043
[01:01:51] *** Joins: ctangent (textual@moz-DB78D8CE.hfc.comcastbusiness.net)
[01:02:12] *** Quits: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[01:02:19] <jadbaires> i.e. why doesn't ownership returns to `a` after the function is called?
[01:02:28] *** Joins: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[01:04:15] <radford> jadbaires, you "moved" the values into the function.  f(mut x:&int) would do what you want which is to "borrow" the value.
[01:04:16] <huon> jadbaires: because you've moved the value into `f`
[01:04:27] <huon> `(x: &mut int)`
[01:04:31] *** Quits: tobytailor (tobytailor@moz-DFAA4E15.p2p.sfo1.mozilla.com) (Quit: tobytailor)
[01:04:39] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[01:04:41] *** Quits: Ralith (ralith@A8995AA9.62B6AF6A.922221DB.IP) (Ping timeout)
[01:04:54] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[01:05:10] *** Quits: apollow (mike@moz-24EF179C.wireless.calpoly.edu) (Ping timeout)
[01:05:21] <cmr> Rym: not to my knowledge. why do you need it?
[01:05:41] <radford> Anyone know why --dep-info doesn't include the libraries?
[01:05:49] <jadbaires> radford: huon: I understand it was moved into f... but once f finished executing, why isn't it automatically moved back to who owned it?
[01:06:03] <cmr> radford: what libraries?
[01:06:18] <radford> Any you link with using -L
[01:08:35] *** Quits: celm (celm@28EA790F.C8D2EDAC.4E808C72.IP) (Input/output error)
[01:09:19] <Rym> cmr: I probably don't, just a curiousity while playing with things :)
[01:09:39] <dsrx> Rym: can you imagine a use-case for it?
[01:09:40] <jadbaires> radford: huon: or let me put it in another way, would moving it rather than have it borrowed ever be the right thing to do?
[01:10:38] <JustAPerson> Since rustpkg has been deprecated, couldn't several issues labeled A-pkg  be removed? https://github.com/mozilla/rust/issues?labels=A-pkg
[01:10:43] <cmr> radford: that's probably a good feature to have
[01:11:03] <jadbaires> I get the question may seem pointless because we can just use & instead, but the motivation for it is because of what happens when passing closures as arguments
[01:11:18] <jadbaires> and apparently they also get moved
[01:11:35] *** jorendorff is now known as jorendorff_away
[01:11:42] <SiegeLord> I'm not sure how it could work, if the libraries aren't there yet
[01:11:45] <jadbaires> and then the workaround is to encapsulate them in another closure
[01:12:21] <jadbaires> and I don't see why one would ever want the closure to be moved rather than borrowed
[01:12:35] <SiegeLord> Like when I use --dep-info on my example programs, the actual library crate doesn't exist yet
[01:12:47] <jadbaires> much like in the example above I don't see why would we want it to be moved rather than borrowed
[01:13:01] <jadbaires> so I suppose I'm missing something here
[01:13:19] *** Parts: gp5st1 (jim@moz-14388241.hsd1.pa.comcast.net) ()
[01:13:25] *** Joins: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net)
[01:14:10] <radford> jadbaires, when you pass by value, you move.  and owned pointers move their ownership.  Assignment or passing to a function is how you transfer ownership.
[01:14:42] <SiegeLord> jadbaires: You can pass closure by reference too
[01:15:14] <jadbaires> SiegeLord: ah how do you do that?
[01:15:17] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Ping timeout)
[01:15:33] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Client exited)
[01:15:47] *** Quits: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net) (Quit: jkingyens)
[01:15:50] <SiegeLord> jadbaires: The type is &|| etc
[01:15:56] <SiegeLord> And you borrow it
[01:16:01] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[01:16:04] *** Joins: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net)
[01:16:05] <SiegeLord> I imagine that's not super efficient though
[01:16:05] <Rym> dsrx: a form of monkeypatching :P
[01:16:09] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[01:16:17] <kmc> yay it works
[01:16:23] <radford> SiegeLord, what I mean is that if you use libstd in your program then there would be a reference to libstd*.rinfo in your dep file, so if you happend to recompile your libstd (odd case I know), then make would rebuild your program.
[01:16:30] <kmc> https://gist.github.com/kmcallister/9986166  speeding up an ASCII whitespace scan by a factor of 5× using SSE 4.2
[01:16:57] *** Joins: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net)
[01:17:07] <SiegeLord> radford: Sure, but it should be optional.
[01:17:35] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[01:17:44] <radford> SiegeLord, it is with gcc.  -MD or -MMD IIRC.
[01:17:45] *** Quits: DAddYE (DAddYE@moz-61EB081B.hfc.comcastbusiness.net) (Ping timeout)
[01:17:52] *** Joins: pyon (user@6B56F365.A9B419CB.1C8C8CE9.IP)
[01:17:58] <SiegeLord> Ah, what lovely names XD
[01:18:14] <jadbaires> SiegeLord: why would it be less efficient than wrapping it in another closure? 
[01:18:25] <SiegeLord> Probably more efficient than that
[01:18:33] <jadbaires> right
[01:18:44] <SiegeLord> But less so than if it didn't move
[01:18:49] <huon> SiegeLord: (it's theoretically illegal to call a closure pased by reference.)
[01:18:50] <SiegeLord> It has to though, pretty sure
[01:18:53] <jadbaires> got it
[01:19:04] <SiegeLord> huon: It is? What's violated?
[01:19:32] <huon> SiegeLord: I'm pretty sure you can construct something like http://smallcultfollowing.com/babysteps/blog/2013/04/30/the-case-of-the-recurring-closure/
[01:19:36] <huon> let me get the bug...
[01:20:47] <SiegeLord> Well, it makes sense that it might be illegal to do so through &
[01:20:56] <SiegeLord> But shouldn't it be fine through &mut?
[01:21:26] <huon> it's fine through &mut
[01:21:31] <huon> https://github.com/mozilla/rust/issues/12224
[01:21:41] <huon> a closure is essentially a &mut Trait object
[01:21:51] <SiegeLord> Right
[01:21:57] <SiegeLord> That's why it has to move to begin with
[01:22:13] <huon>  & &mut T acts like & &T (i.e. read only) but &mut &mut s fine
[01:22:16] <huon> *is
[01:22:23] <SiegeLord> Although, no reason why it couldn't be & Trait object
[01:22:33] <huon> can't modify the environment
[01:22:35] <huon> in that case
[01:22:37] <SiegeLord> The syntax isn't expressive enough atm
[01:22:45] <huon> unboxed closures would allow that
[01:22:48] <SiegeLord> Yes, but that could be useful in some restricted cases
[01:23:34] <huon> (we can't convert || to &Trait though, it would be to restrictive.)
[01:23:36] <huon> *too
[01:23:46] <huon> kmc: that's cool
[01:24:02] <SiegeLord> I personally don't mind writing 'mut ||' all the time...
[01:26:05] <huon> kmc: (btw, you can return a value from the closure passed to .iter(), i.e. `.iter(|| $f($s))`, the return value is passed to a black_box automatically.)
[01:26:30] <kmc> huon: thanks, good to know
[01:27:41] <pyon> now MutexArc<T> is decoupled into Arc<Mutex<T>> right?
[01:27:43] *** Joins: ferminter (Mibbit@9988703.B81C22E5.36C35B4E.IP)
[01:27:44] <huon> yes
[01:27:46] <pyon> hooray!
[01:28:11] <pyon> when was the share trait added? :-O
[01:28:38] <cmr> pyon: last week or so
[01:28:55] <pyon> ah :-)
[01:29:03] *** Joins: tobytailor (tobytailor@moz-A48F0EDA.tmodns.net)
[01:29:40] *** Quits: ferminter (Mibbit@9988703.B81C22E5.36C35B4E.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[01:30:03] <huon> 20th of march (8e285208d550c41d5060bbc4a614c9b63c3bff6a)
[01:32:49] *** Quits: ksf (ksf@moz-60045C32.adsl.hansenet.de) (Ping timeout)
[01:32:57] <cmr> .... or more.
[01:33:41] *** Joins: ksf (ksf@moz-895A71AA.adsl.hansenet.de)
[01:34:45] *** Joins: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP)
[01:35:13] <pyon> i can't overemphasize how thankful i am for this refactoring - i've been waiting for this since a couple of months ago - looking at the sync api, it's exactly what i wanted
[01:36:10] <kmc> the instructions that look for a null terminator are 2x faster still
[01:36:23] <kmc> but can't be used quite so easily with Rust strings
[01:37:11] <pongad> Currently calling fail while unwinding from a fail causes a halt right?
[01:37:30] <cmr> pongad: an abort(), yes
[01:38:23] <pongad> cmr: Do we want to keep that? It seems....suboptimal....
[01:38:30] *** Quits: dapz (textual@moz-4F089C79.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[01:39:07] <ctangent> What do you think should happen?
[01:39:50] <o11c> just keep unwinding is what I'd like
[01:39:53] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[01:40:05] <huon> the current situation is the easiest thing that's not wrong
[01:40:05] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Quit: Leaving.)
[01:40:25] <huon> doing anything else requires a more effort to maintain memory safety
[01:40:36] <huon> s/a//
[01:40:57] *** Joins: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net)
[01:41:05] * pongad is thinking
[01:41:22] <huon> it's not necessarily the final design, but is something that allows progress to continue (without a security hole)
[01:41:33] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Ping timeout)
[01:42:02] <pongad> I guess the problem is the ref count might not get updated?
[01:42:07] <huon> at least, not a low-level vulnerability. I guess not running clean-ups may cause a high-level semantic vulnerability, but Rust can't really guard against them
[01:42:17] <dwrensha> I think it would be cool if I could run an untrusted task in-process, without worrying that it might cause an abort
[01:42:22] *** Joins: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp)
[01:42:27] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[01:42:44] <huon> pongad: things like that
[01:43:31] <kmc> I forget, do Rust strings have a hidden \0 at the end for O(1) use as C strings (assuming no interior \0)?
[01:43:35] <cmr> Tasks are *not* a sandbox or an isolation boundary for untrusted code.
[01:43:38] <cmr> kmc: no.
[01:44:01] <huon> (well, the memory safety would be something like a destructor that poisons a Mutex, and if this doesn't happen the contents of an Arc<Mutex<T>> can be externally accessible *and* in an inconsistent state)
[01:44:44] <dwrensha> cmr: if I know a task doesn't use unsafe code, what bad things can it do besides abort?
[01:44:45] <huon> kmc: there used to be one, but (a) not all strings could have it (e.g. slices) and (b) it sucked for various reasons. So you couldn't rely on it anyway, and it was removed.
[01:45:04] <huon> dwrensha: such a task couldn't do anything at all
[01:45:14] <dwrensha> ?
[01:45:20] <huon> because pretty much every function calls an unsafe function transitively
[01:45:23] <dwrensha> sure
[01:45:29] <huon> so you'd need some threshold for legal unsafety
[01:45:36] <cmr> dwrensha: I mean... it could be doing arbitrary io, spawning infinitely forking tasks, etc.
[01:45:55] <dwrensha> then don't give it those parts of the runtime
[01:45:56] *** Quits: ziad (ziad@B20586FB.BDB3D91.6E370BFC.IP) (Quit: ziad)
[01:46:17] <cmr> that's not really possible, since it doesn't need to go through the runtime.
[01:46:36] <cmr> if you want sandboxing, you really cannot be doing it in-process.
[01:46:42] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[01:46:51] <cmr> you need OS support, and no OS I know of can sandbox parts of a single process.
[01:46:53] <dwrensha> say that I have the source code, and I require that it doesn't use `unsafe`, but i do allow access to parts of std 
[01:47:06] <huon> theoretically you could have that sort of sandboxing, yes
[01:47:19] <cmr> ok, sure, so just make sure it doesn't run fail!() and you're done?
[01:47:22] <huon> you could write an external tool that used librustc to veriyfy the code
[01:47:56] <dwrensha> right
[01:48:15] <dwrensha> cmr: what doesn't need to go through the runtime?
[01:48:18] <huon> you can even have custom attributes on the various things that your tool reads
[01:48:23] <cmr> dwrensha: io
[01:48:33] <dwrensha> hm...
[01:48:38] <pongad> D chains exceptions, though I think that doesn't take care of the memory safety issue either...
[01:48:55] <dwrensha> but if stdio is mapped to /dev/null, that doesn't seem like a problem
[01:48:56] <huon> yeah, D isn't anywhere near as pedantic about memory safety as Rust
[01:49:09] <dwrensha> and dangerous stuff like fork is already labelled unsafe
[01:49:22] <pongad> Though chaining the exceptions does give a more complete diagnostic
[01:49:35] *** Quits: tobytailor (tobytailor@moz-A48F0EDA.tmodns.net) (Quit: tobytailor)
[01:49:47] <cmr> dwrensha: spawning tasks isn't unsafe, neither is allocating memory, it can cause resource exhaustion.
[01:50:12] <dwrensha> ah
[01:50:26] <dwrensha> the memory allocation space is shared among tasks, i guess
[01:51:38] <cmr> I mean all it needs to do is overflow its stack to abort the process
[01:51:53] <cmr> let x = [42u64, ..100000000]
[01:52:13] <huon> (abort-on-stack-overflow is just a bug too ;P )
[01:52:55] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[01:53:19] <dwrensha> yeah, seems to me it should be "fail-on-stack-overflow"
[01:53:49] *** Quits: onelson (owen@moz-DD666EC5.laika.com) (Quit: Leaving)
[01:54:14] <huon> getting that to work properly is hard too
[01:54:35] <huon> because a destructor can re-overflow the stack
[01:55:05] *** Quits: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Ping timeout)
[01:55:19] *** Joins: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net)
[01:55:37] <cmr> it's near impossible to implement without the stack check prelude too.
[01:55:51] *** Quits: Deewiant (deewiant@moz-C015B7F8.iki.fi) (Ping timeout)
[01:56:00] <cmr> not impossible, but so nasty that I would vehemently oppose it
[01:56:32] *** Quits: nkoep (nik@moz-F87FACD6.pool.mediaways.net) (Client exited)
[01:57:45] *** Joins: Deewiant (deewiant@moz-C015B7F8.iki.fi)
[01:57:55] <huon> cmr: do you mean our current segmented stacks thing, or the thing gcc has, but not LLVM?
[01:59:12] <cmr> neither.
[01:59:16] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[02:00:18] <cmr> if we hard guard pages the only way to fail would be to install a sigsegv handler, check the ip on segfault, find the nearest landing pad, jump to it.... and at that point the dtor can't be using any stack.
[02:00:38] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Ping timeout)
[02:01:02] <pyon> Are there any examples of using sync::{Mutex,RWLock} with more than one sync::Condvar?
[02:01:15] <cmr> pyon: doubt it
[02:01:39] <bblum> pyon: what do you want to know about it
[02:01:51] <pyon> bblum: What it even means to begin with. :-|
[02:05:03] <bblum> pyon: it allows you to control when you do wait_on(X) and signal_on(Y) which waiters receive which signals
[02:05:53] <bblum> or, more abstractly put -- a condition variable is a mechanism on which you can have threads wait until a certain condition is fulfilled. if there are multiple distinct conditions associated with the data protected by your mutex/rwlock, it makes sense to use a different condvar for each.
[02:05:58] <pyon> bblum: Ah, so sync::Condvar represents not a single condition variable, but a collection of them, right?
[02:07:31] <bblum> if i remember right, yeah
[02:07:33] <bblum> that sounds right
[02:08:20] <pyon> That still leaves another question open: When I acquire a lock, can I say "I am only interested in condvars 2 and 6, ignore the rest"?
[02:08:33] <pyon> s/condvars/condition variables/
[02:08:34] <bblum> when you acquire the mutex/rwlock itself?
[02:08:35] <bblum> no.
[02:09:01] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[02:09:02] <bblum> the mutex/rwlock is associated with some data or shared state
[02:09:05] <pyon> No, no when I acquire a guard from an already existing Mutex/RWLock.
[02:09:16] <bblum> a 'guard'?
[02:09:38] <pyon> MutexGuard, RWLockReadGuard, RWLockWriteGuard.
[02:10:06] <huon> bblum: RAII objects that unlock the lock in the destructor
[02:10:20] <bblum> oh
[02:10:27] <bblum> that is what i mean by when you take the lock
[02:10:37] <burntsushi> mcpherrin: i still have a bit to go for my regex library though. who knows what kind of bugs proper testing will unveil :-) 
[02:10:42] <bblum> that is what you would use separate locks entirely for
[02:10:45] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[02:10:56] <burntsushi> mcpherrin: i didn't know you were working on one---are you talking about rust-regex-derivatives?
[02:12:21] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[02:14:55] <ctangent> has anybody implemented a language (other than rust itself) in rust yet?
[02:15:07] *** Quits: blank_name (blank_name@B722FFEC.940B1E75.6D228269.IP) (Ping timeout)
[02:15:18] <cmr> ctangent: https://github.com/aatch/rusp
[02:15:29] <ctangent> ooh, thanks!
[02:15:36] <cmr> also the obligatory brainfuck interpreter
[02:15:42] <ctangent> of course, haha
[02:15:44] <cmr> I have a half-finished actsl compiler lying around
[02:15:50] <pyon> bblum: What exactly does it mean to lock a Mutex that has multiple condition variables? Say, I have a Mutex with two condition variables. One user of this Mutex acquires the lock and then only signals on the first condition variable. Another user of this Mutex then tries to acquire the lock. Does the second user succeed in acquiring the lock?
[02:16:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[02:16:35] *** Joins: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com)
[02:16:36] <bblum> pyon: the condition variables are irrelevant to when the second user will get the lock. the lock still enforces mutual exclusion no matter what.
[02:17:00] <ctangent> I'm working on a lexer for a made-up language right now
[02:17:09] <bblum> it is basically just like if you had a pthread_mutex and two pthread_condvars, where for the pthread_condvars, you always passed in that one pthread_mutex as the second argument to pthread_cond_wait.
[02:17:24] <ctangent> match and char ranges make it a breeze
[02:17:44] * pyon is going to have to learn pthreads, then. :-P
[02:18:07] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[02:19:55] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[02:19:57] <pyon> bblum: Ah, so Mutexes still guarantee only one user has access to the critical section, but condition variables give you control over which other Mutex users enter the critical section after you are done, right?
[02:20:28] *** Quits: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net) (Quit: WeeChat 0.4.3)
[02:20:31] <pyon> bblum: Like, controlling who you pass the baton to in a relay race.
[02:20:34] <pyon> Right?
[02:21:29] <bblum> pyon: no.
[02:21:39] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[02:21:40] <bblum> condition variables let you wait until another user of the mutex signals you.
[02:23:08] *** Quits: Jesse (jruderman@moz-62518563.mtv2.mozilla.com) (Quit: Jesse)
[02:25:06] <pyon> bblum: I guess I was putting it the other way around: "condition variables let you choose whom you want to signal".
[02:25:43] <bblum> yes.
[02:25:46] <bblum> that is accurate.
[02:25:49] *** Joins: cschneid (cschneid@moz-20C37083.hlrn.qwest.net)
[02:27:18] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[02:27:28] *** Quits: jng27 (jng27@55B0B969.8E42373.30200F38.IP) (Quit: Leaving)
[02:27:29] *** Joins: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP)
[02:27:41] <pyon> Ah, nice. For some weird reason, I originally thought condition variables allowed multiple threads to use the same resource concurrently.
[02:28:07] <pyon> bblum: Thanks!
[02:28:18] <bblum> np
[02:28:51] <bblum> condition variables allow you to release the mutex so someone else can get in while you wait for someone else to arrive to fulfill your condition and signal you
[02:29:05] <bblum> when you wake up, it reacquires the mutex before allowing you to access the associated data.
[02:29:10] *** Quits: hjr3 (hradtke@374E545A.3A8E9B0C.F9D9C60E.IP) (Ping timeout)
[02:29:55] <ctangent> hi all, is it possible to pattern match an owned string vs a bunch of &'static strings?
[02:30:03] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[02:30:39] <cmr> ctangent: you'd need to match against the slice.
[02:31:11] <ctangent> hmm, ok
[02:32:01] *** Quits: zz_kimundi (kimundi@moz-DF1E95E2.dip0.t-ipconnect.de) (Ping timeout)
[02:33:21] *** Joins: c74d3 (c74d3a4ebb@moz-E2EAC718.oc.oc.cox.net)
[02:33:22] <ctangent> so what would that do?
[02:34:06] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Connection reset by peer)
[02:34:06] <cmr> just a bunch of string comparisons.
[02:34:17] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[02:35:09] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[02:35:18] *** Quits: q66 (q66@moz-769FF8DB.range86-167.btcentralplus.com) (Quit: Leaving)
[02:35:26] *** Joins: zz_kimundi (kimundi@moz-79C0736A.dip0.t-ipconnect.de)
[02:35:29] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[02:35:43] *** zz_kimundi is now known as kimundi
[02:35:47] *** Quits: bigbadben (bigbadben@moz-D67499C1.dhcp.klmz.mi.charter.com) (Ping timeout)
[02:35:49] <cmr> https://gist.github.com/cmr/9986764
[02:36:06] <ctangent> ahhhhh, I see. Thanks a bunch!
[02:40:44] *** Joins: generalelectrix (Mibbit@moz-18E22694.hsd1.ca.comcast.net)
[02:41:02] <generalelectrix> how do I tell the linker to link against a C library in an arbitrary directory?
[02:41:17] <generalelectrix> and is there a shortcut if the lib is in the directory as the file I'm compiling?
[02:41:22] *** Joins: uzi_mantis (iz@moz-4379EE65.hsd1.va.comcast.net)
[02:41:36] *** Quits: uzi_mantis (iz@moz-4379EE65.hsd1.va.comcast.net) (Quit: )
[02:41:50] <cmr> generalelectrix: -L adds directories to the link path.
[02:41:53] <cmr> so... -L .
[02:42:03] <cmr> and you can use -C link-args="-lfoo"
[02:43:24] *** Quits: SpaceWizard (Apollo@moz-E6F82C3A.maine.res.rr.com) (Client exited)
[02:44:20] *** Quits: olegon (olegon@moz-909B2C54.dsl.telesp.net.br) (Ping timeout)
[02:44:35] <generalelectrix> #[-C link-args = "-llibioctrl")] for libioctrl.dylib?
[02:44:59] <cmr> no...
[02:45:08] <cmr> everything I gave were arguments to rustc.
[02:45:12] <generalelectrix> OH
[02:45:13] <generalelectrix> ok
[02:45:36] <generalelectrix> where can I find documentation on this stuff?
[02:45:42] <cmr> http://static.rust-lang.org/doc/master/guide-ffi.html#linking
[02:46:59] <generalelectrix> I meant about the options passed to the linker when calling rustc
[02:47:00] <generalelectrix> sorry
[02:47:02] *** Quits: rchar (mark@16F93251.43AE57A3.2CFE048.IP) (Quit: Lost terminal)
[02:47:08] <cmr> rustc --help ?
[02:47:51] <generalelectrix> ...but that would be TOO obvious :)
[02:47:52] <generalelectrix> thanks
[02:49:01] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[02:51:14] *** Joins: bigbadben (bigbadben@moz-D67499C1.dhcp.klmz.mi.charter.com)
[02:52:27] <ctangent> rust makes low-level programming fun again :D
[02:53:04] <kmc> yes!!
[02:53:54] <kmc> <kmc> the instructions that look for a null terminator are 2x faster still  <kmc> but can't be used quite so easily with Rust strings
[02:54:00] <kmc> ok well I got that working too =)
[02:55:34] <cmr> kmc: what are you doing?
[02:56:06] <kmc> speeding up my HTML tokenizer using SSE 4.2 string instructions
[02:56:20] <kmc> or rather, at the moment, solving a very similar but self-contained problem
[02:56:21] <kmc> https://gist.github.com/kmcallister/9986166
[02:56:35] <kmc> that code is sort of a disaster zone but it seems to work :)
[02:56:51] <dsrx> ctangent: really tempted to get rust going on my arduino
[02:57:08] <cmr> wow that's a hefty speedup.
[02:57:12] <kmc> I had to use earlyclobber asm out-args B|
[02:57:32] <ctangent> dsrx: that would be an awesome project, I saw someone had it going on a microcontroller on reddit the other day
[02:57:38] <ctangent> it was pretty cool
[02:57:53] <kmc> that's 4.6 bytes per cycle or 12 GB/s
[02:58:55] <kmc> on an i7-3840QM
[02:59:32] *** Joins: blank_name (blank_name@E4C1FCD5.66204B68.6D228269.IP)
[03:00:16] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[03:00:21] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: pupoque)
[03:01:04] <dsrx> ctangent: there's some prior art there https://github.com/neykov/armboot https://github.com/jensnockert/dueboot
[03:03:00] *** Quits: Krymise (Nietzsche@moz-CA789EF5.nwrknj.fios.verizon.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:04:01] <kmc> though if you blow out the caches it's more like 6.8 GB/s
[03:04:05] *** Joins: aeyk (Mibbit@616256A3.4D21CDFC.78DF8FCD.IP)
[03:04:27] <kmc> wait, no, still 12 GB/s :)
[03:04:27] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[03:06:02] *** Joins: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP)
[03:06:14] <dpc> I'm getting depressed.
[03:06:50] *** Joins: aeyk_ (aeyk@616256A3.4D21CDFC.78DF8FCD.IP)
[03:06:55] <dpc> Trying to do anything in Rust with non-trivial ownership model turns into borrow().clone.option hell
[03:06:59] *** Quits: aeyk (Mibbit@616256A3.4D21CDFC.78DF8FCD.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:06:59] *** Joins: apollow (mike@moz-24EF179C.wireless.calpoly.edu)
[03:07:36] <dpc> And I'm just fighting with compiler...
[03:07:57] <ctangent> i think if you're fighting with the compiler then you need to rethink your memory structure
[03:07:57] <Eridius> maybe you can change your data model to be more amenable to lifetimes?
[03:08:38] *** Joins: aeyk__ (aeyk@616256A3.4D21CDFC.78DF8FCD.IP)
[03:08:50] <dpc> I have a Game, Map and Creatures and they need to work together on shared data.
[03:08:51] <huon> dpc: yeah, unfortunately using Rc + RefCell is hard work (assuming that's what you're doing) 
[03:09:21] <dpc> In Rust everything is dandy if your ownership model can be a simple tree.
[03:09:33] *** Quits: aeyk_ (aeyk@616256A3.4D21CDFC.78DF8FCD.IP) (Ping timeout)
[03:09:42] <dpc> But lets get simple example:
[03:09:58] <dpc> I have Creature that owns an Actor (AI that controls it).
[03:10:19] <dpc> Actor has to have access to the owning Creature.
[03:10:53] *** Quits: kp (kp@4F7252F2.CEBBE496.E48CFF63.IP) (Quit: WeeChat 0.4.3)
[03:11:20] <dpc> Yet it is owned by Creature, so it's &self is making Creature already borrowed.
[03:12:12] *** Quits: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca) (Ping timeout)
[03:12:36] <Eridius> dpc: so this goes back to my original question. Why does the actor need to have a reference to the creature? Can't the creature just pass itself to the actor whenever it talks to it?
[03:12:41] <Eridius> (my first question from yesterday)
[03:12:48] *** Quits: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com) (Ping timeout)
[03:12:52] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[03:13:14] <huon> kmc: what's the difference between pcmpestri and pcmpistri?
[03:13:38] <dpc> Creature { fn act(&mut self) { self.actor.dosomething(self)) } }
[03:13:46] <dpc> Eridius: This is not going to work.
[03:13:55] <dpc> self is borrowed twice
[03:14:17] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[03:14:35] <Eridius> dpc: ah right. Ok, so then my second suggestion: Make the Actor an Option<Actor> so you can temporarily remove it from the Creature, work with it, then place it back into the creature
[03:14:40] <huon> separate out the actor part from the rest? i.e. `self.actor.dosomething(self.data)`
[03:14:51] <kmc> huon: the former takes length in %eax / %edx; the latter stops at a null terminator
[03:15:22] <dpc> Eridius: Than every time I want to use actor I need to use gimmicks.
[03:15:23] <Eridius> or what huon said. make Creature something like struct Creature { data: CreatureData, actor: Actor } and use `let Creature { ref mut data, ref mut actor } = *self; actor.doSomething(data);`
[03:15:39] *** Joins: Luqman (laden@moz-AB7945E9.csclub.uwaterloo.ca)
[03:15:43] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[03:15:59] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[03:16:39] <dpc> Eridius: Yes, this one is actually usable.
[03:16:48] <huon> (theoretically one doesn't need to do the `ref mut` pattern like that, but the compiler may not cope with that yet.)
[03:16:51] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[03:16:51] <dpc> I plan to use it once I refactor the more complex part.
[03:17:05] <dpc> I have a Game that has a Map (an array Tiles).
[03:17:06] <Eridius> huon: what do you mean? data and actor need to be &mut pointers
[03:17:27] <huon> Eridius: the compiler can tell that self.data and self.actor are disjoint
[03:17:29] <kmc> the explicit length instruction is 8 uops vs. 3 for implicit
[03:17:31] <dpc> Game also has Creatures and keeps them in the list.
[03:17:33] <huon> s/can/should/
[03:17:42] <Eridius> huon: ahh I see what you mean. Yes, but I'm pretty sure it doesn't do that now
[03:17:44] <dpc> But I also want them be referencable from the Map tiles itself (for speed).
[03:17:59] <huon> Eridius: as am I, hence "theoretically". :)
[03:18:14] <Eridius> dpc: wrap Creature in an Rc and hold onto it from both locations? although I think that requires RefCell to be able to mutate the creature
[03:18:29] <dpc> Eridius: Yes, that's what I'm doing.
[03:18:32] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[03:18:41] <kmc> since I want to look for null bytes anyway, I can use the faster version that stops at a null, as long as I notice that it's done so, and do the last up to 15 bytes with the explicit version instead
[03:18:52] <dpc> And I get tens of Rc, RefCells burrow try_borrow, try_borrow_mut etc.
[03:19:10] *** Joins: mr_trousers (Mibbit@3E3094EC.34458CF2.CC1A2609.IP)
[03:19:15] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[03:19:15] *** Quits: syatchmenoff (samy@moz-AB5B740D.hsd1.or.comcast.net) (Quit: syatchmenoff)
[03:19:21] <huon> Eridius: actually, `let x = &mut a.x; let y = &mut a.y;` (with struct Foo { x: ..., y: ... }) seems to work
[03:19:30] <aeyk__> why are posix01 and posix88 split in std::libc instead of a single std::libc::*::posix? 
[03:19:36] <Eridius> huon: really? I'm surprised. I think rustc couldn't handle any of that
[03:19:38] <cmr> aeyk__: shenanigans
[03:20:20] <huon> aeyk__: (btw, if you didn't know, you shouldn't have to import as anything other than just `std::libc::foo`, everything is reexported at the top level.)
[03:20:30] <huon> Eridius: your homework: http://static.rust-lang.org/doc/master/rustc/middle/borrowck/doc/index.html
[03:20:31] <huon> :P
[03:21:25] <generalelectrix> cmr: I'm getting an error from my earlier linking question
[03:21:27] <Eridius> huon: eek!
[03:21:33] <generalelectrix> in my rust file: #[link(name = "libioctrl")].  libioctrl.dylib is in the directory I'm compiling everything.  when I try to compile
[03:21:47] <generalelectrix>  rustc -L ~/src/sinuous/src/enttec/ EnttecPro.rs 
[03:22:02] <dpc> https://github.com/dpc/rustyhex/blob/broken2/src/ai.rs#L67 This seems to be beyond me.
[03:22:02] <cmr> generalelectrix: it's just ioctrl, not libioctrl
[03:22:23] *** Quits: dumitru (dgherman@moz-7C253BEB.getcadre.com) (Input/output error)
[03:22:36] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[03:22:43] *** Quits: mr_trousers (Mibbit@3E3094EC.34458CF2.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[03:22:45] <generalelectrix> cmr: thanks.  can you tell yet that I have no idea what I'm doing?  :)
[03:23:03] <huon> Eridius: I can't see any explicit mention of double-borrowing a struct in there, from a quick glance
[03:23:05] *** Quits: apollow (mike@moz-24EF179C.wireless.calpoly.edu) (Client exited)
[03:24:32] <ChrisMorgan> But that's not double-borrowing, that's just being precise about what is being borrowed and ensuring no overlap.
[03:25:28] <huon> I can't see any explicit mention of borrowing two fields from a struct in there, from a quick glance*
[03:25:53] <huon> to be more precise about what we were talking about
[03:25:55] *** Joins: pongad (pongad@moz-7E8AAD2E.res.gatech.edu)
[03:26:22] *** Joins: lpy (lpy@207F51B2.F09091A8.1348A864.IP)
[03:26:23] *** Joins: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net)
[03:27:03] <ChrisMorgan> As I see how it *should* behave (regardless of what it *does*): for that scenario, `&mut a` would take an exclusive borrow on `a`; `&mut a.x` would take a shared mutable borrow on `a` and an exclusive borrow on `a.x`. (Defining shared mutable borrows as exclusive with read borrows, but shared with mutable borrows.)
[03:27:13] <Eridius> huon: interesting, I can trigger an error message that explicitly lists `f.x` as the thing borrowed
[03:27:19] <Eridius> note: previous borrow of `f.x` occurs here; the mutable borrow prevents subsequent moves, borrows, or modification of `f.x` until the borrow ends
[03:27:57] <Eridius> ChrisMorgan: I find it easier to think of "partial mutable borrow" instead of "shared mutable borrow"
[03:27:59] <dpc> Will http://static.rust-lang.org/doc/master/std/option/enum.Option.html#method.and_then preserve lifetime if the option will contain reference?
[03:28:11] <Eridius> because that's what it really represents; that only part of the struct has been mutably borrowed
[03:28:33] * ChrisMorgan was borrowing the terminology used in locks, exclusive and shared, despite the fact that it doesn't actually work because there are three types rather than two
[03:28:57] *** Quits: lpy (lpy@207F51B2.F09091A8.1348A864.IP) (Connection reset by peer)
[03:29:09] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[03:29:15] <huon> Eridius: yeah, I have seen some instances where it works, and where it doesn't
[03:29:32] <huon> dpc: yes
[03:29:44] <dpc> I got this to work.
[03:29:46] <dpc> Oh my.
[03:29:49] <huon> \o/
[03:29:57] <Eridius> dpc: I just read that in George Takei's voice
[03:29:57] <dpc> Thanks.
[03:30:10] <cmr> Oh my...
[03:31:20] <dpc> I hope you will make Rust success and I'll be earning big money for being able just to write things that compile in it in safety critical applications.
[03:31:30] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[03:31:33] <cmr> heh
[03:32:05] *** Joins: lpy (lpy@186A8F3A.F09091A8.1348A864.IP)
[03:32:26] *** Quits: ctangent (textual@moz-DB78D8CE.hfc.comcastbusiness.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[03:32:40] *** Parts: judder (maradukewa@BD9E6B94.126EFFE1.78E362FE.IP) ()
[03:32:44] *** Quits: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net) (Ping timeout)
[03:33:08] *** Joins: lpy_ (lpy@34124F54.F09091A8.1348A864.IP)
[03:33:13] *** Quits: Nekit1234007_ (Nekit12340@6B5BB457.8C6C029.4707F662.IP) (Quit: )
[03:33:43] *** Quits: lpy (lpy@186A8F3A.F09091A8.1348A864.IP) (Connection reset by peer)
[03:35:11] *** Joins: lawrence (lawrence@moz-14291993.dsl.bell.ca)
[03:35:14] *** Quits: lawrence (lawrence@moz-14291993.dsl.bell.ca) (Quit: lawrence)
[03:36:00] *** Quits: lpy_ (lpy@34124F54.F09091A8.1348A864.IP) (Client exited)
[03:36:26] *** Quits: tetsuharu (tetsuharu@moz-A3FEAA56.ap219.ftth.ucom.ne.jp) (Quit: )
[03:37:04] *** Joins: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net)
[03:37:15] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[03:39:32] *** Quits: jadbaires (jadrian@20CA3ECB.D023563B.70C1DD3E.IP) (Quit: Konversation terminated!)
[03:39:38] *** Joins: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt)
[03:39:51] *** Quits: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net) (Quit: holomorph)
[03:40:54] *** Joins: voxpopuli (fanservice@moz-CEF3689A.hsd1.pa.comcast.net)
[03:43:35] *** Joins: benvie (bbenvie@5FD20F9A.53D07D95.EFF8B7BF.IP)
[03:44:21] <jxs> hey all, if i want to give a compiler directive as an argument for a macro, on macro parametter declaration it should be an expression right?
[03:44:59] <kmc> what do you mean by compiler directive?
[03:45:35] *** Quits: Savago (Savago@D8B9C081.E820043D.D4C04133.IP) (Quit: Savago)
[03:45:49] <jxs> something like #[link(name="lib")
[03:46:22] <kmc> oh, attributes
[03:46:27] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[03:46:35] <kmc> I'm not sure you can splice those in from macros at all...
[03:46:46] <aeyk__>  mismatched types: expected `*mut std::libc::types::os::arch::posix01::stat` but found `*std::libc::types::os::arch::posix01::stat` (values differ in mutability) but I let mut'd my buf :(
[03:46:47] <kmc> link(name="lib") might parse as an expression
[03:46:55] <kmc> there's also the "tt" macro variable type
[03:46:57] <kmc> $foo:tt
[03:46:58] <o11c> = ?
[03:47:13] <cmr> aeyk__: "let mut" means a different thing than "*mut*'
[03:47:19] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[03:47:20] <cmr> "*mut", that is
[03:47:22] <kmc> which matches any "token tree", meaning a single balanced-parentheses thingy
[03:47:42] <cmr> aeyk__: "let mut" just means you can reassign the variable, or mutate its contents if it is owned.
[03:48:02] <o11c> aeyk__: you probably need &mut at some point previous
[03:48:05] <huon> (a single ident is a "token tree" too)
[03:48:07] <jxs> kmc tried expr yeah but gives me error: unexpected token: `#`
[03:48:30] <aeyk__> i thought it was let mut foo = *stat;
[03:49:06] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[03:49:06] *** ChanServ sets mode: +ao brson brson
[03:49:11] <cmr> aeyk__: nope, `let foo = *mut stat;` should work.
[03:50:03] <huon> cmr: wat?
[03:50:18] <huon> jxs: what are you trying to do?
[03:50:30] <aeyk__> touch
[03:50:57] <huon> jxs: (i.e. what are input and output do you want?)
[03:51:18] <jxs> https://github.com/jeaye/ncurses-rs/blob/master/src/ll.rs#L368
[03:51:24] <jxs> updating that to the latest rust version :P
[03:51:44] <huon> ah! the new thing is replacing attr with meta
[03:51:50] <huon> which is the *contents* of an attribute
[03:52:00] <huon> i.e. in #[foo], `foo` is a meta
[03:52:31] <aeyk__> @cmr: expected ; but found stat for 'let foo = *mut stat;"
[03:52:53] <huon> so you can write (#[cfgopt: meta], #[link: meta]) => { #[$cfgopt] #[$link] extern { ... } } to get the same invocation syntax
[03:53:07] <aeyk__> @cmr: expected ; but found stat for 'let foo = *mut stat;"
[03:53:12] <aeyk__> oops sorry 
[03:53:31] <cmr> aeyk__: what are you trying to do anyway?
[03:53:39] <huon> jxs: or just remove the #[]'s in the signature, and invoke like `define_sharedffi!(cfg(ncursesw), link(name="..."))`
[03:53:43] <cmr> note http://static.rust-lang.org/doc/master/std/io/fs/fn.stat.html
[03:53:48] <cmr> And that `Path` has a `stat` method
[03:53:54] <cmr> you really don't need to call into libc.
[03:54:14] <dpc> Is Self type a thing that I could normally use? (not in a trait or generic)
[03:54:16] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[03:54:21] <huon> aeyk__: `*mut stat` means nothign, I don't know what cmr was meaning to say
[03:54:23] <cmr> dpc: no
[03:54:31] <cmr> yeah
[03:54:35] <cmr> I don't either actually
[03:54:35] <huon> (in an expression, that is)
[03:54:37] <dpc> Could it ever be?
[03:54:43] <huon> dpc: maybe
[03:54:52] <huon> as syntactic sugar in a trait impl
[03:54:53] * cmr goes back to playing dnd
[03:57:09] *** Quits: GeneralMaximus (textual@FCE8EAE7.24AECFC8.8037CBEF.IP) (Ping timeout)
[03:57:29] *** Quits: pongad (pongad@moz-7E8AAD2E.res.gatech.edu) (Quit: Leaving)
[03:59:09] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[03:59:31] *** Joins: GeneralMaximus (textual@FCE8EAE7.24AECFC8.8037CBEF.IP)
[03:59:58] <jeaye> jxs: :)
[04:00:36] <jxs> oh you are there aha, going to submit pr when i fix this :P
[04:01:01] <jeaye> Looking forward to it! Thanks for the help.
[04:02:12] *** Joins: dranov (dranov@B72D9B7B.464AB0AD.FCAAE698.IP)
[04:02:41] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[04:04:28] <jxs> hum, huon using the first one you suggested, i am having error: no rules expected the token `cfg`
[04:04:29] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[04:04:38] * huon tries
[04:06:30] <huon> jxs: https://gist.github.com/huonw/548edb054cec446693f3 works for me
[04:07:08] <huon> jxs: maybe you forgot to add the #[] around the $link usage?
[04:08:39] <jxs> i have macro_rules! define_sharedffi(( cfgopt: meta, link: meta) => ({ #[$cfgopt] #[$link] extern {
[04:08:43] <jxs> and i am calling define_sharedffi!(cfg(ncursesw), link(name="ncursesw"))
[04:09:42] <jxs> oh sorry missing the $
[04:09:52] <huon> ah, yes
[04:09:59] * huon gets tripped up by that too
[04:11:53] *** Quits: jxv (jxv@moz-8FB92450.lightspeed.irvnca.sbcglobal.net) (Quit: QUIT)
[04:11:54] <jxs> ehe
[04:14:21] <dpc> Can I initialize Weak with None? 
[04:15:10] <ChrisMorgan> dpc: not Weak. Option<Weak>, sure.
[04:15:26] <ChrisMorgan> dpc: did you *need* to initialise it?
[04:15:33] <dpc> And then I'll have 2 levels of possible Nones...
[04:15:35] <ChrisMorgan> e.g. can you write `let thingy;`
[04:15:54] <ChrisMorgan> Show code?
[04:16:39] <dpc> I have a list of Creatures (Vec<Rc<Creature>>)
[04:16:47] <dpc> And one of them can be player.
[04:16:58] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[04:16:58] <dpc> So I thought about keeping it in a Week
[04:17:03] <dpc> Weak*
[04:17:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[04:17:27] <dpc> But I guess Option<Rc<Creature>> will be better.
[04:18:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[04:19:06] *** Joins: alkino_ (alkino@moz-18C36E4E.w92-151.abo.wanadoo.fr)
[04:19:40] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Quit: Leaving...)
[04:19:46] *** Quits: blank_name (blank_name@E4C1FCD5.66204B68.6D228269.IP) (Ping timeout)
[04:20:41] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[04:20:50] *** Joins: vikstrous (v@moz-B87E3476.cpe.net.cable.rogers.com)
[04:21:08] *** Quits: vikstrous (v@moz-B87E3476.cpe.net.cable.rogers.com) (Quit: Leaving.)
[04:21:22] *** Quits: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net) (Quit: Leaving.)
[04:22:23] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[04:22:29] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[04:22:49] *** Quits: Sorella (queen@BD3C138B.B46B7936.54BCAB54.IP) (Quit: It is tiem!)
[04:23:04] *** Joins: mib_xu4hcj (Mibbit@3E3094EC.34458CF2.CC1A2609.IP)
[04:23:55] *** Joins: DAddYE (DAddYE@D070FF6F.CB3251F2.284344F5.IP)
[04:24:02] <jxs> will cause rustc to search for the crate foo, and if it finds a matching binary it lets you use it from inside your crate.
[04:24:07] <jxs> where will rust search?
[04:24:22] <dpc> -L
[04:24:29] <dpc> + defaults
[04:25:48] <jxs> i have to give the corresponding crate as a dyanmic lib via -Llib ?
[04:26:03] *** Quits: mib_xu4hcj (Mibbit@3E3094EC.34458CF2.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[04:27:00] *** Quits: FlyingFoX (quassel@moz-8F529370.weh.rwth-aachen.de) (Ping timeout)
[04:27:01] <huon> jxs: only the directory
[04:27:44] <generalelectrix> do I need all of this preamble to use debug! ?
[04:27:45] <generalelectrix> #[feature(phase)]; #[phase(syntax, link)] extern crate log;
[04:27:55] <huon> yes
[04:28:09] *** Joins: blank_name (blank_name@AD0BCBC4.940B1E75.6D228269.IP)
[04:28:58] *** Joins: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net)
[04:29:35] *** Joins: FlyingFoX (quassel@moz-8F529370.weh.rwth-aachen.de)
[04:30:19] *** Quits: det (chris@moz-EAECB432.lv.lv.cox.net) (Ping timeout)
[04:32:34] *** Joins: whitglint (uid15486@moz-31ABA2C0.irccloud.com)
[04:35:49] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[04:38:41] *** Quits: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net) (Quit: Textual IRC Client: www.textualapp.com)
[04:41:18] <johnsoft> what's the right way to write something like this?
[04:41:33] <johnsoft> fn map_to_iterators<T>(vectors: Vec<Vec<T>>) -> ~[~Iterator<T>] { return vectors.iter().map(|v| v.iter()).collect(); }
[04:41:44] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[04:41:46] *** Quits: benvie (bbenvie@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[04:41:46] *** Quits: Rym (y@393F734D.E175BF4B.51C6DE68.IP) (Ping timeout)
[04:42:03] *** Joins: Rym (y@393F734D.E175BF4B.51C6DE68.IP)
[04:42:05] <johnsoft> I can't get my head around the types I need
[04:42:08] *** Joins: benvie (bbenvie@5FD20F9A.53D07D95.EFF8B7BF.IP)
[04:42:12] *** Joins: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net)
[04:45:06] *** Quits: WalrusPony (retep998@moz-99A61A25.dhcp.oxfr.ma.charter.com) (Ping timeout)
[04:45:41] *** Joins: WalrusPony (retep998@moz-99A61A25.dhcp.oxfr.ma.charter.com)
[04:46:17] *** Joins: tgkokk (user@moz-5E4375C8.home.otenet.gr)
[04:46:47] *** Quits: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP) (Ping timeout)
[04:47:30] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[04:47:54] *** Joins: pzol (pzol@86821BC.DEB41A6D.AADC76B.IP)
[04:49:28] *** Quits: derek_c (derek@moz-1578B046.cit.cornell.edu) (Ping timeout)
[04:49:53] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[04:50:57] *** Joins: tedh (tedh@moz-F3B34318.hsd1.il.comcast.net)
[04:51:13] *** Quits: tgkokk (user@moz-5E4375C8.home.otenet.gr) (Client exited)
[04:52:10] *** Quits: fournm (Aria@moz-ABB60BA0.austin.res.rr.com) (Quit: Leaving)
[04:52:18] *** Quits: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net) (Client exited)
[04:54:25] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[04:54:40] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[04:55:06] *** Joins: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net)
[04:55:26] *** Joins: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net)
[04:56:37] *** Joins: det (chris@moz-EAECB432.lv.lv.cox.net)
[04:56:57] *** Quits: DAddYE (DAddYE@D070FF6F.CB3251F2.284344F5.IP) (Client exited)
[04:57:17] *** Joins: DAddYE (DAddYE@D070FF6F.CB3251F2.284344F5.IP)
[04:57:47] *** Quits: det (chris@moz-EAECB432.lv.lv.cox.net) (Quit: Leaving)
[04:58:06] *** Joins: det (chris@moz-EAECB432.lv.lv.cox.net)
[04:58:26] *** Joins: Ralith (ralith@moz-67D4EB93.customer.broadstripe.net)
[04:58:59] *** Quits: DAddYE (DAddYE@D070FF6F.CB3251F2.284344F5.IP) (Ping timeout)
[05:01:51] *** Quits: aeyk__ (aeyk@616256A3.4D21CDFC.78DF8FCD.IP) (Quit: Lost terminal)
[05:02:16] *** Joins: mib_2cn8pe (Mibbit@moz-ADD6B527.lns20.bne1.internode.on.net)
[05:05:46] <mib_2cn8pe> If I have an array of structs within a struct, how should I initialize that array when constructing the outer struct? I tried tables: [Table::new(), ..MAX_TABLES] but this fails with error "copying a value of non-copyable type" as the Table struct has an owned str field.
[05:08:03] <mcpherrin> mib_2cn8pe: that syntax calls table::new() once and copies it to each position, so you can't use it
[05:08:30] <o11c> mib_2cn8pe: I think you need to do [Table::new(), Table::new(), etc]
[05:08:37] <o11c> a macro may help
[05:08:37] *** Quits: alkino_ (alkino@moz-18C36E4E.w92-151.abo.wanadoo.fr) (Ping timeout)
[05:08:56] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[05:09:40] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[05:10:37] <mib_2cn8pe> ah, thank you - i will look into macros as MAX_TABLES is 128 in this case.
[05:10:49] <ChrisMorgan> If you want ~[T] then std::slice::from_fn(|| Table::new(), MAX_TABLES) will do
[05:12:17] <mib_2cn8pe> Perhaps making it a resizable array in this case will be the simplest, I'll try that.
[05:14:49] *** Quits: blank_name (blank_name@AD0BCBC4.940B1E75.6D228269.IP) (Ping timeout)
[05:15:52] *** Parts: mib_2cn8pe (Mibbit@moz-ADD6B527.lns20.bne1.internode.on.net) ()
[05:16:46] *** Joins: ziad (ziad@moz-C0318336.hsd1.ca.comcast.net)
[05:18:30] *** Quits: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[05:18:32] *** Joins: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net)
[05:20:16] *** Joins: derek_c (derek@moz-1578B046.cit.cornell.edu)
[05:22:44] *** Quits: Earnestly (earnest@moz-2C691159.dyn.plus.net) (Ping timeout)
[05:23:07] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[05:24:34] *** Joins: blank_name (blank_name@AB55F408.AA624E84.6D228269.IP)
[05:25:11] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[05:26:42] <o11c> oh, right
[05:26:58] *** Joins: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP)
[05:30:32] *** Joins: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[05:30:59] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[05:31:04] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: pupoque)
[05:31:24] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[05:31:31] *** Joins: koonchun (matti@moz-EE8B4D5A.bb.dnainternet.fi)
[05:32:17] *** Quits: erickt_ (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[05:38:14] *** Joins: ozkriff (Mibbit@D803906A.389F1DB8.D5F347E6.IP)
[05:38:58] *** Quits: holomorph (holomorph@moz-CF91A262.hsd1.md.comcast.net) (Quit: holomorph)
[05:43:19] *** Joins: jackneill (jackneill@moz-B2E450A5.pool.digikabel.hu)
[05:43:58] *** Quits: bigbadben (bigbadben@moz-D67499C1.dhcp.klmz.mi.charter.com) (Ping timeout)
[05:46:42] *** Joins: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net)
[05:53:47] *** Quits: philix (felipe@moz-DED8EF62.user.veloxzone.com.br) (Ping timeout)
[06:00:00] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[06:03:27] *** Joins: bigbadben (bigbadben@moz-D67499C1.dhcp.klmz.mi.charter.com)
[06:04:00] *** Quits: Rym (y@393F734D.E175BF4B.51C6DE68.IP) (Ping timeout)
[06:04:06] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[06:06:41] *** Quits: bigbadben (bigbadben@moz-D67499C1.dhcp.klmz.mi.charter.com) (Ping timeout)
[06:06:45] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[06:07:00] *** Joins: bigbadben (bigbadben@moz-D67499C1.dhcp.klmz.mi.charter.com)
[06:07:29] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[06:08:48] *** Joins: member (Mibbit@1AB7A735.889E740D.E5977C21.IP)
[06:09:34] *** Quits: member (Mibbit@1AB7A735.889E740D.E5977C21.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[06:16:59] *** Quits: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com) (Ping timeout)
[06:17:15] *** Quits: pingu (christian@moz-26B332AC.ponies.io) (Quit: leaving)
[06:19:00] *** Joins: Excureo (c@moz-EB93D257.static.knwc.wa.charter.com)
[06:20:09] *** Joins: Rym (y@393F734D.E175BF4B.51C6DE68.IP)
[06:20:23] *** Quits: bigbadben (bigbadben@moz-D67499C1.dhcp.klmz.mi.charter.com) (Quit: Leaving)
[06:20:39] *** Quits: generalelectrix (Mibbit@moz-18E22694.hsd1.ca.comcast.net) (Quit: http://www.mibbit.com ajax IRC Client)
[06:21:12] *** Quits: sellout (greg@moz-F7BC9302.us-west-2.compute.amazonaws.com) (Ping timeout)
[06:21:29] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[06:22:22] *** Joins: IanCormac84 (User@659E65F3.64D641E5.67DFF8B4.IP)
[06:23:15] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[06:23:23] *** Joins: alonlevy (alon@7BE996CA.2941FB7D.51B98CA5.IP)
[06:23:30] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[06:23:30] *** ChanServ sets mode: +ao brson brson
[06:26:55] *** Quits: b (b@moz-55CA322E.org) (Ping timeout)
[06:27:27] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[06:28:14] *** Quits: koonchun (matti@moz-EE8B4D5A.bb.dnainternet.fi) (Ping timeout)
[06:29:20] *** Joins: b (b@moz-55CA322E.org)
[06:30:18] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[06:30:28] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[06:30:49] *** Quits: ehsanul (harish@moz-A9E56CFE.hfc.comcastbusiness.net) (Connection reset by peer)
[06:32:36] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[06:36:07] *** Quits: japaric_ (japaric@E527F424.ABE6A7FD.E5B504CC.IP) (Ping timeout)
[06:38:48] *** Joins: japaric_ (japaric@AD8E3BA8.D2FA42B.95AFB88D.IP)
[06:38:56] *** Quits: jdavis (jdavis@moz-1BE8A6A1.hsd1.ca.comcast.net) (Ping timeout)
[06:42:18] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[06:42:36] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[06:42:39] *** Joins: ofeldt- (ofeldt@moz-82728033.dip0.t-ipconnect.de)
[06:43:19] *** Quits: ofeldt (ofeldt@moz-2D0BE399.dip0.t-ipconnect.de) (Ping timeout)
[06:43:59] *** Joins: philix (felipe@moz-DED8EF62.user.veloxzone.com.br)
[06:45:34] <derek_c> what's the opposite of #[warn(...)]?
[06:45:44] *** Quits: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net) (Quit: Taking a nap.)
[06:45:56] <edwardw> derek_c: deny
[06:46:06] <edwardw> or allow for that matter
[06:46:09] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[06:47:08] <derek_c> edwardw: thanks
[06:48:24] <derek_c> how do I reexport everything from a module? I mean, I have a lib.rs and a foo.rs, and I have `pub mod foo` in lib.rs.  However, I want to export everything in `foo` on the top level.  How may I do so?
[06:48:59] <edwardw> you just `pub use ...`
[06:49:10] <derek_c> edwardw: ah right! forgot :)
[06:50:01] *** Joins: DAddYE (DAddYE@D070FF6F.CB3251F2.284344F5.IP)
[06:53:02] *** Quits: wilson (wilson@moz-5531C57F.wb78.net) (Ping timeout)
[06:53:12] *** Joins: wilson (wilson@moz-5531C57F.wb78.net)
[06:56:00] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[06:58:22] *** Quits: ozkriff (Mibbit@D803906A.389F1DB8.D5F347E6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[07:02:48] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[07:06:32] *** Quits: W0rmDr1nk (wormdrink@moz-CEAF0263.access.mtnbusiness.co.za) (Ping timeout)
[07:10:12] *** Quits: stumpart (barrington@moz-93393D0A.hsd1.ca.comcast.net) (Quit: Leaving.)
[07:11:17] *** Quits: alisdair (textual@moz-7E6FA9C4.bchsia.telus.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:11:49] *** Quits: Rym (y@393F734D.E175BF4B.51C6DE68.IP) (Ping timeout)
[07:11:53] *** Joins: philix_ (felipe@moz-9DEF9CA2.user.veloxzone.com.br)
[07:12:06] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[07:12:17] *** Quits: philix (felipe@moz-DED8EF62.user.veloxzone.com.br) (Ping timeout)
[07:12:18] *** Joins: jdavis (jdavis@moz-1BE8A6A1.hsd1.ca.comcast.net)
[07:13:35] *** Quits: dranov (dranov@B72D9B7B.464AB0AD.FCAAE698.IP) (Ping timeout)
[07:14:34] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[07:17:59] *** Joins: daschl (Adium@moz-DC6DE6E2.vie.surfer.at)
[07:18:09] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:19:49] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[07:20:31] *** Quits: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net) (Quit: Leaving.)
[07:23:39] *** Quits: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net) (Connection reset by peer)
[07:24:00] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[07:25:40] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[07:27:11] *** Joins: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net)
[07:27:33] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[07:28:52] *** Quits: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net) (Ping timeout)
[07:30:02] *** Quits: daschl (Adium@moz-DC6DE6E2.vie.surfer.at) (Quit: Leaving.)
[07:30:48] *** Joins: ehsanul (harish@moz-24DD2596.hsd1.ca.comcast.net)
[07:33:25] *** Quits: alonlevy (alon@7BE996CA.2941FB7D.51B98CA5.IP) (Ping timeout)
[07:39:28] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Quit: Textual IRC Client: www.textualapp.com)
[07:40:03] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[07:41:52] *** Joins: mawuli (mawuli@2760A9B5.4882C7ED.DE15C958.IP)
[07:42:49] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[07:42:57] *** Quits: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net) (Quit: zzz)
[07:42:57] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[07:45:06] *** Joins: Ms2ger (Ms2ger@moz-278726EC.adsl-dyn.isp.belgacom.be)
[07:46:19] *** Joins: dranov (dranov@B72D9B7B.464AB0AD.FCAAE698.IP)
[07:47:42] *** Joins: gabber_matt (Mibbit@moz-164D863E.range86-149.btcentralplus.com)
[07:47:51] *** Joins: aow (sid16445@moz-A42E5B7B.irccloud.com)
[07:48:14] <gabber_matt> Hi everyone.  Please can I ask - what would be the best (easiest) gui library to use with rust?
[07:48:26] *** Joins: alonlevy (alon@7BE996CA.2941FB7D.51B98CA5.IP)
[07:48:28] *** Quits: philix_ (felipe@moz-9DEF9CA2.user.veloxzone.com.br) (Ping timeout)
[07:48:56] <ChrisMorgan> gabber_matt: your primary options at present are wxRust and ncurses-rs
[07:49:14] <gabber_matt> Thanks Chris, I will look into those
[07:50:03] <ChrisMorgan> wxRust depends on quite a recent version of wxWidgets, so you may not be able to use it with your system's package manager's version of wxWidgets. And ncurses isn't exactly a friendly thing to work with as a developer or a user.
[07:51:15] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[07:51:28] <gabber_matt> Oh dear.  Thats not sounding too good.  So for a newb like me, GUI programming might be quite difficult using rust?
[07:51:29] <myname> termbox :p
[07:51:48] <dsrx> there is some very basic stuff with cocoa courtesy of servo
[07:52:42] <mcpherrin> Doesn't servo just render into a glfw context
[07:52:52] <gabber_matt> cocoa is a gui library?
[07:53:49] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[07:54:00] <dsrx> cocoa includes appkit
[07:54:22] <gabber_matt> OK, thanks I will take a look.  Is it going to be easy to set up ?
[07:54:26] *** Ms2ger is now known as Ms2ger|sad
[07:54:33] <dsrx> the bindings are very, very basic
[07:54:48] *** Joins: philix (felipe@moz-9DEF9CA2.user.veloxzone.com.br)
[07:54:48] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[07:54:49] <dsrx> like, forget I said anything
[07:55:09] <dsrx> objc
[07:55:09] <gabber_matt> Thanks dsrx
[07:55:14] <dsrx> ObjC is kind of horrible 
[07:55:34] <mcpherrin> I don't think I've seen a gui program other than servo written in Rust
[07:56:03] <gabber_matt> Oh dear
[07:56:06] <ChrisMorgan> gabber_matt: the Rust GUI situation is not at all mature.
[07:56:53] <JamesNZ> I think there are sdl bindings? Though that's probably a bit low-level.
[07:57:09] <Ms2ger|sad> Not sure I'd say Servo has a GUI :)
[07:57:26] <gabber_matt> I'm looking for a new language to start gui programming and it is very difficult to choose.  I found Java and C# very difficult with far too many layers.  I love python, but it has portability issues i.e. doesn't compile into native binaries
[07:57:53] <gabber_matt> So I was considering Nimrod or Rust
[07:57:54] <JamesNZ> C++/Qt perhaps?
[07:58:17] <gabber_matt> If I found c# difficult surely I would find c++ difficult too?
[07:58:38] <JamesNZ> C# is based off Java, not C/C++.
[07:58:47] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[07:59:27] <gabber_matt> ok, but it has a reputation for being difficult though isn't it?  Thanks for the suggestion though
[08:00:05] <JamesNZ> Yeah, it does take a lot of practice (in my experience at least).
[08:00:29] <ChrisMorgan> Some people have been doing work towards full GTK bindings in Rust. Not sure how that's going, but last I heard progress was good.
[08:01:04] <Ms2ger|sad> Woo: https://badges.mozilla.org/en-US/badges/badge/Servo-Rust-upgrade/awards/2576
[08:01:19] <gabber_matt> OK, thanks Chris.  I will be off now.  Thanks for everyone's contributions, its a nice place to hang out
[08:01:28] <ChrisMorgan> gabber_matt: I wouldn't consider C# to be a difficult language; it's probably a little simpler than Rust, really.
[08:01:32] <mcpherrin> Ms2ger|sad: haha, nice badge
[08:01:59] *** Joins: twi (Adium@moz-429185BE.cust.vodafonedsl.it)
[08:02:15] <ChrisMorgan> That badges page layout is broken on slightly narrower viewports ☹
[08:02:21] *** Quits: gabber_matt (Mibbit@moz-164D863E.range86-149.btcentralplus.com) (Quit: http://www.mibbit.com ajax IRC Client)
[08:02:43] *** Quits: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com) (Quit: I'm sure it's perfectly safe)
[08:04:32] *** Joins: tgkokk (user@moz-BF0AF9D2.home.otenet.gr)
[08:06:03] *** Joins: Axord (xord@moz-BC8E2FBC.static.rvsd.ca.charter.com)
[08:07:15] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[08:08:09] *** Joins: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de)
[08:08:20] *** Quits: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de) (Max SendQ exceeded)
[08:08:26] *** Joins: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de)
[08:08:58] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[08:09:13] *** Quits: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de) (Quit: Leaving.)
[08:09:27] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[08:09:28] *** Quits: tgkokk (user@moz-BF0AF9D2.home.otenet.gr) (Ping timeout)
[08:09:35] *** Quits: alonlevy (alon@7BE996CA.2941FB7D.51B98CA5.IP) (Connection reset by peer)
[08:11:28] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[08:11:40] *** Quits: edwardw (Mibbit@4660DACB.EE06708D.4BFBD933.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[08:13:32] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Quit: leaving)
[08:14:28] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[08:14:52] *** Quits: GeneralMaximus (textual@FCE8EAE7.24AECFC8.8037CBEF.IP) (Ping timeout)
[08:14:59] *** Joins: GeneralMaximus (textual@FCE8EAE7.24AECFC8.8037CBEF.IP)
[08:15:21] *** Joins: eibwen (kvirc@moz-BD8512E7.dip0.t-ipconnect.de)
[08:22:15] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[08:24:02] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[08:27:07] *** Quits: DAddYE (DAddYE@D070FF6F.CB3251F2.284344F5.IP) (Client exited)
[08:27:40] *** Joins: DAddYE (DAddYE@D070FF6F.CB3251F2.284344F5.IP)
[08:28:08] *** Quits: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt) (Ping timeout)
[08:28:40] *** Joins: koderok (Thunderbir@2FB625D.8F09316C.85BF2EFC.IP)
[08:29:22] *** Quits: DAddYE (DAddYE@D070FF6F.CB3251F2.284344F5.IP) (Ping timeout)
[08:29:35] <eibwen> what does #[unsafe_no_drop_flag] do?
[08:30:11] <cmr> eibwen: so the drop flag is conceptually a single bool added to every type that implements Drop
[08:30:28] <cmr> eibwen: when the destructor is run, the drop flag is set, and the destructor won't be run again.
[08:30:36] <cmr> #[unsafe_no_drop_flag] omits this behavior.
[08:30:40] <eibwen> ah ok
[08:30:48] <cmr> it's called "unsafe" because the destructor may be run multiple times.
[08:30:51] <eibwen> I suppose the drop flag is handled atomically?
[08:30:52] *** Joins: nkoep (nik@moz-C529282F.pool.mediaways.net)
[08:30:54] <cmr> no.
[08:31:00] *** Joins: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt)
[08:31:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[08:31:17] <cmr> multiple threads trying to destruct a single value is a data race and not allowed.
[08:31:24] <eibwen> ok
[08:31:44] <eibwen> how can the destructor be called multiple times at all? isn't it very defined where a certain object's lifetime ends?
[08:31:52] <cmr> unfortunately not.
[08:32:11] <cmr> for example, you can move out of a value in one branch of an `if` but not the other.
[08:32:27] <cmr> afaik the plan is to change the language to not allow that.
[08:32:31] <cmr> and then the drop flag will be removed.
[08:33:08] <eibwen> cmr: but then it can be dropped in all cases where it isn't moved
[08:33:15] *** Quits: derek_c (derek@moz-1578B046.cit.cornell.edu) (Ping timeout)
[08:33:22] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[08:33:47] <eibwen> (in all if branches where it isn't moved)
[08:33:49] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[08:33:58] <cmr> the logic to handle that correctly in trans today would be very complex.
[08:34:01] *** Joins: lht (lht@moz-C3A77B47.hinet-ip.hinet.net)
[08:34:02] <cmr> but yes, it *is* a solvable problem.
[08:35:17] <Ms2ger|sad> cmr, twir? :)
[08:35:23] <cmr> hrrrng
[08:35:37] <cmr> Ms2ger|sad: I'll put off these RFCs to write TWiR
[08:35:41] <cmr> but I'm going to take a nap first.
[08:36:10] *** Joins: soumyaC (uid15286@moz-E77DEB21.irccloud.com)
[08:36:15] <Ms2ger|sad> Enjoy your nap :)
[08:42:43] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[08:43:11] *** Quits: onelson (owen@18CF7301.95770028.5B6BFE7D.IP) (Ping timeout)
[08:43:12] <eibwen> would it be possible to warn for missing semicolons like this one? http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/libstd/vec.rs.html#831
[08:47:09] <tfogal> huon: i saw your with_ref suggestion.  If i do that in a loop, it seems the memory gets cleaned up at the end of the scope; i need 'pointer' to live beyond the loop.
[08:48:42] <meyer> Is there any specific reason Path doesn't implement Show, or has it just not been written?
[08:51:26] <Eridius> meyer: because Path is a bucket of bits
[08:51:32] <Eridius> meyer: it has a .display() method that implements Show
[08:51:40] <Eridius> (by converting the bucket of bits into utf8 in a lossy fashion)
[08:51:47] <Eridius> it also has .filename_display() if you just want the filename
[08:51:52] <meyer> Oh, I didn't notice that. Thanks.
[08:52:13] *** Joins: skade (skade@moz-6444221B.dip0.t-ipconnect.de)
[08:52:25] <meyer> And that makes sense. Linux filenames are any bytes other than null and forward slash, right?
[08:52:32] <meyer> Something like that?
[08:52:56] <Eridius> linux paths are anything besides NUL
[08:53:02] <Eridius> path components are anything besides NUL and /
[08:53:36] <meyer> So
[08:53:40] <meyer> I have an enum
[08:53:48] <meyer> Which contains Path s in most variants
[08:54:37] <meyer> What would be the idiomatic way to implement Show? That is, anything besides just a match with a branch for each, calling display
[08:54:48] <Eridius> just do the match
[08:59:39] <cmr> Ms2ger|sad: starting twir now.
[08:59:46] <Ms2ger|sad> <3
[09:00:39] *** Joins: paraze (paraze@moz-9E76094B.w90-27.abo.wanadoo.fr)
[09:01:55] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[09:03:53] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Quit: arturo)
[09:04:02] *** Joins: arturo (Thunderbir@moz-E83B14F0.superkabel.de)
[09:04:27] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[09:06:11] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Quit: Leaving.)
[09:06:51] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[09:07:22] *** Quits: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:08:02] *** Joins: rylev (rylev@FDA7C5E.8B1408EE.2DB0BBA1.IP)
[09:08:22] *** Quits: koderok (Thunderbir@2FB625D.8F09316C.85BF2EFC.IP) (Ping timeout)
[09:08:33] *** Quits: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca) (Ping timeout)
[09:11:52] *** Quits: skade (skade@moz-6444221B.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:13:15] <cmr> Ms2ger|sad: although I can't release twir until I get a twis from lars or someone else.
[09:13:29] *** Joins: m-r-r (Mibbit@moz-6E5436C0.unice.fr)
[09:13:39] <cmr> ;p
[09:13:55] <cmr> (I can give you the md anyway, I presume you want it to help upgrading servo)
[09:14:15] *** Joins: stomper (Mibbit@22AA22EA.49E4430E.EEFA9FF0.IP)
[09:14:16] * Ms2ger|sad looks at servo
[09:14:26] *** Quits: stomper (Mibbit@22AA22EA.49E4430E.EEFA9FF0.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[09:14:40] <Ms2ger|sad> We've now pass Acid2, and we've done a rust upgrade
[09:14:46] <Ms2ger|sad> That's mostly it
[09:14:51] <cmr> I'm not sure which is more impressive tbh
[09:14:53] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[09:14:58] <cmr> :P
[09:16:17] *** Joins: TeXitoi (sihem@moz-D37F3D03.eu)
[09:16:25] <TeXitoi> hi
[09:16:33] <m-r-r> hello
[09:17:31] <Ms2ger|sad> cmr, :)
[09:17:39] <Ms2ger|sad> The rust upgrade wasn't too bad, actually
[09:18:05] <m-r-r> I was browsing the Rust documentation, and i'm wondering what the `workcache` module is for.
[09:18:16] <cmr> m-r-r: workcache was originally written for use by rustpkg.
[09:18:46] <m-r-r> cmr: is it still used ?
[09:18:51] <Ms2ger|sad> Oh, private fields, that's going to be fun
[09:19:03] <cmr> m-r-r: no, but it's decent code that's conveivably useful, so it hasn't been removed.
[09:19:27] <cmr> m-r-r: the comments in the source describe it some.
[09:22:54] *** Quits: glennsl (textual@moz-5D7B804F.getinternet.no) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[09:23:52] *** Quits: devbug (quassel@moz-8C40558B.bchsia.telus.net) (Connection reset by peer)
[09:25:13] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:26:06] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[09:26:25] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[09:26:51] <m-r-r> The comments are useful, indeed. What is the Arc<T> trait for ?
[09:26:54] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[09:26:56] *** Joins: alonlevy (alon@35D0453C.31F49B3D.AB64B967.IP)
[09:27:12] <cmr> Arc is not a trait, but a struct: http://static.rust-lang.org/doc/master/sync/struct.Arc.html
[09:27:21] <cmr> it's used for shared ownership between tasks.
[09:27:45] *** Joins: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net)
[09:28:13] <m-r-r> cmr: ok, thanks
[09:29:25] *** Quits: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net) (Ping timeout)
[09:31:03] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[09:32:10] *** Quits: ski (ski@moz-E5796727.student.chalmers.se) (Quit: Lost terminal)
[09:33:01] <Ms2ger|sad> error: can't find crate for `std` which `geom` depends on
[09:33:04] <Ms2ger|sad> That's a fun one
[09:33:04] *** Joins: alkino_ (alkino@moz-18C36E4E.w92-151.abo.wanadoo.fr)
[09:33:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[09:36:06] * TeXitoi waiting comiplation: cfg: target triples i686-unknown-linux-gnu x86_64-unknown-openbsd
[09:36:36] <Ms2ger|sad> error: type `sync::arc::Arc<*platform::GLXContextOpaque>` does not implement any method in scope named `get`
[09:36:38] <Ms2ger|sad> Anyone?
[09:36:40] <eddyb> TeXitoi: odd combination you have there
[09:36:48] <eddyb> Ms2ger|sad: why would it have "get"?
[09:37:01] <eddyb> Ms2ger|sad: it's a smart pointer :P
[09:37:02] <Ms2ger|sad> Because this used to compile
[09:37:10] <eddyb> dereference it
[09:38:22] <TeXitoi> eddyb: cross compilation
[09:38:38] <TeXitoi> I'm trying to port rust to openbsd
[09:38:52] *** Joins: mb (Mibbit@moz-DB04296F.icpnet.pl)
[09:38:55] *** Quits: osa1 (omer@6CFF95AB.2545CD3.3688B332.IP) (Ping timeout)
[09:38:59] <TeXitoi> it's the result of ./configure --target=x86_64-unknown-openbsd
[09:39:17] *** Parts: mb (Mibbit@moz-DB04296F.icpnet.pl) ()
[09:39:19] <eddyb> TeXitoi: are you on non-x64 linux?
[09:39:32] <TeXitoi> yes
[09:39:39] <TeXitoi> on i686
[09:39:43] <eddyb> haven't seen many of those around :)
[09:40:04] <TeXitoi> first gen atom
[09:40:08] <eddyb> ooh
[09:40:30] <eddyb> (which reminds me, I should just try to see how broken Rust is with x32)
[09:41:04] <TeXitoi> x32 is x64 with 32 bits pointers?
[09:41:08] <eddyb> yupp
[09:41:14] <TeXitoi> ok
[09:41:18] <eddyb> imagine a x32 snapshot for x64 that didn't use a ton of RAM :D
[09:41:23] <eddyb> TeXitoi: also, PNaCl
[09:41:42] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[09:42:20] *** Joins: koderok (Thunderbir@2FB625D.8F09316C.85BF2EFC.IP)
[09:42:53] <TeXitoi> PNaCl? a salty thing? ;)
[09:43:33] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[09:43:37] <eddyb> TeXitoi: portable native client
[09:44:02] <eddyb> TeXitoi: https://developers.google.com/native-client/dev/reference/pnacl-bitcode-abi
[09:44:38] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[09:44:45] <eddyb> TeXitoi: AFAIK, it should work nicely with Rust code :)
[09:44:53] <eddyb> /AFAICT
[09:45:13] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[09:45:30] <TeXitoi> :)
[09:45:47] <TeXitoi> on x64, how much ram is needed to compile rust?
[09:46:12] <cmr> Approximately 1.6GB
[09:46:12] <eddyb> it peaked at 1.5GB with some recent changes, right now it's back down around 1.3GB
[09:46:16] <eddyb> cmr: whoa whoa
[09:46:22] <eibwen> where is the Hash trait for Vec defined? I can't find it in http://static.rust-lang.org/doc/master/src/std/home/rustbuild/src/rust-buildbot/slave/nightly-linux/build/src/libstd/vec.rs.html
[09:46:24] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[09:46:45] <cmr> eddyb: nothing wrong with an upper bound.
[09:46:48] <eddyb> eibwen: if it's not there, it could be in the module housing Hash itself
[09:47:02] <eibwen> ok, I'll look there
[09:49:12] <TeXitoi> it pass on 1GB here on i686 if I close web browsers ;)
[09:49:41] <eddyb> maybe the small pointer size doesn't help as much as I've hoped :/
[09:49:43] <TeXitoi> so x1.5-2 approx
[09:50:28] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Ping timeout)
[09:50:35] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[09:52:29] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Client exited)
[09:52:42] <Ms2ger|sad> error: unsupported builtin nonterminal parser: attr
[09:52:57] *** Quits: arturo (Thunderbir@moz-E83B14F0.superkabel.de) (Quit: arturo)
[09:52:57] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[09:53:00] <cmr> removed
[09:53:13] <cmr> you can use #[$foo:meta] instead
[09:53:18] <cmr> it now accepts the entirety of the attribute syntax
[09:53:23] <cmr> rather than just a single name
[09:53:32] <Ms2ger|sad> So #[doc = "Request whatnottery."] should be what?
[09:54:06] <eddyb> doc="foo" should work with meta
[09:55:13] <Ms2ger|sad> Well, it doesn't
[09:55:28] <cmr> :(
[09:55:47] <Ms2ger|sad> https://github.com/chris-morgan/rust-http/blob/master/src/http/headers/mod.rs#L1007
[09:56:56] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[09:57:05] <eddyb> yupp, #[$attr:meta]
[09:57:30] <eddyb> unless you're saying that doesn't work anymore or something
[09:57:53] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[09:57:55] <Ms2ger|sad> I don't understand what you're saying
[09:58:02] *** Quits: m-r-r (Mibbit@moz-6E5436C0.unice.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[09:58:14] *** Joins: olegon (olegon@moz-909B2C54.dsl.telesp.net.br)
[09:58:27] <eddyb> Ms2ger|sad: what are you asking :)
[09:58:28] <eddyb> ?
[09:58:53] <eddyb> does that code compile?
[09:59:04] <Ms2ger|sad> No
[09:59:19] <eddyb> did it stop compiling recently?
[09:59:37] <Ms2ger|sad> Somewhere in the past two weeks
[10:00:01] <eddyb> but your error doesn't make sense :|
[10:00:16] <eddyb> https://github.com/chris-morgan/rust-http/blob/master/src/http/headers/mod.rs#L857
[10:00:23] <eddyb> ^^ that's commented out, it shouldn't matter
[10:00:55] <Ms2ger|sad> Hrm
[10:01:07] <Ms2ger|sad> That's not what mod.rs looks like here...
[10:01:47] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[10:02:18] <Ms2ger|sad> Bah, configure fucked this up again
[10:02:34] <cmr> aren't submodules wonderful?
[10:03:12] <Ms2ger|sad> Back to error: can't find crate for `std` which `opengles` depends on
[10:03:27] <Ms2ger|sad> How does that even happen?
[10:04:13] <cmr> is `opengles` the crate being compiled?
[10:04:20] *** Joins: c4milo (Mibbit@moz-21A617FA.clienti.tiscali.it)
[10:04:21] <cmr> if not, it means opengles is older than the current rustc.
[10:04:37] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[10:04:44] <Ms2ger|sad> Mmm
[10:05:24] <pnkfelix> cmr: but wouldn't that emit the mismatched hash message instead?
[10:05:32] <pnkfelix> cmr: not the "can't find" message?
[10:05:38] *** Quits: lht (lht@moz-C3A77B47.hinet-ip.hinet.net) (Quit: lht)
[10:05:40] <cmr> hm
[10:05:44] <cmr> I forgot that existed now
[10:05:47] <cmr> presumably
[10:05:59] <cmr> I can't imagine any other situation which rustc wouldn't be able to find std though
[10:06:10] *** Quits: luzie (lu.cy@moz-CD18B14B.customer.cdi.no) (Input/output error)
[10:06:14] *** Quits: c4milo (Mibbit@moz-21A617FA.clienti.tiscali.it) (Quit: http://www.mibbit.com ajax IRC Client)
[10:06:16] *** Joins: luzie (lu.cy@moz-CD18B14B.customer.cdi.no)
[10:06:21] *** Joins: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net)
[10:06:37] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[10:06:39] *** Joins: Tobba (Tobba@moz-462B7F7F.ias.bredband.telia.com)
[10:06:59] <Ms2ger|sad> Looks like opengles was definitely out of date
[10:07:02] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[10:07:30] <pnkfelix> maybe libstd's special nature sends things down a different path... 
[10:08:26] <cmr> pnkfelix: hm, I think rustc injects `extern crate std = "std#0.10-pre";` for example
[10:08:32] <cmr> perhaps the version in the crate id is throwing it off?
[10:08:42] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[10:08:48] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[10:09:04] <cmr> it sees the mismatched versions and gives up right then
[10:10:02] <Ms2ger|sad> No more RefCell::set?
[10:10:17] <cmr> nope
[10:11:00] <Ms2ger|sad> Hrm
[10:11:01] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[10:11:04] <Ms2ger|sad> What is it now?
[10:11:33] <kimundi> *foo.borrow_mut() =
[10:11:52] <Ms2ger|sad> Ah
[10:11:59] <Ms2ger|sad> Not sure I like that more
[10:12:17] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[10:13:31] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Client exited)
[10:14:02] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[10:16:28] <TeXitoi> http://benchmarksgame.alioth.debian.org/u64/rust.php -> much better that 0.9 :)
[10:17:07] <cmr> TeXitoi: fasta got slower :(
[10:18:23] <Ms2ger|sad> Not this again
[10:18:46] <cmr> heh
[10:18:53] <cmr> I had a similar thought
[10:19:39] <pnkfelix> cmr: that sounds plausibe
[10:19:42] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[10:19:42] <pnkfelix> plausible
[10:20:18] <cmr> eugh last week was so busy
[10:20:23] <cmr> why is the rust community so awesome :(
[10:21:01] <benh> cmr: What is your process for writing up twir? Do you backread all recent closed PRs?
[10:21:03] *** Quits: p1start (rewi@moz-E7F3D014.org) (Ping timeout)
[10:21:09] <cmr> benh: yes.
[10:21:24] <cmr> specifically, I run: git log refs/remotes/mozilla/master --author=bors --since='3/29/2014' --pretty=oneline > ~/entropy/twir.txt
[10:21:33] <benh> ah
[10:21:44] <cmr> I then do a block select in my terminal of the PR numbers, and run: for pr in $(xsel -ob); do firefox https://github.com/mozilla/rust/pull/$pr; done
[10:22:21] <benh> heh
[10:22:22] <cmr> I then spend an hour reading pull requests. In the first pass, I close all tabs for PRs which I deem unimportant or uninteresting
[10:22:26] *** Quits: alonlevy (alon@35D0453C.31F49B3D.AB64B967.IP) (Ping timeout)
[10:22:34] <cmr> then I write down all the breaking changes, and then the rest
[10:22:39] <benh> right
[10:22:45] *** Joins: mye (mye@moz-77F95923.dip0.t-ipconnect.de)
[10:22:47] <cmr> by the the time I'm done with breaking changes I'm usually sick of writing, so there is a second dying-off :p
[10:24:31] *** Joins: pastry (Mibbit@moz-B44D98B.ip59.fastwebnet.it)
[10:24:59] <Ms2ger|sad> Why do you deprecate so much...
[10:24:59] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[10:25:19] <Ms2ger|sad> And why do we use [T].map so much
[10:25:43] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[10:25:44] *** Quits: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net) (Quit: meyer)
[10:25:56] *** Joins: lht (lht@75877440.DFB0288A.7BA1798C.IP)
[10:26:33] <pnkfelix> the `.iter().map(..).collect::<Vec<..>>()` pattern is pretty inconvenient at times
[10:26:39] <Ms2ger|sad> And please leave ~[T] alone for a while?
[10:26:42] <pastry> Hi, suppose I have: -- type Ast = ~[Instr] -- then how can I do: -- fn (a: &mut Ast) -- ?
[10:26:48] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[10:26:55] <cmr> pastry: exactly like that :)
[10:27:15] <pnkfelix> i understnad this whole "Iterable" idea, but I'm starting to wonder if not going down that route would be okay.  Vec.map really isn't a sin against the rust-lords
[10:27:18] <Ms2ger|sad> Argh
[10:27:27] <Ms2ger|sad> Why does semver::Version have private fields?
[10:27:39] *** Quits: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt) (Quit: Konversation terminated!)
[10:27:45] <benh> Probably because it didn't get caught during the privacy default switch?
[10:27:46] *** Joins: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt)
[10:27:46] <Ms2ger|sad> pnkfelix, well, it's ~[].map :)
[10:27:58] <pastry> cmr, but then the function laments that it expects &~[Instr]
[10:28:00] <pnkfelix> Ms2ger|sad: th same principle applies there, though
[10:28:12] <cmr> pastry: though note that `type` defines a type alias, not an entirely new type. That is, ~[Instr] and Ast are exactly equivalent.
[10:28:18] <cmr> pastry: gist your code?
[10:28:37] <pnkfelix> maybe I am showing my lisp roots ... "knows value of everything but cost of nothing"
[10:28:48] <pastry> cmr, yes, that's what I supposed, what would the best way to do a subtype then?
[10:29:11] <Ms2ger|sad> Any objection to making semver's fields public again?
[10:29:13] <cmr> pastry: Rust doesn't have any subtyping, but you can define a new type using a "newtype struct": `struct Ast(~[Instr])`
[10:29:20] <cmr> Ms2ger|sad: I think a pr already landed fixing them, though perhaps not.
[10:29:27] <Ms2ger|sad> No
[10:29:36] <Ms2ger|sad> This is a really fresh rust for once
[10:29:37] <pastry> thanks cmr, I'll start googling that
[10:29:42] <cmr> cool!
[10:31:03] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[10:31:13] <Ms2ger|sad> cmr, don't see a pr either
[10:31:24] <benh> Do enum variants also need to be specifically pub to be public either?
[10:31:36] <Ms2ger|sad> "Extract std::libc to its own crate"
[10:31:38] <Ms2ger|sad> Aaaaaaah
[10:31:39] <cmr> benh: no, they're the last bastion of public-by-default afaik
[10:31:56] <cmr> Ms2ger|sad: fixing that is a really easy sed, thankfully.
[10:32:12] <cmr> Ms2ger|sad: sed -i 's/std::libc/libc/g' **/*.rs
[10:32:21] <Ms2ger|sad> Across 40 submodules, as usual
[10:32:28] <cmr> O_O
[10:32:35] <cmr> do you seriously have 40 submodules?
[10:32:39] <Ms2ger|sad> Maybe 30
[10:32:47] <cmr> that's still absurdly miserable
[10:32:47] <benh> Oh, rip libc
[10:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[10:33:28] * TeXitoi hope the merge of his OpenBSD port with the libc move will pass easily...
[10:33:43] <cmr> the libc separation didn't actually land.
[10:34:05] <Ms2ger|sad> I lied
[10:34:06] <Ms2ger|sad> $ cat .gitmodules  | grep submodule | wc -l
[10:34:06] <Ms2ger|sad> 40
[10:36:52] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[10:36:53] * Ms2ger|sad tries to remember how to build libsemver without a make clean
[10:37:16] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[10:37:48] <Ms2ger|sad> It's not in rust/obj-servo/x86_64-unknown-linux-gnu/src/compiler/rust/x86_64-unknown-linux-gnu/stage2/lib/rustc/x86_64-unknown-linux-gnu/lib
[10:37:50] <eibwen> how can I construct something at a certain address and how can I destruct something at a certain address?
[10:40:10] <Ms2ger|sad> I guess everyone and their dog depend on semver
[10:40:14] *** yusukesuzuki-off is now known as yusukesuzuki
[10:40:16] *** yusukesuzuki is now known as yusukesuzuki-off
[10:41:06] *** yusukesuzuki-off is now known as yusukesuzuki
[10:41:13] <benh> eibwen: there's std::intrinsics::move_val_init which kinda sounds like the former, but i'm not sure about the latter
[10:41:44] *** Joins: lpy (lpy@1AF10827.F09091A8.1348A864.IP)
[10:42:31] *** yusukesuzuki is now known as yusukesuzuki-off
[10:42:43] *** yusukesuzuki-off is now known as yusukesuzuki
[10:43:57] <cmr> Ms2ger|sad: unofficial twir: https://gist.github.com/cmr/9990258
[10:43:59] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[10:44:01] <cmr> just for you!
[10:44:13] <Ms2ger|sad> Aww, thank you
[10:45:41] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[10:46:07] <eddyb> pnkfelix: about map: https://github.com/eddyb/rust/commit/38fd3f08e2e3c046ebc174a80f79269db7c2f3c3#diff-a150a36d923bd5dcb16ce4988174512eR33
[10:46:21] <eddyb> pnkfelix: I'd like to see that in std, it's pretty efficient
[10:47:00] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: Leaving.)
[10:47:01] *** Joins: lysgaard (lysgaard@C5C9C37A.B7B03691.1E99A072.IP)
[10:48:13] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[10:49:09] <TeXitoi> eibwen: to destruct something, just drop(*ptr), it will, I suppose, do the job
[10:49:57] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[10:50:04] <TeXitoi> Vec::pop move the poped value in the return type to delete it
[10:50:16] <benh> I thought you couldn't move out of dereferences
[10:50:17] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[10:51:25] <TeXitoi> rusti is not here?
[10:53:24] *** Joins: gimpf (gimpf@moz-DD95D3C.adsl.highway.telekom.at)
[10:53:24] <benh> strcat is probably asleep
[10:53:31] *** Joins: tgkokk (user@moz-BF0AF9D2.home.otenet.gr)
[10:54:39] <TeXitoi> benh: looking at Vet::pop, maybe the solution is more unsafe { drop(ptr::read(ptr)) }
[10:55:28] <TeXitoi> in Vec::pop: Some(ptr::read(self.as_slice().unsafe_ref(self.len())))
[10:55:57] <Taneb> I'm a little worried that that sort of thing is what Rust'll get infamous for
[10:56:11] <cmr> Taneb: what sort of thing?
[10:56:44] <benh> TeXitoi: That destroys a copy, doesn't it
[10:56:50] <Taneb> Big long chained methods
[10:56:54] *** Quits: lysgaard (lysgaard@C5C9C37A.B7B03691.1E99A072.IP) (Ping timeout)
[10:57:01] <benh> I mean, that's probably good enough if you make sure not to do it again
[10:57:09] *** Quits: mye (mye@moz-77F95923.dip0.t-ipconnect.de) (Quit: sleep message)
[10:57:15] <tfogal> i've got a 'mut c_int' and a function i need to call needs a '*mut c_int'.. how do I get one?  It appears & is a different type of pointer (I gather it's a reference)
[10:57:20] <cmr> TeXitoi: look at arena::Arena for an example of how to run destructors "in-place"
[10:57:25] <cmr> TeXitoi: it's not pretty.
[10:57:28] <TeXitoi> benh: yes, Vec::pop return Option<T>, the poped value, so it move it, it does not destroy it
[10:57:34] <cmr> tfogal: `&mut c_int`
[10:57:37] *** Quits: koderok (Thunderbir@2FB625D.8F09316C.85BF2EFC.IP) (Ping timeout)
[10:58:31] <tfogal> the whole of "&mut c_int" (and in general, "operator(potentially mut) type"?) can be used on an rvalue?
[10:59:02] <tfogal> hrm, no, doesn't parse
[10:59:04] <benh> if you have a c_int and take a &mut c_int that can turn into a *mut c_int
[10:59:13] <benh> with an 'as' cast if necessary
[10:59:23] <tfogal> ahh as might be the key
[10:59:25] * tfogal tries
[10:59:56] *** Joins: Earnestly (earnest@moz-2C691159.dyn.plus.net)
[11:00:46] <tfogal> not quite; "as *c_int" complains of differences in mutability, but for some reason "as *mut c_int" thinks the type is &i32 and again complains of mutability differences
[11:01:13] <benh> c_int is a synonym for i32 (probably)
[11:01:20] <tfogal> rusti: let mut s = 0 as c_int; waitpid(0, &s as *c_int, 0);
[11:01:23] <benh> so as *mut c_int ought to work
[11:01:28] <cmr> well c_int is just an alias to the platform abi's `int` size in C
[11:01:44] <tfogal> err, sure, i get that; the i32 isn't the confusing part
[11:01:52] <tfogal> rusti's dead?
[11:02:01] <cmr> yes, rusti runs on strcat's laptop
[11:02:35] <TeXitoi> cmr: read(start as *T); // run the destructor on the pointer
[11:02:39] <tfogal> ahh
[11:02:42] <TeXitoi> quite clean
[11:02:45] <benh> if you use & on a c_int you always get &c_int, never &mut c_int
[11:02:53] <TeXitoi> (from TypedArena)
[11:02:56] <benh> you have to say &mut myvariablename
[11:02:59] <cmr> TeXitoi: Arena, not TypedArena
[11:03:02] <tfogal> benh: aaaaah i knew that
[11:03:05] * tfogal facepalms
[11:03:08] <tfogal> thanks.
[11:03:11] <cmr> TeXitoi: that will still move it into a stack local and run the destructor there.
[11:03:15] <benh> I get that wrong every time too :(
[11:04:03] <TeXitoi> cmr: so TypedArena can be improved
[11:04:12] <TeXitoi> in term of perfs
[11:04:31] <TeXitoi> That will help shootout-binarytree ;)
[11:04:33] *** Joins: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP)
[11:04:47] <cmr> TeXitoi: it shouldn't matter in practice I don't think, and llvm is usually smart
[11:04:55] <benh> I kinda expect that it optimizes to the same thing and drop(ptr.read(...)) is good enough
[11:05:08] <cmr> does profiling that benchmark show that the slowness is copying onto the stack to drop?
[11:05:15] <benh> and regular arena only has to do the tydesc thing because it doesn't statically have type information for all its memory
[11:06:40] <benh> can't we do something like fn destroy<T>(p: *mut T) { get_tydesc::<T>().drop_glue(p as *i8); }
[11:06:43] <TeXitoi> cmr: ((*tydesc).drop_glue)(buf.offset(start as int) as *i8);
[11:06:45] <benh> and maybe put that into std::ptr?
[11:06:49] <TeXitoi> not so bad
[11:07:33] <cmr> benh: well ideally it'd take a `&mut T`, to take advantage of aliasing guarantees.
[11:07:49] <cmr> benh: as long as it's marked unsafe it shouldn't matter
[11:08:14] <TeXitoi> cmr: Mmm, I don't think, and the tree is not Drop, so no deleter ;)
[11:08:33] <TeXitoi> so it will just change nothing
[11:08:47] <benh> I figured & would be bad because it's so easy to get & from stuff that is still going to be destroyed normally, so it might get dropped twice
[11:09:02] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[11:09:04] <huon> tfogal: oh, so you're creating the CString(s) inside the loop but need access to the pointer(s) outside it?
[11:09:36] <huon> tfogal: can you "return"/store the CStrings and then use the (very cheap) .with_ref operation when you do need a *c_char?
[11:09:53] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[11:10:04] <eddyb> uhm, if I may...
[11:10:13] <eddyb> nobody should touch tydesc
[11:10:25] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[11:10:27] <benh> not even arena?
[11:10:32] <eddyb> either expose an intrinsic for drop glue (we may have that already)
[11:10:49] <eddyb> or get the first pointer in the vtable of an arbitrary ~Trait
[11:11:15] <eddyb> (no allocation required, just transmute it from 0)
[11:11:23] <cmr> eugh depending on vtable layout is even worse.
[11:11:32] <benh> well, tydesc lives in std::intrinsic and has a drop_glue field so clearly there's already an intrinsic for drop glue ;)
[11:11:36] <eddyb> then go the intrinsic way
[11:11:38] <cmr> at least tydesc is a stable, language-specified interface.
[11:11:45] <eddyb> it's not stable
[11:11:47] <eddyb> benh: tydesc is marked for death
[11:11:50] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[11:12:00] <eddyb> oh. "reaping" is the word I wanted to use :(
[11:12:05] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[11:12:20] <eddyb> benh: it will die with TyVisitor
[11:12:32] <cmr> TyVisitor isn't dying anytime soon.
[11:12:35] <benh> cmr: well, we could put the weird function that depends on vtable layout into libstd and then it's the problem of whoever changes vtable layout because it's then also a stable interface
[11:12:37] <eddyb> Rust doesn't need RTTI
[11:12:38] <cmr> If at all.
[11:12:55] <cmr> It's useful, whether we need it or not, and it's not a lot of code.
[11:13:26] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[11:13:29] <huon> eddyb: "move map" is just `for x in y.mut_iter() { /* unsafety */ }`
[11:13:33] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[11:13:37] <cmr> just mark reflection-using stuff #[unstable] and be done with it, I say.
[11:13:51] <eddyb> huon: well, that's what *I* did, but I don't like having unsafety myself
[11:13:54] <eddyb> cmr: >_>
[11:14:04] <huon> eddyb: also, your implementation is not failure safe
[11:14:21] <eddyb> oh, right, that's why I wanted to use mem::init() *sigh*
[11:14:23] <huon> it would be slightly better with ptr::read_and_zero...
[11:14:23] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Client exited)
[11:14:30] <eddyb> oh, that's a thing?
[11:14:30] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[11:14:33] * eddyb replaces
[11:14:39] <huon> but that will be bad when we stop zeroing
[11:16:38] <Tobba> I hate borrowck sometimes
[11:16:45] <cmr> it hates you too, don't worry
[11:16:48] <Tobba> "its safe let my code through already"
[11:16:57] <Tobba> -- me every time it gets near match statements
[11:17:15] <huon> borrowck is the evil overload
[11:17:18] *** Joins: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net)
[11:17:19] <eddyb> "borrow scopes shouldn't always be lexical"
[11:17:32] <eddyb> I'm going to repeat that until I can remember the issue #
[11:17:33] <cmr> (match is an expression)
[11:17:43] <cmr> 6393
[11:17:44] *** Quits: tgkokk (user@moz-BF0AF9D2.home.otenet.gr) (Client exited)
[11:17:50] <eddyb> cmr: >_>
[11:18:16] <cmr> there's also 5121 which, thank god, is closed now.
[11:18:23] <cmr> that was the bane of my existence for a long, long time.
[11:18:31] <huon> you don't like ICE?
[11:18:37] <eddyb> (baby)
[11:18:46] <huon> cmr: I thought you like winter?
[11:19:01] <cmr> I love winter, but my compiler shouldn't.
[11:19:01] <Tobba> also the borrow for the calls being done BEFORE the args
[11:19:09] <Tobba> that is basicaly the worst
[11:19:19] <eddyb> Tobba: for methods?
[11:19:27] <Tobba> "hey you dont like making single use variables everywhere?"
[11:19:28] <cmr> Tobba: yeah it should check to make sure that the args don't actually return something whose lifetime overlaps.
[11:19:29] <Tobba> "well fuck you"
[11:19:48] <eddyb> Tobba: I don't think there's a nice way to fix it
[11:19:56] <Tobba> a.somethingwithmutself(a.anything())
[11:19:57] <eddyb> before we start using a CFG everywhere, that is
[11:19:58] *** Joins: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de)
[11:19:59] <Tobba> doesnt work
[11:20:05] <Tobba> worst issue ever
[11:20:11] <huon> barely
[11:20:16] <huon> the fix is trivial ;P
[11:20:29] <eddyb> then we can just evaluate the receiver's borrow *after* the arguments
[11:20:36] <Tobba> pretty much
[11:20:48] <eddyb> imagine deref not being a hack in the method map
[11:20:51] <cmr> no, the worst is when rustc would ice whenever you had a syntax error it didn't deem worthy for error reporting.
[11:20:56] * eddyb whips pnkfelix
[11:20:58] <Tobba> hah
[11:21:06] <Tobba> also sometimes it doesnt skip comments
[11:21:07] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:21:11] <Tobba> I cant remember when but it involved matches iirc
[11:21:14] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[11:21:20] <huon> wat?
[11:21:26] <cmr> "doesn't skip comments" is nothing I've ever experienced.
[11:21:31] <Tobba> it was something like ref mut /*something*/a and it would complain about finding a comment instead of an ident
[11:21:37] <eddyb> haha
[11:21:42] <eddyb> Tobba: was it /**?
[11:21:43] <huon> comments are removed at the lexing level?
[11:21:48] <Tobba> eddyb: I think so
[11:21:48] <eddyb> Tobba: since that's an attribute :P
[11:21:53] <Tobba> hahahahahah
[11:21:57] <Tobba> thats pretty rude
[11:21:59] <eddyb> #[doc="something"]
[11:22:05] <Tobba> yep
[11:22:15] <Tobba> I think I had the * <something> part of something commented out
[11:22:27] <eddyb> put a space
[11:22:31] <Tobba> yeah uh
[11:22:39] <Tobba> I should probably file an issue for that or something
[11:22:42] <Tobba> papercut
[11:22:57] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:23:15] <eddyb> can possibly ignore doc comments in places where attributes are not expected
[11:23:29] *** Joins: lysgaard (lysgaard@D1D068EC.A55114BD.5B998C92.IP)
[11:23:42] <Tobba> and how you cant call closures that are a member on something
[11:23:48] <Tobba> without wrapping it in ()'s
[11:23:52] <Tobba> but I think that already has an issue
[11:23:54] <benh> I think that's good
[11:23:55] <benh> :(
[11:24:04] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[11:24:06] <benh> Makes it clear whether something is a method call or not...
[11:24:14] <eddyb> well...
[11:24:28] * huon thinks it's pretty good
[11:24:28] <eddyb> benh: you can easily know when a method call fails
[11:24:36] <eddyb> benh: s/call/lookup
[11:24:48] <huon> eddyb: this is for humans looking at it
[11:25:14] <eddyb> benh: I used that to fallback from DerefMut to Deref. so it shouldn't be that hard to switch to field access + call on lookup failure
[11:25:26] <Tobba> argh
[11:25:29] <benh> Yeah, I meant for human onlookers
[11:25:31] <eddyb> benh: but, again, representing it would be another hack without CFG
[11:25:44] <eddyb> maybe I meant to ping Tobba there :P
[11:25:44] <Tobba> I dont even know how to solve this
[11:25:45] <benh> I don't personally do method lookup every time I visually process a new line
[11:25:46] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Quit: Leaving)
[11:25:51] <benh> ok ;)
[11:26:21] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[11:26:23] <Tobba> I need to borrow something out of self.resources temporarily to get some matches out
[11:26:38] <Tobba> but that borrows the *whole struct* and then I cant touch anything at all
[11:26:46] <eddyb> Tobba: destructuring patterns
[11:26:48] <Tobba> I guess I can clone it but thats awful
[11:27:17] *** Quits: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net) (Quit: jkingyens)
[11:27:29] <cmr> you can destructure self.
[11:27:37] <Tobba> eh
[11:27:46] <Tobba> the only way to solve this is more of matches matching matches to unwrap the results
[11:27:51] <Tobba> I think
[11:27:57] *** Quits: Siosm (quassel@moz-9911B053.fr) (Ping timeout)
[11:27:58] *** Quits: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt) (Quit: Konversation terminated!)
[11:28:05] *** Joins: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt)
[11:28:06] <Tobba> except I cant even do that because the inner ones need to borrow self mutably but the state I'm matching cant be cloned
[11:28:07] <Tobba> aaaaaaa
[11:29:19] *** Quits: lht (lht@75877440.DFB0288A.7BA1798C.IP) (Ping timeout)
[11:29:41] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[11:29:51] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[11:29:53] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[11:30:04] <lysgaard> After seeing the post on HKTs in reddit I got really excited. Knowing how much of a success they are in Haskell I would love to see them in Rust too. What is the general stance on them from the people that actually develop Rust?
[11:30:14] *** Joins: mye (mye@moz-77F95923.dip0.t-ipconnect.de)
[11:30:29] <cmr> lysgaard: "we are probably going to need this, but not before 1.0"
[11:31:03] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:31:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[11:31:15] <huon> (i.e. they aren't considered to block 1.0... yet.)
[11:31:41] <eibwen> HKTs?
[11:31:52] *** Quits: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt) (Quit: Konversation terminated!)
[11:31:53] <cmr> if we decide we want them I think it's going to have to end up blocking 1.0
[11:31:56] *** Joins: mhl (mhl@moz-29483F85.merinet.pl)
[11:31:59] *** Joins: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt)
[11:32:01] <cmr> because of the effect they would have on the stdlib
[11:32:17] <huon> I have a feeling we'll really want them for allocators
[11:32:18] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[11:32:19] <cmr> especially import types like Option and Iterator that we're not going to want to release with being marked #[stable]
[11:32:20] <cajbir> where is this post?
[11:32:21] *** Quits: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP) (Ping timeout)
[11:32:31] <huon> if we go with something like niko's sketch
[11:32:37] *** Quits: mhl (mhl@moz-29483F85.merinet.pl) (Connection reset by peer)
[11:32:39] <cmr> http://www.reddit.com/r/rust/comments/2212j2/higherkinded_polymorphism/
[11:32:52] <cajbir> thanks
[11:32:52] *** Quits: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt) (Connection reset by peer)
[11:32:57] <huon> or we'll end up with leeking implementation details everywhere, and a generally unusable allocator protocol
[11:33:00] *** Joins: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt)
[11:33:00] <lysgaard> cmr: that sounds incredible. Such a nice abstraction in a systems language :-) I would think they would have a huge impact on how libraries apis are designed though
[11:33:07] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Quit: leaving)
[11:33:13] <cmr> s/import/important/
[11:33:13] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[11:33:14] <cmr> lysgaard: yes.
[11:33:17] <cmr> I agree
[11:33:20] * huon puts vegetables in his stdlib
[11:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[11:33:25] <huon> *leaking
[11:33:34] *** Joins: Siosm (quassel@moz-9911B053.fr)
[11:33:39] *** Joins: matematikaadit (Mibbit@2077400.14BBD901.8B274F0B.IP)
[11:33:44] *** Quits: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de) (Quit: Leaving.)
[11:34:50] <cmr> I'd be comfortable with releasing 1.0 without them, but not if we're going to add them in later.
[11:34:53] <cmr> and I want them :p
[11:35:15] *** Quits: Siosm (quassel@moz-9911B053.fr) (Ping timeout)
[11:36:03] <huon> cmr: we can just release 2.0 a month later :P
[11:36:17] <huon> put a programming language on a rapid release cycle
[11:36:26] <huon> perfect way to encourage adoption
[11:36:31] <huon> :P
[11:36:36] <matematikaadit> um... what does "the rust programming language does not have a sense of language" mean?
[11:36:39] <lysgaard> I am just a numerics guy but seeing what a beautiful language rust is going towards really excites me. Finally we can drop FORTRAN, C, C++
[11:36:44] *** Joins: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com)
[11:37:00] <matematikaadit> *humor
[11:37:15] *** Joins: Siosm (quassel@moz-9911B053.fr)
[11:37:52] <cmr> matematikaadit: it means bstrie and/or huon are being silly and ruining our guise of profesionalism
[11:38:01] <Ms2ger|sad> Which guise
[11:38:05] * huon is blameless
[11:38:11] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[11:38:12] * huon is highly professional
[11:38:26] <Ms2ger|sad> Ha
[11:38:56] <Ms2ger|sad> instantiating a type parameter with an incompatible type `~ErrorCallback<no-bounds>`, which does not fulfill `'static`
[11:38:57] <Ms2ger|sad> Wat
[11:39:08] <huon> Ms2ger|sad: sounds like trait objects
[11:39:08] <cmr> Ms2ger|sad: you need ~ErrorCallbacks:'static
[11:39:15] <cmr> the default bound used to be :Send
[11:39:18] <cmr> which implies 'static
[11:39:23] <huon> Ms2ger|sad: are you doing another upgrade already?
[11:39:26] <Ms2ger|sad> Yes
[11:39:39] <Ms2ger|sad> I'm insane, I know ;)
[11:39:46] * huon knows too, now
[11:40:00] <cmr> gotta rack up them badges
[11:40:02] <huon> this one will be super easy, right? :P
[11:40:03] <lysgaard> cmr: Do you believe that it is possible to implement them withouts adding runtime overhead?
[11:40:15] <Ms2ger|sad> huon, it's two weeks already...
[11:40:31] *** Joins: osa1 (omer@D3E8505B.EEACF6A9.17913DC0.IP)
[11:40:32] <cmr> lysgaard: yes.
[11:40:37] <Ms2ger|sad> I really just want the pub/priv change in
[11:40:38] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Quit: leaving)
[11:40:40] <huon> Ms2ger|sad: 2 weeks? that's only 160 PRs or so
[11:40:44] <cmr> lysgaard: though it's probably going to be a lot of work.
[11:40:44] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[11:40:47] <huon> barely anything! :P
[11:40:48] *** Quits: jackneill (jackneill@moz-B2E450A5.pool.digikabel.hu) (Ping timeout)
[11:40:52] <cmr> lysgaard: and I would like a formal model of the type system before adding them
[11:41:12] *** Joins: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP)
[11:41:15] <huon> lysgaard: theoretically they'd all be monomorphised at compile time, so no runtime overhead
[11:41:47] * huon isn't 100% sure if monomorphising HKTs is possible in general
[11:41:50] <lysgaard> cmr: cool, that sounds ideal
[11:42:42] *** Quits: lpy (lpy@1AF10827.F09091A8.1348A864.IP) (Ping timeout)
[11:43:01] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[11:43:19] *** Joins: lpy (lpy@1AF10827.F09091A8.1348A864.IP)
[11:44:15] <lysgaard> cmr: I wish I could help out some way getting HKTs to happen for Rust
[11:44:32] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Quit: leaving)
[11:44:47] *** Quits: osa1 (omer@D3E8505B.EEACF6A9.17913DC0.IP) (Quit: Konversation terminated!)
[11:44:53] <cmr> lysgaard: you could talk to ecr and see if they need help with the formal model ;p
[11:45:06] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[11:45:08] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[11:45:19] *** Joins: osa1 (omer@D3E8505B.EEACF6A9.17913DC0.IP)
[11:45:34] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[11:46:01] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[11:46:04] <Ms2ger|sad> r? https://github.com/mozilla/rust/pull/13339
[11:46:18] <cmr> Ms2ger|sad: we have #rust-internals for begging for reviews :p
[11:46:59] <Ms2ger|sad> I don't have screen real estate for another channel
[11:47:01] <lysgaard> cmr: is the model something that is considered an important feature for 1.0 or do you just see it as a nice thing to have?
[11:47:08] <Ms2ger|sad> Want to forward it there? :)
[11:47:10] <cmr> lysgaard: nice-to-have
[11:47:16] <cmr> Ms2ger|sad: I r+'d it already
[11:47:25] <Ms2ger|sad> Ta
[11:47:41] <cmr> actually
[11:47:41] *** Parts: matematikaadit (Mibbit@2077400.14BBD901.8B274F0B.IP) ()
[11:47:45] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[11:47:53] <cmr> "Type system proof" is on the 1.0 spreadsheet as blocking 10
[11:47:56] <cmr> *1.0
[11:48:02] <benh> if Vec is better than ~[T], and StrBuf is better than ~str, for some value of better, is there really enough justification for 'str' to exist anymore?
[11:48:27] <Ms2ger|sad> Blocking 10 seems fine ;)
[11:48:27] <benh> &str is pretty nice i guess, but...
[11:48:40] *** Joins: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP)
[11:48:46] <Ms2ger|sad> http://www.reddit.com/r/rust/comments/2213vw/reminder_t_is_not_going_away/
[11:48:58] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[11:49:27] <benh> yeah but strcat is arguing that it shouldn't be used
[11:49:39] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:49:48] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[11:50:00] *** Quits: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP) (Quit: qwerty_nor)
[11:50:06] <Ms2ger|sad> strcat argues a lot of things :)
[11:50:19] *** Joins: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de)
[11:50:26] <lysgaard> cmr: cool I have to say I am impressed by the level of detail Rust is developed.
[11:50:36] *** Joins: jackneill (jackneill@moz-B2E450A5.pool.digikabel.hu)
[11:50:37] *** Quits: osa1 (omer@D3E8505B.EEACF6A9.17913DC0.IP) (Ping timeout)
[11:50:41] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[11:50:57] *** Quits: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com) (Client exited)
[11:51:26] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[11:51:35] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Client exited)
[11:53:10] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[11:53:11] <huon> Ms2ger|sad: cmr has wildly ignored protocol, and we're not going to have to reject that PR.
[11:53:19] <huon> s/not//
[11:53:20] *** Joins: osa1 (omer@D3E8505B.EEACF6A9.17913DC0.IP)
[11:53:34] * huon fail!()
[11:53:42] <Ms2ger|sad> assert!(huon)
[11:53:52] <Ms2ger|sad> error: mismatched types: expected `uint` but found `int` (expected uint but found int)
[11:53:53] <Ms2ger|sad> Woo
[11:54:07] *** Joins: Sorella (queen@BD3C138B.B46B7936.54BCAB54.IP)
[11:54:23] <Ms2ger|sad>             let mid : int = (((low as uint) + (high as uint)) >> 1) as int;
[11:54:24] <Ms2ger|sad>             let midv = &self[mid];
[11:54:38] <huon> haha, why
[11:54:56] <eddyb> lol, "as int"
[11:54:59] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[11:55:01] <eddyb> when it's already the right type
[11:55:29] *** Quits: lysgaard (lysgaard@D1D068EC.A55114BD.5B998C92.IP) (Ping timeout)
[11:55:41] <eibwen> can I somehow make a field mutable, like in C++?
[11:55:58] *** Joins: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP)
[11:55:59] <eibwen> so I can, say, cache a hash, even in a &self method?
[11:56:02] <huon> eibwen: not really
[11:56:07] <eddyb> eibwen: Cell
[11:56:09] <huon> well, actually, that's a lie
[11:56:11] <huon> ^
[11:56:16] <cmr> (or RefCell)
[11:56:18] <huon> (or RefCell, for non-Copy types)
[11:56:21] <eddyb> I think we call that "inner mutability"
[11:56:29] <cmr> interior, I think?
[11:56:32] <huon> (it's not a language level thing though, is what I was trying to say.)
[11:56:34] <cmr> one of those synonyms.
[11:56:37] <Ms2ger|sad> http://googleresearch.blogspot.be/2006/06/extra-extra-read-all-about-it-nearly.html
[11:56:51] <eddyb> cmr: erm, right, interior
[11:57:04] * eddyb always mixes up words
[11:57:40] <eibwen> Cell makes my type unshareable
[11:57:53] <huon> yes
[11:57:55] <cmr> "While the first binary search was published in 1946, the first binary search that works correctly for all values of n did not appear until 1962."
[11:57:57] <cmr> that's beautiful
[11:58:30] <cmr> eibwen: you'll need to put it behind a Mutex or similar type for it to retain Share
[11:58:37] * huon wonders if Rust's are broken
[11:58:41] <cmr> eibwen: otherwise you have unsynchronized mutable access,  which is a data race.
[11:58:57] <eibwen> are Atomics shareable?
[11:59:15] <eddyb> sure
[11:59:48] <eibwen> so I could use an atomic int that I modify even in &self methods
[11:59:56] <eddyb> yeah
[11:59:56] <eibwen> that'd be safe? (in unsafe code)
[11:59:59] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[12:00:13] <Ms2ger|sad> Ah, parallelism
[12:00:16] <eddyb> AtomicUint is an atomic Cell<uint>
[12:00:21] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[12:00:26] *** Joins: japaric (japaric@B39CB389.EFCA05B1.5C7588CA.IP)
[12:00:26] *** Quits: japaric_ (japaric@AD8E3BA8.D2FA42B.95AFB88D.IP) (Ping timeout)
[12:00:33] <eddyb> (with slightly more operations because, well, atomics :P)
[12:00:36] <huon> (afaict, our binary search is safe (and our merge_sort doesn't possibly do dangerous things with integer addition).)
[12:00:38] <Ms2ger|sad> /servo/src/components/util/util.rs:10:1: 10:19 warning: /servo/src/components/msg/msg.rs:6:1: 6:23 this inner attribute syntax is deprecated. The new syntax is `#![foo]`, with a bang and no semicolon.
[12:02:20] *** Quits: dranov (dranov@B72D9B7B.464AB0AD.FCAAE698.IP) (Ping timeout)
[12:02:34] <TeXitoi> is there a way to launch stage2 without passing stage0 and stage1 ?
[12:03:20] <cmr> not particularly.
[12:03:25] <cmr> usually you can just use stage1, though
[12:03:29] *** Joins: dranov (dranov@B72D9B7B.464AB0AD.FCAAE698.IP)
[12:03:30] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Quit: leaving)
[12:03:36] <eibwen> why are AtomicUints non-copyable?
[12:03:58] <TeXitoi> because else I have a 2h compile time before seeing that it do not work, and I have to recompile everything because I modify libstd
[12:04:03] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[12:04:14] <Ms2ger|sad> How do I write an argument of type proc():Send?
[12:04:16] <TeXitoi> I must wait stage2 for the cross compile thing
[12:04:22] <huon> Ms2ger|sad: proc:Send()
[12:04:35] <huon> or wait for the patch that changes it to proc():Send to land
[12:04:45] <Ms2ger|sad> Not doing that
[12:05:02] <huon> eibwen: because it's considered that one rarely wants to copy them, but rather share them
[12:05:19] <huon> TeXitoi: `make check-stage2-std NO_REBUILD=1` will build the tests
[12:05:26] <huon> without doing the rest of the bootstrap
[12:05:27] *** Quits: asmyers (quassel@moz-71754EDC.hsd1.md.comcast.net) (Ping timeout)
[12:05:46] <cmr> huon: TeXitoi is cross-compiling.
[12:05:49] <huon> but if you have a recent enough compiler, you can just compile libstd directly (i.e. `rustc lib,rs`)
[12:05:53] <huon> oh, erm
[12:06:06] <cmr> TeXitoi: this is such a rare use-case that I'm afraid the build system was never taught to be smarter about it :(
[12:06:08] <huon> touch the relevant build-artifacts
[12:06:19] <huon> to trick it into thinking it doesn't need to rebuild
[12:07:08] <huon> I think eddyb knows which ones are relevant
[12:07:47] <eddyb> touching? never worked flawlessly for me
[12:08:10] *** Joins: lysgaard (lysgaard@D1D068EC.A55114BD.5B998C92.IP)
[12:08:10] <huon> oh :(
[12:08:16] *** flaper87|afk is now known as flaper87
[12:08:40] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[12:09:10] <Ms2ger|sad> unresolved import: there is no `MutexArc` in `sync`
[12:09:13] <Ms2ger|sad> Dammit
[12:09:28] <huon> Arc<Mutex<T>>
[12:09:38] <geal> anyone knows why rust-ci is down?
[12:10:03] <cmr> hansjorg: ^
[12:10:10] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[12:10:46] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:11:04] *** Quits: lpy (lpy@1AF10827.F09091A8.1348A864.IP) (Client exited)
[12:11:19] <TeXitoi> cmr: thanks
[12:11:34] *** Joins: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP)
[12:11:45] <Ms2ger|sad> wait_map: UrlMap<Arc<Mutex<~[Sender<ImageResponseMsg>]>>>,
[12:11:51] <cmr> beautiful
[12:11:54] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[12:11:56] * cmr sheds tears of abstraction
[12:12:28] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[12:12:39] <huon> UrlMap<Arc<Mutex<Vec<Sender<ImageResponseMsg>>>>>
[12:12:41] <huon> ;P
[12:13:51] <Ms2ger|sad> error: type `sync::arc::Arc<sync::lock::Mutex<local_image_cache::LocalImageCache>>` does not implement any method in scope named `access`
[12:14:48] <TeXitoi> Ms2ger|sad: just deref I think
[12:15:00] <eibwen> >>>>> :)
[12:16:07] <huon> Ms2ger|sad: .lock()
[12:16:12] <huon> and then do things with the return value
[12:16:14] *** Joins: Ferreus (ferreus@moz-AFFBCA6A.lsn.wtnet.de)
[12:16:18] <huon> no need for an unlock
[12:16:24] *** Joins: oberstet (quassel@moz-C49863B7.dynamic.mnet-online.de)
[12:16:26] <Ms2ger|sad> I don't wanna...
[12:16:39] <Ms2ger|sad>         holder.local_image_cache.access(|local_image_cache| {
[12:16:39] <Ms2ger|sad>             local_image_cache.prefetch(&holder.url);
[12:16:40] <Ms2ger|sad>             local_image_cache.decode(&holder.url);
[12:16:40] <Ms2ger|sad>         });
[12:16:47] <huon> it's what the doctor prescribed
[12:17:05] <benh> rust is making ms2ger sad :(
[12:17:24] <Ms2ger|sad> huon, please rewrite :)
[12:17:33] <cmr> let lic = holder.local_image_cache.lock(); lic.prefetch(&holder.url); lic.decode(&holder.url);
[12:17:37] <huon> { let lic = holder.local_image_cache.lock(); lic.prefetch(&..)
[12:17:39] <doomlord_> is there a standard debug macro that shows a value and code location   , equiv to print!("{}:{}: ",file!(),line!()); $(print!("{}={}",stringify!($arg)=$arg);),*; println!("") ...   just show values without writing a message.. the sort of thing you can quickly pepper code with around a crash etc.  i was usually calling this 'dump!() or 'trace!()' .. trace being what i mentally associate with showing a code location
[12:17:39] <huon> hah
[12:17:55] <Ms2ger|sad> Ta
[12:18:06] <huon> doomlord_: nope, there's not one
[12:18:46] *** Joins: DasIch (dasich@moz-5EDA591.de)
[12:18:59] *** Quits: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:19:18] <doomlord_> is it popular or one of those 'everyone does it a bit differently' ... i like having a simple debug macro where i dont need to write a format string
[12:19:25] <Ms2ger|sad> error: aborting due to 373 previous errors
[12:19:36] <huon> there was a suggestion of a debug crate with a macro like that in it
[12:19:37] <huon> yes
[12:19:45] <doomlord_> useful to just pepper code around a crash, or to check what the flow actually is, etc
[12:19:46] <huon> Ms2ger|sad: be thankful it's not 374
[12:19:57] <cmr> or 3730
[12:20:00] <Ms2ger|sad> Yay, down to 369
[12:20:19] *** Quits: Earnestly (earnest@moz-2C691159.dyn.plus.net) (Ping timeout)
[12:20:28] *** Joins: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de)
[12:20:43] <cmr> upgrading servo every weekend might be theraputic.
[12:20:48] * cmr considers trying it
[12:21:00] <huon> servo could just use the nightly
[12:21:07] <cmr> Ohhh that's an idea
[12:21:07] <huon> spend every day upgrading \o/
[12:21:10] <cmr> instead of building their own
[12:21:14] <Ms2ger|sad> Not really
[12:21:19] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[12:21:30] <cmr> Ms2ger|sad: is that to the nightly, or to the being theraputic? :P
[12:21:32] <Ms2ger|sad> Every time we upgrade, we need at least one upstream fix
[12:21:47] <huon> more upgrades == more upstream fixes
[12:21:50] <huon> win/win :P
[12:22:18] <cmr> I wonder if servo could utilize hkt for anything particularly interesting
[12:24:42] *** Quits: lysgaard (lysgaard@D1D068EC.A55114BD.5B998C92.IP) (Ping timeout)
[12:24:48] <Ms2ger|sad> You know what would be nice?
[12:24:55] <Ms2ger|sad> Rather than error: field `declarations` is private
[12:25:02] <Ms2ger|sad> Tell me error: field `declarations` of `...` is private
[12:25:55] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[12:26:00] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[12:26:05] *** Joins: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP)
[12:26:11] *** Quits: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net) (Ping timeout)
[12:26:37] *** Quits: jviereck (Adium@moz-4916F456.dip0.t-ipconnect.de) (Quit: Leaving.)
[12:26:49] <eddyb> Ms2ger|sad: should be an easy fix. submit papercut issue ;)
[12:27:06] <Ms2ger|sad> Papercut?
[12:27:10] *** Joins: tgkokk (user@moz-BF0AF9D2.home.otenet.gr)
[12:27:19] <eddyb> hmm, no
[12:27:22] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[12:27:23] <eddyb> more like "utility"
[12:27:27] <Ms2ger|sad> More like a chainsaw
[12:27:27] * eddyb is bad with words
[12:27:40] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[12:28:22] <geal> I agree! "field X of Y is private" would make it a lot easier to fix automatically :)
[12:28:30] <eibwen> what is the calling convention for trait objects?
[12:28:45] *** Quits: dranov (dranov@B72D9B7B.464AB0AD.FCAAE698.IP) (Ping timeout)
[12:28:47] <eibwen> e.g. fn function(t: &Trait)
[12:29:09] <geal> fn<T: Trait> function(t: &T)
[12:29:25] <eddyb> geal: wrong syntax, different semantics :P
[12:29:31] *** Joins: dranov (dranov@B72D9B7B.464AB0AD.FCAAE698.IP)
[12:29:44] <eddyb> eibwen: &Trait is (ptr, vtable), but that's larger than one word, so it's sent with indirection
[12:30:04] <benh> "Field X of Y is private, edit source file to make public? (ynq)"
[12:30:24] <eddyb> eibwen: so fn function(t: *(*u8, *vtable))
[12:30:24] <Ms2ger|sad> https://github.com/mozilla/rust/issues/13341
[12:30:37] <Ms2ger|sad> There's now 1500 open issues
[12:30:37] <eibwen> eddyb: thanks
[12:30:40] <eibwen> eddyb: something as big as two words is already sent via indirection?
[12:30:45] <eddyb> eibwen: yupp
[12:31:03] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[12:31:04] <eddyb> I kinda want to change that to see how it affects trait object/closure performance
[12:31:08] <geal> eddyb: oh, didn't know about that one
[12:31:10] <eddyb> but we can't do it just yet
[12:31:15] <eibwen> has anyone benchmarked this? 'two words' would sound like a sensible limit too
[12:31:19] <eddyb> geal: trait objects
[12:31:25] <Ms2ger|sad> How about three words?
[12:31:30] <eddyb> Ms2ger|sad: I think clang does that
[12:31:45] <eibwen> Ms2ger|sad: three words is one more than two :P
[12:32:03] <Ms2ger|sad> eibwen, thank you for that useful addition to the conversation
[12:32:30] <eddyb> 3 = 2 + 1; question: when is it wrong?
[12:32:45] <eibwen> depends on 3, 2, 1, + and =
[12:32:51] <benh> and ' '
[12:33:02] <eddyb> benh: space as an operator?
[12:33:05] * eddyb runs
[12:33:05] <benh> why not!
[12:33:18] <eibwen> rust definitely needs a space operator...
[12:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[12:33:31] <ChrisMorgan> Whoa, just think of the possibilities!
[12:33:32] <eddyb> (well... Haskell kinda uses space as the call operator :P)
[12:33:43] <Ms2ger|sad> 3 is not an lvalue
[12:33:53] <huon> http://www.stroustrup.com/whitespace98.pdf
[12:33:56] <eddyb> Ms2ger|sad: what is an lvalue?
[12:34:28] <eddyb> Ms2ger|sad: nom nom http://en.cppreference.com/w/cpp/language/value_category
[12:34:30] <benh> It's a value to the left side of an assignment operator, therefore that 3 is an lvalue by definition
[12:35:08] <Ms2ger|sad> If the = is an assignment operator
[12:35:50] <eddyb> **If**
[12:35:54] * huon prefers it when = is the division operator
[12:36:17] <eddyb> #pl-theory-circlejerk
[12:36:18] <benh> huon is the programmer that the operator overloading opponents have always warned us of
[12:36:27] <huon> eddyb: (a mathematical = is ==)
[12:36:32] <Ms2ger|sad> Not in JS
[12:36:40] <benh> anyway, the only proper division operator is a -
[12:36:41] <eibwen> there it's more like ===
[12:36:47] <benh> but really elongated and vertically centered between the operands
[12:37:06] <Ms2ger|sad> 
[12:37:18] <eddyb> ˙
[12:37:22] <Ms2ger|sad> 
[12:37:29] <eddyb> your screens are now dirty
[12:37:40] *** Joins: taylanub (taylanub@moz-E0F8BCDE.dip0.t-ipconnect.de)
[12:37:47] <huon> 1 divide_that_number_by_this_number 2
[12:37:49] <eibwen> Ms2ger|sad: is that an empty line?
[12:37:52] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Quit: leaving)
[12:37:59] *** Joins: q66 (q66@moz-AE27872E.range109-154.btcentralplus.com)
[12:38:01] <Ms2ger|sad> No, that's 
[12:38:03] <huon> eibwen: a (unicode) division sign
[12:38:07] <Ms2ger|sad> U+F7
[12:38:15] <eddyb> hįhí
[12:38:20] <benh> That's barely unicode, that's almost still ascii
[12:38:28] <huon> benh: high bit is set :P
[12:38:29] <eibwen> latin1!
[12:38:39] <huon> (also, ascii is still unicode)
[12:38:41] <eddyb> it's 7F backwards
[12:38:49] <eddyb> so IICSA
[12:38:54] <huon> bydde
[12:38:55] <Ms2ger|sad> Get out
[12:39:05] <eddyb> huon: eddby pls
[12:39:12] <benh> heh
[12:39:15] *** huon is now known as eddby
[12:39:24] <edwardw> LOL
[12:39:33] *** Ms2ger|sad is now known as ddeby
[12:39:38] <edwardw> someone can't spell his own name
[12:39:51] <eddby> who?
[12:39:55] *** flaper87 is now known as edbdy
[12:39:56] <eibwen> ęddyb
[12:40:14] *** edbdy is now known as edbyd
[12:40:24] <ddeby> So who is the real beddy?
[12:40:33] <eddyb> > grep 'eddby' ~/logs/freenode_\#minecraft.log | wc -l
[12:40:34] <eddby> I'm beddy
[12:40:34] <eddyb> 195
[12:40:38] <eddyb> just fyi
[12:40:58] <benh> That's not a very active minecrafter
[12:41:09] <eddyb> eibwen: lrn2zwsp
[12:41:09] <ddeby> So about that guise of professionalism...
[12:41:19] <myname> benh: it is, he doesn't have time to write
[12:41:26] *** Joins: benvie_ (bbenvie@5FD20F9A.53D07D95.EFF8B7BF.IP)
[12:41:27] <eibwen> lrn2what?
[12:41:32] <eddby> zwsp
[12:41:43] <eibwen> qyppə
[12:42:02] <eddyb> (zero-width space, for the lazies)
[12:42:15] <eddby> eddλb
[12:42:21] *** Quits: benvie (bbenvie@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[12:42:23] <eddyb> now I like that one :D
[12:42:40] <eddyb> benh: just people being silly and using "eddby"
[12:42:56] <myname> everything is better with a lambda
[12:43:04] <eddyb> <Ausmerica>  Typo? I've been calling eddby eddby for a little while now. eddby
[12:43:05] <ddeby> Oh dear, silly people on minecraft
[12:43:12] <ddeby> mλname, I agree
[12:43:31] <eddby> what do you call a young eigensheep?
[12:43:42] <benh> boo
[12:43:43] <edwardw> go make your own names, nerds
[12:43:44] <eddby> a lamb, duh
[12:43:57] <eddyb> <Ausmerica> It's when eddby's elitism gets the most of him and he feels the need to tell people that what you're doing is wrong.
[12:44:10] <ddeby> Sounds like eddby 
[12:44:12] <eddby> sounds like me
[12:44:14] <myname> ebbdy
[12:44:35] <eddyb> <Ausmerica> No, you're boring everyone, eddby.
[12:44:35] <eibwen> ėḋḋẏḃ
[12:44:40] <eddyb> okay, enough Ausmerica quotes
[12:44:43] * eddby is sorry
[12:44:53] <eddyb> eibwen: now I have to wipe my LCD :(
[12:44:54] * eddby promises to be more interesting
[12:44:58] <myname> bydde
[12:45:48] <ddeby> bydde your time, kiddo...
[12:47:41] <eibwen> for some reason, my irc client's colorign algorithm does not care about the order of the characters in the nicks
[12:47:51] <eibwen> so all the eddybs display in the same color
[12:47:59] <eddyb> haha
[12:48:04] <eddby> there's only one?
[12:48:11] <eddyb> eibwen: they kept their original colors in my client
[12:48:30] <eddyb> so huon is red, Ms2ger is light blue, etc.
[12:48:36] <eddby> who?
[12:48:48] <eddyb> ddeby: not |sed anymore?
[12:48:52] <eddyb> sad, even
[12:48:55] *** ddeby is now known as ddeby|sed
[12:49:02] *** eddby is now known as eddby|grep
[12:49:16] <edwardw> now I see that coming
[12:49:22] <benh> i wonder if there's an irssi script for truecolor user names
[12:49:33] *** Quits: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP) (Ping timeout)
[12:49:34] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[12:49:40] <eddyb> benh: you first need a truecolor console :P
[12:49:42] *** Joins: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca)
[12:49:48] <benh> eddyb: it's 2014, surely all of them...
[12:49:52] *** Joins: Earnestly (earnest@moz-2C691159.dyn.plus.net)
[12:49:53] <eddyb> (konsole has 24bit RGB)
[12:50:01] <eddyb> (but it's a custom thing)
[12:50:23] <eddyb> benh: well, someone saw me talking about this feature and opened feature requests everywhere :)
[12:50:57] <eddyb> so recent versions of other things could have it as well
[12:51:25] *** Quits: maxli (Adium@moz-F47DD19B.student.cs.uwaterloo.ca) (Ping timeout)
[12:52:05] <edwardw> rusti: "eddyb".iter().product()
[12:52:17] <edwardw> no rusti? duh
[12:52:34] <eddyb> product? sounds like fun
[12:52:39] *** Quits: q66 (q66@moz-AE27872E.range109-154.btcentralplus.com) (Ping timeout)
[12:53:39] *** Joins: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP)
[12:54:20] <johnsoft> what's the right way to write something like this?
[12:54:27] <johnsoft> fn map_to_iterators<T>(vectors: Vec<Vec<T>>) -> ~[~Iterator<T>] { return vectors.iter().map(|v| v.iter()).collect(); }
[12:54:33] <johnsoft> I can't get my head around what types I need
[12:55:01] <kuuranne> benh: irssi does not support even 256 colors unless you patch it with the recent patch
[12:55:13] <eddby|grep> johnsoft: fn map_to_interators(...) ... { vectors.move_iter().map(|v| ~v.move_iter() as ~Iterator<T>).collect() }
[12:55:23] *** eddby|grep is now known as huon
[12:55:26] *** Quits: osa1 (omer@D3E8505B.EEACF6A9.17913DC0.IP) (Ping timeout)
[12:55:28] <cmr> johnsoft: that smells like a flat_map to me
[12:55:32] <kimundi> johnsoft: But if possible, avoid ~Iterator trait object
[12:55:38] *** Quits: Earnestly (earnest@moz-2C691159.dyn.plus.net) (Quit: WeeChat 0.4.4-dev)
[12:55:45] <huon> johnsoft: (and, if possible, avoid ~[])
[12:56:33] <ddeby|sed> Avoid all the things
[12:56:41] <benh> :(
[12:56:46] <eibwen> sed s/~[]/Vec/g
[12:56:53] <ddeby|sed> You called?
[12:56:55] <eddyb> johnsoft: Vec<MoveIter<T>> if you really need to hold move iterators
[12:56:58] <eibwen> :)
[12:57:03] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[12:57:17] <huon> or MoveIter<...<MoveIter<T>>>
[12:57:23] <huon> to avoid the Vec alloc
[12:57:33] <huon> (not sure what ... should be off the top of my head)
[12:57:35] <johnsoft> eddyb- I can't use move iterators, I'm going to need to iterate the vectors more than once
[12:57:37] <kimundi> well a MoveIter is also doing avec alloc :P
[12:57:39] <ddeby|sed> <'a
[12:57:39] <eibwen> eddyb: what does the vtable look like and how are trait functions called?
[12:57:55] <eddyb> eibwen: a vtable is a static array of function pointers
[12:58:00] <huon> eibwen: &'static { destructor, method, method, ... }
[12:58:01] <eibwen> in the order declared?
[12:58:06] <johnsoft> What should the fn signature look like then?
[12:58:07] <eddyb> I think so
[12:58:08] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[12:58:22] <kimundi> johnsoft: Then use the type that iter() returns
[12:58:28] <ddeby|sed> error: instantiating a type parameter with an incompatible type `sync::lock::Mutex<local_image_cache::LocalImageCache>`, which does not fulfill `Share`
[12:58:31] <eddyb> johnsoft: Vec<vec::Items<'a, T>> then
[12:58:33] <ddeby|sed> local_image_cache: Arc<Mutex<LocalImageCache>>,
[12:58:36] <eibwen> and how are trait functions called?
[12:58:49] <eddyb> eibwen: first argument is a *u8
[12:58:55] <eibwen> *() please
[12:58:59] <eddyb> or that
[12:59:02] <ddeby|sed> *
[12:59:06] <johnsoft> thanks, I'll give that a try
[12:59:09] <eddyb> it doesn't really matter, as long as it's opaque
[12:59:13] <eibwen> so no special this magic as in c++?
[12:59:14] <eibwen> ok
[12:59:31] <johnsoft> though it'd be nice if Vec<Iterator<T>> was possible
[12:59:33] <eddyb> eibwen: "this"? well, self is the first argument pointer
[12:59:39] <johnsoft> will DST make that possible once it lands?
[12:59:43] <ddeby|sed> Anybody who knows about that Arc thing?
[12:59:48] <eddyb> eibwen: but there's no calling convention thing like thiscall on x86 windows
[12:59:50] <cmr> ddeby|sed: that's pretty mystical.
[12:59:55] <cmr> Mutex should always be Share
[12:59:56] <eibwen> yea, that was my question
[13:00:06] <eddyb> eibwen: i.e. the ecx that everyone playing with IDA knows about :P
[13:00:17] <eibwen> =)
[13:00:22] <eddyb> eibwen: ecx is confined to x86 windows C++ AFAIK
[13:00:34] <eibwen> oh, I thought it was a gcc thing too
[13:00:45] <eddyb> cmr: we didn't fix it yet
[13:00:46] <kimundi> johnsoft: Vec<Iterator> won't be possible even with DST. But the reason why you shoudn't use trait objects in general is that its going to be a thousand times slower for vector iterators 
[13:00:46] <cmr> ddeby|sed: it's possible that hasn't been implemented yet :\
[13:01:20] <kimundi> johnsoft: because trait objects make virtual calls, rather than using static dispatch.
[13:01:22] <eddyb> eibwen: on x64 you have like 4 registers to put arguments in first
[13:01:35] <ddeby|sed> error: cannot capture variable of type `proc(image_cache_task::ImageResponseMsg)`, which does not fulfill `Send`, in a bounded closure
[13:01:45] <ddeby|sed> note: this closure's environment must satisfy `Send`
[13:01:49] <huon> ddeby|sed: proc:Send(...)
[13:02:00] <johnsoft> kimundi- makes sense
[13:02:03] <eddyb> cmr: need opt-in to fix Mutex, I think
[13:02:04] *** Joins: Earnestly (earnest@moz-2C691159.dyn.plus.net)
[13:02:13] * ddeby|sed wonders where
[13:02:31] <huon> I think LocalImageCache is not Share
[13:02:32] <eddyb> something like impl<T: Send> Share for Mutex<T>
[13:02:46] <huon> eddyb: we don't have opt-in built-in bounds yet
[13:02:55] <huon> Mutex needs a #[force_always_share] or something
[13:02:56] <eddyb> huon: I didn't say we do :)
[13:03:07] <eddyb> pls no attributes when opt-in can fix it
[13:03:12] <huon> (it doesn't even need T: Send)
[13:03:16] <ddeby|sed> pub struct LocalImageCache { image_cache_task: ImageCacheTask, round_number: uint, on_image_available: Option<~ImageResponder:Send>, state_map: UrlMap<ImageState> }
[13:03:19] <eddyb> huon: yes it does
[13:03:19] <huon> eddyb: opt-in isn't quite powerful enough
[13:03:23] <huon> eddyb: nope
[13:03:52] <huon> eddyb: Mutex<nonsend> is not Send
[13:04:12] <huon> but its still perfectly valid
[13:04:17] <cmr> eddyb: opt in doesn't fix it... implementing the trait still verifies that its contents are what it says they are.
[13:04:19] <eddyb> some things are not meant to be accessed on a different thread than the one they were created in
[13:04:31] <eddyb> cmr: opt-in makes Unsafe always Share AFAIK
[13:04:41] <huon> eddyb: unsafe isn't the problem
[13:04:42] <cmr> eugh I hope it doesn't.
[13:04:47] <huon> (Unsafe is already Share, iirc)
[13:04:53] <eddyb> cmr: always everything, actually. so wrappers of Unsafe have to opt-in to the things they provide
[13:05:07] <eddyb> s/things/kinds
[13:05:17] <cmr> we can't have `impl<T: Share> Share for Mutex<T>` though
[13:05:20] <ddeby|sed> So
[13:05:22] <cmr> that'd defeat the entire purpose of Mutex
[13:05:26] <ddeby|sed> We removed MutexArc
[13:05:32] <eddyb> cmr: I said Send not Share (for the bound)
[13:05:32] <ddeby|sed> And there's no working replacement?
[13:05:49] <eddyb> ddeby|sed: the problem is the Share bound
[13:05:51] <huon> eddyb: being inside a mutex doesn't mean that it's automatically possible to pass it between threads (because the Mutex<T> object itself won't be Send)
[13:06:05] <eddyb> huon: access, not pass
[13:06:27] <eddyb> more to the point: how do you wrap a non-thread-safe C API?
[13:06:36] *** Joins: io2 (io2@moz-EE406A5.home.otenet.gr)
[13:06:41] <eddyb> if you don't opt in to Send nor Share, you should be safe, right?
[13:07:04] <eddyb> but then someone wraps one of your handles in a Mutex, and now they can do things with it from a different thread
[13:07:32] <huon> hm, true enough
[13:07:34] <eddyb> or, uhm, task-local references
[13:08:19] *** ddeby|sed is now known as Ms2ger|sad
[13:08:36] <eddyb> (I still don't know why he's sad)
[13:08:36] <Ms2ger|sad> Anyway, any chance for a better answer than "tough"? :)
[13:08:43] <eddyb> Ms2ger|sad: well...
[13:08:51] <eddyb> Ms2ger|sad: is there any chance of making that structure sendable?
[13:08:57] <eddyb> err, shareable
[13:09:00] <Ms2ger|sad> I dunno
[13:09:03] <huon> Ms2ger|sad: https://github.com/mozilla/rust/issues/13125
[13:09:11] <Ms2ger|sad> Why isn't it?
[13:09:11] <eibwen> what are the rules for &self vs &mut self if AtomicInts are allowed to modify itself on &self?
[13:09:18] <Ms2ger|sad> Definition above
[13:09:31] <eibwen> is it just that &mut self doesn't have to be threadsafe while &self has to?
[13:09:31] <eddyb> Ms2ger|sad: aaaaah it's easy :D:D
[13:09:44] <eddyb> Ms2ger|sad: add +Share to the Option with a trait object in it
[13:09:56] <huon> eibwen: can only mutate inside a &self via Unsafe
[13:10:03] <Ms2ger|sad> Lessee
[13:10:04] <huon> (and AtomicInts use Unsafe internally)
[13:10:13] <kimundi> eibwen: Same reason why RefCell uses &self: Both check mutable borrows manually
[13:10:28] <Ms2ger|sad> error: mismatched types: expected `std::option::Option<~local_image_cache::ImageResponder:Send+Share>` but found `std::option::Option<~local_image_cache::ImageResponder:Send>` (expected bounds `Send+Share` but found bounds `Send`)
[13:10:30] * Ms2ger|sad looks around
[13:10:31] <huon> kimundi: (except AtomicInts don't do borrows :P )
[13:10:42] <Ms2ger|sad> Ah, there
[13:10:47] <eibwen> so the difference is just that &self needs to ensure thread-safety for themselves?
[13:10:56] <huon> no
[13:10:57] <Ms2ger|sad> And back to the previous errors
[13:11:01] <huon> not quite
[13:11:16] <eddyb> &mut is about aliasability
[13:11:34] <huon> (they don't *have* to be thread-safe, but if they say they are, then yes, they must ensure the various rules about aliasing and threadsafety themselves)
[13:11:52] <eddyb> if you have an usable &mut T, there is no other usable pointer to access data from the pointer to the pointer + size_of::<T> bytes
[13:11:56] <eddyb> not even in another thread
[13:11:59] <Ms2ger|sad> pub struct ImageCacheTask {
[13:11:59] <Ms2ger|sad>     chan: Sender<Msg>,
[13:11:59] <Ms2ger|sad> }
[13:12:05] <Ms2ger|sad> It's not going to like that, is it?
[13:12:11] <kimundi> eibwen: Also, second reason is that &T means "aliasing", and &mut means "no aliasing", so any type that allows you &mut access from two differnt threads at the same time is automatically wrong.
[13:12:21] <eddyb> Ms2ger|sad: Sender is not Share, no
[13:12:21] *** edbyd is now known as flaper87
[13:12:33] <eddyb> Ms2ger|sad: at least AFAIK
[13:12:35] <eibwen> so taking a &mut of an AtomicInt breaks that promise?
[13:12:39] <huon> eddyb: not just those bytes... anything owned by the memory (although I guess you count going through those bytes to get to that memory as an access)
[13:12:40] <kimundi> eibwen: yes
[13:12:46] <Ms2ger|sad> So MutexArc was broken before, or what?
[13:12:47] <huon> eibwen: no
[13:12:48] <eddyb> huon: yeah
[13:12:56] *** flaper87 is now known as flaper87|afk
[13:12:56] <eibwen> yes no cancel?
[13:13:08] <kimundi> abort abort abort!
[13:13:08] <huon> eibwen: taking an &mut to the internals of an AtomicInt is bad
[13:13:18] <Tobba> why isnt f32 TotalOrd
[13:13:19] <huon> but a `&mut AtomicInt` created in safe code is not
[13:13:21] <Tobba> due to NaN?
[13:13:22] <eibwen> k
[13:13:27] <huon> Tobba: yes, and -0.0
[13:13:31] <Tobba> ughhhhhhhhhh
[13:13:34] <Tobba> this means you cant sort lists after it
[13:13:35] <kimundi> Tobba: NaN != NaN and 0 == -0
[13:13:39] <Tobba> yep
[13:13:40] <huon> Tobba: .sort_by
[13:13:44] <Tobba> it makes sense but its a TOTAL pita
[13:13:46] <eddyb> Tobba: or you can write a total ordering wrapper
[13:13:53] <Tobba> sort_by needs an Ordering wrapper yeah
[13:14:12] <huon> what is an Ordering wrapper?
[13:14:27] <eddyb> well, sort_by takes a closure AFAIK
[13:14:37] <eddyb> I was talking about a newtype that implements total ordering
[13:14:38] <huon> yes
[13:23:23] *** Joins: drawoc (drawoc@moz-BAC1D3AB.res-cmts.sesh.ptd.net)
[13:26:45] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[13:28:27] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[13:31:05] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[13:33:20] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[13:38:01] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[13:38:37] * Ms2ger|sad grumbles at to_owned_vec being removed
[13:40:08] <huon> ~[] is bad for your health
[13:40:53] <Ms2ger|sad> And [].map...
[13:41:27] <TeXitoi> Ms2ger|sad: .collect::<Vec<_>>()
[13:42:09] <Ms2ger|sad> If only
[13:42:13] <TeXitoi> Ms2ger|sad: [].iter().map()?
[13:42:20] <TeXitoi> why not?
[13:42:48] <Ms2ger|sad> arguments.iter().map(|a| a.to_json()).collect::<~[json::Json]>()
[13:43:09] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[13:43:41] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[13:46:04] <Tobba> ugh
[13:46:12] <Tobba> I'm borrowing something out of a TreeMap
[13:46:15] <Ms2ger|sad> https://github.com/mozilla-servo/rust-cssparser/commit/6ea862378455e58b37979b33a2490fcc4163fe0d sure doesn't feel like an improvement
[13:46:31] <Tobba> if the find() returns None I need to build a new item, insert it and then get a reference to what I just inserted
[13:46:40] <Tobba> turns out this is a GIGANTIC pain to get to pass borrowck
[13:46:46] <Ms2ger|sad> Sounds like one
[13:46:58] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[13:46:59] <Tobba> since even if the match returns None
[13:47:04] <Tobba> its still borrowed from the TreeMap
[13:47:06] *** Quits: japaric (japaric@B39CB389.EFCA05B1.5C7588CA.IP) (Ping timeout)
[13:47:08] <edwardw> Tobba: there's .find_or_insert_with
[13:47:14] <Tobba> oh
[13:47:15] <Tobba> thank, fuck
[13:47:25] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[13:47:40] <Ms2ger|sad> Come again?
[13:47:40] <huon> Tobba: maybe you should ask a question "is there a nice way to do *X*?" rather than just complaining it about it straight out
[13:47:44] <Tobba> ... thats for hash maps though
[13:47:55] <Tobba> huon: this is still pretty awful though
[13:47:59] <Tobba> and that only applies to hashmaps
[13:48:02] <edwardw> oh? lemme double check
[13:48:08] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Quit: Computer has gone to sleep.)
[13:48:20] <huon> oh, ok
[13:48:31] <Tobba> TreeMap is a pretty big bucket of awful, also borrowck is satan
[13:48:32] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[13:48:33] <huon> (you could still just ask the question)
[13:49:05] <huon> is there anything in Rust that is up to your standards?
[13:49:13] <Tobba> most of the language
[13:49:14] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[13:49:17] <Tobba> goddamn borrowck though
[13:49:19] *** Joins: japaric (japaric@2ECEA8F9.C4F72AE.F29ED47E.IP)
[13:49:21] <huon> except for the key bit that makes it interesting
[13:49:25] <Tobba> well yeah
[13:49:33] <huon> and the whole standard library
[13:50:13] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[13:50:26] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[13:50:27] *** Joins: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca)
[13:50:35] <Tobba> borrowck annoys me because its the #1 thing that manages to piss me off in the whole language, even if its what makes it interesting
[13:50:38] <benh> well it's not like insertion into hashmaps isn't a known pain point
[13:50:46] <benh> s/hash//
[13:51:06] <Tobba> it mostly just has really overly generic constraints
[13:51:20] <Tobba> also lexical borrowing, goddamn
[13:51:38] <huon> what do you mean by "overly generic constraints"?
[13:52:12] *** Quits: maxli (Adium@moz-B19F68ED.student.cs.uwaterloo.ca) (Ping timeout)
[13:52:14] <Tobba> mostly matches + borrowck
[13:52:24] <Tobba> it tends to make assumptions about the whole match
[13:52:33] <huon> as in, lexical borrowing
[13:52:37] <huon> right?
[13:52:40] <Tobba> mostly
[13:52:57] <Tobba> getting matches to pass borrowck is actually probably the most annoying thing in the entire language
[13:52:59] <huon> you can do the early return trick
[13:53:14] <huon> return from the Some branch, and fall through in the None one
[13:53:18] <Tobba> 99% of all matches that it has complained about
[13:53:24] <Tobba> are now working due to some gigantic hack
[13:53:25] <huon> to write the next bit outside the match
[13:53:50] <Tobba> once it gets its shit fixed I'll probably have to rewrite most match statements in the code to make sense
[13:53:56] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[13:54:33] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Ping timeout)
[13:54:33] <Tobba> I think I have "match match match" written in some place with tons of magic constants involved just to get it to pass
[13:55:09] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[13:55:27] <huon> magic constants?
[13:55:37] <Tobba> to tell the other match arms what to do
[13:55:42] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[13:55:54] <huon> example?
[13:56:50] <Tobba> I cant exactly remember what it involved, I had to match an inner value and figure out what to do with that, build a code (could've used an enum but still), then send that over to somewhere else and then match that value again
[13:57:01] <Tobba> I think I might've been able to clean that specific one up by a refactoring since I cant find it
[13:58:19] *** Joins: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:58:20] <Tobba> also if match and passing booleans is a good classic for borrowck passing
[13:58:22] *** Joins: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com)
[13:59:02] <Tobba> aw yeah it builds
[13:59:23] <Tobba> I also broke some odd unknown part of the application the process... somehow
[13:59:37] * huon would still like to see an example of a horrible match
[13:59:59] <Tobba> I'll find a double match later
[14:00:06] <Tobba> the triple match appears to be gone, thankfully
[14:00:59] <edwardw> sounds like matching against tuple can help here. but like huo said, a concrete sample would help
[14:01:25] *** Quits: mye (mye@moz-77F95923.dip0.t-ipconnect.de) (Quit: sleep message)
[14:01:35] <Tobba> yeah
[14:01:42] <Tobba> I think most of those double matches could probably be improved
[14:02:06] <Tobba> but tl;dr matches + borrowck = oh dear
[14:02:13] *** Joins: skade (skade@moz-6444221B.dip0.t-ipconnect.de)
[14:02:37] *** Quits: rylev (rylev@FDA7C5E.8B1408EE.2DB0BBA1.IP) (Client exited)
[14:04:19] <Tobba> though I'll say if you havent had to struggle horribly getting a match to pass through borrowck because it likes to keep everything borrowed for way longer than it possibly should, then you havent coded anything serious in rust
[14:04:28] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[14:04:59] <Ms2ger|sad> I haven't had quite such a bad experience with it
[14:05:04] <Ms2ger|sad> But I've only worked on Servo
[14:05:28] <eddyb> Servo: because unsafe wasn't overused enough in rustc
[14:05:32] <Ms2ger|sad> :D
[14:05:37] <Tobba> hahahahahah
[14:05:47] <Tobba> rustc uses unsafety?
[14:05:54] <Tobba> for things other than FFI bindings?
[14:05:54] <huon> for FFI
[14:05:55] <companion_cube> what's borrowck?
[14:06:03] <eddyb> (it actually isn't, outside of code touching LLVM directly and the type system which is fixable)
[14:06:08] <huon> and for optimising out refcounts of old @ pointers
[14:06:23] <huon> companion_cube: borrow check
[14:06:26] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[14:06:33] <companion_cube> ah
[14:06:45] <huon> makes sure &mut/& pointers all do the right thing
[14:07:01] <companion_cube> the frightening part of rust
[14:07:04] *** Joins: abinader (sid21713@moz-A42E5B7B.irccloud.com)
[14:07:14] <huon> s/frighten/interest/ ;P
[14:07:37] <edwardw> the interesting part :D http://static.rust-lang.org/doc/master/rustc/middle/borrowck/doc/index.html
[14:08:20] <eddyb> most of the magic is actually handled by the generic dataflow
[14:09:27] <pastry> what's the type for a vector of vectors? let mut s:~[ ~[] ] = ~[];
[14:09:42] <eddyb> Vec<Vec<T>>?
[14:10:00] <eddyb> oh, you wrote ~[~[T]] without T
[14:10:05] <huon> pastry: what's the contents of the innter one/
[14:10:07] <pastry> ah I see
[14:10:08] <huon> *?
[14:10:35] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[14:12:42] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[14:13:13] <paraze> (my rust 2048 AI just won the game \o/)
[14:13:31] <huon> paraze: \o/
[14:13:40] <edwardw> cool
[14:13:44] <huon> paraze: (now make it handle 4d :P http://huonw.github.io/2048-4D/ )
[14:14:44] *** Quits: astroch (astroch@moz-DF5C3CE6.dhcp.embarqhsd.net) (Connection reset by peer)
[14:15:34] <benh> Ms2ger|sad: "foo.rs:10:13: 16:6 error: field `major` of struct `semver::Version` is private"
[14:16:41] <paraze> huon, haha nice :p
[14:17:38] *** Quits: lpy (lpy@8B40CDAC.F09091A8.1348A864.IP) (Ping timeout)
[14:17:38] *** Joins: saml_ (saml@moz-110B5908.nycmny.east.verizon.net)
[14:17:47] *** Joins: sellout (greg@moz-F7BC9302.us-west-2.compute.amazonaws.com)
[14:18:05] <eddyb> benh: needs explicit pub now
[14:18:15] <eddyb> benh: could have been lost in the fallout
[14:18:24] <huon> eddyb: he's adding the 'of struct `...`' bit to the error message
[14:18:27] <benh> eddyb: Yeah, but then I'll need to find another struct to show off the improved error message with~
[14:18:31] <eddyb> oh oops
[14:19:07] <eddyb> benh: PR pls :D
[14:19:41] <benh> Soon~
[14:19:46] *** Joins: rylev (rylev@FDA7C5E.8B1408EE.2DB0BBA1.IP)
[14:19:54] <edwardw> https://github.com/mozilla/rust/pull/13339
[14:20:00] <edwardw> there's a fix
[14:20:41] <benh> do we still have enums with named fields in some variants?
[14:20:49] <huon> haha, Ms2ger|sad utterly abused servo's fork of rust
[14:20:57] <huon> benh: struct variants, yes
[14:21:23] <huon> (can't do field accesses on them, though.)
[14:22:05] *** Joins: mye (mye@moz-77F95923.dip0.t-ipconnect.de)
[14:22:35] <doomlord_> how do you iterate the chars of a str
[14:22:46] <huon> .chars()
[14:22:46] <edwardw> .chars()
[14:22:52] <edwardw> I win :P
[14:22:59] <huon> note that they are unicode codepoints
[14:23:04] <huon> not visible characters
[14:23:11] * huon was first in his client
[14:23:30] *** Joins: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com)
[14:23:34] <benh> huon: Can construct them though :)
[14:23:49] <huon> benh: oh, the error message handles that too?
[14:23:55] <huon> (also, can pattern match on them)
[14:23:57] <benh> That's what I hope to find out
[14:24:04] <ion> edwardw: Your client displayed your message without a delay to you (and ditto for huon), but with the network delays, huon’s message reached me first. :-P
[14:24:21] <edwardw> sad :P
[14:24:41] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Quit: No Ping reply in 180 seconds.)
[14:24:46] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[14:24:55] <huon> \o/
[14:25:03] * huon adds this to his resume
[14:25:24] <benh> Hm, the error message just calls it a struct, even though it is a struct variant of an enum, and doesn't name the enum at all, that's probably not good
[14:25:44] <Havvy> Who made that change on the Reddit title?
[14:25:52] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[14:26:21] <huon> Havvy: bstrie
[14:27:01] <Ms2ger|sad> huon, what'd I do?
[14:27:22] <Havvy> bstrie:  That title, to me, looks like somebody being ironic about what Rust (the game) is about, and not a warning that this is not that game.
[14:27:22] <huon> Ms2ger|sad: submit a pr from mozilla-servo/rust, not Ms2ger/rust ;P
[14:27:32] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[14:27:46] <Ms2ger|sad> Oh
[14:27:49] <huon> Havvy: (note that it changed recently, again :) )
[14:27:49] *** Joins: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net)
[14:27:50] <Ms2ger|sad> I am Mozilla ;)
[14:28:03] <Havvy> Oh, it did.
[14:29:12] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[14:29:26] <Ms2ger|sad> huon, or, as roc put it: https://twitter.com/littlecalculist/status/364421924505395200
[14:29:52] *** huon is now known as Ms2ger|happy
[14:30:52] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[14:31:21] *** Ms2ger|happy is now known as huon
[14:32:52] * Ms2ger|sad whacks Ms2ger|happy
[14:32:56] *** Quits: txdv (quassel@966F3542.3BA477DA.14C26596.IP) (Ping timeout)
[14:33:03] *** Quits: tgkokk (user@moz-BF0AF9D2.home.otenet.gr) (Ping timeout)
[14:33:38] *** Joins: txdv (quassel@966F3542.3BA477DA.14C26596.IP)
[14:33:56] * huon dodged
[14:34:18] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[14:34:19] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[14:34:37] *** Joins: fabiand (fabiand@moz-A94A4C79.adsl.alicedsl.de)
[14:37:47] <ChrisMorgan> Ooh, fancy. Looked at Google Analytics to see how many views my (Python) article trending on HN was getting and I see in the hourly view that 2am-3am is twice as wide as any other hour gap ☺
[14:38:07] <ChrisMorgan> (End of DST, so at 3am we go back to 2am and have it all again.)
[14:38:23] <huon> but we haven't even started DST
[14:38:31] <ChrisMorgan> :P
[14:38:40] *** Quits: rylev (rylev@FDA7C5E.8B1408EE.2DB0BBA1.IP) (Client exited)
[14:38:42] * ChrisMorgan will write Rust articles soon
[14:39:01] *** Joins: rylev (rylev@FDA7C5E.8B1408EE.2DB0BBA1.IP)
[14:40:21] * ChrisMorgan will be replacing nginx with a Rust-based server at some time, too.
[14:40:42] *** Quits: rylev (rylev@FDA7C5E.8B1408EE.2DB0BBA1.IP) (Ping timeout)
[14:41:48] *** Joins: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com)
[14:42:32] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[14:43:01] *** Quits: saml_ (saml@moz-110B5908.nycmny.east.verizon.net) (Quit: Leaving)
[14:46:34] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[14:46:58] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[14:47:13] <benh> ChrisMorgan: hay let's add a feature to crates that lets you execute code when someone else links to your crate
[14:47:37] <huon> #[phase(syntax)] ;P
[14:47:39] <ChrisMorgan> benh: you can do that with #[phase(syntax)]
[14:47:42] *** Quits: skade (skade@moz-6444221B.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[14:47:44] <huon> (opt-in though)
[14:48:04] <benh> oh, right
[14:48:27] <benh> so I can use that to connect to a database to get a bunch of values to run my GUI testsuite with, right?
[14:48:36] <huon> yep
[14:48:38] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[14:48:48] <huon> that's actually exactly what it's designed for
[14:48:57] <huon> pretty much everything else is a misuse
[14:49:11] *** Joins: maxli (Adium@moz-EE42E0E.student.cs.uwaterloo.ca)
[14:49:33] <huon> and we'll probably have lints for missing the DB connection or the GUI bit when writing a syntax extension.
[14:49:44] <huon> maybe even just hard compiler errors
[14:50:06] <ChrisMorgan> Oh, and it needs to detect at least one use of libc::exit.
[14:50:06] <huon> no work-arounds allowed.
[14:50:20] <ChrisMorgan> Or libc::abort is OK.
[14:50:24] * edwardw thinks poor huon is bored
[14:50:46] <benh> "field `field` of struct `fn(int) -> my_mod::S2_` is private" this definitely isn't right :(
[14:50:54] <huon> haha
[14:51:01] <huon> sounds like an enum constructor
[14:51:02] <ChrisMorgan> edwardw: nah, not yet. He'll be bored in about ten minutes' time, knowing that an hour thereafter he'll be doing the same thing again…
[14:51:05] <benh> yeah
[14:51:26] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[14:51:32] <benh> that's what I get for node_id_to_type for the struct defid that has the fields, though
[14:52:11] <huon> a struct variant?
[14:52:25] <benh> yeah
[14:52:37] <huon> an enum variant is not a type in itself
[14:52:53] <huon> so you should probably be handling that path separately anyway
[14:53:15] <benh> I'm just surprised that the defid that works for lookup_struct_fields results in a function type :)
[14:53:18] <benh> but yeah
[14:53:18] <huon> if ty_is_enum(...) { "field `field` of variant `...` of enum `...` is private" } else { <struct> }
[14:53:24] <huon> or whatever
[14:53:56] <benh> maybe ty_to_str is lying to me though
[14:54:07] <ChrisMorgan> "of enum `...`" could be unnecessary (because the enum ain't scoped).
[14:56:46] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[14:56:57] *** Joins: Crusty (bzlandfill@moz-771928FA.rev.numericable.fr)
[14:57:21] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[14:57:39] *** Quits: Crusty (bzlandfill@moz-771928FA.rev.numericable.fr) (Quit: CGI:IRC)
[14:59:15] *** Joins: EastByte (EastByte@moz-A06235D9.ewe-ip-backbone.de)
[14:59:42] *** Quits: EastByte_ (EastByte@moz-76991A0C.ewe-ip-backbone.de) (Ping timeout)
[15:01:41] *** Quits: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP) (Ping timeout)
[15:04:10] *** Joins: q66 (q66@moz-AE27872E.range109-154.btcentralplus.com)
[15:04:25] *** Joins: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP)
[15:04:38] *** Quits: StarLight (StarLight@moz-BE4805EE.dynamic.avangarddsl.ru) (Ping timeout)
[15:04:57] *** Quits: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[15:05:45] *** Joins: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP)
[15:05:46] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[15:09:01] *** Joins: StarLight (StarLight@moz-C28BC4CB.dynamic.avangarddsl.ru)
[15:10:42] *** Joins: skade (skade@moz-6444221B.dip0.t-ipconnect.de)
[15:11:47] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[15:13:27] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[15:14:52] *** Joins: apoelstra (username@moz-B7040E82.vs.shawcable.net)
[15:16:52] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[15:17:27] *** Quits: skade (skade@moz-6444221B.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[15:17:49] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[15:19:08] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[15:19:16] *** Joins: pczarn (pczarn@moz-69A55FA.izacom.pl)
[15:21:00] *** Quits: alkino_ (alkino@moz-18C36E4E.w92-151.abo.wanadoo.fr) (Client exited)
[15:23:25] *** Joins: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de)
[15:23:49] *** Quits: radford (Adium@moz-AC76BE6B.dhcp.mtpk.ca.charter.com) (Quit: Leaving.)
[15:24:04] *** Quits: summerlight (summerligh@327FC32B.2C956A45.501EFF44.IP) (Ping timeout)
[15:24:23] *** Joins: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP)
[15:26:03] *** Quits: jaras (textual@CA59A5EC.5F4B69C0.52E4E107.IP) (Ping timeout)
[15:26:29] *** Joins: findow (Mibbit@moz-7AD9232F.rev.numericable.fr)
[15:27:31] *** Quits: fabiand (fabiand@moz-A94A4C79.adsl.alicedsl.de) (Client exited)
[15:28:17] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[15:28:50] *** Joins: skade (skade@moz-6444221B.dip0.t-ipconnect.de)
[15:29:24] *** Quits: Siosm (quassel@moz-9911B053.fr) (Ping timeout)
[15:29:58] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[15:31:25] *** Quits: skade (skade@moz-6444221B.dip0.t-ipconnect.de) (Ping timeout)
[15:31:49] *** Joins: alonlevy (alon@moz-B6210BD6.red.bezeqint.net)
[15:34:28] <Ms2ger|sad> acrichto, yt?
[15:36:06] *** Quits: mceier (mceier@moz-C1591437.dynamic.chello.pl) (Ping timeout)
[15:36:50] *** Joins: Siosm (quassel@moz-9911B053.fr)
[15:37:03] <Ms2ger|sad> acrichto, unping
[15:37:31] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[15:38:29] *** Quits: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net) (Ping timeout)
[15:39:16] *** Joins: rylev (rylev@moz-22E22067.cust.telecolumbus.net)
[15:39:31] *** Joins: mceier (mceier@moz-C1591437.dynamic.chello.pl)
[15:40:09] *** Quits: nkoep (nik@moz-C529282F.pool.mediaways.net) (Client exited)
[15:40:38] *** Joins: veeti (veeti@moz-D6414854.rojekti.fi)
[15:40:56] *** Quits: rylev (rylev@moz-22E22067.cust.telecolumbus.net) (Ping timeout)
[15:43:12] <eibwen> where's the cargo repo?
[15:43:21] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Connection reset by peer)
[15:45:24] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[15:46:13] *** Joins: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net)
[15:46:47] *** Quits: alonlevy (alon@moz-B6210BD6.red.bezeqint.net) (Ping timeout)
[15:47:25] <bvssvni> eibwen: https://github.com/carlhuda/cargo/
[15:47:30] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[15:47:38] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[15:47:54] <eibwen> ty
[15:48:27] <bvssvni> wish there was a way to impl<T: !Trait> ...
[15:48:41] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[15:49:27] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[15:49:38] *** Joins: hoverbear (hoverbear@moz-86FCBF4B.gv.shawcable.net)
[15:50:32] *** Quits: untitaker (untitaker@moz-7C5370C.adsl.highway.telekom.at) (Ping timeout)
[15:50:35] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[15:50:43] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[15:50:55] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[15:52:09] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[15:52:16] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[15:53:39] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[15:53:41] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[15:53:41] *** Quits: mye (mye@moz-77F95923.dip0.t-ipconnect.de) (Quit: sleep message)
[15:53:48] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[15:53:57] *** Quits: goffrie (goffrie@moz-849DB410.dsl.ncf.ca) (Ping timeout)
[15:53:58] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[15:54:40] <bvssvni> is there a way to write two impls, one for T: Trait and another for all other types?
[15:54:44] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[15:55:12] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[15:55:20] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[15:55:40] <Ms2ger|sad> Nope
[15:55:58] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Quit: Matthias247)
[15:56:06] *** Quits: [squiddy] (squiddy@moz-767EF079.dynamic.cablesurf.de) (Quit: Leaving)
[15:56:11] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[15:56:30] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[15:56:32] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[15:56:42] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[15:57:09] <strcat> rusti: Some(~())
[15:57:11] -rusti- Some(())
[15:57:26] <bvssvni> it's changed
[15:57:40] <eibwen> rusti: (())
[15:57:41] -rusti- ()
[15:58:04] *** Joins: untitaker (untitaker@moz-41D1FBCE.adsl.highway.telekom.at)
[15:58:14] <eibwen> is there an easy way to make sure that a certain variable in a struct is only initialized once?
[15:58:21] *** Joins: goffrie (goffrie@moz-786E7F9C.dsl.ncf.ca)
[15:58:30] <eibwen> I wanted to try with AtomicOption
[15:58:47] <eibwen> but I can only move out of that
[15:59:14] <eibwen> not only get a reference out of it
[15:59:26] <edwardw> initialized once = immutable
[15:59:28] *** Joins: lpy (lpy@1834E2CB.F09091A8.1348A864.IP)
[15:59:33] *** Quits: thesnowdog (doug@D34500FC.8E46834.6F17036B.IP) (Ping timeout)
[16:00:02] <eibwen> edwardw: what I mean is that it's not initialized on struct creation, but rather might be initialized somewhen in the struct's lifetime
[16:00:05] <eibwen> i.e. a caceh
[16:00:08] <eibwen> *cache
[16:00:29] <edwardw> ah ok
[16:00:43] <ChrisMorgan> My clock just jumped an hour back. No more DST. ☺
[16:00:56] *** Joins: osa1 (omer@B066A08F.B684D6FA.4CEB6735.IP)
[16:01:03] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:01:04] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[16:01:51] *** Joins: thesnowdog (doug@D34500FC.8E46834.6F17036B.IP)
[16:01:57] <eibwen> rusti: ~() as *()
[16:01:58] -rusti- <anon>:11:9: 11:19 error: non-scalar cast: `~()` as `*()`
[16:01:58] -rusti- <anon>:11         ~() as *()
[16:01:58] -rusti-                   ^~~~~~~~~~
[16:01:58] -rusti- error: aborting due to previous error
[16:01:58] -rusti- playpen: application terminated with error code 101
[16:02:07] <eibwen> rusti: ~() as &() as *()
[16:02:07] -rusti- <anon>:11:9: 11:19 error: non-scalar cast: `~()` as `&()`
[16:02:08] -rusti- <anon>:11         ~() as &() as *()
[16:02:08] -rusti-                   ^~~~~~~~~~
[16:02:08] -rusti- error: aborting due to previous error
[16:02:08] -rusti- playpen: application terminated with error code 101
[16:02:48] <eibwen> &*~()
[16:02:50] *** Quits: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net) (Ping timeout)
[16:02:56] <eibwen> rusti: &*~()
[16:02:57] -rusti- ()
[16:02:57] -rusti- playpen: application terminated abnormally with signal 31 (Bad system call)
[16:02:57] *** Joins: mcpherrin (mcpherrin@moz-464166A4.hsd1.ca.comcast.net)
[16:03:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:03:47] *** Joins: matp (matp@moz-16FE1E05.matp.at)
[16:05:39] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[16:06:00] <Ms2ger|sad> One I hope you'll enjoy: '"A coconut is just a nut." #duality'
[16:06:26] <bvssvni> but a peanut is a fruit
[16:07:07] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[16:07:07] <eibwen> Despite its name and appearance, the peanut is not a nut, but rather a legume.
[16:07:14] <eibwen> (wikipedia)
[16:07:15] *** Joins: fazal (fazal@E43CDEC2.DD69F2BB.E8916D75.IP)
[16:07:29] <eibwen> whatever a legume might be
[16:07:40] *** Joins: glennsl (textual@moz-5D7B804F.getinternet.no)
[16:07:44] <fazal> What is the use of 'type' keyword in rust?
[16:08:02] <fazal> Is that how new types are defined
[16:08:09] <bvssvni> fazal: to simplify declarations of types
[16:08:27] <bvssvni> falaz: type Foo<T> = Bar<Baz<T>>;
[16:08:50] <fazal> What about enums? are those new types too?
[16:09:04] <fazal> and Tuples
[16:09:12] <bvssvni> falaz: type does not declare type, it is a shortcut
[16:09:18] <bvssvni> fazal: ^
[16:09:54] <fazal> bvssvni: Like a type alias?
[16:10:02] <bvssvni> fazal: yes
[16:11:39] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[16:12:31] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[16:13:24] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Ping timeout)
[16:13:31] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[16:13:37] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[16:14:00] <fazal> bvssvni: So Structs, Tuples and Enums ..etc declare types?
[16:14:09] *** Joins: andrewd18 (andrew@moz-DAC9D29F.wi.res.rr.com)
[16:14:15] <Ms2ger|sad> Tuples not so much, but yes
[16:14:18] *** Joins: mib_ntemyp (Mibbit@moz-96004D1A.san.res.rr.com)
[16:14:22] <eddyb> struct and enum, to be precise
[16:14:54] <Ms2ger|sad> And then there's tuple structs
[16:15:02] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[16:15:12] *** Quits: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net) (Ping timeout)
[16:15:14] <fazal> Ms2ger|sad: tuple structs.. 
[16:15:33] <Ms2ger|sad> Which are structs with unnamed fields
[16:15:41] <fazal> Ms2ger|sad: has it been removed from 0.10? or is it different now?
[16:15:44] <Ms2ger|sad> struct Point(int, int)
[16:15:46] <Ms2ger|sad> Not afaik
[16:16:08] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[16:16:10] *** Quits: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net) (Ping timeout)
[16:17:10] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[16:18:09] *** Quits: mib_ntemyp (Mibbit@moz-96004D1A.san.res.rr.com) (Quit: http://www.mibbit.com ajax IRC Client)
[16:18:28] *** Joins: copumpkin (copumpkin@CFDA70B1.F2A9BEB2.C943C01E.IP)
[16:20:15] <fazal> Ms2ger|sad: Got it, thanks
[16:20:29] <Ms2ger|sad> Np
[16:20:44] *** Joins: mye (mye@moz-77F95923.dip0.t-ipconnect.de)
[16:21:37] *** Joins: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net)
[16:23:05] *** Quits: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP) (Ping timeout)
[16:24:56] <bvssvni> how can I fake this in Rust https://github.com/bvssvni/csharp-utils/blob/master/Utils/Packs/Utils.Persistency.cs#L79
[16:26:45] *** Joins: Ferio (Mibbit@645ABD36.43760000.47249C24.IP)
[16:27:46] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[16:27:51] <bvssvni> maybe I can have a method in Persistent trait contains_persistent
[16:29:00] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[16:29:49] *** Quits: strcat (strcat@moz-54F7FD49.cpe.net.cable.rogers.com) (Quit: WeeChat 0.4.3)
[16:30:41] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[16:30:50] <Ferio> Hi, how can I represent  a pointer to an opaque type for an c interface (eg typedef ...)?
[16:32:00] *** Quits: rusti (rusti@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:32:03] *** Quits: rustilite (rustilite@moz-54F7FD49.cpe.net.cable.rogers.com) (Ping timeout)
[16:35:00] <ChrisMorgan> bvssvni: yes, a method with default impl, overridden for <T: Persistent>
[16:35:24] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[16:35:34] <bvssvni> ChrisMorgan: do you have a quick code example?
[16:36:32] <bvssvni> ChrisMorgan: ah, I think I have it
[16:36:45] <bvssvni> ChrisMorgan: allmost... :P
[16:36:53] <ChrisMorgan> trait<T> Foo<T> { fn contains_persistent(&self) -> bool { false } } impl<T: Persistent> Foo<T> for X { fn contains_persistent(&self) -> bool { true } }
[16:37:10] <ChrisMorgan> Hang on, that ain't right… I need to go to bed.
[16:37:36] *** Joins: jdm (jdm@moz-AC9499B2.cable.teksavvy.com)
[16:37:36] *** ChanServ sets mode: +o jdm
[16:37:41] <ChrisMorgan> Oh, something vaguely (*very* vaguely) similar to that.
[16:37:54] <bvssvni> ChrisMorgan: persistent data structures are not for the tired :)
[16:38:10] *** Quits: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu) (Quit: WeeChat 0.4.3)
[16:38:15] *** Joins: darnuria (darnuria@moz-AB6EB255.ip-91-121-133.eu)
[16:38:37] <hoverbear> Is Bitwise XOR ^ in right?
[16:38:39] <hoverbear> Rust*
[16:39:37] <japaric> hoverbear: yes
[16:39:53] <bvssvni> hoverbear: http://static.rust-lang.org/doc/master/rust.html#bitwise-operators
[16:40:02] *** Joins: rylev (rylev@C2D41867.C41E51DD.1AF5A838.IP)
[16:40:07] *** Quits: fazal (fazal@E43CDEC2.DD69F2BB.E8916D75.IP) (Ping timeout)
[16:40:30] *** Joins: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl)
[16:41:28] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[16:41:33] *** Joins: benvie (bbenvie@5FD20F9A.53D07D95.EFF8B7BF.IP)
[16:41:43] *** Quits: rylev (rylev@C2D41867.C41E51DD.1AF5A838.IP) (Ping timeout)
[16:42:11] *** Quits: benvie_ (bbenvie@5FD20F9A.53D07D95.EFF8B7BF.IP) (Ping timeout)
[16:43:34] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[16:44:01] *** Joins: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net)
[16:44:07] *** Quits: lpy (lpy@1834E2CB.F09091A8.1348A864.IP) (Client exited)
[16:44:41] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[16:44:49] *** Joins: fazal (fazal@E43CDEC2.DD69F2BB.E8916D75.IP)
[16:45:07] *** Joins: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP)
[16:45:46] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[16:46:58] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[16:49:15] *** Quits: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net) (Client exited)
[16:49:17] *** Joins: aatch|mobile (aatch@moz-2BB0AC01.cable.telstraclear.net)
[16:50:21] <Ferio> ok I redact my question…found rust-bindgen :)
[16:50:47] <Ferio> btw. which version of rust is servo using? seems to be pretty old…
[16:51:27] *** Quits: edwardw (Mibbit@FF3CCB4.1B2F6624.7F41E82D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[16:52:46] *** Quits: blank_name (blank_name@AB55F408.AA624E84.6D228269.IP) (Ping timeout)
[16:53:07] *** Joins: willingc (willingc@moz-F095E013.san.res.rr.com)
[16:53:49] <Ms2ger|sad> Ferio, two weeks old right now
[16:54:02] <Ms2ger|sad> (since tonight)
[16:54:39] <hoverbear> Ferio: http://31.media.tumblr.com/32c57724d0c8908c0a9cdd46bef7c7a0/tumblr_n3d7elW8Z11tu91ozo1_500.jpg
[16:55:20] <Ferio> Ms2ger|sad: thanks, I was also mistaken…the rust-cairo think is way older than the rest of servo :D
[16:55:26] <Ms2ger|sad> hoverbear, that's a pretty accurate depiction of how I feel right now, except for the muscles :)
[16:56:29] <hoverbear> Ms2ger|sad: It's ok, the muscles represent your force of will and persistence, your enlightenment as you triumph. You'd be practically bristling by the time you're done. ;)
[16:56:47] <Ms2ger|sad> Ha
[16:56:52] <Ms2ger|sad> No triumph in sight
[16:57:08] <geal> don't let your code rust away, upgrade it :)
[16:57:11] *** Joins: blank_name (blank_name@AB55F408.AA624E84.6D228269.IP)
[16:57:19] *** Quits: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP) (Ping timeout)
[16:57:22] *** Joins: edwardw (edwardw@8229534F.B77F1D58.FAED9FFC.IP)
[16:57:32] *** Joins: wilmoore (wilmoore@moz-17E4E00B.public.wayport.net)
[16:58:13] <hoverbear> I need to fix Rust Rosetta, but it's taking Rust all morning to compile on this machine. :(
[16:58:37] <hoverbear> Can I tell it not to build docs and things?
[16:59:03] <benh> Use nightly builds?
[16:59:11] *** Quits: heftig (heftig@moz-1C08282B.dip0.t-ipconnect.de) (Ping timeout)
[16:59:29] <bvssvni> hoverbear: curl -s http://www.rust-lang.org/rustup.sh | sudo sh
[16:59:57] <hoverbear> Cool. Let me look at that.
[17:00:11] *** Quits: lerc (quassel@moz-82B68322.telstraclear.net) (Ping timeout)
[17:00:16] <taylanub> Piping a network fetch directly to an interpreter .. with sudo on top of that :|
[17:00:38] <bvssvni> taylanub: totally responsible :P
[17:00:41] <ctangent> you can look at the script before you execute it :P
[17:00:48] <ctangent> it's not like it's some arcane hidden script
[17:00:57] <hoverbear> benh: How do I update it?
[17:01:03] <taylanub> Right, at least glance over it, that's surely more secure! :P
[17:01:08] <benh> I dunno. Install it again?
[17:01:09] <ctangent> :P
[17:01:25] *** Quits: Siosm (quassel@moz-9911B053.fr) (Client exited)
[17:01:43] <taylanub> I also always feel uneasy downloading the compiled youtube-dl from their website and just putting it in my ~/bin
[17:01:43] *** Quits: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com) (Ping timeout)
[17:01:45] <hoverbear> benh: Well what's the point of a nightly script if it doesn't update? :-P
[17:01:49] <benh> < ctangent> you can look at the script before you execute it :P <- yeah, with curl -s ... | tee /dev/stderr | sudo sh
[17:01:50] *** Joins: johnsoft (johnsoft@moz-7E09A266.neo.res.rr.com)
[17:02:17] *** Joins: Siosm (quassel@moz-9911B053.fr)
[17:02:18] <bvssvni> hoverbear: to uninstall :::: curl -s http://www.rust-lang.org/rustup.sh | sudo sh -s -- --uninstall
[17:02:27] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[17:03:03] <hoverbear> bvssvni: Ok, so I need to keep this script around and do --uninstall && --install every day?
[17:03:26] <bvssvni> hoverbear: https://github.com/bvssvni/rust-empty/issues/35
[17:03:45] <bvssvni> I keep it there because I can search in the repo :)
[17:04:03] *** Joins: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net)
[17:04:09] <Luqman> mcpherrin: at ctrl-d :P
[17:04:40] <hoverbear> bvssvn, benh: I'd rather build it myself. I can get the git repo from https and don't need to curl things from the internet.
[17:04:49] <bvssvni> hoverbear: I often just install, seems to work ok
[17:05:32] <hoverbear> It's not like I have a slow computer, it's just it rebuilds the docs every time and it takes FOREVER to do that and I never look at local docs.
[17:05:58] <bvssvni> hoverbear: there are download links too https://mail.mozilla.org/pipermail/rust-dev/2014-March/009223.html
[17:06:37] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[17:07:10] <bvssvni> hoverbear: also at http://www.rust-lang.org/ it has a download button for the nightly
[17:07:11] *** Joins: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de)
[17:07:37] <hoverbear> bvssvni: They're still unencrypted builds of compilers. I want to build the compiler, I just want to skip the docs, is there a `make` flag for that I can set?
[17:07:58] *** Joins: zootm (calum@moz-150DDDC2.sgyl.cable.virginm.net)
[17:08:07] <bvssvni> hoverbear: ask in #rust-internals
[17:08:25] <hoverbear> bvssvni: Thanks!
[17:08:49] *** Quits: khodzha1 (khodzha@731736BB.A859D9FD.CA6E2165.IP) (Ping timeout)
[17:08:58] *** Joins: khodzha (khodzha@7A941DBD.EF9FA30D.CA6E2165.IP)
[17:09:57] *** Quits: fazal (fazal@E43CDEC2.DD69F2BB.E8916D75.IP) (Ping timeout)
[17:10:16] *** Joins: heftig (heftig@moz-45B9D694.dip0.t-ipconnect.de)
[17:10:26] *** Quits: Kxepal (Miranda@moz-78168BB9.pppoe.mtu-net.ru) (Ping timeout)
[17:10:41] *** Joins: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net)
[17:13:33] *** Quits: dranov (dranov@B72D9B7B.464AB0AD.FCAAE698.IP) (Ping timeout)
[17:14:01] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[17:14:03] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Ping timeout)
[17:14:48] *** Joins: Kxepal (Miranda@moz-9AA2D61B.pppoe.mtu-net.ru)
[17:16:10] *** Quits: wilmoore (wilmoore@moz-17E4E00B.public.wayport.net) (Ping timeout)
[17:16:13] *** Quits: hjr3 (hradtke@moz-699EABC0.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:16:31] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[17:18:53] *** Joins: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP)
[17:19:28] *** Joins: wikkit (Mibbit@349FECA1.9EF9E0BB.CC1A2609.IP)
[17:20:14] *** Joins: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net)
[17:22:54] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[17:23:10] *** Quits: silotis (quassel@moz-4B8C4631.oc.oc.cox.net) (Client exited)
[17:23:23] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[17:23:25] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[17:23:33] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[17:23:51] *** Quits: carllerche (carllerche@moz-CA3FF5F1.hsd1.or.comcast.net) (Quit: carllerche)
[17:24:06] <eibwen> how can I opt out of Share?
[17:24:07] *** Joins: rylev (rylev@moz-8CDB48A4.cust.telecolumbus.net)
[17:24:41] *** Quits: jkingyens (jkingyens@moz-7A8F6201.hsd1.ca.comcast.net) (Quit: jkingyens)
[17:24:53] *** Joins: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com)
[17:24:56] *** Quits: wikkit (Mibbit@349FECA1.9EF9E0BB.CC1A2609.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[17:25:06] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[17:25:10] <Tobba> eibwen: just have a field that contains NoShare
[17:25:30] *** Joins: silotis (quassel@moz-4B8C4631.oc.oc.cox.net)
[17:25:48] *** Quits: rylev (rylev@moz-8CDB48A4.cust.telecolumbus.net) (Ping timeout)
[17:26:35] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[17:26:43] *** Joins: earlzlap (earlz@moz-483E1E31.neo.res.rr.com)
[17:29:17] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[17:29:44] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[17:30:21] *** Joins: wilmoore (wilmoore@moz-56296280.public.wayport.net)
[17:30:57] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[17:31:04] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[17:31:26] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[17:31:37] *** Joins: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net)
[17:32:02] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[17:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[17:34:07] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[17:38:26] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[17:38:32] *** Joins: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz)
[17:39:04] *** Joins: lnx (fredrik@moz-82D5EB2C.slacker.se)
[17:39:45] *** Joins: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP)
[17:39:46] *** Quits: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[17:45:06] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[17:45:47] *** Quits: oberstet (quassel@moz-C49863B7.dynamic.mnet-online.de) (Client exited)
[17:50:08] *** Quits: earlzlap (earlz@moz-483E1E31.neo.res.rr.com) (Ping timeout)
[17:50:14] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[17:50:32] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Ping timeout)
[17:50:36] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[17:50:39] *** Joins: onelson (owen@18CF7301.95770028.5B6BFE7D.IP)
[17:52:11] *** Joins: echristo (echristo@4BCF0721.E96923BF.37EDBBD4.IP)
[17:52:20] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[17:52:40] *** Joins: mib_4b2hrl (Mibbit@A7DE7E81.2E735A23.DDE5D3F6.IP)
[17:53:41] <Leo`> I can't upgrade my Rust build on OS X, it fails with a linking error reporting lots of missing LLVM and C++ symbols
[17:53:43] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[17:54:35] <Leo`> has such kinds of failures been seen before ?
[17:55:32] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[17:55:35] <bvssvni> Leo`: have you tried from a new clone of the repo?
[17:56:27] *** Joins: fazal (fazal@E43CDEC2.DD69F2BB.E8916D75.IP)
[17:56:36] <Leo`> bvssvni: no
[17:56:42] <Leo`> that's what I'm doing right now
[17:56:57] <fazal> Where can I find the documentation for Nil, Cons.. ?
[17:57:16] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[17:57:24] <Ms2ger|sad> I think we removed that
[17:58:23] <fazal> Ms2ger|sad: was that to me?
[17:58:35] <Ms2ger|sad> Yes
[17:58:56] *** Quits: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru) (Ping timeout)
[17:59:23] <kimundi> Leo`: Did you run configure again before?
[17:59:45] <fazal> Ms2ger|sad: So there is no reference to those?
[17:59:50] <kimundi> fazal: Where did you see those names?
[18:00:55] <Leo`> kimundi: yes, even make clean'ed
[18:01:02] *** Joins: LRN (LRN@moz-EA80C63C.nationalcablenetworks.ru)
[18:01:51] <fazal> kimundi: http://static.rust-lang.org/doc/master/tutorial.html#implementing-a-linked-list
[18:02:03] <kimundi> Leo`: Hm, okay. Then a reclone will be easier ;)
[18:02:45] <kimundi> fazal: Ah, that example creates a data structure from scratch, so of course we don't have docs for that :)
[18:03:06] <Leo`> what are the external dependencies of the Rust build, apart from C/C++ compilers and standard libraries
[18:03:17] <Leo`> ?
[18:03:27] <kimundi> fazal: Cons and Nil are just arbitrary names, though for this concrete use case "Cons" and "Nil" are the classical ones to use.
[18:03:36] <fazal> kimundi: Ooh so Cons is to be implemented?
[18:03:45] <kimundi> fazal: Hm?
[18:03:59] *** Quits: gimpf (gimpf@moz-DD95D3C.adsl.highway.telekom.at) (Ping timeout)
[18:04:40] <kimundi> fazal: That example defined a type "List", which has two enum variants with the name "Cons" and "Nil"
[18:05:00] <kimundi> Might as well be "Foo", "Bar" and "Baz" though
[18:05:02] <bvssvni> fazal: those are just "tags"
[18:05:19] *** Quits: mib_4b2hrl (Mibbit@A7DE7E81.2E735A23.DDE5D3F6.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:05:42] <kimundi> enum Foo { Bar, Baz }; // Bar and Baz are constructors for a value of type Foo
[18:06:06] <fazal> kimundi: So I think what I am not understanding is Enums in Rust
[18:06:38] <kimundi> fazal: Ah. A enum is basically a type that can have one of a few defined possible values
[18:07:24] <kimundi> for example, enum Foo { Bar, Baz } defines a type "Foo" that has either the value "Bar" or "Baz".
[18:07:58] <kimundi> Bar and Baz are not types, they are "variants"
[18:08:09] <kimundi> A variant can also contain additional data
[18:08:28] <kimundi> enum Foo { IntFoo(int), FloatFoo(f64) }
[18:08:59] <kimundi> This defines a type that can either be a "IntFoo", which contains a integer, or a "FloatFoo" which contains a float
[18:09:52] <kimundi> You can then freely use it like any other type: `let mut x: Foo = IntFoo(45); x = FloatFoo(34.67);`
[18:10:26] <kimundi> If you are familiar with C/C++, this is basically a tagged union
[18:11:44] *** Quits: wilmoore (wilmoore@moz-56296280.public.wayport.net) (Ping timeout)
[18:11:52] <kimundi> One common example from Rusts std library is the Option<T> type. Its defined as `enum Option<T> { Some(T), None }`, and can be used to represent a value that is optional, because its either "Some(T)", or "None"
[18:12:42] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[18:12:57] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[18:13:19] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[18:15:21] *** Quits: Earnestly (earnest@moz-2C691159.dyn.plus.net) (Quit: WeeChat 0.4.4-dev)
[18:15:24] *** Joins: Earnestly (earnest@moz-2C691159.dyn.plus.net)
[18:15:35] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Ping timeout)
[18:15:35] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[18:15:53] *** Quits: Ms2ger|sad (Ms2ger@moz-278726EC.adsl-dyn.isp.belgacom.be) (Quit: nn)
[18:16:55] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[18:17:06] *** Joins: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net)
[18:17:15] *** Quits: echristo (echristo@4BCF0721.E96923BF.37EDBBD4.IP) (Quit: echristo)
[18:17:19] *** Joins: echristo (echristo@4BCF0721.E96923BF.37EDBBD4.IP)
[18:17:25] *** Joins: wilmoore (wilmoore@moz-56296280.public.wayport.net)
[18:18:07] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[18:19:41] <fazal> kimundi: In the case of Option<T> What does None and Some(T) contain ?
[18:19:44] *** Joins: nszceta (nszceta@moz-E6CA8D6.hsd1.pa.comcast.net)
[18:19:47] *** Joins: W0rmDr1nk (wormdrink@moz-CEAF0263.access.mtnbusiness.co.za)
[18:19:56] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[18:20:20] <fazal> What are None and Some(T)?
[18:20:25] <bvssvni> fazal: T is a generic parameter, it can contain anything
[18:20:37] <bvssvni> fazal: Option<uint>, Option<u32> etc
[18:21:15] <bvssvni> fazal: Some(42u), Some(42u32)
[18:21:18] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[18:21:28] <edwardw> fazal: `let x = Some(10i); match x { Some(y) => y, None => 0i }` etc.
[18:21:57] <edwardw> just one example of using it in a match expression
[18:22:51] <fazal> edwardw: So are Some and None decalred new types?
[18:23:05] <eddyb> no
[18:23:06] *** Quits: mye (mye@moz-77F95923.dip0.t-ipconnect.de) (Quit: sleep message)
[18:23:13] <Havvy> They are constructors of the Option<T> type.
[18:23:15] <eddyb> they are variants of a single type, Option
[18:23:22] <edwardw> fazal: in my example, they are Option<int>
[18:23:29] *** Joins: thewonderidiot (mike@moz-5506A033.hsd1.ca.comcast.net)
[18:23:33] <o11c> well, they are types
[18:23:40] <eddyb> what?
[18:23:49] <eddyb> o11c: Some and None aren't types
[18:23:56] <o11c> they get treated as them
[18:24:00] <eddyb> no they don't
[18:24:20] <eddyb> they live in the value namespace
[18:24:20] <o11c> by the camelcase lint, among other things
[18:24:35] <eddyb> the camelcase lint doesn't do just types
[18:24:53] *** Joins: rylev (rylev@moz-2B55F1C7.cust.telecolumbus.net)
[18:24:54] <o11c> right, but it says enum variants are types
[18:25:03] <eddyb> that can be fixed
[18:25:10] <o11c> but it shouldn't be
[18:25:15] <eddyb> *sigh*
[18:25:20] <o11c> except possibly to allow ALL_CAPS
[18:25:26] <eddyb> o11c: variants are variants and they aren't types
[18:25:42] <eddyb> a lint saying the wrong thing is an issue of its own
[18:26:32] <eddyb> o11c: we're trying to not confuse people who come from languages which would happily implement "ADTs" using hacky subtyping
[18:26:33] *** Quits: rylev (rylev@moz-2B55F1C7.cust.telecolumbus.net) (Ping timeout)
[18:27:17] *** Quits: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com) (Ping timeout)
[18:30:26] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[18:30:32] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[18:30:58] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[18:30:58] *** ChanServ sets mode: +o pnkfelix
[18:31:03] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[18:31:54] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[18:32:07] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[18:32:38] *** Joins: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP)
[18:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[18:34:17] *** Joins: mye (mye@moz-77F95923.dip0.t-ipconnect.de)
[18:34:29] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[18:35:34] <fazal> eddyb: I think it's a bit more clear now after reading the Manual on enums
[18:36:01] *** Quits: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net) (Ping timeout)
[18:36:01] *** Joins: Nekit1234007 (Nekit12340@450259EC.ABE6C08B.4707F662.IP)
[18:36:08] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[18:36:44] <fazal> eddyb: So Some(T) syntax is used to construct a variant for the type Option<T>
[18:36:56] *** Joins: tgkokk (user@moz-BF0AF9D2.home.otenet.gr)
[18:37:14] <kimundi> fazal: correct
[18:37:31] <fazal> eddyb: Just to make sure I understood correctly
[18:38:06] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[18:38:20] <fazal> kimundi: Thanks, now what you said earlier makes more sense
[18:38:26] *** Joins: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com)
[18:39:20] *** Quits: khodzha (khodzha@7A941DBD.EF9FA30D.CA6E2165.IP) (Quit: Leaving.)
[18:39:33] *** Quits: Ferio (Mibbit@645ABD36.43760000.47249C24.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:40:15] *** Joins: skade (skade@moz-6444221B.dip0.t-ipconnect.de)
[18:40:52] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Connection reset by peer)
[18:40:55] *** Joins: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl)
[18:41:35] <eibwen> r? https://github.com/mozilla/rust/pull/13343 
[18:42:03] <eibwen> also, was the bug concerning the pull request title fixed in bors? (i.e. do I still have to include the title in the body?)
[18:43:39] *** Quits: edwardw (edwardw@8229534F.B77F1D58.FAED9FFC.IP) (Quit: Leaving...)
[18:44:06] *** Quits: fazal (fazal@E43CDEC2.DD69F2BB.E8916D75.IP) (Ping timeout)
[18:44:33] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[18:45:33] *** Joins: kermiadsa (Mibbit@C716B727.FA4B7B67.B95DA4C3.IP)
[18:45:52] *** Quits: kermiadsa (Mibbit@C716B727.FA4B7B67.B95DA4C3.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[18:48:10] *** Quits: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net) (Ping timeout)
[18:48:20] *** Quits: erickt (erickt@49C4075F.3AC15C18.2321E71E.IP) (Ping timeout)
[18:48:33] *** Joins: MrByte (Dartakio@moz-81792842.chy-wy.client.bresnan.net)
[18:49:47] *** Quits: janra (Janus@1CDC5701.A48867D7.52E4E107.IP) (Ping timeout)
[18:50:52] *** Quits: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com) (Client exited)
[18:50:56] *** Joins: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com)
[18:53:52] *** Quits: tgkokk (user@moz-BF0AF9D2.home.otenet.gr) (Ping timeout)
[18:56:46] *** Joins: jeaye (jeaye@moz-34FEF2BB.hsd1.ca.comcast.net)
[18:56:55] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[18:59:32] *** Quits: willingc (willingc@moz-F095E013.san.res.rr.com) (Client exited)
[18:59:43] *** Quits: FrozenCow (FrozenCow@moz-54300F7F.upc-j.chello.nl) (Client exited)
[19:01:25] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[19:02:00] *** Quits: doener (doener@moz-C68F600D.unity-media.net) (Quit: leaving)
[19:03:00] *** Joins: ctangent (textual@moz-B39BAE1D.public.wayport.net)
[19:03:17] *** Quits: blank_name (blank_name@AB55F408.AA624E84.6D228269.IP) (Ping timeout)
[19:03:50] *** Quits: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net) (Quit: Leaving)
[19:03:50] *** Quits: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP) (Ping timeout)
[19:06:53] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[19:07:20] *** Joins: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP)
[19:07:42] *** Quits: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca) (Quit: canhtak)
[19:07:48] *** Joins: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP)
[19:08:15] *** Joins: Jesin (Jesin@moz-3A2C5D36.washdc.fios.verizon.net)
[19:09:34] *** Joins: pnkfelix (pnkfelix@moz-43495417.fbx.proxad.net)
[19:09:34] *** ChanServ sets mode: +o pnkfelix
[19:10:15] <ctangent> hi all, I'm having a little bit of trouble with polymorphism in rust with traits - so a trait itself isn't a type, right? so in order to get, say, something that is a reader, you'll need a type parameter with a constraint?
[19:10:33] <Havvy> You can use a trait as a type.
[19:10:35] *** Joins: canhtak (canhtak@moz-641FE58F.wl.t.ulaval.ca)
[19:10:44] <Havvy> Sort of like Interfaces in Java.
[19:11:00] <ctangent> oh, hmm. I thought the compiler was complaining about that but I'll try it again
[19:11:13] <Havvy> What error are you getting?
[19:11:25] *** Joins: janra (Janus@1CDC5701.A48867D7.52E4E107.IP)
[19:12:25] <ctangent> lexer.rs:55:27: 55:50 error: failed to find an implementation of trait std::io::Reader for &'a std::io::Reader<no-bounds>
[19:12:25] <ctangent> lexer.rs:55             input_stream: io::BufferedReader::new(input),
[19:12:52] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[19:12:59] *** Joins: doskey (daniel@moz-82F8E8BD.adsl.012.net.il)
[19:13:17] *** Joins: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP)
[19:13:37] <Havvy> Umm, weird.
[19:13:40] <ctangent> the "input" variable here is the io::Reader
[19:14:26] <ctangent> the code is https://gist.github.com/swgillespie/9996631 - line 52-60
[19:15:46] <Havvy> Oh, I think you need to pass a ~io:Reader
[19:16:20] <Havvy> (I don't actually know...I'm still trying to come to grips with the full type system myself.)
[19:16:25] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[19:16:31] <ctangent> haha :) I'll try that
[19:16:53] <Havvy> You shouldn't need the lifetime after that either.
[19:17:17] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Ping timeout)
[19:17:24] *** Joins: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP)
[19:17:27] <jadbaires> really basic question:   if you have  px:~int  and x:int  how do you set px to be such that *px = x?
[19:17:46] <ctangent> that worked, thanks Havvy !
[19:17:50] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[19:18:00] *** Joins: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net)
[19:18:08] *** Joins: frozendevil (Adium@moz-A9D8109F.hsd1.wa.comcast.net)
[19:18:28] <Havvy> ctangent:  Since we can't know the size of a struct implementing an interface, if we want to pass them around, we have to pass them around by pointer.
[19:18:32] <pnkfelix> jadbaires: you want to mutate `px` that has already been allocated?  Or do you want to know how to initialize it initially?
[19:18:49] <jadbaires> pnkfelix: initialise it
[19:18:55] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[19:19:13] <ctangent> ahhhh, makes sense. Sort of why you can't do run-time polymorphism in c++ with non-pointers
[19:19:13] <pnkfelix> jadbaires: so e.g. `let x : int = 3; let px : ~int = ~x; ...`
[19:19:30] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[19:19:30] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[19:19:41] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[19:19:47] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[19:19:52] <pnkfelix> jadbaires: or if you want to let type inference do its thing, `let x = 3i; let px = ~x; ...`
[19:19:56] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[19:20:09] <jadbaires> pnkfelix: doesn't that make px point to the same memory location where x is stored?
[19:20:29] <jadbaires> pnkfelix: maybe I didn't explain well... I'd like it to be a new memory region with a copy of that value
[19:20:30] <pnkfelix> jadbaires: no, that would be `let ref_x = &x; ...`
[19:20:34] <ctangent> Havvy: works perfectly, thanks :)
[19:20:58] <Havvy> You're welcome.
[19:21:00] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[19:21:05] <Havvy> Glad to be of assistance.
[19:21:09] *** Joins: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net)
[19:21:16] <pnkfelix> jadbaires: yes, and `~<expr>` allocates a location on the heap to hold the value for <expr>, and then evaluates <expr>, and stores its value in that location.
[19:21:29] <jadbaires> pnkfelix: right so prefixing x with ~ means owned pointer to a memory egion with value x? 
[19:21:34] <jadbaires> pnkfelix: got it
[19:21:39] <jadbaires> pnkfelix: thank you!
[19:21:55] *** Quits: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP) (Ping timeout)
[19:22:24] *** Joins: rustilite (rustilite@moz-61B073BC.cpe.net.cable.rogers.com)
[19:22:31] *** Joins: rusti (rusti@moz-61B073BC.cpe.net.cable.rogers.com)
[19:22:49] *** Joins: pepijndevos (pepijndevo@9EACEF43.E50A3180.BCE47D84.IP)
[19:23:41] *** Quits: rootnode (rootnode@moz-1E97D78F.pools.arcor-ip.net) (Ping timeout)
[19:24:11] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[19:24:52] *** Joins: fazal (fazal@E43CDEC2.DD69F2BB.E8916D75.IP)
[19:25:06] *** Quits: wilmoore (wilmoore@moz-56296280.public.wayport.net) (Ping timeout)
[19:25:09] *** Quits: soumyaC (uid15286@moz-E77DEB21.irccloud.com) (Quit: Connection closed for inactivity)
[19:25:37] *** Joins: rylev (rylev@moz-EEFDD4E7.cust.telecolumbus.net)
[19:25:51] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[19:26:46] *** Quits: ziad (ziad@moz-C0318336.hsd1.ca.comcast.net) (Quit: ziad)
[19:26:59] *** Quits: jdm (jdm@moz-AC9499B2.cable.teksavvy.com) (Quit: Lost terminal)
[19:27:01] *** Quits: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net) (Ping timeout)
[19:27:16] <ctangent> can you debug rust with gdb?
[19:27:17] *** Quits: rylev (rylev@moz-EEFDD4E7.cust.telecolumbus.net) (Ping timeout)
[19:27:44] <pnkfelix> ctangent: I've heard it works fine on linux
[19:27:53] <ctangent> ooh, very cool.
[19:27:58] <eddyb> also, lldb
[19:28:08] <pnkfelix> ctangent: I haven't tried on mac recently.
[19:28:28] *** Joins: wilmoore (wilmoore@moz-56296280.public.wayport.net)
[19:28:38] <ctangent> lldb looks like it'll probably play nicer with mac
[19:28:55] *** Joins: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net)
[19:29:11] <ctangent> that's way cool, though
[19:30:46] <TeXitoi> Mmm segmented stacks are still used?
[19:30:57] *** Joins: rootnode (rootnode@moz-6C1006A7.pools.arcor-ip.net)
[19:31:08] *** Joins: alonlevy (alon@moz-B6210BD6.red.bezeqint.net)
[19:31:09] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[19:31:14] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[19:31:18] *** Quits: heftig (heftig@moz-45B9D694.dip0.t-ipconnect.de) (Quit: Quitting)
[19:31:21] <TeXitoi> oxidize: i686-unknown-linux-gnu/stage2/lib/rustlib/x86_64-unknown-openbsd/lib/libstd
[19:31:24] <TeXitoi> LLVM ERROR: Segmented stacks not supported on this platform.
[19:31:34] *** Quits: fazal (fazal@E43CDEC2.DD69F2BB.E8916D75.IP) (Ping timeout)
[19:32:02] *** Quits: doskey (daniel@moz-82F8E8BD.adsl.012.net.il) (Quit: doskey)
[19:32:16] *** Quits: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net) (Ping timeout)
[19:32:19] *** Quits: jackneill (jackneill@moz-B2E450A5.pool.digikabel.hu) (Input/output error)
[19:32:32] <eddyb> TeXitoi: no, they aren't, we just use the "morestack" for safe stack overflow errors
[19:32:51] <eddyb> s/errors//
[19:32:55] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[19:33:05] <eddyb> (well, I meant to say "contained failure instead of UB")
[19:33:12] <TeXitoi> eddyb: what do you propose for my problem?
[19:33:21] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[19:33:33] <eddyb> well...
[19:33:43] <eddyb> TeXitoi: go take a look at our LLVM patches
[19:33:56] <eddyb> (src/llvm should get you there, in the github UI)
[19:34:09] <TeXitoi> ok
[19:34:14] <TeXitoi> thanks
[19:35:03] <eddyb> it might just be copy-paste
[19:37:38] *** Joins: wavepirate (Mibbit@moz-862B8CAD.dsl.teksavvy.com)
[19:38:07] *** Quits: ctangent (textual@moz-B39BAE1D.public.wayport.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:38:24] *** Quits: josh (josh@moz-348C4790.hsd1.mn.comcast.net) (Quit: josh)
[19:38:34] *** Quits: pczarn (pczarn@moz-69A55FA.izacom.pl) (Input/output error)
[19:39:05] <TeXitoi> eddyb: I hope so ;)
[19:39:41] *** Quits: evanm (evanm@moz-4D6F9A00.hsd1.ca.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[19:39:57] *** Quits: wavepirate (Mibbit@moz-862B8CAD.dsl.teksavvy.com) (Quit: http://www.mibbit.com ajax IRC Client)
[19:41:33] *** Joins: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no)
[19:45:16] *** flaper87|afk is now known as flaper87
[19:45:30] *** Quits: noam (noam@F6B530A7.720527A7.416762B.IP) (Ping timeout)
[19:45:43] *** Quits: FlyingFoX (quassel@moz-8F529370.weh.rwth-aachen.de) (Quit: http://quassel-irc.org - Chat comfortably. Anywhere.)
[19:45:48] *** Joins: FlyingFoX (quassel@moz-8F529370.weh.rwth-aachen.de)
[19:46:28] *** Joins: noam (noam@F6B530A7.720527A7.416762B.IP)
[19:46:34] *** Quits: bvssvni (Mibbit@moz-A47B6F8E.bb.online.no) (Quit: http://www.mibbit.com ajax IRC Client)
[19:47:26] *** Quits: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP) (Client exited)
[19:49:01] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[19:49:04] *** Quits: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt) (Connection reset by peer)
[19:49:12] *** Joins: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt)
[19:49:15] *** Joins: hacker_sam (hacker_sam@C0FE520A.661C02A7.B0CE379A.IP)
[19:49:38] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[19:51:10] *** Joins: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP)
[19:51:13] *** Quits: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP) (Ping timeout)
[19:51:42] *** Joins: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net)
[19:52:08] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[19:53:03] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[19:53:19] *** Joins: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net)
[19:53:39] <TeXitoi> eddyb: OK, I think I found something, just copy FreeBSD, and we'll see, 2 hours of compilation now :)
[19:53:50] *** Joins: jesse99 (jesse99@moz-D8DE13A5.hsd1.wa.comcast.net)
[19:53:54] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[19:53:55] *** Joins: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net)
[19:54:22] *** Joins: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP)
[19:54:35] *** Joins: tgkokk (user@moz-BF0AF9D2.home.otenet.gr)
[19:55:15] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[19:56:16] *** Joins: lerc (quassel@moz-82B68322.telstraclear.net)
[19:56:19] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[19:56:54] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[19:58:09] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[19:59:10] *** Quits: ksf (ksf@moz-895A71AA.adsl.hansenet.de) (Quit: Leaving)
[19:59:30] *** Joins: devbug (quassel@moz-8C40558B.bchsia.telus.net)
[19:59:44] *** Joins: jroweboy (jrowe7@moz-18814A6B.provo.static.broadweavenetworks.net)
[20:02:35] *** Quits: kngl (Adium@40AE2BF6.ABCDAFD6.7C797F8E.IP) (Quit: Leaving.)
[20:02:52] <jroweboy> Hello everyone! I just noticed that the serialize::Encoder trait was changed so that now it takes a type parameter E and each of the functions needs to return a Result<(), E> I'm guessing that the E is referring to some user defined error struct, but do I really need to make a Error struct or is there some other builtin struct I can use
[20:03:29] <eddyb> jroweboy: what side are you working on?
[20:03:53] *** Joins: jaras (textual@1CDC5701.A48867D7.52E4E107.IP)
[20:03:54] <jroweboy> I'm updating rust mustache again and it has a struct that impls Encoder
[20:04:08] <eddyb> can it ever error?
[20:05:04] <jroweboy> Right now it just fails! all over the place instead of returning errors :) I was planning on updating those so it doesn't fail
[20:05:18] *** Joins: derek_c (derek@moz-A43430DA.cit.cornell.edu)
[20:05:19] *** Joins: joebobjoe (mckin_000@1EEF8F2.50A2C647.5A42B74E.IP)
[20:05:30] *** Quits: Cromulent (Cromulent@moz-C2470BE2.cable.virginm.net) (Quit: KVIrc 4.2.0 Equilibrium http://www.kvirc.net/)
[20:06:10] <Eridius> jroweboy: why is it failing? Is it because of I/O that it doesn't want to handle?
[20:06:16] <joebobjoe> Does the term "static analysis" strictly apply to code analysis that does involve the compiler? When a compiler does code analysis is it not "static analysis?"
[20:06:16] *** Quits: wilmoore (wilmoore@moz-56296280.public.wayport.net) (Ping timeout)
[20:06:32] <Eridius> jroweboy: if your only way to fail is I/O you can go ahead and use IoResult<T> which is really just shorthand for Result<(),IoError>
[20:06:33] <joebobjoe> Oh, and is "static analysis" a "term," since it is two words? :D
[20:06:38] <Eridius> jroweboy: and then use try!() around your I/O
[20:06:44] *** Quits: jaras (textual@1CDC5701.A48867D7.52E4E107.IP) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[20:06:50] <Eridius> jroweboy: but if you have other failure modes, you can define your own enum that represents them and use that in your Result
[20:07:40] <Eridius> joebobjoe: term |tərm| noun. 1.  a word or phrase used to describe a thing or to express a concept, esp. in a particular kind of language or branch of study
[20:07:49] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[20:09:05] *** Joins: p1start (rewi@moz-E7F3D014.org)
[20:09:45] *** Quits: tgkokk (user@moz-BF0AF9D2.home.otenet.gr) (Ping timeout)
[20:10:29] <jroweboy> oh, thanks for mentioning that, just noticed that erickt went and updated the code to 0.10 already so I don't have to update it :) I see what it should look like now though and it makes sense. Thanks!
[20:10:29] *** Joins: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP)
[20:10:41] <dpc> What was the syntax for struct destruction ?
[20:10:48] <dpc> let mut { } = *self; 
[20:10:50] <eddyb> dpc: destructuring, you mean?
[20:11:00] <eddyb> dpc: let StructName {....} = x;
[20:11:05] <Eridius> dpc: loet StructName { a, b, c} = x
[20:11:06] <dpc> I want to borrow two fields at once.
[20:11:10] <Eridius> where a b and c may have ref and mut qualifiers
[20:11:23] <dpc> Mutably.
[20:11:24] <Eridius> and if you don't want to list every field you can use ... (or is it ..?) to elide the rest
[20:11:35] <Eridius> let StructName { ref mut a, ref mut b, ... } = x
[20:11:35] <eddyb> dpc: ref mut
[20:11:52] <Eridius> dpc: it's the exact same pattern you'd write for a match arm
[20:12:05] <Eridius> but with `let` it has to be irrefutable (e.g. the match can't fail)
[20:12:39] <dpc> Thanks.
[20:12:42] <benh> does a "Closes #12345" in the text of a pull request work to close issues automatically when the pull request gets merged or does it have to be in an actual commit message?
[20:13:04] *** Joins: arielb1 (tali@moz-8F646A97.red.bezeqint.net)
[20:13:07] <benh> I don't like putting it in the commit message because then the issue gets pinged every time I force-push my branch :(
[20:13:16] <Eridius> benh: it should work in the PR
[20:13:22] <benh> ok
[20:14:09] *** Quits: koderok (Thunderbir@36CE48D7.F8CFC4C2.50E99975.IP) (Quit: koderok)
[20:14:12] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[20:14:21] *** Parts: jroweboy (jrowe7@moz-18814A6B.provo.static.broadweavenetworks.net) ()
[20:15:27] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:15:52] *** Joins: heftig (heftig@moz-45B9D694.dip0.t-ipconnect.de)
[20:17:54] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[20:17:57] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[20:19:37] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[20:19:38] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[20:21:29] *** Joins: edwardw (edwardw@B5386878.16F55560.50B134B9.IP)
[20:21:39] *** Joins: nieksand (Mibbit@moz-90AF4E6E.tukw.qwest.net)
[20:22:10] *** Quits: tobytailor (tobytailor@moz-CBD810C7.hsd1.ca.comcast.net) (Quit: tobytailor)
[20:22:33] *** Joins: meyer (meyer@moz-A9CF56E4.hsd1.ca.comcast.net)
[20:24:04] *** Joins: p1start1 (rewi@moz-E7F3D014.org)
[20:24:17] *** Quits: p1start (rewi@moz-E7F3D014.org) (Quit: Leaving.)
[20:24:26] *** Quits: edwardw (edwardw@B5386878.16F55560.50B134B9.IP) (Quit: Leaving...)
[20:24:32] *** Joins: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP)
[20:24:49] *** Joins: p1start (rewi@moz-E7F3D014.org)
[20:24:52] *** Quits: p1start1 (rewi@moz-E7F3D014.org) (Connection reset by peer)
[20:25:46] *** Quits: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP) (Ping timeout)
[20:26:05] *** Joins: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP)
[20:26:08] *** Joins: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net)
[20:26:12] *** Quits: infynyxx (infynyxx@DB780A29.749BA1D.DCC373F0.IP) (Ping timeout)
[20:26:23] *** Joins: rylev (rylev@moz-9BBEC99C.cust.telecolumbus.net)
[20:27:53] <meyer> I'm getting a SIGSEGV (Address boundary error). I'm pretty sure I know what is causing it, but am not exactly sure of the proper remedy.
[20:28:00] *** Quits: blank_name (blank_name@4E09E8F4.3C0D267A.6D228269.IP) (Ping timeout)
[20:28:04] *** Quits: rylev (rylev@moz-9BBEC99C.cust.telecolumbus.net) (Ping timeout)
[20:28:07] <derek_c> I'm writing a wrapper for a C library and here is a problem: one of the APIs takes a C function pointer.  Now, to wrap it, I ask for a Rust function from the user, then create an extern "C" function which calls the user-supplied function.  However, the compiler is telling me "can't capture dynamic environment in a fn item", and advises me to use the closure form instead.  An yet I'm not sure if you can expose a closure as an extern C function...
[20:28:07] <derek_c>  does anyone know how to get around this?
[20:28:09] *** Joins: rylev (rylev@moz-9BBEC99C.cust.telecolumbus.net)
[20:28:34] *** Quits: ahunt (ahunt@moz-6D6D79D6.cable.virginm.net) (Ping timeout)
[20:28:45] *** Joins: gimpf (gimpf@moz-F1EE3FEC.adsl.highway.telekom.at)
[20:28:53] <meyer> The code in question: https://gist.github.com/Meyermagic/9997668 . I'm pretty sure it has to do with the &path in the filter_map's closure 
[20:28:54] <derek_c> the reason I need to capture the environment is that I need to call the user-supplied function inside the extern C function
[20:29:32] *** Quits: skade (skade@moz-6444221B.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[20:29:34] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[20:29:39] <arielb1> does the C code provide a  context pointer?
[20:29:50] <derek_c> arielb1: what do you mean?
[20:29:50] *** Quits: rylev (rylev@moz-9BBEC99C.cust.telecolumbus.net) (Ping timeout)
[20:30:00] <derek_c> arielb1: oh I see. no
[20:30:01] <arielb1> does it allow you to pass a void* to the function
[20:30:13] *** Joins: blank_name (blank_name@F6A7B6FC.3527F9CE.93A5C78C.IP)
[20:30:23] <arielb1> you may have to use a thread-local variable
[20:30:40] <derek_c> arielb1: could you elaborate?
[20:31:05] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[20:31:12] <arielb1> typically C callbacks make you provide a (ptr, function ptr) pair
[20:31:14] <sfackler> meyer: I'd guess it's this: https://github.com/mozilla/rust/issues/11971
[20:31:21] <arielb1> and call the function ptr with the ptr
[20:31:34] *** Quits: nieksand (Mibbit@moz-90AF4E6E.tukw.qwest.net) (Quit: http://www.mibbit.com ajax IRC Client)
[20:31:56] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[20:31:59] *** Quits: gimpf (gimpf@moz-F1EE3FEC.adsl.highway.telekom.at) (Quit: Leaving.)
[20:32:30] <arielb1> what's the C function in your gist?
[20:33:18] <meyer> sfackler: If so, it throws an error at runtime, which is better than silently allowing unsound behavior
[20:33:22] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[20:33:37] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[20:33:52] <arielb1> If an API does not allow you pass a pointer
[20:34:01] <arielb1> and you want to wrap a function/provide a context
[20:34:39] <arielb1> you must either create a wrapper function at runtime or pass the context in a global variable
[20:34:47] <arielb1> which should probably be a thread variable
[20:35:39] <arielb1> derek_c: actually,  can you wrap your function in a trait?
[20:36:03] <derek_c> arielb1: arielb1 what do you mean by wrapping a function in a trait?
[20:37:12] <arielb1> Do you intend to pass an environemnt to your function?
[20:37:31] <arielb1> or does it bind no variables?
[20:37:49] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Connection reset by peer)
[20:37:54] *** Quits: arielb1 (tali@moz-8F646A97.red.bezeqint.net) (Quit: ircII EPIC5-1.1.7 -- Are we there yet?)
[20:37:59] *** Joins: brson (brson@moz-62518563.mtv2.mozilla.com)
[20:37:59] *** ChanServ sets mode: +ao brson brson
[20:38:16] *** Joins: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com)
[20:39:15] *** Quits: sankha93 (sankha93@7061CD01.D6BD0D91.22D41759.IP) (Ping timeout)
[20:39:30] *** Quits: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net) (Input/output error)
[20:39:42] <derek_c> arielb1: yeah, the user will give me a Rust function, and I need to somehow create an extern C function, in which I call the Rust function
[20:40:36] <_achin> i've got calls to Result::unwrap() everywhere.  one of them is failing, but i have no idea which one.  what's the best way to debug this?
[20:41:04] *** Joins: ksf (ksf@moz-895A71AA.adsl.hansenet.de)
[20:41:14] <derek_c> _achin: gdb perhaps
[20:41:21] <derek_c> _achin: or just log
[20:41:45] <_achin> i thought there used to be a version of unwrap() that let me specify a string to print right before failure, but i can't find this anymore
[20:43:10] *** Joins: sockmister (Mibbit@moz-C5F63CEB.pppoe.mtu-net.ru)
[20:43:20] <sockmister> hey
[20:43:24] <sockmister> anybody here?
[20:43:34] <sockmister> i think i have critical bug
[20:43:46] *** Parts: sqwishy (sqwishy@moz-9F4F9435.va.shawcable.net) ()
[20:44:12] <sockmister> who is this fucking genious that left me in my perfomance??
[20:44:22] <o11c> _achin: for Option it's .expect() ...
[20:44:24] <ctangent> _achin: http://static.rust-lang.org/doc/master/std/option/enum.Option.html#method.expect
[20:44:43] <dpc> sockmister: ?
[20:44:48] <_achin> ahh, that's it.  thanks!  to obad i'm using a Result, though 
[20:44:53] <ctangent> D:
[20:45:33] <sockmister> dpc: i have an blue screen of death, than i run my rusty program :D
[20:45:46] <dpc> *when ?
[20:45:47] *** Joins: subhashb (Adium@2AA91E64.90F00052.422D491.IP)
[20:45:51] <sockmister> on x32 windows 7
[20:46:04] <sockmister> and wtf?
[20:46:05] <ctangent> i think you have other problems if you are bluescreening
[20:46:05] <dpc> You probably just have a broken hardware.
[20:46:22] <ctangent> what's the STOP code?
[20:46:22] <eddyb> does windows 7 support x32?
[20:46:23] <rpearl> win 13
[20:46:28] <sockmister> oh u think so
[20:46:34] <ctangent> yeah it does
[20:46:37] <_achin> ctangent: i guess for debugging i can convert Results to Options
[20:46:45] <sockmister> i have no stop code... only blue screen and than reset
[20:46:45] <eddyb> x32 is only like four years old, though
[20:46:51] <o11c> _achin: .expect is not terribly difficult to implement ...
[20:46:57] <eddyb> for sure after windows 7 was released
[20:47:06] <ctangent> oh I thought he was saying 32-bit
[20:47:08] <ctangent> o_o
[20:47:11] <sockmister> it s in hello world program
[20:47:17] <dpc> Wait ...
[20:47:18] <ctangent> sockmister: every BSOD has a stop code
[20:47:18] <_achin> o11c: true, good point
[20:47:20] <eddyb> x32 is x64 with 32-bit pointers
[20:47:21] <dpc> sockmister: You talk about game?
[20:47:23] <o11c> no, x32 means 32-bit pointers but 64-bit registers
[20:47:34] <eddyb> dpc: no
[20:47:44] <eddyb> sockmister: something else is wrong ;)
[20:47:59] <eddyb> sockmister: it's the worst coincidence of your life, oh well
[20:48:11] <sockmister> ok... u smiling
[20:48:15] <eddyb> sockmister: unless you can reproduce it, in which case we'd want to see at least some kind of screencap
[20:48:25] <sockmister> but you dont think than u missing something
[20:48:38] <sockmister> and there is bug on win7
[20:48:56] <ctangent> if rust causes win7 to bsod then that's windows's problem
[20:49:04] <Tobba> uhhhh
[20:49:07] <sockmister> i can send u vmware :D if you want
[20:49:10] <Tobba> fuckin hell
[20:49:26] *** Joins: willingc_ (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[20:49:27] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[20:49:27] <Tobba> finally thought I got culling working but I need to redo it all to manipulate the list in-place
[20:49:32] <Tobba> theres no way this will ever pass borrowck otherwise
[20:49:33] <sockmister> vmware snapshot
[20:49:37] <ctangent> sockmister: if you could provide the stopcode that would be useful
[20:49:41] <eddyb> sockmister: did this happen in vmware?
[20:49:50] <sockmister> year on wmvare
[20:49:52] <sockmister> :D
[20:50:01] <eddyb> screenshot of BSOD or nothing :)
[20:50:05] <ctangent> ^ :P
[20:50:29] <eddyb> (and really, a virtual machine changes things. now we have vmware bugs to consider as well)
[20:50:30] <sockmister> i can send u photot
[20:50:34] <eddyb> sure
[20:50:46] <sockmister> link here?
[20:50:49] <eddyb> yeah
[20:50:53] <sockmister> okay
[20:51:01] <sockmister> moment
[20:51:04] *** Quits: willingc_ (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Connection reset by peer)
[20:51:05] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[20:51:07] <eddyb> sockmister: but I bet that if you restart the VM and run the Rust hello world again, nothing will happen. 99.99% sure
[20:52:17] *** Quits: whitglint (uid15486@moz-31ABA2C0.irccloud.com) (Quit: Connection closed for inactivity)
[20:52:36] *** Joins: pepper_chico (pepper_chi@EB1D9484.8A9E5939.F546FA5F.IP)
[20:53:53] *** Joins: happy-dude (Adium@moz-1C988E45.wireless.rit.edu)
[20:54:13] <sockmister> I filmed ше
[20:54:14] <sockmister> it
[20:54:26] <sockmister> i catch this error
[20:54:31] <sockmister> wait for moment
[20:54:43] <sockmister> what u want to see on screen?
[20:54:45] *** Quits: happy-dude (Adium@moz-1C988E45.wireless.rit.edu) (Quit: Leaving.)
[20:55:27] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Quit: Konversation terminated!)
[20:55:27] <Tobba> so what about that screenshot
[20:55:33] <Tobba> and can you please type properly
[20:55:40] <Tobba> I dont read twitter
[20:55:44] <sockmister> ok
[20:55:46] <eddyb> me
[20:55:48] <eddyb> neither
[20:55:58] <sockmister> what u want to see on screenshot?
[20:55:59] <eddyb> (aren't enter keys wonderful?)
[20:56:06] <eddyb> sockmister: the VM window
[20:56:08] <sockmister> blue death
[20:56:09] <sockmister> ?
[20:56:10] <Tobba> I overuse my enter key way too much
[20:56:14] <eddyb> sockmister: yupp
[20:56:14] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[20:56:16] *** Quits: JamesNZ (james@moz-264643C7.bitstream.orcon.net.nz) (Client exited)
[20:56:18] <sockmister> ok
[20:56:22] <sockmister> wait a moment
[20:56:35] <eddyb> Tobba: I always press it by accident in the middle of a very long line :P
[20:56:40] <Tobba> heh
[20:56:47] <Tobba> I usually type as I think
[20:56:59] <eddyb> and then my perfect drama/exposition is ruined
[20:57:00] <Tobba> so that + multitasking can end up with pretty short lines
[20:57:06] <eddyb> same here :))
[20:57:30] <Tobba> ugh
[20:57:37] <Tobba> I want to cull renderables from this list
[20:57:40] <sockmister> ok
[20:57:43] <sockmister> u all ready>
[20:57:44] <eddyb> now, about that thing I have to debug. why can't trans play nicely, at least this time?
[20:57:44] <sockmister> ?
[20:57:53] *** Joins: tgkokk (user@moz-BF0AF9D2.home.otenet.gr)
[20:57:54] <sockmister> look at this
[20:57:55] <eddyb> sockmister: pls no scary shit. it's late here
[20:57:59] <Tobba> but Client is borrowed when I add the items in this list, so I cant run at get_icon
[20:58:09] <Tobba> so I'll have to make a new list of culled stuff, eugh
[20:58:11] <sockmister> this is what i saw then i run hello world program on my vmWare
[20:58:11] <sockmister> http://tinypic.com/view.php?pic=vd0egi&s=8#.U0Bu-fl_ukE
[20:58:18] <eddyb> Tobba: use iterators?
[20:58:26] <Tobba> I expected nothing more than that
[20:58:32] <Tobba> (for anyone at work, nsfw)
[20:58:33] <dpc> I love long lines spawning over a more than just one sentence. Like this one. The problem with it, is by the time I compose them, the topic has already changed.
[20:58:34] <eddyb> DAMMIT
[20:58:41] <eddyb> someone ban sockmister
[20:58:43] <ctangent> lolz
[20:58:49] *** Joins: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net)
[20:58:52] <sockmister> :D
[20:58:55] <meyer> Alright. I still can't get this to work. I'm probably missing something obvious. In https://gist.github.com/Meyermagic/9997668 , I want "path" to be moved or copied into the environment of the closure. As written, it compiles without error, but throws a SIGSEGV (Address boundary error) at runtime. If I create a new path inside the closure from a string literal, it works.
[20:58:57] <sockmister> nicely?
[20:59:01] <dpc> I knew it!
[20:59:09] <Tobba> yeah I wasent expecting anyone who would type in a that retarded manner to be able to operate vmware
[20:59:09] <dpc> I knew sockmister was an idiot or troll. :D
[20:59:12] <ctangent> i'd give it a 6/10
[20:59:14] <Tobba> or an IRC client
[20:59:20] *** Joins: medja (medja@moz-73D59472.dynamic.amis.net)
[20:59:25] <eddyb> ctangent: that's what she said
[20:59:33] <Tobba> i'd give that a 6/10 too
[20:59:33] <ctangent> lol
[20:59:37] <Tobba> seen way better
[20:59:50] * eddyb doesn't like channels without ops ready to kick
[20:59:59] <eddyb> acrichto: wakey wakey
[21:00:19] <eddyb> Tobba: oh, I guess it's Saturday afternoon in US. tough luck
[21:00:24] <Tobba> heh
[21:00:26] <dpc> Does #rust had more occurences of trolls?
[21:00:32] <eddyb> dpc: it's rare
[21:00:47] <dpc> It's more of the midday in the US now.
[21:00:53] *** yusukesuzuki is now known as yusukesuzuki-off
[21:01:02] *** Joins: WalrusPony1 (retep998@moz-530D0BB2.dhcp.oxfr.ma.charter.com)
[21:01:07] <dpc> Well, I guess technically it's afternoon... :D
[21:01:12] *** Quits: WalrusPony (retep998@moz-99A61A25.dhcp.oxfr.ma.charter.com) (Ping timeout)
[21:02:37] *** Quits: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com) (Ping timeout)
[21:02:40] <sfackler> meyer: normal closures don't own the variables they close over. You shouldn't be allowed to cast that iterator to an ~Iterator, but there's a bug allowing you to
[21:03:06] *** Quits: tgkokk (user@moz-BF0AF9D2.home.otenet.gr) (Ping timeout)
[21:03:55] <meyer> sfackler: If I returned a &Iterator<Path>, it would have a lifetime matching the "contents" variable in the function, though, wouldn't it? Then not be allowed to be returned.
[21:04:03] <meyer> What is the proper way to do this?
[21:04:13] *** Quits: subhashb (Adium@2AA91E64.90F00052.422D491.IP) (Quit: Leaving.)
[21:04:43] <eddyb> not use iterator trait objects?
[21:05:15] <meyer> The sample is extracted from a method on a "Tree" structure, for which different implementations will return different types of Iterators
[21:05:21] <meyer> Which I need to use in a heterogenous list
[21:05:25] <pastry> Hi, I can't seem to be able to use a "stack" of vecs when obtaining a mut ref to its last element http://kib2.free.fr/pastebin/view_paste.php?id=236 anyone can point to where I'm wrong?
[21:07:36] <meyer> Sorry, that was "Tree" trait. The different structures which implement it have different methods of iterating over the sub-trees.
[21:07:58] *** Quits: pepper_chico (pepper_chi@EB1D9484.8A9E5939.F546FA5F.IP) (Quit: WeeChat 0.4.1)
[21:08:14] <meyer> eddyb: Any suggestions?
[21:08:22] *** Joins: koomi (koomi@moz-41AD638A.uberspace.de)
[21:08:33] *** Quits: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se) (Ping timeout)
[21:08:51] <eddyb> no idea, sorry :(
[21:08:57] *** Joins: jviereck (Adium@moz-B48E7279.dclient.hispeed.ch)
[21:08:57] *** Joins: skade (skade@moz-6444221B.dip0.t-ipconnect.de)
[21:09:07] *** Quits: fhahn (fhahn@moz-7924DB5C.vie.surfer.at) (Ping timeout)
[21:09:24] <eddyb> meyer: do you use Tree as a trait object, or via generics?
[21:10:30] <pastry> sorry, here's the problem: apparently I cannot borrow `stack: ~[ ~[uint] ]` as mutable more than once at a time
[21:10:55] <meyer> Trait objects. I'm building a VCS, and a "Tree" can refer to a DiskTree (which uses readdir and always re-hashses stuff), a "MetTree", which refers to the data stores and doesn't recompute hashes, and some other implementations
[21:11:08] *** Quits: medja (medja@moz-73D59472.dynamic.amis.net) (Quit: )
[21:11:22] <eddyb> meyer: where do you store these Tree's?
[21:12:03] <meyer> Well, DiskTrees are always transient. I'll construct a DiskTree, get the changes relative to a MetTree representing HEAD, create a patch, etc.
[21:12:22] <eddyb> I mean, in the code
[21:12:42] <eddyb> pastry: you can't borrow anything mutably more than once
[21:12:58] <eddyb> pastry: it ensures memory safety
[21:13:00] <meyer> Well, nowhere yet, since I can't get my DiskTree to work 
[21:13:24] <eddyb> what structure would it be?
[21:13:34] <meyer> Oh.
[21:13:41] <pastry> eddyb: am I borrowing the vec when I take a mutable reference to one item of the vec?
[21:14:09] <eddyb> pastry: yes
[21:14:38] <meyer> eddyb: DiskTree is just struct DiskTree {path: Path}, EmptyTree is just struct EmptyTree; (with a special implementation). MetTree doesn't exist yet, but will store the hash it refers to in the datastore and a reference to the datastore struct
[21:14:52] <eddyb> pastry: you can get a mutable slice of the entire vector, with .as_mut_slice()
[21:15:01] <eddyb> pastry: that's a &mut [~[uint]]
[21:15:14] <eddyb> pastry: now I think there's a method on &mut [T] to split it into two parts
[21:15:34] *** Quits: sockmister (Mibbit@moz-C5F63CEB.pppoe.mtu-net.ru) (Quit: http://www.mibbit.com ajax IRC Client)
[21:15:36] <eddyb> meyer: not that. what would *contain* any of those trees?
[21:16:01] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[21:16:51] <eddyb> meyer: btw, if it's a closed set, you can use an enum
[21:17:01] <pastry> eddyb: thanks, but I'm not sure it does my use case. to be clear: I want to keep pushing to the vec that's topmost on the vec used as stack
[21:17:04] <eddyb> (if you need to store any of those types somewhere)
[21:17:06] <meyer> eddyb: Oh. Well, DiskTrees will always be on the stack or passed around as arguments. I expect the normal flow is construct DiskTree from staging area, get changes, create patches, store them, etc. EmptyTrees are obviously just "constructed" as used, MetTrees will be stored in a few places.
[21:17:07] *** Joins: fhahn (fhahn@moz-7924DB5C.vie.surfer.at)
[21:17:11] *** Quits: spider-mario (spidermari@moz-81131DB6.fbx.proxad.net) (Input/output error)
[21:17:13] <Tobba> also apparently LTO on windows is fixed
[21:17:14] <Tobba> this is great
[21:17:35] <eddyb> meyer: then you don't need trait objects, do you now?
[21:17:41] <eddyb> meyer: ~Trait or &Tree, I mean
[21:17:46] <eddyb> s/Trait/Tree/
[21:18:39] <meyer> eddyb: Maybe not. I'll reconsider what I'm doing.
[21:18:44] *** Joins: esummers (esummers@moz-3B015C90.wi.res.rr.com)
[21:18:52] <eddyb> meyer: trait objects are last resort
[21:19:17] <eddyb> you should *struggle* to find a proper solution before going for them
[21:19:30] *** Joins: fournm (Aria@moz-ABB60BA0.austin.res.rr.com)
[21:20:31] <eddyb> (there are legitimate cases, where you have 5k lines of code and they rarely use a trait object - making that generic can lead to a lot of code bloat)
[21:21:14] *** Quits: esummers (esummers@moz-3B015C90.wi.res.rr.com) (Ping timeout)
[21:21:19] <meyer> eddyb: Alright. I'll try re-writing it. I actually need to head out and meet someone right now, though. Thanks for the help.
[21:21:23] *** Quits: skade (skade@moz-6444221B.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[21:21:24] *** Quits: dpc (Mibbit@3CA2DD5F.FAD414BA.D74CC41D.IP) (Quit: http://www.mibbit.com ajax IRC Client)
[21:23:09] *** Joins: skade (skade@moz-6444221B.dip0.t-ipconnect.de)
[21:24:08] *** Joins: pepper_chico (pepper_chi@EB1D9484.8A9E5939.F546FA5F.IP)
[21:26:16] *** Joins: bjz (bjz@B398BE78.F804C29E.D35A31DF.IP)
[21:26:16] *** Quits: bjz_ (bjz@B398BE78.F804C29E.D35A31DF.IP) (Connection reset by peer)
[21:26:25] <derek_c> can you have extern C closure?
[21:26:36] <derek_c> I'm writing an extern C function but it needs to capture the environment...
[21:26:52] <eddyb> derek_c: closures are magic
[21:27:07] <derek_c> eddyb: huh?
[21:27:13] <eddyb> derek_c: do you have an "user pointer" as an argument to that extern C fn?
[21:27:41] <derek_c> eddyb: what do you mean?
[21:27:59] <eddyb> derek_c: what arguments does that extern C fn have?
[21:28:07] <eddyb> from C code
[21:28:24] <derek_c> 1 sec
[21:28:36] <derek_c> http://upl.io/smiimn
[21:28:54] *** Joins: rylev (rylev@moz-F57C8FC.cust.telecolumbus.net)
[21:29:29] <eddyb> derek_c: O
[21:29:36] <eddyb> Tobba: ^^ enter key strikes again
[21:29:50] <Tobba> heh
[21:29:59] <eddyb> derek_c: I'm sorry to tell you this, but it ain't happening. there is no custom data that C can give you
[21:30:15] <eddyb> derek_c: what would you need to capture?
[21:30:30] *** Joins: happy-dude (Adium@moz-1C988E45.wireless.rit.edu)
[21:30:35] *** Quits: rylev (rylev@moz-F57C8FC.cust.telecolumbus.net) (Ping timeout)
[21:30:43] <derek_c> http://upl.io/b5j3pm
[21:31:10] <derek_c> eddyb: see the link above.  So I want the user to give me a function
[21:31:15] <eddyb> oh, an entire function? won't fly
[21:32:41] <eddyb> derek_c: pretty much the only thing you can do is stash the function in a static mut or TLD. but that's not nice
[21:32:42] <derek_c> eddyb: so I basically want to create an extern C function, in which I invoke the user-given function.  This is impossible?
[21:32:54] <eddyb> derek_c: Rust doesn't do trampolines
[21:33:00] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:33:08] <eddyb> Rust closures just have an extra argument for a pointer to their captures
[21:33:51] <derek_c> eddyb: I actually can also modify the C library however I want
[21:34:02] <eddyb> derek_c: haha why don't you say so :)
[21:34:06] <derek_c> eddyb: maybe I could change the C interface somehow?
[21:34:12] <derek_c> eddyb: :_
[21:34:15] <derek_c> :)
[21:34:20] <eddyb> derek_c: pass an user pointer
[21:34:32] <derek_c> eddyb: what do you mean?
[21:34:40] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[21:34:40] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[21:34:47] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[21:34:54] <eddyb> derek_c: well, you've probably written more C than I have, this should be in your blood :D
[21:35:00] *** Joins: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au)
[21:35:10] <eddyb> derek_c: busybee_mapper* busybee_mapper_create(lookup_func_t lookup, void *user_data);
[21:35:11] <o11c> instead of taking a function ret(args...), take both a function ret(opaque, args...) and opaque
[21:35:45] <eddyb> and give that user_data to the callback
[21:37:26] <derek_c> I might have just dropped offline.. did you guys say something?
[21:37:46] <eddyb> derek_c: take a void* in your C API that you pass to the callback
[21:38:15] <derek_c> eddyb: what does that void* point to?
[21:38:37] <eddyb> derek_c: doesn't matter. that's why it's an "user pointer"
[21:38:50] <derek_c> sorry I'm confused. so how does this look from the Rust side?
[21:38:58] *** Joins: hjr3 (hradtke@moz-39F72B9B.lsanca.fios.verizon.net)
[21:38:59] <eddyb> I was talking about the C side
[21:39:00] <derek_c> what does the user give me?
[21:39:08] <Manishearth> void*? In this room? O.o
[21:39:57] <derek_c> eddyb: I don't understand how this solves the problem.  don't I still have to capture a user-given function somehow?
[21:40:06] *** Quits: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net) (Ping timeout)
[21:40:13] <eddyb> derek_c: that's what the user pointer is for
[21:40:42] *** Joins: bytbox (s@moz-E1E7FAC3.washdc.fios.verizon.net)
[21:41:15] <eddyb> derek_c: I think this is enough https://gist.github.com/eddyb/21b325440723449eaa2c
[21:41:18] *** Quits: james4k (james@moz-9BB5AE72.consolidated.net) (Ping timeout)
[21:41:35] <eddyb> derek_c: I used a closure to be more flexible
[21:42:11] *** Quits: jviereck (Adium@moz-B48E7279.dclient.hispeed.ch) (Quit: Leaving.)
[21:44:01] *** Joins: Nekit1234007_ (Nekit12340@4CE4BE01.1B26E7DA.4707F662.IP)
[21:44:31] <derek_c> eddyb: ah, I finally see what you are doing
[21:44:32] *** Quits: Nekit1234007 (Nekit12340@450259EC.ABE6C08B.4707F662.IP) (Ping timeout)
[21:45:48] <derek_c> eddyb: cool I will give it a try. thanks!
[21:45:57] <derek_c> thanks a lot
[21:47:01] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[21:48:09] *** Quits: happy-dude (Adium@moz-1C988E45.wireless.rit.edu) (Quit: Leaving.)
[21:48:50] *** Quits: osa1 (omer@B066A08F.B684D6FA.4CEB6735.IP) (Ping timeout)
[21:49:28] *** Quits: skade (skade@moz-6444221B.dip0.t-ipconnect.de) (Ping timeout)
[21:49:29] *** Joins: james4k (james@moz-9BB5AE72.consolidated.net)
[21:52:20] <lukem> eddyb, hypothetical question about that code... if busybee_mapper_create() had for whatever reason launched off a separate thread, would it be ok for that thread to call the user lookup function? 
[21:52:36] <eddyb> ugh, no
[21:52:56] <lukem> is that because it's a closure? or in general?
[21:53:09] <eddyb> derek_c: I am assuming that busybee_mapper_create doesn't call the callback after it returns, is that correct?
[21:53:16] <eddyb> lukem: well, it's a stack closure
[21:53:20] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[21:54:56] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[21:55:16] <derek_c> eddyb: it does.  busybee_mapper_create returns a opaque structure. There is another API that invokes this callback, given the opaque pointer
[21:55:23] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[21:55:27] <eddyb> derek_c: oh :(
[21:55:36] <derek_c> eddyb: should be fine though?  what's the problem?
[21:55:49] <eddyb> derek_c: the user pointer is on the stack
[21:56:02] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[21:56:34] *** Quits: blank_name (blank_name@F6A7B6FC.3527F9CE.93A5C78C.IP) (Ping timeout)
[21:56:37] <eddyb> derek_c: in this case, you should be safer off making LookupFn a regular function again and sending that as the user pointer
[21:57:06] *** Quits: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com) (Ping timeout)
[21:57:07] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[21:58:56] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[21:59:00] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (services.mozilla.org (Too many invalid passwords))
[21:59:12] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:00:19] *** Joins: jeffreybaird (sid27661@moz-5F4AA75A.irccloud.com)
[22:00:53] *** Quits: Leo` (Leo@moz-83832FE2.placeholder.fr) (Ping timeout)
[22:02:34] <derek_c> eddyb: did you mean to say c_lookup is on the stack?
[22:02:46] <eddyb> derek_c: c_lookup, no
[22:02:52] <eddyb> derek_c: &mut lookup is on the stack
[22:03:14] *** Quits: tigrou3tac (fabien@moz-6E2397FF.fbx.proxad.net) (Ping timeout)
[22:03:17] *** Quits: hjr3 (hradtke@moz-39F72B9B.lsanca.fios.verizon.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:03:32] <derek_c> eddyb: lookup is the function given by the user, correct?
[22:03:57] *** Quits: q66 (q66@moz-AE27872E.range109-154.btcentralplus.com) (Ping timeout)
[22:03:58] <derek_c> doesn't the user just need to ensure it outlives the use of busybee_mapper?
[22:04:07] <eddyb> derek_c: that wouldn't be safe
[22:04:20] <eddyb> derek_c: actually, nevermind. I was talking about &mut x
[22:04:32] <eddyb> derek_c: that creates a temporary pointer to x
[22:05:34] *** Joins: q66 (q66@moz-BD8E547E.range86-153.btcentralplus.com)
[22:05:52] <derek_c> so you are saying, "&mut lookup" will be invalid as soon as the stack gets destroyed?
[22:06:12] <eddyb> myeah
[22:06:32] <derek_c> hmm, I thought &mut lookup is just an address
[22:06:40] <derek_c> and as long as the lookup function is still alive
[22:06:43] <derek_c> the address would be valid
[22:06:46] <eddyb> ugh
[22:06:51] <eddyb> derek_c: if lookup is a regular function, you can just transmute it to *c_void and that will just work
[22:07:00] <eddyb> if it's a closure, like I tried to do, it's much more complicated
[22:07:24] <eddyb> derek_c: technically, Rust code not marked as "unsafe" shouldn't be exploitable
[22:07:57] <eddyb> unsafe code shouldn't break invariants, but rather maintain them at all cost
[22:08:41] <derek_c> eddyb: ok I think I see what you are saying. so it's a problem with the closure implementation
[22:09:00] <derek_c> ok syntax question: how do you write type LookupFn as a regular function?
[22:09:05] <derek_c> pub type LookupFn<'a> = 'a fn (u64) -> SocketAddr;
[22:09:06] <derek_c> doesn't work
[22:09:10] <eddyb> without <'a> and 'a
[22:09:20] <eddyb> regular functions don't have environments that have a lifetime :P
[22:09:40] <eddyb> you can still make it work with a closure, but you would have to put it on the heap and keep it within your objects, it's not nice
[22:09:53] <derek_c> eddyb: I see what you mean
[22:09:56] <derek_c> eddyb: thanks!
[22:12:18] *** Quits: derek_c (derek@moz-A43430DA.cit.cornell.edu) (Ping timeout)
[22:12:33] *** Joins: jxv (jxv@moz-D1F0EBC3.socal.res.rr.com)
[22:12:49] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Ping timeout)
[22:12:55] *** Quits: brson (brson@moz-62518563.mtv2.mozilla.com) (Ping timeout)
[22:13:20] *** Joins: jroweboy (jrowe7@moz-18814A6B.provo.static.broadweavenetworks.net)
[22:13:32] *** Joins: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP)
[22:13:35] *** Joins: Leo` (Leo@moz-83832FE2.placeholder.fr)
[22:13:39] *** Quits: mihneadb (mihneadb@moz-6B31F5AA.static.ziggozakelijk.nl) (Quit: Computer gone to sleep - Zzzz...)
[22:13:40] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[22:14:45] *** Quits: q66 (q66@moz-BD8E547E.range86-153.btcentralplus.com) (Ping timeout)
[22:15:46] <jroweboy> when you make a rlib that has dependencies on an external library, is it normal to complain that it can't find the crate for the external libraries when linking to the rlib you made? Say I'm developing and example for lib A which I wrote that depends on lib B. I want to compile lib A statically so that the example code only needs to link to lib A and not need lib B. This is completely possible right?
[22:15:53] *** Quits: erickt (etryzelaar@8C9ECD8F.3A598286.F12515B4.IP) (Ping timeout)
[22:16:23] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Input/output error)
[22:16:25] <jroweboy> For some reason, its saying when I am compiling a program that links to lib A, "can't find crate B"
[22:16:48] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:17:42] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Quit: Leaving.)
[22:17:45] <eddyb> jroweboy: with rlibs? don't think so
[22:18:03] *** Quits: pepper_chico (pepper_chi@EB1D9484.8A9E5939.F546FA5F.IP) (Quit: WeeChat 0.4.1)
[22:18:29] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:19:31] <jroweboy> eddyb: So the example code needs a -L for lib A and lib B then? I figured since rlib was staticlly linked that lib B would be in lib A at compilation, but I'm not well versed in how static and dynamic linking differs, I just have a general idea of what goes on 
[22:20:18] <eddyb> jroweboy: you can't do that
[22:20:38] <eddyb> you need a proper graph of dependencies, not a tree
[22:20:58] <eddyb> jroweboy: imagine what would happen if you'd have one libstd for every library that uses it
[22:21:32] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[22:21:46] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[22:23:20] <det> Did rust always have an expression based syntax? ie match being an expression rather than a statement and requiring explicit return.
[22:23:57] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[22:24:10] <jroweboy> eddyb: So whenever I compile my library, any of the dependencies that my library relies on will also need to be in the library path for any code that wants to use it. I think I understand why now. Say my example code wanted to link to lib B directly, then there would be two copies of lib B in the final binary since one copy is through lib A and another is in the binary
[22:24:35] <eddyb> det: Rust doesn't really have statements
[22:24:46] <det> eddyb, what is return then ?
[22:24:53] <eddyb> return is an expression
[22:25:00] <eddyb> rusti: let x = return break;
[22:25:02] -rusti- pastebinned 8 lines of output: http://ix.io/bqZ
[22:25:14] <eddyb> det: ^^ that parses, it just doesn't typeck
[22:25:22] <frozendevil> in http://www.rustforrubyists.com/book/chapter-11.html why does 'reader' need to be mutable?
[22:26:04] <eddyb> rustilite: fn main(){loop {let _ = return break;}}
[22:26:05] -rustilite- <anon>:1:21: 1:37 error: cannot determine a type for this local variable: unconstrained type
[22:26:05] -rustilite- <anon>:1 fn main(){loop {let _ = return break;}}
[22:26:05] -rustilite-                              ^~~~~~~~~~~~~~~~
[22:26:05] -rustilite- error: aborting due to previous error
[22:26:06] -rustilite- playpen: application terminated with error code 101
[22:26:11] <eddyb> rustilite: fn main(){loop {let _: int = return break;}}
[22:26:18] <eddyb> det: ^^ that worked
[22:26:32] <eddyb> frozendevil: for read_line
[22:26:34] <det> eddyb, it must have different semantics to an expression or it would not type check in many real use scenarios
[22:26:53] <eddyb> det: it's an expression
[22:26:58] <eddyb> det: and it has a type
[22:27:03] <eddyb> ! to be precise
[22:27:07] <det> ahh
[22:27:12] <jroweboy> frozendevil: The read_line() method mutates self http://static.rust-lang.org/doc/master/std/io/struct.BufReader.html#method.read_line
[22:27:39] *** Joins: leowoe (Leo@moz-72D47201.dclient.hispeed.ch)
[22:28:00] *** Quits: ChrisMorgan (chris@moz-6AC741CA.static.tpgi.com.au) (Ping timeout)
[22:28:03] <frozendevil> ah
[22:28:42] *** Quits: leowoe (Leo@moz-72D47201.dclient.hispeed.ch) (Quit: Leaving.)
[22:28:46] *** Quits: eddyb (eddy@717B0165.D51DAF03.FB866788.IP) (Ping timeout)
[22:29:39] *** Joins: wilmoore (wilmoore@moz-4EF3CEBC.hsd1.co.comcast.net)
[22:29:39] *** Joins: rylev (rylev@moz-B759237E.cust.telecolumbus.net)
[22:30:31] *** Joins: eddyb (eddy@717B0165.D51DAF03.FB866788.IP)
[22:30:56] <eddyb> det: !/ty_bot is out bottom type, i.e. "unreachable"
[22:31:05] <eddyb> *our
[22:31:19] *** Quits: rylev (rylev@moz-B759237E.cust.telecolumbus.net) (Ping timeout)
[22:32:41] <eddyb> det: in Rust's AST, statements are only there to hold let declarations (which aren't expressions for a few reasons. but they could be) and items
[22:33:05] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[22:33:42] <eddyb> but everything else is an expression and you can even think of ; as an overloaded postfix operator
[22:34:06] *** Quits: findow (Mibbit@moz-7AD9232F.rev.numericable.fr) (Quit: http://www.mibbit.com ajax IRC Client)
[22:34:52] <eddyb> x;y;;z == {{{x};y};};z
[22:35:23] <eddyb> almost like Haskell's >>
[22:35:33] <eddyb> ; :: T -> ()
[22:36:20] <det> eddyb, thanks
[22:36:54] <eddyb> hehe, if this were Haskell
[22:36:57] <eddyb> ; = drop
[22:37:04] <eddyb> huon: ^^
[22:41:24] *** Quits: Soft (soft@moz-EC8D39F.yok.fi) (Ping timeout)
[22:41:42] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[22:42:58] *** Quits: qwerty_nor (Thunderbir@A5447B90.EDC74FC5.E19950A4.IP) (Ping timeout)
[22:43:36] *** Joins: blank_name (blank_name@69FB4306.94CCB18F.53C6B850.IP)
[22:44:10] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Quit: Jesse)
[22:45:16] *** Joins: Nmorrison72 (Nmorrison7@moz-1E495036.dhcp.nwtn.ct.charter.com)
[22:45:50] <frozendevil> is there a libedit wrapper/equivalent for rust?
[22:46:03] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Client exited)
[22:46:25] *** Quits: Ferreus (ferreus@moz-AFFBCA6A.lsn.wtnet.de) (Quit: WeeChat 0.4.4-dev)
[22:46:33] *** Quits: polyfractal (polyfracta@moz-4C5426D6.hsd1.sc.comcast.net) (Quit: My MacBook has gone to sleep. ZZZzzz…)
[22:47:24] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:49:02] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Connection reset by peer)
[22:49:11] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[22:50:14] *** Joins: mark_edward (quassel@moz-DCB0B750.lightspeed.cicril.sbcglobal.net)
[22:50:42] *** Joins: MattF (Mibbit@moz-BE15A970.ph.ph.cox.net)
[22:50:52] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[22:51:33] *** Quits: io2 (io2@moz-EE406A5.home.otenet.gr) (Quit: ...take irc away, what are you? genius, billionaire, playboy, philanthropist)
[22:53:58] *** Quits: patpat (patpat@moz-21619C28.as13285.net) (Quit: )
[22:53:59] *** Joins: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP)
[22:54:00] *** Quits: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net) (Input/output error)
[22:54:16] *** Quits: mye (mye@moz-77F95923.dip0.t-ipconnect.de) (Quit: sleep message)
[22:56:15] *** Quits: willingc (willingc@58EF4CE2.92EDCBE3.97F07BE5.IP) (Quit: Leaving...)
[22:58:15] <bjz> aatch|mobile: get a chance to review my PR for noise-rs? I might just merge it
[22:59:45] *** Quits: eibwen (kvirc@moz-BD8512E7.dip0.t-ipconnect.de) (Ping timeout)
[23:03:10] *** Quits: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net) (Quit: It's a joke, it's all a joke.)
[23:03:37] *** Joins: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net)
[23:03:54] <Tobba> does clear() alter the capacity?
[23:03:57] <Tobba> or does it leave it as is
[23:04:34] <pnkfelix> Tobba: you mean for Vec ?
[23:04:41] <Tobba> yeah
[23:05:06] *** Joins: SiegeLord (sl@moz-CAF07B4C.hsd1.ma.comcast.net)
[23:05:08] <Tobba> I'm semi-hoping it doesnt because that would identify a way to speed this up
[23:05:18] <Tobba> that it does*
[23:05:29] <pnkfelix> Tobba: I don't think it alreadys the capacity
[23:05:37] <pnkfelix> sed -e s/alreadys/alters/
[23:05:44] *** Quits: pupoque (Adium@297D6F99.EF706C30.C0C64AB3.IP) (Quit: Leaving.)
[23:05:47] *** Quits: andrew-d_w (andrew-d_w@moz-17320F4E.hsd1.ca.comcast.net) (Input/output error)
[23:05:51] *** Quits: MattF (Mibbit@moz-BE15A970.ph.ph.cox.net) (Quit: http://www.mibbit.com ajax IRC Client)
[23:05:52] <Tobba> thats the first time I see that one
[23:05:57] <pnkfelix> Tobba: you need to use `fn shrink_to_fit` for that
[23:06:04] <Tobba> yeah I dont want that behavior
[23:06:10] *** Joins: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net)
[23:06:16] <Tobba> I specificaly keep the vector of renderables around and only clear it at the end of the frame to avoid unnecessary allocs
[23:07:59] *** Joins: awidegreen (awidegreen@moz-9FADBE94.a357.priv.bahnhof.se)
[23:08:06] *** Quits: andrew-d_w (andrew-d_w@moz-9A2674DF.dsl.static.sonic.net) (Input/output error)
[23:10:11] *** Joins: tyoverby (tyoverby@73D4AA0F.5BB0586B.11F8506F.IP)
[23:11:32] *** Quits: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net) (Ping timeout)
[23:14:44] *** Joins: q66 (q66@moz-D016C514.range86-152.btcentralplus.com)
[23:16:39] <santiago> How functional is cargo? Can I use it to grab libs yet? 
[23:17:28] *** Joins: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net)
[23:19:09] *** Quits: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net) (Ping timeout)
[23:19:16] *** Quits: doomlord_ (servitor@moz-56F8DA57.range86-148.btcentralplus.com) (Quit: Leaving)
[23:20:32] *** Quits: ctangent (textual@moz-67DD0115.hsd1.wa.comcast.net) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
[23:20:53] <frozendevil> wasn't it only announced a week ago/
[23:21:03] *** Joins: mib_7665oi (Mibbit@A7DE7E81.2E735A23.DDE5D3F6.IP)
[23:21:07] *** Joins: zmthy (zmthy@moz-6DAA26C.cable.telstraclear.net)
[23:21:21] <santiago> I don't know, the release notes said rust had a new package manager.
[23:23:29] <mib_7665oi> Hey, I'm having some issues creating a static variable. I'm hacking out a kernel for a class and need to implement a current working directory variable
[23:24:54] *** Quits: jadbaires (jadrian@moz-6CEE8AB4.dsl.telepac.pt) (Quit: Konversation terminated!)
[23:25:32] *** Joins: autra (augustin@moz-BE76895F.fbx.proxad.net)
[23:26:10] <tyoverby> \quit
[23:26:16] <mib_7665oi> Pasted some code here with some explanation: http://pastebin.com/Qs2asBRg
[23:26:20] <tyoverby> well that's embarasing 
[23:26:21] *** Quits: tyoverby (tyoverby@73D4AA0F.5BB0586B.11F8506F.IP) (Quit: leaving)
[23:27:34] *** Joins: Soft (soft@moz-EC8D39F.yok.fi)
[23:30:25] *** Joins: rylev (rylev@1705C2A7.FF8E3E18.59369754.IP)
[23:30:43] <o11c> mib_7665oi: "current working directory" should be a member of a process...
[23:31:06] *** Joins: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net)
[23:31:45] <o11c> mib_7665oi: and, in general, you can't have statics dynamically initialized, and you can't safely have them be mutable at all
[23:32:05] *** Quits: rylev (rylev@1705C2A7.FF8E3E18.59369754.IP) (Ping timeout)
[23:33:19] *** Quits: Jesse (jruderman@moz-9754CB0.hsd1.ca.comcast.net) (Ping timeout)
[23:33:25] <pingveno> I'm porting a semi-simple multithreaded C program to Rust just for the practice/lulz. It currently uses fgets in one spot where all threads are accessing the same FILE*. What's the best Rust counterpart? I'd like to avoid context switches if possible.
[23:33:37] <pingveno> It would affect performance in this case.
[23:34:30] *** Quits: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net) (Connection reset by peer)
[23:34:53] *** Joins: TheHydroImpulse (TheHydroIm@moz-A9FB1B83.ed.shawcable.net)
[23:36:15] <o11c> Oo
[23:36:21] <sfackler> pingveno: accessing a FILE* from multiple threads seems like a bad idea
[23:36:36] <o11c> ah, right <stdio.h> has a lock around every operation
[23:36:42] <sfackler> I guess you'd want an Arc<Mutex<FileStream>>
[23:36:45] <o11c> pingveno: what kind of data are you accessing?
[23:36:58] <o11c> from the file stream I mean
[23:37:06] *** Joins: josh (josh@moz-348C4790.hsd1.mn.comcast.net)
[23:37:10] <pingveno> /usr/share/dict/words
[23:37:15] <o11c> it just seems unusual that it doesn't matter how many bytes you read from the file
[23:37:22] <o11c> okay, htat's definitely wrong then ...
[23:37:43] <o11c> if the original C program works at all, it must not be exactly the way you described
[23:37:44] <pingveno> Reading a line is not a bottleneck.
[23:37:57] *** flaper87 is now known as flaper87|afk
[23:38:06] <pingveno> Contention is *very* low. Rather handy
[23:38:17] <o11c> ah wait, fgets is the one that reads a *line*
[23:38:31] <o11c> and /usr/share/dict/words is unlikely to have long lines
[23:38:46] <pingveno> yup
[23:38:58] <o11c> I'm out of practices with plain C
[23:39:35] <o11c> the general approach I'd take would be to do all the reading in one thread, then send the lines through a single-producer-multi-consumer queue to the other threads
[23:39:38] <pingveno> The longest line is something like 40 characters
[23:40:06] <pingveno> Even with the low amount of contention?
[23:41:16] <jroweboy> what would be the type I would use if I wanted to initialize a static mut vector? I have static mut TEST : ?? = [0, ..255]; but I don't know what I should put in the ??
[23:41:34] *** Quits: jxv (jxv@moz-D1F0EBC3.socal.res.rr.com) (Quit: QUIT)
[23:41:37] <o11c> jroweboy: [int, ..255] or something
[23:41:48] <o11c> what kind of integer are you trying to make that 0 be?
[23:43:40] *** Quits: autra (augustin@moz-BE76895F.fbx.proxad.net) (Ping timeout)
[23:43:40] <jroweboy> u8 hmm.. I just thought of a better way to handle this :) Thank goodness, cause making a static mut array is not usually a good idea 
[23:45:03] *** Joins: skade (skade@moz-6444221B.dip0.t-ipconnect.de)
[23:46:13] <mib_7665oi> Alright, I hear what you're saying about mutable statics, but I got this working with a different type of struct just fine. And it's not the issue I'm having with it
[23:46:49] <o11c> mib_7665oi: the dynamic initializer is probably what's killing you
[23:48:00] <mib_7665oi> yep, and I hashed out most of a solution, I'm now stuck with a new issue. Just pasting my current code so I can describe it better
[23:48:25] <mib_7665oi> Alright here it is: http://pastebin.com/C9hPsUbB
[23:48:26] *** Quits: Matthias247 (Miranda@moz-678B5E4A.hsi2.kabel-badenwuerttemberg.de) (Connection reset by peer)
[23:49:30] <mib_7665oi> When I compile, it says there's a mismatch on the vecs: It's disregarding the * ahead of mut and saying it's not a *mut file but just a file
[23:49:53] <mib_7665oi> Which is ironic because I copied that code straight out of my constructor for my Vec
[23:49:58] *** Joins: lucian (lucian@moz-8408FDFA.cable.virginm.net)
[23:51:00] *** Quits: dwrensha (chatzilla@moz-DE44EA45.hsd1.pa.comcast.net) (Quit: ChatZilla 0.9.90.1 [Firefox 28.0/20140314220517])
[23:51:38] *** Quits: lucian (lucian@moz-8408FDFA.cable.virginm.net) (Ping timeout)
[23:53:55] <Eridius> mib_7665oi: btw, gist supports multiple files (with names!) and has syntax colorizing for Rust. I highly recommend it over pastebin
[23:53:55] *** Joins: gavinb (gavinb@moz-9EC182F0.lowrp3.vic.optusnet.com.au)
[23:54:45] <Eridius> mib_7665oi: also, ptr::mut_null() is a cleaner way of saying `0 as *mut foo`
[23:55:16] <Eridius> mib_7665oi: also, your vecs are declared in the directory struct as Vec<*file> (and Vec<*directory>).
[23:55:18] *** Joins: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net)
[23:55:26] <Eridius> but you're trying to create them as *mut file and *mut directory
[23:55:47] <Eridius> haha '\0' as *foo, first time I've seen it done that way
[23:56:18] *** Joins: celm (celm@moz-1CF4AE70.hsd1.ca.comcast.net)
[23:56:19] *** Joins: enix (enix@moz-A50569DD.c3-0.slvr-ubr1.lnh-slvr.md.cable.rcn.com)
[23:56:35] <pingveno> jroweboy: For future reference: static mut TEST: &'static [int, ..255] = &[0, ..255];
[23:57:05] *** Quits: alan_andrade (alan_andra@moz-B2C44770.car1.sanfrancisco1.level3.net) (Ping timeout)
[23:57:10] <pingveno> I *think* that's the correct lifetime
[23:57:55] *** Joins: jensnockert (jensnocker@moz-33279404.customers.ownit.se)
[23:59:14] <mib_7665oi> So I can't use ptr::mut_null() owing to the fact that we're required to use an older version of rust core for this assignment that does not include that
[23:59:36] <eddyb> *sigh*
[23:59:39] <Eridius> how old? Even rust 0.9 had it
[23:59:44] <eddyb> Eridius: rust-core
[23:59:45] *** Quits: jensnockert (jensnocker@moz-33279404.customers.ownit.se) (Ping timeout)
[23:59:56] <Eridius> oh
[23:59:56] *** Quits: skade (skade@moz-6444221B.dip0.t-ipconnect.de) (Quit: My MacBook Pro has gone to sleep. ZZZzzz…)
